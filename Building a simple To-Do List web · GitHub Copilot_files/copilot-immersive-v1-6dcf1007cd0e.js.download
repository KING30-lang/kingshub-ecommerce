"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa"],{66661:(e,t,n)=>{function r(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let r=t.children;for(let t=0;t<r.length;++t)if(r[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let a=0;function i(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let s={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p");return t.textContent=(e.textContent||"").replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let r=e.hasAttribute("width")?` width="${i(e.getAttribute("width")||"")}"`:"",a=e.hasAttribute("height")?` height="${i(e.getAttribute("height")||"")}"`:"";return r||a?`<img alt="${i(t)}"${r}${a} src="${i(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e))if("OL"===t.nodeName)if(a>0&&!t.previousSibling){let t=r(e)+a+1;n=`${t}\\. `}else n=`${r(e)+1}. `;else n="* ";let i=n.replace(/\S/g," "),s=(e.textContent||"").trim().replace(/^/gm,i),o=document.createElement("pre");return o.textContent=s.replace(i,n),o},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};s.UL=s.OL;for(let e=2;e<=6;++e)s[`H${e}`]=s.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null==(e=this.selection)?void 0:e.rangeCount)||0)>0}get range(){var e;return(null==(e=this.selection)?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null==(t=this.selection)||t.removeAllRanges(),null==(n=this.selection)||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null==(e=this.selection)?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,`
> `)}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let i=n.parentNode,s=e.cloneContents();if(t){let e=s.querySelector(t);e&&(s=document.createDocumentFragment()).appendChild(e)}a=0;let o=i.closest("li");if(i.closest("pre")){let e=document.createElement("pre");e.appendChild(s),(s=document.createDocumentFragment()).appendChild(e)}else if(o&&o.parentNode&&("OL"===o.parentNode.nodeName&&(a=r(o)),!s.querySelector("li"))){let e=document.createElement("li");if(!o.parentNode)throw Error();let t=document.createElement(o.parentNode.nodeName);e.appendChild(s),t.appendChild(e),(s=document.createDocumentFragment()).appendChild(t)}return s}(this.range,null!=(e=this.scopeSelector)?e:"");null==(t=this.callback)||t.call(this,n);let i=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in s&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),o=[],l=i.nextNode();for(;l;)l instanceof HTMLElement&&o.push(l),l=i.nextNode();for(let e of(o.reverse(),o))e.replaceWith(s[e.nodeName](e));let c=document.body;if(!c)return"";let d=document.createElement("div");d.appendChild(n),d.style.cssText="position:absolute;left:-9999px;",c.appendChild(d);let u="";try{let e=document.createRange();e.selectNodeContents(d),this.selection.removeAllRanges(),this.selection.addRange(e),u=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{c.removeChild(d)}return this.processSelectionText(u.trim())}}},79929:(e,t,n)=>{n.d(t,{A:()=>r});let r={messageContainer:"ChatMessage-module__messageContainer--A1rW_","message-action":"ChatMessage-module__message-action--gd8kA",user:"ChatMessage-module__user--x7t7S",ai:"ChatMessage-module__ai--NWwZ0",contentContainer:"ChatMessage-module__contentContainer--s3iSV",message:"ChatMessage-module__message--_amJV",messageContent:"ChatMessage-module__messageContent--cNCus",hasClientConfirmations:"ChatMessage-module__hasClientConfirmations--nYPDm",agentUnauthorizedAvatar:"ChatMessage-module__agentUnauthorizedAvatar--q02uE",skillExecutionText:"ChatMessage-module__skillExecutionText--Fl5HE",fileListItem:"ChatMessage-module__fileListItem--jEMb9",avatar:"ChatMessage-module__avatar--rn6Gb"}},10370:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--cAvvK",mention:"UserMessage-module__mention--JZHRf"}},35984:(e,t,n)=>{n.d(t,{E:()=>r});let r=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},44246:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(24774);function a(e=null,t="bottom"){return[r.S7.of(()=>({dom:e,top:"top"===t}))]}},13281:(e,t,n)=>{n.d(t,{BE:()=>o,Cw:()=>j,I6:()=>b,Lo:()=>d,Md:()=>f,TB:()=>S,TC:()=>_,TU:()=>m,YH:()=>g,Z3:()=>h,eO:()=>x,e_:()=>v,f9:()=>l,fV:()=>p,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>C});var r=n(15874),a=n(54528),i=n(6585),s=n(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function h(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let p=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let r=p(e,t);v(e,r.from,r.from,n)},g=(e,t,n)=>{let r=p(e,t);v(e,r.from,r.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,n)=>e.sliceDoc(t,n),v=(e,t,n,r)=>{e.dispatch({changes:{from:t,to:n,insert:r}})},_=(e,t)=>{let n=o(e);v(e,n.from,n.to,t)},b=(e,t)=>new a.ZX(e.state.doc,t).next(),S=(e,t,n)=>{let r=new a.ZX(e.state.doc,t).next();e.dispatch({changes:{from:r.value.from,to:r.value.to,insert:n}})},C=(e,t,n,r,a)=>{if(void 0!==n)try{let o=p(e,t),l=p(e,n);if(o&&l){e.focus();let t=a?l.from+a:l.to;u(e,o.from+(r??0),t),e.dispatch({effects:[s.Lz.scrollIntoView(i.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let n=p(e,t);n&&(e.focus(),l(e,n.from+(r??0)),e.dispatch({effects:[s.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function j(e){return e.state.facet(r.Xt)}},62834:(e,t,n)=>{n.d(t,{o:()=>u});var r=n(5225),a=n(88795),i=n(96235),s=n(60039),o=n(96540);async function l(e){let t=await (0,s.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,r.A)(l,{cache:c});function u(e,t,n){let r=(0,a.t)(),[s,l]=(0,o.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:r,commitOid:e,includeDirectories:!n});return(0,o.useEffect)(()=>{let e=!1,n=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],r=t?.directories||[];l({list:n.concat(r).sort(),directories:r,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),s}},89276:(e,t,n)=>{function r(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t){var n=r(e,t,"get");return n.get?n.get.call(e):n.value}function i(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function s(e,t,n){var a=r(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){o(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var l=new WeakMap,c=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(a(this,l))return;let t={data:a(this,c).call(this,{data:e})};this.onmessage?.(t)}terminate(){s(this,l,!0)}constructor(e){i(this,l,{writable:!0,value:!1}),o(this,"onmessage",void 0),i(this,c,{writable:!0,value:void 0}),s(this,c,e)}}},27406:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(5225),a=n(91385);let i=(0,r.A)(a.fN);function s({data:e}){let{query:t,baseList:n,startTime:r}=e,s=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=s)||(0,a.qA)(n,t)&&i(n,t)>0}).sort((e,t)=>i(s,t)-i(s,e)),baseCount:n.length,startTime:r}}},39376:(e,t,n)=>{n.d(t,{p:()=>p});var r=n(52811),a=n(38007),i=n(96540),s=n(83880),o=n(53207),l=n(22069),c=n(34901),d=n(47397),u=n(44435),m=n(88011),h=n(66889);function p({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:p,removeOutdatedContentPreviewItems:f}){let{message:g}=(0,s.V)(),y=(0,c.bP)("activePlugin","currentUserLogin","mode"),x=(0,m.tD)(),v=(0,d.b)(),_=(0,o.nu)(y.activePlugin),b=(0,l.Th)(g,y.currentUserLogin),S="Copilot"===b.name,C="user"===b.type,j=S||(0,l.yh)(b),w=S&&!!g.agentErrors?.length,N=!w&&!!S&&!!g.error&&g.error.isError,I=S&&!e&&(!n||!p)&&!N,E=(0,i.useRef)(null),R=g.interrupted,T=g.clientConfirmations&&g.clientConfirmations.length>0,k=N&&g.error?.retryable,[A,D]=(0,i.useState)([]),[P,L]=(0,i.useState)(void 0),M=(k||R)&&n,O=(0,i.useMemo)(()=>({openLinksInCurrentTab:"assistive"===y.mode,isStreaming:n&&p,extensions:_?.markdownExtensions?_.markdownExtensions.map(e=>e()):[]}),[y.mode,n,p,_?.markdownExtensions]),F=!N&&(I||j&&!!g.content&&!p)&&(!C||!g.confirmations)||C&&!n||N&&n,B=(0,i.useRef)(0);(0,i.useEffect)(()=>{let e=(g.skillExecutions??[]).find(e=>!A.some(t=>t.slug===e.slug&&t.statusMessage===e.statusMessage));if(e){let t=setTimeout(()=>{B.current=Date.now(),D([...A,e]),L(e)},Math.max(0,2e3-(Date.now()-B.current)));return()=>clearTimeout(t)}},[g.skillExecutions,A]),(0,i.useEffect)(()=>{n&&p&&(0,r.i)("Copilot is responding")},[n,p]),(0,i.useEffect)(()=>{n&&!p&&E.current&&(0,r.C)(E.current)},[n,p]);let U=(0,i.useCallback)(async(e,t,n)=>{if(n)n("accepted"===e.state);else{let n=x();await v.sendChatMessage({thread:(0,u.W)(n),content:`@${b.name} ${(0,h.Z)(e.state)} Confirmation: ${t}`,references:g.references??[],topic:n.currentTopic,context:n.context,confirmations:e,customInstructions:n.customInstructions,model:n.model})}},[x,v,b.name,g.references]),$=(0,i.useCallback)(()=>{window.setTimeout(()=>t?.current?.focus(),1)},[t]),V=(0,i.useCallback)(async()=>{let e=x(),t=(0,u.W)(e);t&&(f?.(),$(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY",mode:e.mode}),await v.retryLastUnsuccessfulChatMessage(t))},[x,f,$,v]),q=(0,i.useCallback)(async e=>{let t=x(),n=(0,u.W)(t);n&&(f?.(),$(),(0,a.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY_FOR_NEW_SUBTHREAD",mode:t.mode}),await v.retryUserChatMessage(n,g,e))},[x,v,g,f,$]),W=(0,i.useCallback)(async e=>{let t=x(),n=(0,u.W)(t);n&&(f?.(),await v.editUserChatMessage(n,g,e))},[x,v,g,f]);return{author:b,removeOutdatedContentPreviewItems:f,handleConfirmationAction:U,handleRetryErrorMessage:V,handleRetryCopilotResponse:q,handleEditUserMessage:W,hasClientConfirmations:T,isCopilot:S,isUser:C,isAI:j,isAgentError:w,isError:N,isInterrupted:R,myRef:E,rendererConfig:O,renderFeedback:I,shouldShowMessageActions:F,skillExecutionToUseForRespondingText:P,showRetryButton:M}}},84863:(e,t,n)=>{n.d(t,{Y:()=>d});var r=n(21728),a=n(96540),i=n(22069),s=n(74244),o=n(34901),l=n(47397),c=n(44435);function d(e){let t,n,d,u,m,h,p,f,g,y,x=(0,r.c)(26),v=(0,o.Pk)(),_=(0,l.b)(),{currentTopic:b,messages:S,selectedThreadID:C}=v;x[0]!==v?(t=(0,c.W)(v),x[0]=v,x[1]=t):t=x[1];let j=t,w=(0,a.useRef)(null),N=e||w;return x[2]!==_||x[3]!==S.length||x[4]!==j?(n=()=>{j&&S.length>0&&_.showTopicPicker(!1)},d=[j,S.length,_],x[2]=_,x[3]=S.length,x[4]=j,x[5]=n,x[6]=d):(n=x[5],d=x[6]),(0,a.useEffect)(n,d),x[7]!==b||x[8]!==C?(u=()=>{let e=b?(0,i.P)(b)?b.name:String(b.id):null;C&&e&&s.J.setSelectedTopic(C,e)},m=[C,b],x[7]=b,x[8]=C,x[9]=u,x[10]=m):(u=x[9],m=x[10]),(0,a.useEffect)(u,m),x[11]!==N?(h=()=>{let e=window.setTimeout(()=>{N.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[N],x[11]=N,x[12]=h,x[13]=p):(h=x[12],p=x[13]),(0,a.useEffect)(h,p),x[14]!==_||x[15]!==v.context?.[0]||x[16]!==v.currentRepository?(f=()=>{let e=v.context?.[0]??v.currentRepository;return e&&_.generateSuggestions(e),()=>{_.clearSuggestions()}},x[14]=_,x[15]=v.context?.[0],x[16]=v.currentRepository,x[17]=f):f=x[17],x[18]!==_||x[19]!==v.context||x[20]!==v.currentRepository||x[21]!==v.currentTopic||x[22]!==v.selectedThreadID?(g=[_,v.context,v.currentTopic,v.currentRepository,v.selectedThreadID],x[18]=_,x[19]=v.context,x[20]=v.currentRepository,x[21]=v.currentTopic,x[22]=v.selectedThreadID,x[23]=g):g=x[23],(0,a.useEffect)(f,g),x[24]!==N?(y={textAreaRef:N},x[24]=N,x[25]=y):y=x[25],y}},59220:(e,t,n)=>{n.d(t,{a:()=>o});var r=n(96540),a=n(44669),i=n(13468),s=n(99377);function o(e){let{streamingMessage:t,isWaitingOnCopilot:n,messages:o,selectedThreadID:l,pendingFirstMessage:c}=e,d=(0,r.useMemo)(()=>{let e={id:s.Wp,role:"assistant",content:"",createdAt:"",threadID:l||"",references:[],clientSide:!0,messageIndex:-1},r=(0,i.B)(o,c);return n?[...r,t??e]:r},[l,o,c,n,t]);return{messages:d,groupedMessages:(0,a.A)(d)}}},5878:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,s]=(0,a.useState)(!1);return n[0]!==e.current?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e.current,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},6612:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(60439),a=n(6110),i=n(96540),s=n(18312),o=n(34901),l=n(47397),c=n(6901);function d(e,t,n,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,o.Pk)(),v=(0,l.b)(),[_,b]=(0,i.useState)([]),[S,C]=(0,i.useState)(!y&&"initial"),j=(0,i.useRef)(void 0),w=(0,s.useRelayEnvironment)(),N=m&&""!==m.trim();if(p&&!y&&!e&&!N){let e=u(p||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),C(!1),f(void 0)}let I=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(w,{first:n,owner:N?m:void 0});f(e)}catch{}finally{C(!1)}},[N,m,w,f,n]);return((0,i.useEffect)(()=>{t&&!N&&I()},[I,N,t,m]),(0,i.useEffect)(()=>{let t=async e=>{C(!0);let t=((await new Promise((t,n)=>{(0,s.fetchQuery)(w,r.XD,{searchQuery:N?(0,c.rl)(m,e,h):(0,a.J4)(e,{includeForks:h})}).subscribe({start:e=>{j.current?.unsubscribe(),j.current=e},next:e=>{t(e)},error:e=>{n(e)}})})).search.nodes||[]).flatMap(e=>e?[(0,r.Jo)(e)]:[]);b(t.length?u(t):[]),C(!1)};e||N?t(e):y&&b(y)},[e,N,m,w,y,h]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||N)?{repositories:_,loading:S,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},80597:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(55206),i=n(96540),s=n(34901),o=n(6901),l=n(44435);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),r=(0,a.O)(t);return(0,o.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,o.iI)()||c}},39818:(e,t,n)=>{n.d(t,{JE:()=>f,Z3:()=>h,bn:()=>m,kw:()=>g,qj:()=>p});var r=n(21728),a=n(97286),i=n(99837),s=n(96540),o=n(80597),l=n(22069),c=n(34901),d=n(47397),u=n(88011);let m="https://github.com/marketplace?type=apps&copilot_app=true",h="@",p=/^@(?<slug>\S+)$/;function f(e){let t,n,i,s,m,h,p=(0,r.c)(25),{agentsPath:f,model:g}=(0,c.bP)("agentsPath","model"),y=(0,u.tD)(),x=(0,d.b)(),v=!!(0,o.G)(),_=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==v||p[2]!==_?(t=e=>{let{messages:t}=y();if(_||v)return{agents:[],showLimit:!1};let n=(0,l.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=v,p[2]=_,p[3]=t):t=p[3];let b=t;p[4]!==f?(n=["copilot-chat","agents",f],p[4]=f,p[5]=n):n=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let S=(void 0===e||e)&&!_&&!v;p[9]!==b||p[10]!==n||p[11]!==i||p[12]!==S?(s={queryKey:n,queryFn:i,select:b,enabled:S},p[9]=b,p[10]=n,p[11]=i,p[12]=S,p[13]=s):s=p[13];let{isLoading:C,data:j,refetch:w,isStale:N,isFetched:I}=(0,a.I)(s);p[14]!==j||p[15]!==I||p[16]!==N||p[17]!==w?(m=async()=>!I||N?(await w()).data:j,p[14]=j,p[15]=I,p[16]=N,p[17]=w,p[18]=m):m=p[18];let E=m,R=j?.agents,T=j?.showLimit??!1;return p[19]!==E||p[20]!==C||p[21]!==R||p[22]!==T||p[23]!==_?(h={loading:C,disabled:_,availableAgents:R,showLimit:T,imperativelyFetch:E},p[19]=E,p[20]=C,p[21]=R,p[22]=T,p[23]=_,p[24]=h):h=p[24],h}function g({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,s.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${h}${e}`;n(r,[0,0],r.length)},[n,t])}},51295:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},29943:(e,t,n)=>{function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>o,fD:()=>l,qR:()=>a});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),r(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),r(this,"reference",void 0),r(this,"openPanel",void 0),r(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),r(this,"context",void 0),this.context=e}};function a(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function o(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function l(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},33900:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>S,W5:()=>m,cx:()=>f,r_:()=>b,vn:()=>_,xG:()=>h});var r=n(21728),a=n(26559),i=n(97665),s=n(40458),o=n(94747),l=n(97286),c=n(60039),d=n(96540),u=n(74244);n(34901),n(47397);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},h={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},p=[h.NotFound,h.Unauthorized,h.ServiceUnavailable,h.QuotaExhausted,h.Forbidden,h.RequestFailed],f=256,g=400;function y(e){var t,n;let a,l,c,d,u,f,g,y,_,b,S=(0,r.c)(22),C=(0,i.jE)();S[0]!==C||S[1]!==e?(a=()=>Promise.all(e.map(e=>C.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),S[0]=C,S[1]=e,S[2]=a):a=S[2];let w=a;S[3]!==e?(l=e.map(v),S[3]=e,S[4]=l):l=S[4],S[5]!==l?(c={queries:l},S[5]=l,S[6]=c):c=S[6];let E=(0,s.E)(c);S[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],S[7]=d):d=S[7],S[8]!==e?(u=()=>j(e),S[8]=e,S[9]=u):u=S[9],S[10]!==w||S[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:w},S[10]=w,S[11]=u,S[12]=f):f=S[12];let{mutate:R}=(0,o.n)(f);S[13]!==E?(g={requestStatus:0===(n=(t=E.map(x)).map(e=>e.requestStatus)).length?h.Unknown:n.some(e=>p.includes(e))?h.IndexingError:n.every(e=>e===h.CanIndex)?h.CanIndex:(n.every(e=>e===h.Unknown),h.Unknown),code:N(t.map(e=>e.code)),docs:N(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},S[13]=E,S[14]=g):g=S[14];let T=g,k=T.code===m.Indexing&&T.requestStatus!==h.IndexingError;return S[15]!==w?(y=()=>void w(),S[15]=w,S[16]=y):y=S[16],I(y,1e4*!!k),S[17]!==R?(_=()=>R(),S[17]=R,S[18]=_):_=S[18],S[19]!==T||S[20]!==_?(b=[T,_],S[19]=T,S[20]=_,S[21]=b):b=S[21],b}function x(e){return e.data}function v(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>C(e),placeholderData:{requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function _(e){let t,n,a,s,c,d,u,p,f,g,y,x=(0,r.c)(23),v=(0,i.jE)();x[0]!==v||x[1]!==e?(t=()=>Promise.resolve(v.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=v,x[1]=e,x[2]=t):t=x[2];let _=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],a=()=>C(e),x[3]=e,x[4]=n,x[5]=a):(n=x[4],a=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(s={requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=s):s=x[6],x[7]!==n||x[8]!==a?(c={queryKey:n,queryFn:a,placeholderData:s,staleTime:1/0},x[7]=n,x[8]=a,x[9]=c):c=x[9];let b=(0,l.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>j([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==_||x[14]!==u?(p={mutationKey:d,mutationFn:u,onSuccess:_},x[13]=_,x[14]=u,x[15]=p):p=x[15];let{mutate:S}=(0,o.n)(p),w=b.data,N=w.code===m.Indexing&&w.requestStatus!==h.IndexingError;return x[16]!==_?(f=()=>void _(),x[16]=_,x[17]=f):f=x[17],I(f,1e4*!!N),x[18]!==S?(g=()=>S(),x[18]=S,x[19]=g):g=x[19],x[20]!==w||x[21]!==g?(y=[w,g],x[20]=w,x[21]=g,x[22]=y):y=x[22],y}function b(e){let t,n=(0,r.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let a=(0,l.I)(t);return!a.isError&&!!a.data?.canChat}function S(){let e=u.J.getPanelHeight(),t=u.J.getPanelWidth(),n=(0,d.useRef)(null),r=(0,d.useRef)(e),a=(0,d.useRef)(e),i=(0,d.useRef)(null),s=(0,d.useRef)(t),o=(0,d.useRef)(t),[l,c]=(0,d.useState)(e),[m,h]=(0,d.useState)(t),p=(0,d.useRef)(0);(0,d.useEffect)(()=>{p.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-p.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*p.current),v=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(r.current+t);c(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(s.current+t);h(n),o.current=n}},[]),_=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),null!==n.current&&(u.J.setPanelHeight(a.current),n.current=null),null!==i.current&&(u.J.setPanelWidth(o.current),i.current=null)},[v]),b=(0,d.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=l),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_))},[l,m,v,_]),S=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);h(t),u.J.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);h(t),u.J.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:b,onResizerKeyDown:S}}async function C(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:h.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function j(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function w(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function N(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function I(e,t){let n,a,i,s,o=(0,r.c)(6),l=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return o[0]!==e?(n=()=>{c.current=e},a=[e],o[0]=e,o[1]=n,o[2]=a):(n=o[1],a=o[2]),(0,d.useEffect)(n,a),o[3]!==t?(i=()=>{if(t>0)return l.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(l.current)},s=[t],o[3]=t,o[4]=i,o[5]=s):(i=o[4],s=o[5]),(0,d.useEffect)(i,s),l}},22469:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(38007),a=n(22069),i=n(31971),s=n(53850),o=n(7324);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return i.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return i.W.dotcomChatFileUpload?3932160:512e3}static makeImageReference(e,t){let n,r=crypto.randomUUID();return i.W.dotcomChatFileUpload&&(n=new o.N(r,e,t)),n||(n=new o.J(r,e)),{id:r,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,o=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=i.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&i.W.dotcomChatFileUpload&&!u)try{c=(l=await this.manager.createThread(n,o)).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=i.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,s.d)("file_limit_reached"),[]}let p=i.W.dotcomChatFileUpload,f=`Only images below ${p?"3.75MB":"500KB"} are supported${p?"":" during this preview period"}`,g=[],y=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,s.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError(f),(0,s.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,s.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,a.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===y.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),y.push({file:n,placeholder:r,reference:e})}return await Promise.all(y.map(async({file:e,placeholder:n,reference:a})=>{try{l&&await a.attachment.prefetch(),this.manager.setImageAttachmentUploaded(a.id,a.attachment),this.manager.replaceReference(n,a),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),g.push(a)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,s.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,s.d)(r.name,{message:r.message}),"FileSizeError"===r.name)this.manager.addAmbientError(f);else if("GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),o&&n&&l&&this.manager.setPendingThreadId(l.id,n),g}constructor(e,t){l(this,"state",void 0),l(this,"manager",void 0),this.state=e,this.manager=t}}},86571:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>o});var r=n(38007),a=n(22069),i=n(65011);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(i.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:(t<32||t>126)&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let i=await e.text();if(!CopilotTextAttacher.isPlainText(i))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(i,n),this.manager.addReference(r,"text-attacher");else{let n=(0,a.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",a=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=a.ok?l.exec(a.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===o?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){s(this,"manager",void 0),s(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};s(CopilotTextAttacher,"fileExtensionsCache",void 0)},26268:(e,t,n)=>{n.d(t,{Q:()=>s});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...s]=t.pathname.split("/"),o=s.join("/"),l=i.fromUrlType(a);if(n&&r&&l)return{repo:`${n}/${r}`,type:o?l:"repository",id:o}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let n=s.for(t);return null!==n&&s.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},66889:(e,t,n)=>{n.d(t,{Z:()=>r});function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}},36721:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(39818),a=n(22069),i=n(26268);let s=function({references:e,agents:t}){this.parser=function(n){let s=n.split(/(\s+)/),o=[];for(let[n,l]of s.entries()){let s=0===n&&r.qj.exec(l)?.groups?.slug,c=s&&t.find(e=>e.slug===s);if(c){o.push({type:"agent-mention",value:l,data:{mentionedAgent:c}});continue}let d=i.Q.parse(l),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){o.push({type:"reference-mention",value:l,data:{mentionedReferenceId:u&&(0,a.Vb)(u),referenceMention:d}});continue}let m=o.at(-1);m?.type==="text"?m.value+=l:o.push({type:"text",value:l})}return{type:"root",children:o}}}},13897:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>s});var r=n(47970),a=n(39818);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return a.qj.test(e.split(/\s/)[0]??"")}},8032:(e,t,n)=>{var r,a,i,s,o,l,c=n(32420),d=n(16058),u=n(48551),m=n(74848),h=n(21728);function p(e){let t,n=(0,h.c)(2);return n[0]!==e.children?(t=(0,m.jsx)(m.Fragment,{children:e.children}),n[0]=e.children,n[1]=t):t=n[1],t}try{p.displayName||(p.displayName="App")}catch{}var f=n(8643),g=n(47397),y=n(39627),x=n(52450),v=n(34164),_=n(96540);let b={scrollContainer:"ContentView-module__scrollContainer--wpj1Y",contentContainer:"ContentView-module__contentContainer--bYW7x",content:"ContentView-module__content--gJIEz",medium:"ContentView-module__medium--S91Um",small:"ContentView-module__small--MfxBK",banner:"ContentView-module__banner--Fz5_d",serviceHeader:"ContentView-module__serviceHeader--KN8ix",serviceTitle:"ContentView-module__serviceTitle--hjweZ",serviceDescription:"ContentView-module__serviceDescription--__XLT",serviceActions:"ContentView-module__serviceActions--q6aEC",section:"ContentView-module__section--Fa2ri",sectionTitle:"ContentView-module__sectionTitle--KVZXe",sectionGrid:"ContentView-module__sectionGrid--cOEZL",sectionGridEmpty:"ContentView-module__sectionGridEmpty--wCrfV",skeletonCard:"ContentView-module__skeletonCard--edod5"};function S(e){let t,n,r,a,i=(0,h.c)(10),{children:s,width:o}=e;if(i[0]!==s){for(let e of(t=[],n=[],_.Children.toArray(s)))_.isValidElement(e)&&e.type===C?t.push(e):n.push(e);i[0]=s,i[1]=t,i[2]=n}else t=i[1],n=i[2];let l="small"===o,c="medium"===o;return i[3]!==l||i[4]!==c?(r=(0,v.$)(b.content,{[b.small]:l,[b.medium]:c}),i[3]=l,i[4]=c,i[5]=r):r=i[5],i[6]!==t||i[7]!==n||i[8]!==r?(a=(0,m.jsx)("div",{className:b.scrollContainer,children:(0,m.jsx)("div",{className:b.contentContainer,children:(0,m.jsxs)("div",{className:r,children:[t,n]})})}),i[6]=t,i[7]=n,i[8]=r,i[9]=a):a=i[9],a}function C(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:b.banner,children:r}),n[0]=r,n[1]=t):t=n[1],t}function j(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:b.serviceHeader,children:r}),n[0]=r,n[1]=t):t=n[1],t}function w(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("section",{className:b.section,children:r}),n[0]=r,n[1]=t):t=n[1],t}function N(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("h2",{className:b.serviceTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t}function I(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("p",{className:b.serviceDescription,children:r}),n[0]=r,n[1]=t):t=n[1],t}function E(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:b.serviceActions,children:r}),n[0]=r,n[1]=t):t=n[1],t}function R(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("h3",{className:b.sectionTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t}function T(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:b.sectionGridEmpty,children:r}),n[0]=r,n[1]=t):t=n[1],t}function k(e){let t,n,r,a=(0,h.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:b.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(P)}),a[0]=e):e=a[0],e}if(a[1]!==i){let e=_.Children.toArray(i);t=e.find(D),n=e.filter(A),a[1]=i,a[2]=t,a[3]=n}else t=a[2],n=a[3];let o=n;if(0===o.length&&t){let e;return a[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),a[4]=t,a[5]=e):e=a[5],e}return a[6]!==o?(r=(0,m.jsx)("div",{className:b.sectionGrid,children:o}),a[6]=o,a[7]=r):r=a[7],r}function A(e){return!(_.isValidElement(e)&&e.type===T)}function D(e){return _.isValidElement(e)&&e.type===T}function P(e,t){return(0,m.jsx)(x.f,{className:b.skeletonCard},t)}k.Empty=T,w.Title=R,w.Grid=k;let L={Title:N,Description:I,Actions:E,Container:S,Banner:C,Header:j,Section:w};L.displayName="ContentView",S.displayName="ContentView.Container",C.displayName="ContentView.Banner",j.displayName="ContentView.Header",w.displayName="ContentView.Section",N.displayName="ContentView.Title",I.displayName="ContentView.Description",E.displayName="ContentView.Actions",R.displayName="ContentView.Section.Title",k.displayName="ContentView.Section.Grid",T.displayName="ContentView.Section.Grid.Empty";var M=n(82164),O=n(38621),F=n(60039),B=n(52311);let U={button:"AgentsView-module__button--d749M",counter:"AgentsView-module__counter--D8Z1d",filterButtons:"AgentsView-module__filterButtons--sCvuN"};var $=n(58207),V=n(90514),q=n(74433),W=n(64262),G=n(1948),z=n(34901),H=n(19139);async function Q(e=""){let t=await (0,F.lS)(`/_filter/repositories?q=${encodeURIComponent(e)}`);return t.ok?(await t.json()).repositories.map(e=>({name:e.nameWithOwner,enabled:!0,id:e.id})):[]}function K(e){let t,n,r=(0,h.c)(7),{pendingTasks:a,tasks:i,isLoading:s,isError:o}=e;return r[0]!==o||r[1]!==a||r[2]!==i?(t=o?(0,m.jsxs)(M.qJ.EmptyState,{children:[(0,m.jsx)(O.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length&&0===i.length?(0,m.jsx)(M.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,m.jsxs)(m.Fragment,{children:[[...a].reverse().map(X),i.map(J)]}),r[0]=o,r[1]=a,r[2]=i,r[3]=t):t=r[3],r[4]!==s||r[5]!==t?(n=(0,m.jsx)(M.qJ.List,{loading:s,id:"tasks-list","aria-labelledby":"open-tab",children:t}),r[4]=s,r[5]=t,r[6]=n):n=r[6],n}function J(e){return(0,m.jsx)(V.ZL,{state:e.latest_session_state,merged:null!==e.pull.merged_at,lastSessionStartDate:e.latest_session_updated_at,pullRequest:e.pull,revisionCount:e.session_count-1},e.pull.id)}function X(e){return(0,m.jsx)(V.Eo,{title:`Creating: ${e.problemStatement}`,repositoryNwo:e.nwo},e.submittedAt)}function Y(e){let t,n,r=(0,h.c)(6),{tasks:a,isLoading:i,isError:s}=e;return r[0]!==s||r[1]!==a?(t=s?(0,m.jsxs)(M.qJ.EmptyState,{children:[(0,m.jsx)(O.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,m.jsx)(M.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No closed tasks yet."})}):a.map(Z),r[0]=s,r[1]=a,r[2]=t):t=r[2],r[3]!==i||r[4]!==t?(n=(0,m.jsx)(M.qJ.List,{loading:i,id:"tasks-list","aria-labelledby":"closed-tab",children:t}),r[3]=i,r[4]=t,r[5]=n):n=r[5],n}function Z(e){return(0,m.jsx)(V.ZL,{state:e.latest_session_state,merged:null!==e.pull.merged_at,lastSessionStartDate:e.latest_session_updated_at,pullRequest:e.pull,revisionCount:e.session_count-1},e.pull.id)}function ee(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(35),{tasks:g,pendingTasks:y,isLoading:x,isError:v,activeTab:_,setActiveTab:b}=e,S=g.filter(ea).length+y.length;f[0]!==g?(t=g.filter(er),f[0]=g,f[1]=t):t=f[1];let C=t.length;f[2]!==g?(n=g.filter(en),f[2]=g,f[3]=n):n=f[3];let j=n;f[4]!==g?(r=g.filter(et),f[4]=g,f[5]=r):r=f[5];let w=r;f[6]!==b?(a=()=>b("open"),f[6]=b,f[7]=a):a=f[7];let N="open"===_;f[8]!==S?(i=(0,m.jsx)("span",{className:U.counter,children:S}),f[8]=S,f[9]=i):i=f[9],f[10]!==a||f[11]!==N||f[12]!==i?(s=(0,m.jsxs)("button",{onClick:a,role:"tab","aria-selected":N,"aria-controls":"tasks-list",id:"open-tab",className:U.button,children:["Open ",i]}),f[10]=a,f[11]=N,f[12]=i,f[13]=s):s=f[13],f[14]!==b?(o=()=>b("closed"),f[14]=b,f[15]=o):o=f[15];let I="closed"===_;return f[16]!==C?(l=(0,m.jsx)("span",{className:U.counter,children:C}),f[16]=C,f[17]=l):l=f[17],f[18]!==l||f[19]!==o||f[20]!==I?(c=(0,m.jsxs)("button",{onClick:o,role:"tab","aria-selected":I,"aria-controls":"tasks-list",id:"closed-tab",className:U.button,children:["Closed ",l]}),f[18]=l,f[19]=o,f[20]=I,f[21]=c):c=f[21],f[22]!==c||f[23]!==s?(d=(0,m.jsx)(M.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:U.filterButtons,children:[s,c]})}),f[22]=c,f[23]=s,f[24]=d):d=f[24],f[25]!==_||f[26]!==w||f[27]!==v||f[28]!==x||f[29]!==j||f[30]!==y?(u="open"===_?(0,m.jsx)(K,{tasks:j,pendingTasks:y,isLoading:x,isError:v}):(0,m.jsx)(Y,{tasks:w,isLoading:x,isError:v}),f[25]=_,f[26]=w,f[27]=v,f[28]=x,f[29]=j,f[30]=y,f[31]=u):u=f[31],f[32]!==d||f[33]!==u?(p=(0,m.jsxs)(M.qJ,{children:[d,u]}),f[32]=d,f[33]=u,f[34]=p):p=f[34],p}function et(e){return"merged"===e.pull.state||"closed"===e.pull.state}function en(e){return"merged"!==e.pull.state&&"closed"!==e.pull.state}function er(e){return"merged"===e.pull.state||"closed"===e.pull.state}function ea(e){return"merged"!==e.pull.state&&"closed"!==e.pull.state}function ei(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(G.Fn,{children:(0,m.jsx)(es,{})}),t[0]=e):e=t[0],e}function es(){let e=(0,g.b)(),{currentReferences:t}=(0,z.Pk)(),[n,r]=(0,_.useState)(null),[a,i]=(0,_.useState)(!0),[s,o]=(0,_.useState)("open"),{sessionsPollingInterval:l,showCopilotCodingAgentPremiumRequestsBanner:c,tasks:d,pullRequestsMap:u}=(0,W.X)(),{tasks:h,pendingTasks:p,isLoading:v,isError:b,createSession:S}=(0,$.s)({sessionsPollingInterval:l,initialTasks:d,initialPullRequestsMap:u});(0,_.useEffect)(()=>{(0,y.D)("Agents \xb7 GitHub Copilot");let n=t.find(e=>"repository"===e.type);n?(r({id:n.id,name:n.name,enabled:!0}),e.clearCurrentReferences(),i(!1)):(async()=>{let e=await Q();e.length>0&&r(e[0]),i(!1)})()},[]),(0,_.useEffect)(()=>{e.selectThread(null,{includeThreads:!1,clearTopic:!0})},[e]);let C=async t=>{let r=t.trim();""!==r&&(n?(o("open"),S({nwo:n.name,problemStatement:r})):e.sendChatMessage({content:r,thread:null,references:[]}))},j=["Find and fix bugs or anti-patterns","Improve performance of data loading","Find and refactor duplicated code","Generate or update developer documentation","Find 5 TODOs in the codebase and fix them","Detect unused code or dead files in the codebase","Identify and suggest improvements to slow or inefficient code","Suggest more descriptive variable and function names","Add missing error handling and input validation","Convert inline styles to CSS classes or styled components","Add a light/dark mode switcher","Add client-side form validation for email inputs","Add keyboard shortcuts for common actions","Add auto-save functionality to forms","Create a print-friendly view for reports","Add confirmation dialogs for destructive actions","Implement undo/redo functionality for text editors","Add drag and drop upload and progress meters to file inputs","Implement read/unread status for notifications","Add column sorting to data tables"],[w]=(0,_.useState)(()=>j[Math.floor(Math.random()*j.length)]),N=(0,z.Pk)().ssoOrganizations.map(e=>e.login);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(L.Container,{width:"small",children:[(0,m.jsxs)(L.Header,{children:[(0,m.jsx)(L.Title,{children:"Agents"}),(0,m.jsx)(L.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),(0,m.jsx)(L.Banner,{children:(0,m.jsx)(q.C,{enabled:c})}),(0,m.jsx)(L.Section,{children:(0,m.jsx)(H.x,{protectedOrgs:N,redirectURI:()=>location.href})}),(0,m.jsx)(L.Section,{children:(0,m.jsx)(f.V,{hideAttachmentButton:!0,placeholder:w,size:"large",onSubmit:C,submitButtonLabel:"Start task",extraToolbarLeft:a?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(x.f,{height:"32px",width:"130px"})}):(0,m.jsx)(B.P,{repositoryLoader:Q,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&r(e)},currentSelection:n||void 0,buttonText:n?.name||"Select repository"}),submitDisabled:!n})}),(0,m.jsx)(L.Section,{children:(0,m.jsx)(ee,{tasks:h,pendingTasks:p,isLoading:v,isError:b,activeTab:s,setActiveTab:o})})]})})}try{K.displayName||(K.displayName="OpenTaskList")}catch{}try{Y.displayName||(Y.displayName="ClosedTaskList")}catch{}try{ee.displayName||(ee.displayName="TaskList")}catch{}try{ei.displayName||(ei.displayName="AgentsViewWrapper")}catch{}try{es.displayName||(es.displayName="AgentsView")}catch{}var eo=n(28391);let el={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function ec(e){let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(37),{"aria-current":f,children:g,contextMenuComponent:y,expandOnClick:x,hasItems:v,href:b,icon:S,iconOverride:C,onLinkClick:j,id:w,displayName:N,label:I}=e,E=void 0===x||x,[R,T]=(0,_.useState)(!1);p[0]!==R?(t=()=>{T(!R)},p[0]=R,p[1]=t):t=p[1];let k=t;p[2]!==E||p[3]!==w||p[4]!==j?(n=e=>{j?.(e,w),E&&T(!0)},p[2]=E,p[3]=w,p[4]=j,p[5]=n):n=p[5];let A=n;p[6]!==f||p[7]!==A?(r={"aria-current":f,className:el.link,onClick:A},p[6]=f,p[7]=A,p[8]=r):r=p[8];let D=r;return p[9]!==R||p[10]!==v||p[11]!==k?(a=v&&(0,m.jsx)("button",{"aria-label":"Expand","aria-expanded":R,className:el.expandButton,onClick:k,children:R?(0,m.jsx)(O.ChevronDownIcon,{size:12}):(0,m.jsx)(O.ChevronRightIcon,{size:12})}),p[9]=R,p[10]=v,p[11]=k,p[12]=a):a=p[12],p[13]!==S||p[14]!==C?(i=S?(0,m.jsx)(S,{size:16}):C,p[13]=S,p[14]=C,p[15]=i):i=p[15],p[16]!==i?(s=(0,m.jsx)("div",{className:el.icon,children:i}),p[16]=i,p[17]=s):s=p[17],p[18]!==N?(o=(0,m.jsx)("div",{className:el.textWrapper,children:(0,m.jsx)("div",{className:el.text,children:N})}),p[18]=N,p[19]=o):o=p[19],p[20]!==D||p[21]!==b||p[22]!==I||p[23]!==s||p[24]!==o?(l=(0,m.jsxs)(eo.N,{to:b,...D,children:[s,o,I]}),p[20]=D,p[21]=b,p[22]=I,p[23]=s,p[24]=o,p[25]=l):l=p[25],p[26]!==y||p[27]!==a||p[28]!==l?(c=(0,m.jsxs)("div",{className:el.item,children:[a,l,y]}),p[26]=y,p[27]=a,p[28]=l,p[29]=c):c=p[29],p[30]!==g||p[31]!==R||p[32]!==v?(d=R&&v&&(0,m.jsx)("ul",{className:el.subList,children:g}),p[30]=g,p[31]=R,p[32]=v,p[33]=d):d=p[33],p[34]!==c||p[35]!==d?(u=(0,m.jsxs)("li",{className:el.section,children:[c,d]}),p[34]=c,p[35]=d,p[36]=u):u=p[36],u}try{ec.displayName||(ec.displayName="Navigation")}catch{}try{(r=function(e){let t,n,r,a,i=(0,h.c)(14),{"aria-current":s,contextMenuComponent:o,displayName:l,href:c,icon:d,iconOverride:u,onLinkClick:p}=e;return i[0]!==d||i[1]!==u?(t=d?(0,m.jsx)(d,{size:16,className:el.icon}):u,i[0]=d,i[1]=u,i[2]=t):t=i[2],i[3]!==l?(n=(0,m.jsx)("div",{className:el.textWrapper,children:(0,m.jsx)("div",{className:el.text,children:l})}),i[3]=l,i[4]=n):n=i[4],i[5]!==s||i[6]!==c||i[7]!==p||i[8]!==t||i[9]!==n?(r=(0,m.jsxs)(eo.N,{className:el.link,to:c,"aria-current":s,onClick:p,children:[t,n]}),i[5]=s,i[6]=c,i[7]=p,i[8]=t,i[9]=n,i[10]=r):r=i[10],i[11]!==o||i[12]!==r?(a=(0,m.jsxs)("li",{className:el.item,children:[r,o]}),i[11]=o,i[12]=r,i[13]=a):a=i[13],a}).displayName||(r.displayName="NavigationSubItem")}catch{}try{(a=function(e){let t,n,r=(0,h.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(O.KebabHorizontalIcon,{size:16}),r[0]=t):t=r[0],r[1]!==e?(n=(0,m.jsx)("button",{...e,className:el.contextButton,children:t}),r[1]=e,r[2]=n):n=r[2],n}).displayName||(a.displayName="NavigationContextMenuButton")}catch{}var ed=n(85647),eu=n(96679);let em="agents",eh="/copilot/agents";function ep(e,t,n,r,a,i,s,o,l,c,d=0,u=!1){let m=new Date("2025-06-04T20:00:00.000Z"),h=new Date(m.getTime()-24*c*36e5),p=new Date(m.getTime()-24*d*36e5);return{id:e,number:t,state:n,title:r,reviewable_state:a,url:`http://github.localhost:80/monalisa/smile/pull/${t}`,labels:i,comments:s,assignees_avatar_urls:Array.from({length:o},(t,n)=>`https://avatars.githubusercontent.com/u/${e+n}?v=4`),created_at:h.toISOString(),updated_at:p.toISOString(),merged_at:"merged"===n?p.toISOString():void 0,closed_at:"closed"===n||"merged"===n?p.toISOString():void 0,author:l,head_sha:`${r.toLowerCase().replace(/\s+/g,"")}123456789abcdef0123456789abcdef01234567`.substring(0,40),repository_nwo:"monalisa/smile",inMergeQueue:u}}function ef(e,t,n,r,a,i,s,o=0,l=0,c){let d=new Date("2025-06-04T20:00:00.000Z"),u=new Date(d.getTime()-60*s*6e4),m=new Date(d.getTime()-60*o*6e4);return{id:e,name:t,user_id:n,agent_id:r,state:a,owner_id:9919,repo_id:4,resource_type:"pull",resource_id:i,created_at:u.toISOString(),last_updated_at:m.toISOString(),completed_at:"completed"===a||"failed"===a?m.toISOString():void 0,workflow_run_id:12340+Math.floor(30*Math.random()),log_entries:[],error:c?{message:c}:null,premium_requests:l}}function eg(e,t){return{resource_type:"pull",resource_id:e.id,session_count:1,latest_session_updated_at:t.last_updated_at,latest_session_state:t.state,pull:e}}(()=>{let e=["cancelled","idle","in_progress","waiting_for_user","completed","failed","timed_out"],t={titles:["Refactor database queries for performance","Implement dark mode theme","Optimize API response times","Add mobile responsive design","Implement caching layer","Add internationalization support","Update documentation and README","Fix critical security vulnerability","Add user authentication system","Initial project setup and configuration","Implement real-time notifications","Add search functionality","Optimize bundle size","Add unit tests coverage","Implement error handling","Add accessibility features","Optimize database connections","Implement feature flags","Migrate to TypeScript","Implement CI/CD pipeline","Add monitoring and alerts"],authors:["alice-dev","bob-backend","charlie-frontend","diana-fullstack","eve-designer","frank-security"],labels:[["performance","database"],["ui","theme","enhancement"],["performance","api"],["mobile","responsive","ui"],["performance","caching","backend"],["i18n","feature","localization"]],errorMessages:["timeout","validation error","resource conflict","permission denied"]},n=1;return[...["open","closed","merged"].flatMap(r=>e.map(e=>{let a=(n-1)%t.titles.length,i=t.titles[a],s=t.authors[(n-1)%t.authors.length],o=t.labels[a%t.labels.length],l=eg(ep(n,n,r,i,Math.random()>.7?"draft":"ready",o,Math.floor(15*Math.random())+1,Math.floor(3*Math.random()),s,n,n),ef(`session-${n.toString().padStart(3,"0")}`,`${i.split(" ").slice(0,3).join(" ")} - ${e}`,0x996718+n,1143300+n,e,n,n,n,Math.floor(10*Math.random()),"failed"===e?`Operation failed due to ${t.errorMessages[Math.floor(4*Math.random())]}`:void 0));return n++,l})),eg(ep(n,n,"open","Add feature flags support (in merge queue)","ready",["feature","flags"],5,1,"alice-dev",21,0,!0),ef(`session-${n.toString().padStart(3,"0")}`,"Add feature flags support - in_progress",0x996718+n,1143300+n,"in_progress",n,1,0,2,void 0))]})();var ey=n(47139),ex=n(18337);function ev(e){let t,n,r,a=(0,h.c)(6),{onLinkClick:i}=e,s=(0,ed.zy)(),o=eu.fV?.pathname||s?.pathname||"";a[0]!==i?(t=(e,t)=>{i?.(e,t)},a[0]=i,a[1]=t):t=a[1];let l=t,c=o===eh?"page":void 0;return a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(ey.A,{variant:"success",children:"Preview"}),a[2]=n):n=a[2],a[3]!==l||a[4]!==c?(r=(0,m.jsx)(ec,{"aria-current":c,displayName:"Agents",href:eh,icon:ex.p,id:em,onLinkClick:l,label:n}),a[3]=l,a[4]=c,a[5]=r):r=a[5],r}try{ev.displayName||(ev.displayName="AgentsViewNavigation")}catch{}function e_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let eb=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{matchPage(e){return!!e&&eb.test(e.pathname)}matchView(e){return!!e&&eb.test(e.pathname)}constructor(){e_(this,"id",em),e_(this,"displayName","Agents"),e_(this,"routes",[eb]),e_(this,"ViewComponent",ei),e_(this,"NavigationComponent",ev),e_(this,"navigationItems",[{id:em,displayName:"Agents",href:eh,icon:ex.p,label:(0,_.createElement)(ey.A,{variant:"success"},"Preview")}])}};var eS=n(53207),eC=n(22069),ej=n(31971);let ew=(0,_.lazy)(async()=>({default:(await Promise.all([n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-transition_src_index_js"),n.e("vendors-node_modules_d3-zoom_src_index_js"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("ui_packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,11824))).Loop}));try{ew.displayName||(ew.displayName="LazyLoop")}catch{}var eN=n(97586),eI=n(99038);function eE(e){let t,n,r=(0,h.c)(5),{onLinkClick:a}=e,i=(0,ed.zy)(),s=eu.fV?.pathname||i?.pathname||"";r[0]!==a?(t=(e,t)=>{a?.(e,t)},r[0]=a,r[1]=t):t=r[1];let o=t,l=s===eN.QK?"page":void 0;return r[2]!==o||r[3]!==l?(n=(0,m.jsx)(ec,{"aria-current":l,displayName:"Loops",href:eN.QK,icon:eI.LP,id:eN.S$,onLinkClick:o}),r[2]=o,r[3]=l,r[4]=n):n=r[4],n}try{eE.displayName||(eE.displayName="PipesNavigation")}catch{}var eR=n(35714),eT=n(47970),ek=n(23634),eA=n(83880),eD=n(29637);function eP(){let{message:e}=(0,eA.V)(),t=(0,eD.O)(e);return t?.pipeline??null}let eL={container:"LoopBlock-module__container--CK9SB",streaming:"LoopBlock-module__streaming--TPBwx",header:"LoopBlock-module__header--uYMyT",headerCollapsed:"LoopBlock-module__headerCollapsed--NY9yJ",expandButton:"LoopBlock-module__expandButton--Kkc8L",content:"LoopBlock-module__content--tBcqk",node:"LoopBlock-module__node--B18Tf",iconContainer:"LoopBlock-module__iconContainer--VPfOh",checkIcon:"LoopBlock-module__checkIcon--eqIgJ",nodeTitle:"LoopBlock-module__nodeTitle--sHCHD"};var eM=n(55847);function eO(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(26),{loop:u,headerButton:p,isStreaming:f}=e,[g,y]=(0,_.useState)(!0);if(!u)return null;d[0]!==g?(t=()=>y(!g),d[0]=g,d[1]=t):t=d[1];let x=t,b=f&&eL.streaming;d[2]!==b?(n=(0,v.$)(eL.container,b),d[2]=b,d[3]=n):n=d[3];let S=!g&&eL.headerCollapsed;return d[4]!==S?(r=(0,v.$)(eL.header,S),d[4]=S,d[5]=r):r=d[5],d[6]!==g?(a=g?(0,m.jsx)(O.ChevronDownIcon,{size:16}):(0,m.jsx)(O.ChevronRightIcon,{size:16}),d[6]=g,d[7]=a):a=d[7],d[8]!==u.title?(i=(0,m.jsx)("span",{children:u.title}),d[8]=u.title,d[9]=i):i=d[9],d[10]!==a||d[11]!==i||d[12]!==x?(s=(0,m.jsx)(eM.Q,{variant:"invisible",onClick:x,className:eL.expandButton,leadingVisual:a,children:i}),d[10]=a,d[11]=i,d[12]=x,d[13]=s):s=d[13],d[14]!==p||d[15]!==r||d[16]!==s?(o=(0,m.jsxs)("div",{className:r,children:[s,p]}),d[14]=p,d[15]=r,d[16]=s,d[17]=o):o=d[17],d[18]!==g||d[19]!==f||d[20]!==u.nodes?(l=g&&(0,m.jsx)("div",{className:eL.content,children:u.nodes.map((e,t)=>{let n=f&&t===u.nodes.length-1;return(0,m.jsxs)("div",{className:eL.node,children:[(0,m.jsx)("div",{className:eL.iconContainer,children:(0,m.jsx)(O.CheckCircleFillIcon,{size:16,className:eL.checkIcon})}),n&&!e.title?null:(0,m.jsx)("span",{className:eL.nodeTitle,children:e.title})]},e.id)})}),d[18]=g,d[19]=f,d[20]=u.nodes,d[21]=l):l=d[21],d[22]!==l||d[23]!==n||d[24]!==o?(c=(0,m.jsxs)("div",{className:n,children:[o,l]}),d[22]=l,d[23]=n,d[24]=o,d[25]=c):c=d[25],c}try{eO.displayName||(eO.displayName="LoopBlockContent")}catch{}function eF(e){let t,n=(0,h.c)(3),{isStreaming:r}=e,a=eP();return n[0]!==r||n[1]!==a?(t=(0,m.jsx)(eO,{loop:a,isStreaming:r}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}try{eF.displayName||(eF.displayName="ReadOnlyLoopBlock")}catch{}var eB=n(58709),eU=n(74837);function e$(e){let t,n,r,a=(0,h.c)(13),{isStreaming:i}=e,s=eP(),{updateLoop:o}=(0,eU.k)(),{data:l}=(0,eB._)(),c=l?.id;a[0]!==l||a[1]!==s||a[2]!==c||a[3]!==o?(t=()=>{l&&c&&s&&o({...s,id:c})},a[0]=l,a[1]=s,a[2]=c,a[3]=o,a[4]=t):t=a[4];let d=t;a[5]!==d||a[6]!==i||a[7]!==c?(n=c&&!i?(0,m.jsx)(eM.Q,{variant:"invisible",onClick:d,children:"Restore"}):null,a[5]=d,a[6]=i,a[7]=c,a[8]=n):n=a[8];let u=n;return a[9]!==i||a[10]!==s||a[11]!==u?(r=(0,m.jsx)(eO,{loop:s,headerButton:u,isStreaming:i}),a[9]=i,a[10]=s,a[11]=u,a[12]=r):r=a[12],r}try{e$.displayName||(e$.displayName="InteractiveLoopBlock")}catch{}function eV(e){let t,n=(0,h.c)(4),{isStreaming:r}=e;if((0,ek.m0)()){let e;return n[0]!==r?(e=(0,m.jsx)(e$,{isStreaming:r}),n[0]=r,n[1]=e):e=n[1],e}return n[2]!==r?(t=(0,m.jsx)(eF,{isStreaming:r}),n[2]=r,n[3]=t):t=n[3],t}try{eV.displayName||(eV.displayName="LoopBlock")}catch{}let eq="data-loop-block",eW=(0,eR.F)(eq),eG={div:(e,t)=>{let n=(0,eR.k)(e,eq);return n?(0,m.jsx)(eV,{...n}):t}};function ez(){return{transformMarkdown:e=>(0,eT.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[eW]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eT.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&eW in r.properties&&n.children.splice(t,1,r)}),reactComponents:eG}}var eH=n(72419),eQ=n(11354),eK=n(66346),eJ=n(85351);function eX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eY(e){return!!e&&"object"==typeof e&&"loopID"in e&&"string"==typeof e.loopID}let IndexedDBPipesStorage=class IndexedDBPipesStorage{async getLoop(e,t){let n=await this.getPipelineRecord(e);return n?"latest"===t?n.pipeline:n.draftPipeline:null}async getAllLoops(e){let t=await this.getAllPipelineRecords();return t?t.map(t=>"latest"===e?t.pipeline:t.draftPipeline).filter(e=>null!==e):[]}async createLoop(e){try{let t,n;"string"==typeof e?(t=null,n=e):n=(t=e).id;let r={loopID:n,pipeline:null,draftPipeline:t?{...t}:null},a=await this.createPipelineRecord(r);return{success:!0,loop:a?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async updateLoop(e,t){try{let n=await this.updatePipelineRecord(e,e=>{let n=t(e.draftPipeline);return{...e,draftPipeline:n}});return{success:!0,loop:n?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async deleteLoop(e){try{return await this.deletePipeline(e),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async saveLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.draftPipeline)throw Error("No draft pipeline to save");return{...e,pipeline:{...e.draftPipeline}}});return{success:!0,loop:t?.pipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async revertLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.pipeline)throw Error("No saved pipeline to revert to");return{...e,draftPipeline:{...e.pipeline}}});return{success:!0,loop:t?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getPipelineRecord(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>eY(e)?e:null)}async getPipeline(e){return this.getPipelineRecord(e)}async getAllPipelineRecords(){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>eY(e)?e.pipeline:null):[])}createPipelineRecord(e){let t=Date.now(),n=e.pipeline?{...e.pipeline,id:e.loopID,updatedAt:t}:e.pipeline,r=e.draftPipeline?{...e.draftPipeline,id:e.loopID,updatedAt:t}:e.draftPipeline,a={...e,pipeline:n,draftPipeline:r};return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",e=>e.put(a),()=>a)}async updatePipelineRecord(e,t){let n=await this.getDatabase();return new Promise((r,a)=>{let i=n.transaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite");i.oncomplete=()=>n.close(),i.onerror=()=>a(i.error);let s=i.objectStore(IndexedDBPipesStorage.PIPELINES_STORE),o=s.get(e);o.onerror=()=>a(o.error),o.onsuccess=()=>{let n=o.result;if(!eY(n))return void a(Error(`Pipeline with ID ${e} not found`));try{let i=t(n),o=i.pipeline?{...i.pipeline,id:e}:i.pipeline,l=i.draftPipeline?{...i.draftPipeline,id:e,updatedAt:Date.now()}:i.draftPipeline,c={...i,pipeline:o,draftPipeline:l},d=s.put(c);d.onerror=()=>a(d.error),d.onsuccess=()=>r(c)}catch(e){a(e)}}})}deletePipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecution(e,t){try{let t=IndexedDBPipesStorage.getExecutionKey(e),n=IndexedDBPipesStorage.executionStorage.getItem(t);if(!n)return Promise.resolve(null);return Promise.resolve(JSON.parse(n))}catch{return Promise.resolve(null)}}async createExecution(e,t){let n={id:crypto.randomUUID(),nodes:{},...t};try{let t=IndexedDBPipesStorage.getExecutionKey(e);return IndexedDBPipesStorage.executionStorage.setItem(t,JSON.stringify(n)),n}catch(e){throw Error(`Failed to create execution: ${e instanceof Error?e.message:"Unknown error"}`)}}async updateExecution(e,t,n){try{let t=IndexedDBPipesStorage.getExecutionKey(e);if(!IndexedDBPipesStorage.executionStorage.getItem(t))throw Error(`No execution found for pipeline ${e}`);return IndexedDBPipesStorage.executionStorage.setItem(t,JSON.stringify(n)),n}catch(e){throw Error(`Failed to update execution: ${e instanceof Error?e.message:"Unknown error"}`)}}static getExecutionKey(e){return`execution:${e}`}async withTransaction(e,t,n,r){let a=await this.getDatabase();return new Promise((i,s)=>{let o=a.transaction(e,t);o.oncomplete=()=>a.close(),o.onerror=()=>s(o.error);let l=n(o.objectStore(e));l.onsuccess=()=>i(r(l.result)),l.onerror=()=>s(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBPipesStorage.PIPES_DB,IndexedDBPipesStorage.CURRENT_VERSION);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=async e=>{try{await IndexedDBPipesStorage.handleDatabaseUpgrade(n.result,e)}catch(e){t(e)}}})}static async handleDatabaseUpgrade(e,t){let n=t.oldVersion;if(0===n)return void await IndexedDBPipesStorage.upgradeFromVersion0(e);n<2&&await IndexedDBPipesStorage.upgradeFromVersion1(t),n<3&&await IndexedDBPipesStorage.upgradeFromVersion2(t),n<4&&await IndexedDBPipesStorage.upgradeFromVersion3(t),n<5&&await IndexedDBPipesStorage.upgradeFromVersion4(t),n<6&&await IndexedDBPipesStorage.upgradeFromVersion5(t),n<7&&await IndexedDBPipesStorage.upgradeFromVersion6(t),n<8&&await IndexedDBPipesStorage.upgradeFromVersion7(t)}static upgradeFromVersion0(e){return new Promise((t,n)=>{try{e.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"loopID"}).createIndex("loopID","loopID",{unique:!0}),t()}catch(e){n(e)}})}static async waitForAllAndResolve(e,t,n){try{await Promise.all(e),t()}catch(e){n(e)}}static upgradeFromVersion1(e){return new Promise((t,n)=>{if(!e.target)return t();let r=e.target.transaction;if(!r)return t();let a=r.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];a.onsuccess=function(e){let r=e.target?.result;if(r)try{let e=r.value;e.pipeline&&(e.pipeline.updatedAt=new Date().toISOString());let t=new Promise((t,n)=>{let a=r.update(e);a.onsuccess=()=>t(),a.onerror=()=>n(a.error)});i.push(t),r.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},a.onerror=function(){n(a.error)}})}static upgradeFromVersion2(e){return new Promise((t,n)=>{if(!e.target)return t();let r=e.target.transaction;if(!r)return t();let a=[],i=r.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor();i.onsuccess=function(e){let i=e.target?.result;if(i){let e=i.value;e?.pipeline&&!e.pipeline.updatedAt&&(e.pipeline.updatedAt=new Date().toISOString()),a.push(e),i.continue()}else try{r.db.deleteObjectStore(IndexedDBPipesStorage.PIPELINES_STORE);let e=r.db.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"loopID"});e.createIndex("loopID","loopID",{unique:!0});let i=a.map(e=>({loopID:e.pipeline.id,threadID:e.threadID,pipeline:e.pipeline}));if(0===i.length)return void t();let s=[];for(let t of i){let n=new Promise((n,r)=>{let a=e.put(t);a.onsuccess=()=>n(),a.onerror=()=>r(a.error)});s.push(n)}IndexedDBPipesStorage.waitForAllAndResolve(s,t,n)}catch(e){n(e)}},i.onerror=function(){n(i.error)}})}static upgradeFromVersion3(e){return new Promise((t,n)=>{if(!e.target)return t();let r=e.target.transaction;if(!r)return t();let a=r.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];a.onsuccess=function(e){let r=e.target?.result;if(r)try{let e=r.value;if(e.pipeline&&!e.draftPipeline){e.draftPipeline={...e.pipeline};let t=new Promise((t,n)=>{let a=r.update(e);a.onsuccess=()=>t(),a.onerror=e=>n(e)});i.push(t)}r.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},a.onerror=function(){n(a.error)}})}static upgradeFromVersion4(e){return new Promise((t,n)=>{if(!e.target)return t();let r=e.target.transaction;if(!r)return t();let a=r.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];a.onsuccess=function(e){let r=e.target?.result;if(r)try{let e=r.value;if(e.threadID&&e.loopID)try{(0,eQ.aq)(e.loopID,e.threadID)}catch(e){(0,eK.FF)("Failed to migrate thread ID to localStorage:",e)}if("threadID"in e){delete e.threadID;let t=new Promise((t,n)=>{let a=r.update(e);a.onsuccess=()=>t(),a.onerror=e=>n(e)});i.push(t)}r.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},a.onerror=function(){n(a.error)}})}static upgradeFromVersion5(e){return new Promise(t=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();n.db.deleteObjectStore(IndexedDBPipesStorage.EXECUTION_STORE);let r=n.db.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","executionId"]});r.createIndex("pipelineId, executionId",["pipelineId","executionId"],{unique:!0}),r.createIndex("pipelineId","pipelineId",{unique:!1}),t()})}static upgradeFromVersion6(e){return new Promise(t=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();n.db.objectStoreNames.contains(IndexedDBPipesStorage.EXECUTION_STORE)&&n.db.deleteObjectStore(IndexedDBPipesStorage.EXECUTION_STORE),t()})}static upgradeFromVersion7(e){return new Promise((t,n)=>{if(!e.target)return t();let r=e.target.transaction;if(!r)return t();let a=r.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];a.onsuccess=function(e){let r=e.target?.result;if(r)try{let e=r.value;if("string"==typeof e.pipeline?.updatedAt||"string"==typeof e.draftPipeline?.updatedAt){e.pipeline&&(e.pipeline={...e.pipeline,updatedAt:new Date(e.pipeline.updatedAt).getTime()}),e.draftPipeline&&(e.draftPipeline={...e.draftPipeline,updatedAt:new Date(e.draftPipeline.updatedAt).getTime()});let t=new Promise((t,n)=>{let a=r.update(e);a.onsuccess=()=>t(),a.onerror=e=>n(e)});i.push(t)}r.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},a.onerror=function(){n(a.error)}})}};eX(IndexedDBPipesStorage,"PIPES_DB","copilot-pipes"),eX(IndexedDBPipesStorage,"PIPELINES_STORE","pipelines"),eX(IndexedDBPipesStorage,"EXECUTION_STORE","executionStates"),eX(IndexedDBPipesStorage,"CURRENT_VERSION",8),eX(IndexedDBPipesStorage,"executionStorage",(0,eJ.A)("sessionStorage",{ttl:18e5,throwQuotaErrorsOnSet:!1}));var eZ=n(879),e0=n(67522),e1=n(38007);function e2(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function e3(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function e4(e,t){var n=e3(e,t,"get");return n.get?n.get.call(e):n.value}function e5(e,t,n){e2(e,t),t.set(e,n)}function e6(e,t,n){var r=e3(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var e7=new WeakMap,e8=new WeakMap,e9=new WeakMap,te=new WeakSet;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let r=(0,e0.wv)(),a=t??r.id,i=await e4(this,e7).getAuthToken(),s=await (0,eC.p)({basePath:e4(this,e8),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:e4(this,e9),signal:n});if(!s.ok){let e=await s.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||s.error}catch(e){}throw(0,e1.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&s.body&&(yield*(function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n})(this,te,tt).call(this,s.body,n))}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){!function(e,t){e2(e,t),t.add(e)}(this,te),e5(this,e7,{writable:!0,value:void 0}),e5(this,e8,{writable:!0,value:void 0}),e5(this,e9,{writable:!0,value:void 0}),e6(this,e8,e),e6(this,e7,new eZ.J(t)),e6(this,e9,n)}};async function*tt(e,t){let n=new TextDecoder("utf-8"),r=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:i}=await r.read();if(e)break;for(a+=n.decode(i);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"";n&&(yield n)}catch{}a=a.slice(e+2)}}}finally{r.releaseLock()}}let tn=["SAML"],tr={FORBIDDEN:["SAML error"]};function ta(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ti=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var n;let r=await (0,F.Sr)((n=ta(this,ti,"get"),n.get?n.get.call(this):n.value),{method:"POST",body:{query:e},signal:t});if(r.ok){let e=await r.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!tn.includes(e.type)&&!tr[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,e1.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,eK.vV)(n),(0,e1.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,r.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}(this,ti,{writable:!0,value:void 0}),function(e,t,n){var r=ta(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,ti,e)}};var ts=n(25745);let to={scrollContainer:"ServiceView-module__scrollContainer--LFK5G",contentContainer:"ServiceView-module__contentContainer--DZVDS",v3SpacesContent:"ServiceView-module__v3SpacesContent--PvJhy",content:"ServiceView-module__content--B7ctp",small:"ServiceView-module__small--e46Wl",empty:"ServiceView-module__empty--I19W6",banner:"ServiceView-module__banner--kVai_",serviceHeader:"ServiceView-module__serviceHeader--R2TLR",serviceDescription:"ServiceView-module__serviceDescription--koXJM",serviceTitle:"ServiceView-module__serviceTitle--orySH",serviceIcon:"ServiceView-module__serviceIcon--a2C77",section:"ServiceView-module__section--_ycAN",sectionTitle:"ServiceView-module__sectionTitle--hD3JM",sectionGrid:"ServiceView-module__sectionGrid--Fa4lP",sectionGridEmpty:"ServiceView-module__sectionGridEmpty--KiT2u",skeletonCard:"ServiceView-module__skeletonCard--MT87J"};function tl(e){let t,n,r,a,i,s=(0,h.c)(12),{children:o,empty:l,width:c}=e;if(s[0]!==o){for(let e of(t=[],n=[],_.Children.toArray(o)))_.isValidElement(e)&&e.type===tc?t.push(e):n.push(e);s[0]=o,s[1]=t,s[2]=n}else t=s[1],n=s[2];let d="small"===c;return s[3]!==l||s[4]!==d?(r=(0,v.$)(to.content,{[to.v3SpacesContent]:ej.W.spacesV3UI,[to.empty]:l,[to.small]:d}),s[3]=l,s[4]=d,s[5]=r):r=s[5],s[6]!==n||s[7]!==r?(a=(0,m.jsx)("div",{className:r,children:n}),s[6]=n,s[7]=r,s[8]=a):a=s[8],s[9]!==t||s[10]!==a?(i=(0,m.jsx)("div",{className:to.scrollContainer,children:(0,m.jsxs)("div",{className:to.contentContainer,children:[t,a]})}),s[9]=t,s[10]=a,s[11]=i):i=s[11],i}function tc(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:to.banner,children:r}),n[0]=r,n[1]=t):t=n[1],t}function td(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:to.serviceHeader,children:r}),n[0]=r,n[1]=t):t=n[1],t}function tu(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("section",{className:to.section,children:r}),n[0]=r,n[1]=t):t=n[1],t}function tm(e){let t,n=(0,h.c)(2),{icon:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:to.serviceIcon,children:r}),n[0]=r,n[1]=t):t=n[1],t}function th(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("h2",{className:to.serviceTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t}function tp(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("p",{className:to.serviceDescription,children:r}),n[0]=r,n[1]=t):t=n[1],t}function tf(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("h3",{className:to.sectionTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t}function tg(e){let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:to.sectionGridEmpty,children:r}),n[0]=r,n[1]=t):t=n[1],t}function ty(e){let t,n,r,a=(0,h.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:to.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(t_)}),a[0]=e):e=a[0],e}if(a[1]!==i){let e=_.Children.toArray(i);t=e.find(tv),n=e.filter(tx),a[1]=i,a[2]=t,a[3]=n}else t=a[2],n=a[3];let o=n;if(0===o.length&&t){let e;return a[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),a[4]=t,a[5]=e):e=a[5],e}return a[6]!==o?(r=(0,m.jsx)("div",{className:to.sectionGrid,children:o}),a[6]=o,a[7]=r):r=a[7],r}function tx(e){return!(_.isValidElement(e)&&e.type===tg)}function tv(e){return _.isValidElement(e)&&e.type===tg}function t_(e,t){return(0,m.jsx)(x.f,{className:to.skeletonCard},t)}ty.Empty=tg,tu.Title=tf,tu.Grid=ty;let tb={Icon:tm,Title:th,Description:tp,Container:tl,Banner:tc,Header:td,Section:tu};try{tl.displayName||(tl.displayName="ServiceContainer")}catch{}try{tc.displayName||(tc.displayName="ServiceBanner")}catch{}try{td.displayName||(td.displayName="ServiceHeader")}catch{}try{tu.displayName||(tu.displayName="ServiceSection")}catch{}try{tm.displayName||(tm.displayName="Icon")}catch{}try{th.displayName||(th.displayName="Title")}catch{}try{tp.displayName||(tp.displayName="Description")}catch{}try{tf.displayName||(tf.displayName="SectionTitle")}catch{}try{tg.displayName||(tg.displayName="SectionGridEmpty")}catch{}try{ty.displayName||(ty.displayName="SectionGrid")}catch{}let tS={header:"LoopsView-module__header--SAuoB",input:"LoopsView-module__input--vIdQn"};var tC=n(20126),tj=n(44446),tw=n(87804),tN=n(33484),tI=n(10569),tE=n(87330),tR=n(15385);let tT={header:"LoopsViewHeader-module__header--rHbds",rightControls:"LoopsViewHeader-module__rightControls--aKkbw"};function tk(){let e,t,n,r,a=(0,h.c)(4),i=(0,_.useRef)(null),s=(0,_.useRef)(null);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{icon:O.KebabHorizontalIcon,"aria-label":"Menu",onClick:tD})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{i.current?.openDialog(),(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)(tR.l.Item,{onSelect:t,children:["Give feedback",(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.CommentIcon,{})})]}),a[2]=n):n=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("div",{className:tT.header,children:(0,m.jsxs)("div",{className:tT.rightControls,children:[(0,m.jsxs)(tI.W,{anchorRef:s,children:[e,(0,m.jsx)(tI.W.Overlay,{width:"small",children:(0,m.jsx)(tR.l,{children:(0,m.jsxs)(tR.l.Group,{children:[n,(0,m.jsxs)(tR.l.LinkItem,{href:"/settings/copilot",onClick:tA,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.GearIcon,{})}),"Settings"]})]})})})]}),(0,m.jsx)(tN.l,{ref:i,mode:"immersive",returnFocusRef:s})]})}),a[3]=r):r=a[3],r}function tA(){return(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function tD(){return(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{tk.displayName||(tk.displayName="LoopsViewHeader")}catch{}let tP=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",inputType:{type:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",inputType:{type:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",inputType:{type:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",inputType:{type:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",inputType:{type:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",inputType:{type:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",inputType:{type:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",inputType:{type:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",inputType:{type:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,inputType:{type:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}],tL={cardContainer:"Card-module__cardContainer--Jk2It",cardContent:"Card-module__cardContent--A8hpe",cardMenu:"Card-module__cardMenu--o6v0Y",itemHeader:"Card-module__itemHeader--WIpbQ",edgeToEdge:"Card-module__edgeToEdge--o6nFA",itemImage:"Card-module__itemImage--fVqUU",itemMain:"Card-module__itemMain--M__Bj",itemContent:"Card-module__itemContent--QdREU",itemHeaderTitle:"Card-module__itemHeaderTitle--TwWdH",itemHeaderDescription:"Card-module__itemHeaderDescription--KFU1e",itemMetadata:"Card-module__itemMetadata--DWvmz",itemMetadataItem:"Card-module__itemMetadataItem--t_AWQ"},tM=e=>{let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(47),f=null,g=null,y=null,x=null,b=null,S=null;if(p[0]!==e.children){for(let t of _.Children.toArray(e.children))_.isValidElement(t)&&(t.type===tO?f=t:t.type===tF?g=t:t.type===tB?y=t:t.type===tU?x=t:t.type===tV?b=t:t.type===t$&&(S=t));p[0]=e.children,p[1]=f,p[2]=g,p[3]=y,p[4]=x,p[5]=b,p[6]=S}else f=p[1],g=p[2],y=p[3],x=p[4],b=p[5],S=p[6];p[7]!==g?(t=(0,v.$)(tL.itemHeader,g&&tL.edgeToEdge),p[7]=g,p[8]=t):t=p[8];let C=f||g;p[9]!==t||p[10]!==C?(n=(0,m.jsx)("div",{className:t,children:C}),p[9]=t,p[10]=C,p[11]=n):n=p[11],p[12]!==x||p[13]!==y?(r=(0,m.jsxs)("div",{className:tL.itemContent,children:[y,x]}),p[12]=x,p[13]=y,p[14]=r):r=p[14],p[15]!==b?(a=(0,m.jsx)("div",{className:tL.itemMetadata,children:b}),p[15]=b,p[16]=a):a=p[16],p[17]!==r||p[18]!==a?(i=(0,m.jsxs)("div",{className:tL.itemMain,children:[r,a]}),p[17]=r,p[18]=a,p[19]=i):i=p[19],p[20]!==n||p[21]!==i?(s=(0,m.jsxs)(m.Fragment,{children:[n,i]}),p[20]=n,p[21]=i,p[22]=s):s=p[22];let j=s;if("href"in e){let t,n,r,a,i;return p[23]!==e?({href:t,...n}=e,p[23]=e,p[24]=t,p[25]=n):(t=p[24],n=p[25]),p[26]!==j||p[27]!==t||p[28]!==n?(r=(0,m.jsx)(ed.N_,{...n,to:t,className:tL.cardContent,children:j}),p[26]=j,p[27]=t,p[28]=n,p[29]=r):r=p[29],p[30]!==S?(a=S?(0,m.jsx)("div",{className:tL.cardMenu,children:S}):null,p[30]=S,p[31]=a):a=p[31],p[32]!==r||p[33]!==a?(i=(0,m.jsxs)("div",{className:tL.cardContainer,children:[r,a]}),p[32]=r,p[33]=a,p[34]=i):i=p[34],i}return p[35]!==e?({onClick:o,...l}=e,p[35]=e,p[36]=o,p[37]=l):(o=p[36],l=p[37]),p[38]!==j||p[39]!==o||p[40]!==l?(c=(0,m.jsx)("button",{...l,className:tL.cardContent,onClick:o,children:j}),p[38]=j,p[39]=o,p[40]=l,p[41]=c):c=p[41],p[42]!==S?(d=S?(0,m.jsx)("div",{className:tL.cardMenu,children:S}):null,p[42]=S,p[43]=d):d=p[43],p[44]!==c||p[45]!==d?(u=(0,m.jsxs)("div",{className:tL.cardContainer,children:[c,d]}),p[44]=c,p[45]=d,p[46]=u):u=p[46],u},tO=e=>{let t,n=(0,h.c)(3),{icon:r,color:a}=e;return n[0]!==a||n[1]!==r?(t=(0,m.jsx)(tj.I,{icon:r,hasBackground:!0,color:a,size:16}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t},tF=e=>{let t,n=(0,h.c)(3),{img:r,alt:a}=e,i=void 0===a?"":a;return n[0]!==i||n[1]!==r?(t=(0,m.jsx)("img",{src:r,alt:i,className:tL.itemImage}),n[0]=i,n[1]=r,n[2]=t):t=n[2],t},tB=e=>{let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("h3",{className:tL.itemHeaderTitle,children:r}),n[0]=r,n[1]=t):t=n[1],t},tU=e=>{let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("p",{className:tL.itemHeaderDescription,children:r}),n[0]=r,n[1]=t):t=n[1],t},t$=e=>{let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)(m.Fragment,{children:r}),n[0]=r,n[1]=t):t=n[1],t},tV=e=>{let t,n=(0,h.c)(2),{children:r}=e;return n[0]!==r?(t=(0,m.jsx)("div",{className:tL.itemMetadataItem,children:r}),n[0]=r,n[1]=t):t=n[1],t};tM.Icon=tO,tM.Image=tF,tM.Heading=tB,tM.Description=tU,tM.Menu=t$,tM.Metadata=tV;try{tM.displayName||(tM.displayName="Card")}catch{}try{tO.displayName||(tO.displayName="Icon")}catch{}try{tF.displayName||(tF.displayName="Image")}catch{}try{tB.displayName||(tB.displayName="Heading")}catch{}try{tU.displayName||(tU.displayName="Description")}catch{}try{t$.displayName||(t$.displayName="Menu")}catch{}try{tV.displayName||(tV.displayName="Metadata")}catch{}var tq=n(94412),tW=n(48148);function tG(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(25),{item:u,onClick:p}=e;d[0]!==u.color?(t=tW.u.find(e=>e===u.color),d[0]=u.color,d[1]=t):t=d[1];let f=t,g=`${eC.Jz}/l/${u.id}`;return d[2]!==f||d[3]!==u.title?(n=f??(0,tW.S)(u.title,tW.u),d[2]=f,d[3]=u.title,d[4]=n):n=d[4],d[5]!==n?(r=(0,m.jsx)(tM.Icon,{icon:"loops",color:n}),d[5]=n,d[6]=r):r=d[6],d[7]!==u.title?(a=(0,m.jsx)(tM.Heading,{children:u.title}),d[7]=u.title,d[8]=a):a=d[8],d[9]!==u.description?(i=(0,m.jsx)(tM.Description,{children:u.description}),d[9]=u.description,d[10]=i):i=d[10],d[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(eI.GS,{}),d[11]=s):s=d[11],d[12]!==u.nodes.length?(o=(0,m.jsxs)(tM.Metadata,{children:[s,u.nodes.length]}),d[12]=u.nodes.length,d[13]=o):o=d[13],d[14]!==u.id?(l=(0,m.jsx)(tM.Menu,{children:(0,m.jsx)(tq.T,{loopId:u.id})}),d[14]=u.id,d[15]=l):l=d[15],d[16]!==u.id||d[17]!==p||d[18]!==g||d[19]!==r||d[20]!==a||d[21]!==i||d[22]!==o||d[23]!==l?(c=(0,m.jsxs)(tM,{href:g,onClick:p,children:[r,a,i,o,l]},u.id),d[16]=u.id,d[17]=p,d[18]=g,d[19]=r,d[20]=a,d[21]=i,d[22]=o,d[23]=l,d[24]=c):c=d[24],c}try{tG.displayName||(tG.displayName="LoopCard")}catch{}function tz(e){let t,n,r,a,i,s,o,l=(0,h.c)(20),{altText:c,assetPath:d,exampleLoop:u,onSelect:p}=e;l[0]!==u||l[1]!==p?(t=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),p({...u,id:crypto.randomUUID(),updatedAt:Date.now()})},l[0]=u,l[1]=p,l[2]=t):t=l[2];let f=t;return l[3]!==c||l[4]!==d?(n=(0,m.jsx)(tM.Image,{alt:c,img:d}),l[3]=c,l[4]=d,l[5]=n):n=l[5],l[6]!==u.title?(r=(0,m.jsx)(tM.Heading,{children:u.title}),l[6]=u.title,l[7]=r):r=l[7],l[8]!==u.description?(a=(0,m.jsx)(tM.Description,{children:u.description}),l[8]=u.description,l[9]=a):a=l[9],l[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(eI.GS,{}),l[10]=i):i=l[10],l[11]!==u.nodes.length?(s=(0,m.jsxs)(tM.Metadata,{children:[i,u.nodes.length]}),l[11]=u.nodes.length,l[12]=s):s=l[12],l[13]!==u.title||l[14]!==f||l[15]!==n||l[16]!==r||l[17]!==a||l[18]!==s?(o=(0,m.jsxs)(tM,{onClick:f,children:[n,r,a,s]},u.title),l[13]=u.title,l[14]=f,l[15]=n,l[16]=r,l[17]=a,l[18]=s,l[19]=o):o=l[19],o}try{tz.displayName||(tz.displayName="LoopExampleCard")}catch{}function tH(e){let t,n,r=(0,h.c)(5),{chatState:a,plugin:i}=e;if(!i||!(0,tw.j)(i))throw Error("LoopsView can only be used with a LoopsPlugin");return r[0]!==a?(t=(0,m.jsx)(tQ,{chatState:a}),r[0]=a,r[1]=t):t=r[1],r[2]!==i.service||r[3]!==t?(n=(0,m.jsx)(ek.wn,{value:i.service,children:t}),r[2]=i.service,r[3]=t,r[4]=n):n=r[4],n}function tQ(e){let t,n,r,a,i,s,o,l,c,d,u,p,y,x,v,b=(0,h.c)(32),{chatState:S}=e,{data:C,isLoading:j}=(0,tC.C)(),w=(0,g.b)(),N=(0,ed.Zp)(),I=(0,ek.UR)(),E=(0,e0.GF)(S.availableModels);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],b[0]=t):t=b[0],(0,_.useEffect)(tX,t),b[1]!==w?(n=()=>{w.selectThread(null,{includeThreads:!1,clearTopic:!0})},r=[w],b[1]=w,b[2]=n,b[3]=r):(n=b[2],r=b[3]),(0,_.useEffect)(n,r),b[4]!==E||b[5]!==I||b[6]!==w||b[7]!==N?(a=async e=>{let t=e.trim();if(""===t)return;(0,e1.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),r=await w.createThread();await I.createLoop(n),(0,eQ.aq)(n,r.id),w.sendChatMessage({content:t,model:E,references:[],thread:r}),N(`${eC.Jz}/l/${n}`)},b[4]=E,b[5]=I,b[6]=w,b[7]=N,b[8]=a):a=b[8];let R=a;b[9]!==I||b[10]!==N?(i=async e=>{await I.createLoop(e),N(`${eC.Jz}/l/${e.id}`)},b[9]=I,b[10]=N,b[11]=i):i=b[11];let T=i;return b[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tk,{}),b[12]=s):s=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(tb.Header,{children:[(0,m.jsx)(tb.Icon,{icon:(0,m.jsx)(tj.I,{icon:"loops",size:32})}),(0,m.jsx)(tb.Title,{children:"Automate once. Loop forever."}),(0,m.jsx)(tb.Description,{children:"Loops simplifies workflow automation by allowing you to define processes with clear inputs, prompts, and outputs\u2014no manual setup required. Powered by Copilot, Loops makes it easy to automate and manage tasks, streamlining your operations with minimal effort."})]}),b[13]=o):o=b[13],b[14]!==R?(l=(0,m.jsx)(f.V,{hideAttachmentButton:!0,placeholder:"What would you like to automate?",size:"large",onSubmit:R}),b[14]=R,b[15]=l):l=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)(ts.h,{}),b[16]=c):c=b[16],b[17]!==l?(d=(0,m.jsxs)("div",{className:tS.header,children:[o,(0,m.jsxs)("div",{className:tS.input,children:[l,c]})]}),b[17]=l,b[18]=d):d=b[18],b[19]!==j||b[20]!==C?(u=j||C&&C.length>0?(0,m.jsxs)(tb.Section,{children:[(0,m.jsx)(tb.Section.Title,{children:"Your loops"}),(0,m.jsx)(tb.Section.Grid,{loading:j,children:C?.map(tK)})]}):null,b[19]=j,b[20]=C,b[21]=u):u=b[21],b[22]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(tb.Section.Title,{children:"Examples"}),b[22]=p):p=b[22],b[23]!==T?(y=tP.map(e=>{let{altText:t,assetPath:n,loop:r}=e;return(0,m.jsx)(tz,{altText:t,assetPath:n,exampleLoop:r,onSelect:T},r.title)}),b[23]=T,b[24]=y):y=b[24],b[25]!==j||b[26]!==y?(x=(0,m.jsxs)(tb.Section,{children:[p,(0,m.jsx)(tb.Section.Grid,{loading:j,children:y})]}),b[25]=j,b[26]=y,b[27]=x):x=b[27],b[28]!==d||b[29]!==u||b[30]!==x?(v=(0,m.jsxs)(m.Fragment,{children:[s,(0,m.jsxs)(tb.Container,{children:[d,u,x]})]}),b[28]=d,b[29]=u,b[30]=x,b[31]=v):v=b[31],v}function tK(e){return(0,m.jsx)(tG,{item:e,onClick:tJ},e.id)}function tJ(){return(0,e1.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function tX(){(0,y.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-transition_src_index_js"),n.e("vendors-node_modules_d3-zoom_src_index_js"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("ui_packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,11824))}try{tH.displayName||(tH.displayName="LoopsView")}catch{}try{tQ.displayName||(tQ.displayName="LoopsViewInner")}catch{}function tY(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function tZ(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function t0(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}var t1=new WeakMap,t2=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return t0(this,t2,t3).call(this,{operation:"list-loops"})}createLoop(e){return t0(this,t2,t3).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return t0(this,t2,t3).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return t0(this,t2,t3).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}createExecution(e,t,n){return t0(this,t2,t3).call(this,{operation:"create-execution",loopID:e,version:t,valueMap:n})}getExecution(e,t,n){return t0(this,t2,t3).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,r,a){return t0(this,t2,t3).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:r,nodeExecution:a})}constructor(e){!function(e,t){tY(e,t),t.add(e)}(this,t2),function(e,t,n){tY(e,t),t.set(e,n)}(this,t1,{writable:!0,value:void 0}),function(e,t,n){var r=tZ(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,t1,e)}};async function t3(e){var t;let n=await (0,F.DI)((t=tZ(this,t1,"get"),t.get?t.get.call(this):t.value),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!n.ok){let t=await n.text();try{let n=JSON.parse(t).message;throw Error(`error in ${e}: ${n??t??""}`)}catch(n){throw Error(`error in ${e}: ${t??""}`)}}return await n.json()}function t4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let LoopsPlugin=class LoopsPlugin{matchPage(e){return!!e&&(eN.bW.test(e.pathname)||eN.lN.test(e.pathname))}matchView(e){return!!e&&eN.qe.test(e.pathname)}matchThread(e,t){return!!this.routes.some(e=>e.test(eu.fV.pathname))||!!(0,eD.I)(t,!0)}async overrideCreateMessageOptions(e){return{...e,mode:eN.lh}}constructor(e,t,n,r,a,i){t4(this,"id",eN.S$),t4(this,"displayName",eN.Os),t4(this,"service",void 0),t4(this,"previewUrl",void 0),t4(this,"markdownExtensions",[ez]),t4(this,"routes",[eN.qe,eN.bW,eN.lN]),t4(this,"skipSyncRouteToThread",!0),t4(this,"PageComponent",ew),t4(this,"ViewComponent",tH),t4(this,"NavigationComponent",eE),t4(this,"navigationItems",[{id:eN.S$,displayName:"Loops",href:eN.QK,icon:eI.LP}]),this.service=new eH.r(new LoopsClient(n),new IndexedDBPipesStorage,new GraphQLClient(t),new ChatCompletionsClient(e,r,i)),this.previewUrl=a}};let t5=(0,_.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function t6(e){let t,n,r,a,i,s,o,l,c=(0,h.c)(9),{children:d}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],c[0]=t):t=c[0];let[u,p]=_.useState(t);c[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{p(t=>t.some(t=>t===e)?t:[...t,e])},c[1]=n):n=c[1];let f=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{p(t=>t.filter(t=>t!==e))},c[2]=r):r=c[2];let g=r;return c[3]!==u?(a=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=u.filter(t9).sort(t8);if(0===t.length)return;let n=t.findIndex(t7),r=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(r){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(r.tagName)&&!r.hasAttribute("tabindex")){r.setAttribute("tabindex","-1");let e=()=>{r.removeAttribute("tabindex"),r.removeEventListener("blur",e)};r.addEventListener("blur",e,{once:!0})}r.focus()}}};return eu.XC?.addEventListener("keydown",e),()=>{eu.XC?.removeEventListener("keydown",e)}},i=[u],c[3]=u,c[4]=a,c[5]=i):(a=c[4],i=c[5]),(0,_.useEffect)(a,i),c[6]===Symbol.for("react.memo_cache_sentinel")?(o={registerNavigableRef:f,unregisterNavigableRef:g},c[6]=o):o=c[6],s=o,c[7]!==d?(l=(0,m.jsx)(t5.Provider,{value:s,children:d}),c[7]=d,c[8]=l):l=c[8],l}function t7(e){return e.current?.contains(eu.XC?.activeElement||null)}function t8(e,t){let n=e.current,r=t.current;return n===r?0:n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function t9(e){return null!==e.current}function ne(){let e,t,n=(0,h.c)(4),r=(0,_.useRef)(null),{registerNavigableRef:a,unregisterNavigableRef:i}=(0,_.useContext)(t5);return n[0]!==a||n[1]!==i?(e=()=>(a(r),()=>{i(r)}),t=[a,i],n[0]=a,n[1]=i,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,_.useEffect)(e,t),r}try{t5.displayName||(t5.displayName="NavigableRefContext")}catch{}try{t6.displayName||(t6.displayName="NavigableRefProvider")}catch{}var nt=n(96615),nn=n(68415);let nr="spark",na="/spark",ni={trailingVisual:"SparkNavigation-module__trailingVisual--qCzSd"};function ns(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ec,{"aria-current":eu.fV.pathname===na?"page":void 0,displayName:"Spark",href:na,icon:O.SparkleIcon,id:nr,contextMenuComponent:(0,m.jsx)(O.ArrowUpRightIcon,{className:ni.trailingVisual})}),t[0]=e):e=t[0],e}try{ns.displayName||(ns.displayName="SparkNavigation")}catch{}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let nl=/\/copilot\/spark/;let SparkPlugin=class SparkPlugin{matchView(e){return this.routes.some(t=>t.test(e.pathname))}constructor(){no(this,"id",nr),no(this,"displayName","Spark"),no(this,"routes",[nl]),no(this,"NavigationComponent",ns)}};var nc=n(18312),nd=n(33005),nu=n(66343),nm=n(10871),nh=n(95726);let np={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function nf(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:np.content,children:(0,m.jsx)(nu.A,{})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:np.container,children:[e,(0,m.jsx)("div",{className:np.footer,children:(0,m.jsx)("div",{className:np.bannerContainer,children:(0,m.jsx)(nh.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,m.jsx)(nm.z,{as:"a",href:"https://github.com/settings/copilot",onClick:ng,children:"Settings"})})})})]}),n[1]=t):t=n[1],t}function ng(){return(0,e1.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{nf.displayName||(nf.displayName="ImmersiveDisabled")}catch{}var ny=n(31637),nx=n(74244),nv=n(6901),n_=n(68714),nb=n(99168);function nS(e){let t,n=(0,h.c)(7),{messageId:r,messageIndex:a,messageTimestamp:i}=e,{openPreviewPane:s,openItem:o,updateItem:l}=(0,nd.xx)();return n[0]!==r||n[1]!==a||n[2]!==i||n[3]!==o||n[4]!==s||n[5]!==l?(t=(e,t)=>{let n;switch(e.type){case"file":n=(0,nb.by)(e,r,i);break;case"thread-scoped-file":n=(0,nb.oR)({ref:e,messageIndex:a,messageId:r,timestamp:i});break;case"draft-issue":n=(0,nb.oR)({ref:e,messageIndex:a,messageId:r});break;case"issue":n=(0,nb.SI)(e,r);break;default:return}t?.preventDefault(),l(n),o(n.id),s()},n[0]=r,n[1]=a,n[2]=i,n[3]=o,n[4]=s,n[5]=l,n[6]=t):t=n[6],t}function nC(){let e=(0,z.Pk)(),{referenceId:t,messageIndex:n}=function(){let e,t,n,r=(0,h.c)(6),a=(0,ed.zy)();if(r[0]!==a.search){let n=new URLSearchParams(a.search);e=n.get("reference_id"),t=n.get("message_index"),r[0]=a.search,r[1]=e,r[2]=t}else e=r[1],t=r[2];let i=t,s=null;if(null!==i){let e=parseInt(i,10);isNaN(e)||(s=e)}return r[3]!==s||r[4]!==e?(n={referenceId:e,messageIndex:s},r[3]=s,r[4]=e,r[5]=n):n=r[5],n}(),[,r]=(0,ed.ok)(),a=(0,_.useMemo)(()=>e.messages??[],[e.messages]),i=(0,_.useMemo)(()=>null!==n&&n>=0&&n<a.length?a[n]:null,[a,n]),s=(0,_.useMemo)(()=>i?.references??e.currentReferences??[],[i?.references,e.currentReferences]),o=(0,_.useMemo)(()=>t&&s.length?s.find(e=>(0,eC.Vb)(e)===t)??null:null,[t,s]),l=nS({messageIndex:n??a.length,messageId:i?.id,messageTimestamp:i?.createdAt});(0,_.useEffect)(()=>{o&&(l(o),r(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,r])}var nj=n(5878),nw=n(70179),nN=n(31075),nI=n(69676),nE=n(82678);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,n){let r=Number(4294967295n&t),a=Number(t>>32n);this.setUint32(e+4*!n,r,n),this.setUint32(e+4*!!n,a,n)}});var nR=e=>new DataView(new ArrayBuffer(e)),nT=e=>new Uint8Array(e.buffer||e),nk=e=>(new TextEncoder).encode(String(e)),nA=e=>Math.min(0xffffffff,Number(e)),nD=e=>Math.min(65535,Number(e));function nP(e,t=e){return new ReadableStream({async pull(t){let n=0;for(;t.desiredSize>n;){let a=await e.next();if(!a.value){t.close();break}{var r;let e="string"==typeof(r=a.value)?nk(r):r instanceof Uint8Array?r:nT(r);t.enqueue(e),n+=e.byteLength}}},cancel(e){t.throw?.(e)}})}function nL(e,t,n){var r,a;let[i,s]=t?t instanceof Uint8Array?[t,1]:ArrayBuffer.isView(t)||t instanceof ArrayBuffer?[nT(t),1]:[nk(t),0]:[void 0,0];if(e instanceof File)return{o:nM(i||nk(e.name)),u:BigInt(e.size),l:s};if(e instanceof Response){let t=e.headers.get("content-disposition"),r=t&&t.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),a=r&&r[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),o=a&&decodeURIComponent(a),l=n||+e.headers.get("content-length");return{o:nM(i||nk(o)),u:BigInt(l),l:s}}return i=nM(i,void 0!==e||void 0!==n),"string"==typeof e?{o:i,u:BigInt(nk(e).length),l:s}:e instanceof Blob?{o:i,u:BigInt(e.size),l:s}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{o:i,u:BigInt(e.byteLength),l:s}:{o:i,u:(r=e,(a=n)>-1?BigInt(a):r?void 0:0n),l:s}}function nM(e,t=1){if(!e||e.every(e=>47===e))throw Error("The file must have a name.");if(t)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([...e,47]));return e}var nO=new Uint32Array(256);for(let e=0;e<256;++e){let t=e;for(let e=0;e<8;++e)t=t>>>1^(1&t&&0xedb88320);nO[e]=t}function nF(e,t=0){t^=-1;for(var n=0,r=e.length;n<r;n++)t=t>>>8^nO[255&t^e[n]];return(-1^t)>>>0}function nB(e,t,n=0){let r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,a=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,r,1),t.setUint16(n+2,a,1)}var nU=new TextDecoder("utf8",{fatal:1});async function*n$(e){let{i:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.m=nF(t,0),e.u=BigInt(t.length);else{e.u=0n;let n=t.getReader();for(;;){let{value:t,done:r}=await n.read();if(r)break;e.m=nF(t,e.m),e.u+=BigInt(t.length),yield t}}}function nV(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified]]}var nq=e=>(function(e){let t=BigInt(22),n=0n,r=0;for(let a of e){if(!a.o)throw Error("Every file must have a non-empty name.");if(void 0===a.u)throw Error(`Missing size for file "${(new TextDecoder).decode(a.o)}".`);let e=a.u>=4294967295n,i=n>=4294967295n;n+=BigInt(46+a.o.length+(e&&8))+a.u,t+=BigInt(a.o.length+46+(12*i|28*e)),r||(r=e)}return(r||n>=4294967295n)&&(t+=BigInt(76)),t+n})(function*(e){for(let t of e)yield nL(...nV(t)[0])}(e)),nW=n(34614),nG=n(93116);let nz={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function nH(e){let t,n,r,a,i=(0,h.c)(5),{regionName:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nG.E.Visual,{children:(0,m.jsx)(O.AlertIcon,{size:"medium"})}),n=(0,m.jsx)(nG.E.Heading,{children:"Something went wrong"}),i[0]=t,i[1]=n):(t=i[0],n=i[1]),i[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(nW.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),i[2]=r):r=i[2],i[3]!==s?(a=(0,m.jsx)("div",{className:nz.errorFallbackContainer,children:(0,m.jsxs)(nG.E,{children:[t,n,(0,m.jsxs)(nG.E.Description,{children:[s," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",r,"."]})]})}),i[3]=s,i[4]=a):a=i[4],a}try{nH.displayName||(nH.displayName="ErrorFallback")}catch{}let nQ={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",actions:"ContentPreview-module__actions--AGnBu",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var nK=n(83831),nJ=n(83987),nX=n(1896),nY=n(98386),nZ=n(46309);let n0={container:"DraftIssueTreeBlock-module__container--Qc8JY",rootNode:"DraftIssueTreeBlock-module__rootNode--nK1YZ",inlineButton:"DraftIssueTreeBlock-module__inlineButton--JGx_e",truncateText:"DraftIssueTreeBlock-module__truncateText--gyBpg",subIssueHeader:"DraftIssueTreeBlock-module__subIssueHeader--hSiZN"};var n1=n(30581);let n2={anchor:"VersionSelector-module__anchor--HA1Ko"};function n3(e){let t,n,r,a,i,s=(0,h.c)(16),{item:o,onVersionSelect:l}=e,{versionedItems:c,openItem:d}=(0,nd.xx)(),u=(0,nb.oy)(o.id),p=c.get(u)??[],f=p.indexOf(o.id);if((0,_.useEffect)(()=>{l&&p.length>1&&l(`Version${f+1}`)},[f,l,p.length]),p.length<=1)return null;let g=tI.W,y=f+1;s[0]!==y?(t=(0,m.jsx)(tI.W.Button,{variant:"invisible",className:n2.anchor,children:(0,m.jsx)(n1.g,{version:y,"data-testid":"version-selector"})}),s[0]=y,s[1]=t):t=s[1];let x=tI.W,v=tR.l;s[2]!==o.id||s[3]!==l||s[4]!==d?(n=(e,t)=>(0,m.jsxs)(tR.l.Item,{onSelect:()=>{d(e),l&&l(`Version${t+1}`)},selected:e===o.id,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(n1.g,{version:t+1})}),"Version ",t+1]},e),s[2]=o.id,s[3]=l,s[4]=d,s[5]=n):n=s[5];let b=p.map(n);return s[6]!==v||s[7]!==b?(r=(0,m.jsx)(v,{selectionVariant:"single",children:b}),s[6]=v,s[7]=b,s[8]=r):r=s[8],s[9]!==x.Overlay||s[10]!==r?(a=(0,m.jsx)(x.Overlay,{children:r}),s[9]=x.Overlay,s[10]=r,s[11]=a):a=s[11],s[12]!==g||s[13]!==t||s[14]!==a?(i=(0,m.jsxs)(g,{children:[t,a]}),s[12]=g,s[13]=t,s[14]=a,s[15]=i):i=s[15],i}try{n3.displayName||(n3.displayName="VersionSelector")}catch{}var n4=n(653),n5=n(21059),n6=n(42080),n7=n(9852),n8=n(12528),n9=n(21110);let re={dialogFooter:"BulkCreateDialog-module__dialogFooter--YqZvT",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--KsQ2J",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--m5L85",treeViewContainer:"BulkCreateDialog-module__treeViewContainer--sC_4c",treeViewRootItem:"BulkCreateDialog-module__treeViewRootItem--FKXjo",treeViewSubIssueHeader:"BulkCreateDialog-module__treeViewSubIssueHeader--iSLte",treeViewTree:"BulkCreateDialog-module__treeViewTree--wmmhn",treeViewSubTree:"BulkCreateDialog-module__treeViewSubTree--iDcaC",treeViewItem:"BulkCreateDialog-module__treeViewItem--ZkmMR",treeViewItemContent:"BulkCreateDialog-module__treeViewItemContent--CiEXV"};var rt=n(60439),rn=n(94747),rr=n(97286);function ra(e,t){for(let n of(t(e),e.children))ra(n,t)}function ri(){let e,t=(0,h.c)(3),{items:n,versionedItems:r}=(0,nd.xx)();if(t[0]!==n||t[1]!==r){let a=[...r.entries()].filter(rl).map(e=>{let[,t]=e,r=t.at(-1);return r?n.get(r):void 0}).filter(ro);for(let t of(e=a.reduce(rs,new Map),a)){if(!t.parentTag)continue;let n=e.get(t.parentTag),r=e.get(t.tag);n&&r&&(r.parent=n,n.children.push(r))}t[0]=n,t[1]=r,t[2]=e}else e=t[2];return e}function rs(e,t){return e.set(t.tag,{item:t,parent:null,children:[]}),e}function ro(e){return!!e}function rl(e){let[t]=e;return t.startsWith("new-issue:")}var rc=n(27221),rd=n(13468);function ru(){let e,t,n=(0,h.c)(4),{messages:r}=(0,z.Pk)();n[0]!==r?(e=(0,rd.B)(r),n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):rm(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function rm(e,t,n){let r=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of r||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let r=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),r=n.type.split("/")[1],a=`copilot-image.${r}`,i=await createImageBitmap(n),s=i.width;return i.close(),{file:new File([n],a,{type:n.type}),url:e,width:s}}),i=await Promise.all(r);for(let n of(await Promise.all(i.map(async e=>{if(e)return{uploadedFile:await (0,rc.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:r,width:a}=n,i=t.url;if(i){let t=RegExp(`!\\[(.*?)\\]\\(${r}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${i}" />`)}}(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function rh(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var rp=n(99377),rf=n(44435);function rg(e){let{messages:t}=(0,z.Pk)();return`new-issue:${e}#${t.length}`}function ry({issueNode:e,onComplete:t,onCancel:n}){let r=(0,_.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,_.useMemo)(()=>{let e=0;return ra(r,()=>e++),e},[r]),{mutate:i,isLoading:s,data:o,isError:l,error:c}=function(e){let t,n,r,a=(0,h.c)(12),{issueNode:i}=e;a[0]!==i?(t={issueNode:i},a[0]=i,a[1]=t):t=a[1];let s=function(e){let t,n,r,a=(0,h.c)(9),{issueNode:i}=e,s=(0,nc.useRelayEnvironment)(),o=ru();return a[0]!==i.item.tag?(t=["copilot-issues-bulk-create",i.item.tag],a[0]=i.item.tag,a[1]=t):t=a[1],a[2]!==s||a[3]!==i||a[4]!==o?(n=async()=>{let e=new Map;ra(i,t=>e.set(t.item.tag,t.item));let t=[],n=new Map;for(let[,r]of e){let e=r.body;if(e&&r.repository){let t=n.get(r.repository);if(!t){let[e,a]=r.repository.split("/");null!=e&&null!=a&&(t=await (0,rt.tZ)(s,e,a),n.set(r.repository,t))}e=await o(t,e)}t.push({title:r.name,tag:r.tag,repository_nwo:r.repository,body:e,parent_tag:r.parentTag,labels:r.labels,assignees:r.assignees,milestone:r.milestone,issue_type:r.issueType,template:r.template,projects:r.projects})}let r=await (0,F.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:t}}});if(429===r.status)throw Error((await r.json()).error||"Rate limit exceeded. Please try again later.");if(!r.ok)throw Error((await r.json()).error.message||"Failed to create issues.");return await r.json()},a[2]=s,a[3]=i,a[4]=o,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(r={mutationKey:t,mutationFn:n},a[6]=t,a[7]=n,a[8]=r):r=a[8],(0,rn.n)(r)}(t),o=function(e){let t,n,r,a=(0,h.c)(7),i=!!e;return a[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async()=>{let t=await (0,F.Sr)(e);if(!t.ok){let e=await t.json();throw Error(e?.job.error_message||"Failed to fetch job status")}return await t.json()},a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==i||a[4]!==t||a[5]!==n?(r={enabled:i,queryKey:t,queryFn:n,refetchInterval:rh},a[3]=i,a[4]=t,a[5]=n,a[6]=r):r=a[6],(0,rr.I)(r)}(s.data?.jobStatusUrl),l=s.error||o.error,c=s.isError||o.isError;return a[2]!==s.isPending||a[3]!==o.data?.job||a[4]!==o.isLoading?(n=s.isPending||o.isLoading||["pending","queued","started"].includes(o.data?.job.state||""),a[2]=s.isPending,a[3]=o.data?.job,a[4]=o.isLoading,a[5]=n):n=a[5],a[6]!==s.mutate||a[7]!==o.data||a[8]!==l||a[9]!==c||a[10]!==n?(r={mutate:s.mutate,data:o.data,error:l,isError:c,isLoading:n},a[6]=s.mutate,a[7]=o.data,a[8]=l,a[9]=c,a[10]=n,a[11]=r):r=a[11],r}({issueNode:r}),d=function(e){let t,n=(0,h.c)(10),{tag:r}=e,a=(0,z.Pk)(),i=(0,g.b)(),{items:s,versionedItems:o,updateItem:l,openItem:c,closeItems:d,openPreviewPane:u}=(0,nd.xx)(),m=rg(r);return n[0]!==d||n[1]!==s||n[2]!==i||n[3]!==c||n[4]!==u||n[5]!==a||n[6]!==l||n[7]!==m||n[8]!==o?(t=async e=>{let{parentIssue:t,createdIssues:n}=e;(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_BULK_CREATED",mode:"immersive",threadId:(0,rf.W)(a)?.id,repositoryId:t.repository.databaseId});let r=[],h=[];for(let e of n){let t=e.number,n=e.repository.owner.login,i=e.repository.name,s=e.title;l({id:`issue:${n}/${i}/${t}`,messageId:rp.Wp,name:s,owner:n,repo:i,number:t,href:e.url,type:"issue"});let c=`new-issue:${e.tag}`;for(let e of o.get(c)??[])r.push(e);h.push(`[${n}/${i}#${t}](${e.url})`),e.url,a.currentUserLogin}let p=`issue:${t.repository.owner.login}/${t.repository.name}/${t.number}`;d(r),c(p),u();let f=[{type:"text",name:'timeline-event: {"type": "issue-created", "markdownContent": "Creating issues..."}',text:`Fetch the details for all saved issues and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
\`\`\``}],g=s.get(m);g?.type==="new-issue"&&f.push((0,nb.g)(g)),await i.sendChatMessage({thread:(0,rf.W)(a),content:`Saved the issues to ${h.join(", ")} in repo ${t.repository.name}`,references:f,topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=d,n[1]=s,n[2]=i,n[3]=c,n[4]=u,n[5]=a,n[6]=l,n[7]=m,n[8]=o,n[9]=t):t=n[9],t}(r.item);(0,_.useEffect)(()=>{if(null==o||"success"!==o.job.state)return;let e=new Map;ra(r,t=>{e.set(t.item.tag,t.item)});let n=o.job.completed_issues.map(t=>{let n=e.get(t.tag),[r,a]=n.repository.split("/");return{tag:t.tag,databaseId:t.id,id:"",number:t.number,repository:{databaseId:t.repository_id,id:"",name:a,owner:{login:r}},title:n.name,url:t.href}}),a={parentIssue:n.find(e=>e.tag===r.item.tag),createdIssues:n};t(),d(a)},[r,o,t,d]);let u=(0,_.useCallback)(()=>{s||i()},[s,i]),p=(0,_.useCallback)(()=>{s||n()},[s,n]);return(0,m.jsxs)(n7.l,{title:"Create all linked draft issues?",onClose:p,renderFooter:()=>(0,m.jsxs)(n7.l.Footer,{className:re.dialogFooter,children:[(0,m.jsxs)("div",{className:re.dialogFooterStatus,children:[s&&(0,m.jsx)(n9.v,{variant:"success",children:"Creating issues..."}),l&&(0,m.jsx)(n9.v,{variant:"critical",children:c?.message})]}),(0,m.jsxs)("div",{className:re.dialogFooterActions,children:[(0,m.jsx)(eM.Q,{variant:"default",onClick:p,inactive:s,children:"Cancel"}),(0,m.jsxs)(eM.Q,{variant:"primary",onClick:u,loading:s,children:["Create ",a," issues"]})]})]}),children:[(0,m.jsx)("p",{children:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts."}),(0,m.jsx)(rx,{issueNode:r})]})}function rx({issueNode:e}){let{versionedItems:t}=(0,nd.xx)(),n=(0,_.useMemo)(()=>{let t=0;return ra(e,e=>{e.parent&&t++}),t},[e]),r=e=>{let n=(0,nb.LU)(e.item.id,t);return(0,m.jsxs)("li",{className:re.treeViewItem,children:[(0,m.jsxs)("div",{className:re.treeViewItemContent,children:[(0,m.jsx)(O.IssueDraftIcon,{}),e.item.name,null!=n&&(0,m.jsx)(n1.g,{version:n})]}),e.children.length>0&&(0,m.jsx)("ul",{className:re.treeViewSubTree,children:e.children.map(r)})]},e.item.tag)},a=(0,nb.LU)(e.item.id,t);return(0,m.jsxs)("div",{className:re.treeViewContainer,children:[(0,m.jsxs)("div",{className:re.treeViewRootItem,children:[(0,m.jsx)(O.IssueDraftIcon,{}),e.item.name,null!=a&&(0,m.jsx)(n1.g,{version:a})]}),e.children.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:re.treeViewSubIssueHeader,children:["Sub-issues",(0,m.jsx)(n8.A,{children:n})]}),(0,m.jsx)("ul",{className:re.treeViewTree,children:e.children.map(r)})]})]})}try{ry.displayName||(ry.displayName="BulkCreateDialog")}catch{}try{rx.displayName||(rx.displayName="IssueTree")}catch{}function rv({issueTemplate:e,issueNode:t,issueFormRef:n,onClose:r}){let[a,i]=_.useState(!1),s=_.useRef(null),{repository:o}=(0,n5.u)(),l=!e&&!o?.isBlankIssuesEnabled,{clearSessionData:c}=(0,n5.u)(),d=(0,_.useCallback)(()=>{c(),n.current?.clearSessionStorage()},[c,n]),u=(0,_.useCallback)(()=>{d(),r?.()},[d,r]),[h,p]=_.useState(!1);return ej.W.draftIssueTree&&(t?.parent||t?.children.length)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n6.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-bulk-issue-dialog-button",ref:s,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),p(!0)},children:"Create all"}),h&&(0,m.jsx)(ry,{issueNode:t,onComplete:()=>{p(!1),u()},onCancel:()=>{p(!1)}})]}):l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n6.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:s,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),i(!0)},children:"Create"}),a&&(0,m.jsx)(n7.l,{title:"Select a template",onClose:()=>i(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>i(!1)}],returnFocusRef:s,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."})]}):(0,m.jsx)(n4.l,{hideCreateMore:!0,className:"width-auto"})}try{rv.displayName||(rv.displayName="CreateIssueButton")}catch{}var r_=n(70981),rb=n(13432),rS=n(13233),rC=n(7096);function rj(e){let t,n,r,a,i,s=(0,h.c)(20),{className:o,messageId:l,messageIndex:c,messageTimestamp:d,references:u,size:p}=e;s[0]!==l||s[1]!==c||s[2]!==d?(t={messageId:l,messageIndex:c,messageTimestamp:d},s[0]=l,s[1]=c,s[2]=d,s[3]=t):t=s[3];let f=nS(t),{updateItem:g,versionedItems:y}=(0,nd.xx)();return s[4]!==l||s[5]!==c||s[6]!==d||s[7]!==u||s[8]!==g?(n=()=>{for(let e of u){let t=(0,nb.oR)({ref:e,messageIndex:c,messageId:l,timestamp:d});null!=t&&g(t)}},r=[l,c,d,u,g],s[4]=l,s[5]=c,s[6]=d,s[7]=u,s[8]=g,s[9]=n,s[10]=r):(n=s[9],r=s[10]),(0,_.useEffect)(n,r),s[11]!==c||s[12]!==y?(a=e=>(0,nb.wt)(e,c,y),s[11]=c,s[12]=y,s[13]=a):a=s[13],s[14]!==o||s[15]!==f||s[16]!==u||s[17]!==p||s[18]!==a?(i=(0,m.jsx)(rC.t,{references:u,onClickReference:f,size:p,className:o,getReferenceVersion:a}),s[14]=o,s[15]=f,s[16]=u,s[17]=p,s[18]=a,s[19]=i):i=s[19],i}try{rj.displayName||(rj.displayName="ChatMessageReferences")}catch{}var rw=n(91936);let rN=(0,_.createContext)(null),rI=()=>{let e=(0,_.useContext)(rN);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{rN.displayName||(rN.displayName="ContentPreviewBlockContext")}catch{}var rE=n(23896),rR=n(65011),rT=n(57746),rk=n(63867);function rA(e){let t,n,r,a=(0,h.c)(4),{className:i}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,m.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),a[1]=n):n=a[1],a[2]!==i?(r=(0,m.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:i,children:[t,n]}),a[2]=i,a[3]=r):r=a[3],r}try{rA.displayName||(rA.displayName="ExpandIcon")}catch{}let rD={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg",expandIconContainer:"FileBlock-module__expandIconContainer--JwHHA",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--BRMgP"};function rP(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,b,S,C,j=(0,h.c)(71),{language:w,name:N,code:I,line:E,children:R,isClipped:T,isStreaming:k,index:A,startOffset:D,endOffset:P}=e,{message:L}=(0,eA.V)(),{updateItem:M,openItem:F,openPreviewPane:B,versionedItems:U,getOpenItems:$}=(0,nd.xx)(),{messageIndex:V,messageId:q,messageTimestamp:W,autoOpenPreviewPane:G,markdown:z,hasAutoOpenedPreviewPaneRef:H,setHasAutoOpenedPreviewPane:Q}=rI(),{name:K}=(0,rR.vL)(w),J=`file:${N}`,X=`${J}#${V}.${E}`,Y=!!I,Z=U.get(J)??[],ee=Z.indexOf(X),et=Z.length>1&&-1!==ee?ee+1:null;j[0]!==$||j[1]!==X||j[2]!==A||j[3]!==F||j[4]!==B?(t=(e,t)=>{(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),F(X,void 0===t||t||$().length<1||0===A),e&&B()},j[0]=$,j[1]=X,j[2]=A,j[3]=F,j[4]=B,j[5]=t):t=j[5];let en=t;j[6]!==I||j[7]!==X||j[8]!==k||j[9]!==w||j[10]!==z||j[11]!==q||j[12]!==W||j[13]!==N||j[14]!==Y||j[15]!==M?(n=()=>{let e=I?.trimEnd();Y&&q!==rp.Wp&&-1!==z.indexOf(e)&&M({messageId:q,id:X,language:w,name:N,value:I,type:"file",timestamp:new Date(W),isStreaming:k,isUserEdited:!1})},r=[I,w,q,N,M,X,Y,W,k,z],j[6]=I,j[7]=X,j[8]=k,j[9]=w,j[10]=z,j[11]=q,j[12]=W,j[13]=N,j[14]=Y,j[15]=M,j[16]=n,j[17]=r):(n=j[16],r=j[17]),(0,_.useEffect)(n,r),j[18]!==G||j[19]!==H||j[20]!==k||j[21]!==q||j[22]!==en||j[23]!==Y||j[24]!==Q?(a=()=>{k&&Y&&q!==rp.Wp&&(en(G&&!H.current,!1),Q(!0))},i=[k,Y,en,G,q,H,Q],j[18]=G,j[19]=H,j[20]=k,j[21]=q,j[22]=en,j[23]=Y,j[24]=Q,j[25]=a,j[26]=i):(a=j[25],i=j[26]),(0,_.useEffect)(a,i);let[er,ea]=(0,_.useState)(!1),{publicCodeReferences:ei,codeVulnerabilities:es}=(0,rE.R)(L.copilotAnnotations,D,P);j[27]!==en?(s=()=>en(!0),j[27]=en,j[28]=s):s=j[28];let eo=`View file: ${N}`,el=`chat-message-view-file-${N}`,ec=k?(0,m.jsx)(rk.A,{size:"small",className:rw.sX}):rR.Yr.has(K)?(0,m.jsx)(O.MarkdownIcon,{className:rw.sX}):(0,m.jsx)(O.CodeIcon,{className:rw.sX});j[29]!==N?(o=(0,m.jsx)("span",{className:rD.name,children:N}),j[29]=N,j[30]=o):o=j[30],j[31]!==et?(l=null!==et&&(0,m.jsx)(n1.g,{version:et}),j[31]=et,j[32]=l):l=j[32],j[33]!==rD.language||j[34]!==ec||j[35]!==o||j[36]!==l?(c=(0,m.jsxs)("div",{className:rD.language,children:[ec,o,l]}),j[33]=rD.language,j[34]=ec,j[35]=o,j[36]=l,j[37]=c):c=j[37],j[38]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("div",{className:rD.expandIconContainer,children:(0,m.jsx)(rA,{})}),j[38]=d):d=j[38],j[39]!==rD.header||j[40]!==c?(u=(0,m.jsxs)("div",{className:rD.header,children:[c,d]}),j[39]=rD.header,j[40]=c,j[41]=u):u=j[41];let ed=T&&rD.isClipped;return j[42]!==ed?(p=(0,v.$)(rD.previewCode,ed),j[42]=ed,j[43]=p):p=j[43],j[44]!==R?(f=(0,m.jsx)("code",{children:R}),j[44]=R,j[45]=f):f=j[45],j[46]!==p||j[47]!==f?(g=(0,m.jsx)("pre",{className:p,"aria-hidden":!0,children:f}),j[46]=p,j[47]=f,j[48]=g):g=j[48],j[49]!==el||j[50]!==u||j[51]!==g||j[52]!==rD.container||j[53]!==s||j[54]!==eo?(y=(0,m.jsxs)("button",{className:rD.container,onClick:s,"aria-label":eo,"data-testid":el,children:[u,g]}),j[49]=el,j[50]=u,j[51]=g,j[52]=rD.container,j[53]=s,j[54]=eo,j[55]=y):y=j[55],j[56]!==es||j[57]!==ei.length||j[58]!==ea?(x=(ei.length>0||es.length>0)&&(0,m.jsx)("div",{className:rD.insightsButtonContainer,children:(0,m.jsx)(tE.K,{variant:"invisible",size:"small",icon:O.ShieldIcon,"aria-label":"Code insights",onClick:()=>ea(!0)})}),j[56]=es,j[57]=ei.length,j[58]=ea,j[59]=x):x=j[59],j[60]!==y||j[61]!==x?(b=(0,m.jsxs)("div",{className:"position-relative",children:[y,x]}),j[60]=y,j[61]=x,j[62]=b):b=j[62],j[63]!==es||j[64]!==er||j[65]!==ei||j[66]!==ea?(S=er&&(0,m.jsx)(rT.t,{publicCodeReferences:ei,codeVulnerabilities:es,onClose:()=>ea(!1)}),j[63]=es,j[64]=er,j[65]=ei,j[66]=ea,j[67]=S):S=j[67],j[68]!==b||j[69]!==S?(C=(0,m.jsxs)(m.Fragment,{children:[b,S]}),j[68]=b,j[69]=S,j[70]=C):C=j[70],C}try{rP.displayName||(rP.displayName="FileBlock")}catch{}let rL="data-fileblock-props",rM=(0,eR.F)(rL),rO=/^name=(?<name>[^\s]+)/,rF=/^name=(?<name>[^\s]+)\n?/,rB={code:(e,t)=>{let n=(0,eR.k)(e,rL);return n?(0,m.jsx)(rP,{...n,children:e.children}):t}},rU=/^type=(?<type>[^\s]+)\n?/,r$=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;var rV=n(20382);function rq(e){let{messages:t}=(0,z.Pk)(),n=(0,rd.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let r of n){let n=/\(image(\d+)\)/,a=parseInt(r.match(n)[1],10),i=t.length-a,s=t[i]?.chatAttachmentUrl||t[i]?.url;if(s){let t=r.replace(n,`(${s})`);e=e.replace(r,t)}}return e}(e,(0,_.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}let rW={container:"DraftIssueBlock-module__container--xuyX4",icon:"DraftIssueBlock-module__icon--unPEF",previewText:"DraftIssueBlock-module__previewText--G_AS3"},rG="data-draft-issue-block",rz={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"type"in e&&"string"==typeof e.type&&(t.issueType=e.type),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),t}},rH=e=>{try{let t=(0,rV.Hh)(e);return rz.fromUnknown(t)}catch{return null}};function rQ({yaml:e,isStreaming:t}){let[n,r]=(0,_.useState)(t);(0,_.useEffect)(()=>{t&&r(!0)},[t]);let{updateItem:a,openItem:i,openPreviewPane:s,versionedItems:o,items:l}=(0,nd.xx)(),{messageId:c,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:h,setHasAutoOpenedPreviewPane:p}=rI();e=rq(e);let f=(0,_.useRef)({}),g=(0,_.useMemo)(()=>{let t=rH(e);return null!=t?(f.current=t,t):f.current},[e]);(0,_.useEffect)(()=>(0,e1.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"}),[]);let y=null!=g.tag?`new-issue:${g.tag}#${d}`:void 0,x=null!=y?(0,nb.LU)(y,o):null,v=null!=y?l.get(y):void 0,b=g.repository||v?.type!=="new-issue"?g.repository:v.repository||"",S=(0,_.useCallback)(({selectItem:e})=>{null!=y&&(i(y,e),(e||u&&!h.current)&&(s(),p(!0)),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[y,i,u,h,s,p]);(0,_.useEffect)(()=>{null!=y&&a({messageId:c,name:g.title??"",body:g.body,repository:b,id:y,type:"new-issue",tag:g.tag??"",isStreaming:t,template:g.template,issueType:g.issueType,milestone:g.milestone,assignees:g.assignees?.sort()??[],labels:g.labels?.sort()??[],projects:g.projects?.sort()??[],isUserEdited:!1,defaultValuesById:g.templateFormValues??{}})},[y,t,b,g.assignees,g.body,g.tag,g.title,g.labels,g.template,g.issueType,g.projects,g.milestone,g.templateFormValues,c,a]),(0,_.useEffect)(()=>{null!=y&&n&&S({selectItem:!0})},[y,S,n]);let C=(0,_.useCallback)(()=>S({selectItem:!0}),[S]);return(0,m.jsxs)("div",{className:rW.container,role:"button",onClick:C,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&C()},tabIndex:0,children:[t?(0,m.jsx)(rk.A,{size:"small",className:rw.sX}):(0,m.jsx)(O.IssueDraftIcon,{className:rW.icon}),(0,m.jsx)("span",{className:rW.previewText,children:g.title}),null!=x&&(0,m.jsx)(n1.g,{version:x})]})}try{rQ.displayName||(rQ.displayName="DraftIssueBlock")}catch{}let rK=(0,eR.F)(rG),rJ={div:(e,t)=>{let n=(0,eR.k)(e,rG);return n?(0,m.jsx)(rQ,{...n}):t}};var rX=n(95629),rY=n(17063),rZ=n(630),r0=n(25862),r1=n(70924),r2=n(83779),r3=n(50146);function r4({data:e,isStreaming:t}){e=rq(e);let n=(0,_.useRef)([]),r=(0,_.useMemo)(()=>{let t=function(e){try{let t=(0,rV.gh)(e);if(Array.isArray(t))return t.map(rz.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(e);return t&&(n.current=t),n.current},[e]),{updateItem:a,openItem:i,openPreviewPane:s,versionedItems:o}=(0,nd.xx)(),{messageId:l,messageIndex:c,autoOpenPreviewPane:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:h}=rI(),p=(0,_.useCallback)(e=>e.tag?`new-issue:${e.tag}#${c}`:void 0,[c]);(0,_.useEffect)(()=>{for(let e of r){let n=p(e);n&&a({messageId:l,type:"new-issue",id:n,tag:e.tag??"",parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort()??[],labels:e.labels?.sort()??[],projects:e.projects?.sort()??[],defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t})}},[p,t,r,l,c,a]);let f=(0,_.useCallback)((e,{selectItem:t})=>{let n=p(e);n&&(i(n,t),(t||d&&!u.current)&&(s(),h(!0)),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[p,i,d,u,s,h]),g=(0,_.useMemo)(()=>{let e=r.reduce((e,t)=>(e.set(t.tag,{item:t,parent:null,children:[]}),e),new Map);for(let t of r){if(!t.parentTag)continue;let n=e.get(t.parentTag),r=e.get(t.tag);n&&r&&(r.parent=n,n.children.push(r))}return Array.from(e.values()).filter(e=>!e.item.parentTag)},[r]);(0,_.useEffect)(()=>{if(!t)for(let[e,t]of g.entries())f(t.item,{selectItem:0===e})},[t,g,f]);let y=e=>{let n=p(e.item),r=n?(0,nb.LU)(n,o):null;return(0,m.jsx)(rY.r,{title:(0,m.jsx)(r1.T,{value:e.item.title??"",onClick:()=>f(e.item,{selectItem:!0}),trailingBadges:null!=r?[(0,m.jsx)(n1.g,{version:r},`${e.item.tag}#${r}`)]:void 0}),subItems:e.children.length?e.children.map(y):void 0,defaultExpanded:!0,className:"py-1",children:(0,m.jsx)(rZ.Q,{children:(0,m.jsx)(r0.D,{children:t?(0,m.jsx)(rk.A,{size:"small",className:rw.sX}):(0,m.jsx)(O.IssueDraftIcon,{className:"fgColor-muted"})})})},e.item.tag)};return(0,m.jsx)(m.Fragment,{children:g.map(e=>{let n=p(e.item),r=n?(0,nb.LU)(n,o):null,a=-1;return ra(e,()=>a++),(0,m.jsxs)("div",{className:n0.container,children:[(0,m.jsxs)("div",{className:n0.rootNode,children:[t?(0,m.jsx)(rk.A,{size:"small",className:rw.sX}):(0,m.jsx)(O.IssueDraftIcon,{className:"fgColor-muted"}),(0,m.jsx)("button",{onClick:()=>f(e.item,{selectItem:!0}),className:(0,v.$)(n0.inlineButton,n0.truncateText),children:e.item.title}),null!=r&&(0,m.jsx)(n1.g,{"data-testid":"version-label",version:r})]}),e.children.length>0&&(0,m.jsx)(rX.v,{title:"Sub-issues",header:(0,m.jsx)(r2.s,{title:(0,m.jsx)(r3.c,{title:"Sub-issues",className:"p-0 my-1",children:(0,m.jsx)(n8.A,{children:a})}),className:n0.subIssueHeader}),children:e.children.map(y)})]},e.item.tag)})})}try{r4.displayName||(r4.displayName="DraftIssueTreeBlock")}catch{}let r5="data-draft-tree-issue-block",r6=(0,eR.F)(r5);var r7=n(72534);function r8(e){let t,n,r,a,i,s,o=(0,h.c)(28),{owner:l,repo:c,issueNumber:d,href:u,children:p}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:x}=(0,nd.xx)(),{messageId:v}=rI(),b=(0,z.A3)("messages"),S=Number(d),C=`issue:${l}/${c}/${S}`;o[0]!==C||o[1]!==x?(t=x.get(C),o[0]=C,o[1]=x,o[2]=t):t=o[2];let j=t;o[3]!==j?.name||o[4]!==v||o[5]!==b||o[6]!==S||o[7]!==l||o[8]!==c?(n=function(e,t,n,r,a){if(!n||!r||!a||isNaN(a))return;let i=e.find(e=>e.id===t),s=i?.references,o=s?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===r&&e.repository.owner===n),l=o?.title;if(l)return l;let c=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${r}`&&e.data.number===a),d=c?.data;return d?.title}(b,v,l,c,S)??j?.name??`Issue #${S}`,o[3]=j?.name,o[4]=v,o[5]=b,o[6]=S,o[7]=l,o[8]=c,o[9]=n):n=o[9];let w=n;return o[10]!==u||o[11]!==C||o[12]!==v||o[13]!==S||o[14]!==l||o[15]!==c||o[16]!==w||o[17]!==f?(r=()=>{l&&c&&f({messageId:v,name:w,number:S,owner:l,repo:c,id:C,href:u,type:"issue"})},a=[C,v,u,S,l,c,w,f],o[10]=u,o[11]=C,o[12]=v,o[13]=S,o[14]=l,o[15]=c,o[16]=w,o[17]=f,o[18]=r,o[19]=a):(r=o[18],a=o[19]),(0,_.useEffect)(r,a),o[20]!==C||o[21]!==g||o[22]!==y?(i=e=>{e.metaKey||e.ctrlKey||(g(C),y(),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},o[20]=C,o[21]=g,o[22]=y,o[23]=i):i=o[23],o[24]!==p||o[25]!==u||o[26]!==i?(s=(0,m.jsx)(nW.A,{href:u,onClick:i,target:"_blank",rel:"noreferrer",children:p}),o[24]=p,o[25]=u,o[26]=i,o[27]=s):s=o[27],s}try{r8.displayName||(r8.displayName="IssueLinkBlock")}catch{}let r9="data-issuelink-props",ae=(0,eR.F)(r9),at=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,an={span:(e,t)=>{let n=(0,eR.k)(e,r9);return n?(0,m.jsx)(r8,{...n}):t}};var ar=n(27851),aa=n(39459),ai=n(89169),as=n(70892);let ao={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",toggleContent:"IssueListBlock-module__toggleContent--QwoUs",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd",toggleButton:"IssueListBlock-module__toggleButton--BwD3L",shimmer:"IssueListBlock-module__shimmer--BIYQB",toggleIcon:"IssueListBlock-module__toggleIcon--RYlGV"},al={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function ac(e){let t,n,r,a,i,s=(0,h.c)(8),{item:o,isStreaming:l}=e,c=o.author;return o.merged_at?(a=o.merged_at,i="Merged"):o.closed_at?(a=o.closed_at,i="Closed"):o.created_at&&(a=o.created_at,i="Opened"),s[0]!==a?(n=(t=a?new Date(a):null)&&isNaN(t.getTime()),s[0]=a,s[1]=t,s[2]=n):(t=s[1],n=s[2]),n&&(t=null),s[3]!==i||s[4]!==c||s[5]!==l||s[6]!==t?(r=c&&t||!l?(0,m.jsxs)("span",{className:ao.description,children:[c," ",c?i?.toLowerCase():i," ",t&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(ai.A,{date:t,format:"relative"})})]}):null,s[3]=i,s[4]=c,s[5]=l,s[6]=t,s[7]=r):r=s[7],r}let ad=e=>{try{let t=(0,rV.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(al.fromUnknown);return null}catch{return null}};function au(e){let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(39),{data:f,type:g,isStreaming:y}=e;p[0]!==f?(t=()=>ad(f)??[],p[0]=f,p[1]=t):t=p[1];let[x,b]=(0,_.useState)(t),{updateItem:S,openItem:C,openPreviewPane:j}=(0,nd.xx)(),{messageId:w}=rI(),[N,I]=(0,_.useState)(!0);p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,ar.G7)("copilot_issue_list_show_more"),p[2]=n):n=p[2];let E=n;p[3]!==N||p[4]!==x?(r=E&&N?x.slice(0,10):x,p[3]=N,p[4]=x,p[5]=r):r=p[5];let R=r,T=E&&x.length>10;p[6]!==f?(a=()=>b(e=>ad(f)??e),i=[f],p[6]=f,p[7]=a,p[8]=i):(a=p[7],i=p[8]),(0,_.useEffect)(a,i),p[9]!==g?(s=()=>{"issue"===g?(0,e1.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,e1.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},o=[g],p[9]=g,p[10]=s,p[11]=o):(s=p[10],o=p[11]),(0,_.useEffect)(s,o);let k=y&&ao.streaming;if(p[12]!==k?(l=(0,v.$)(ao.list,k),p[12]=k,p[13]=l):l=p[13],p[14]!==y||p[15]!==w||p[16]!==C||p[17]!==j||p[18]!==g||p[19]!==S||p[20]!==R){let e;p[22]!==y||p[23]!==w||p[24]!==C||p[25]!==j||p[26]!==g||p[27]!==S||p[28]!==R.length?(e=(e,t)=>{let n={...e,type:g},r=y&&t===R.length-1,{icon:a,colorClass:i}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,m.jsx)(O.IssueDraftIcon,{"aria-label":"Draft issue"}),t=ao.draft):"closed"===e.state&&e.draft&&(n=(0,m.jsx)(O.SkipIcon,{"aria-label":"Closed draft issue"}),t=ao.draft):(n=(0,m.jsx)(O.IssueClosedIcon,{"aria-label":"Closed issue"}),t=ao.done):(n=(0,m.jsx)(O.IssueOpenedIcon,{"aria-label":"Open issue"}),t=ao.open);else if("pr"===e.type){let r="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!r&&e.draft?(n=(0,m.jsx)(O.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=ao.draft):"open"!==e.state||r||e.draft?"closed"!==e.state||r?"closed"===e.state&&r&&(n=(0,m.jsx)(O.GitMergeIcon,{"aria-label":"Merged pull request"}),t=ao.done):(n=(0,m.jsx)(O.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=ao.closed):(n=(0,m.jsx)(O.GitPullRequestIcon,{"aria-label":"Pull request"}),t=ao.open)}return{icon:n,colorClass:t}}(n);return(0,m.jsx)("li",{className:ao.item,children:(0,m.jsxs)("div",{className:ao.content,children:[(0,m.jsx)("div",{className:(0,v.$)(i,ao.icon),children:a}),(0,m.jsxs)("div",{className:ao.header,children:[r&&!n.title?null:(0,m.jsx)("a",{...(0,nY.G)("issue-list-item-link"),href:n.url??"#",className:ao.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),n.url))if("issue"===n.type){(0,e1.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:r}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(n.url);if(e&&t&&r){let a=`issue:${e}/${t}/${r}`;S({messageId:w,name:n.title??`Issue #${r}`,number:r,owner:e,repo:t,id:a,href:n.url,type:"issue"}),C(a),j()}}else(0,e1.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(n.url,"_self")},target:"_blank",rel:"noreferrer",children:n.title||void 0===n.number?(0,m.jsxs)(m.Fragment,{children:[n.title?(0,m.jsx)("span",{className:ao.title,children:n.title}):(0,m.jsx)("span",{className:(0,v.$)(ao.title,ao.unknownTitle),children:"Unknown issue"}),void 0!==n.number&&(0,m.jsxs)("span",{className:ao.number,children:["#",n.number]})]}):(0,m.jsxs)("span",{className:ao.title,children:["#",n.number]})}),(0,m.jsxs)("div",{className:ao.labels,children:[n.labels?.length?n.labels.map(ah):null,0!==n.comments&&void 0!==n.comments&&(0,m.jsxs)(ey.A,{size:"small",variant:"secondary",children:[(0,m.jsx)(O.CommentIcon,{className:ao.labelIcon,size:12}),n.comments]})]})]}),(0,m.jsx)(ac,{item:n,isStreaming:r}),(0,m.jsx)("div",{className:ao.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,m.jsx)("div",{className:ao.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,m.jsx)(O.PersonIcon,{size:12})}):(0,m.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,m.jsx)(as.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(am)})})})]})},t)},p[22]=y,p[23]=w,p[24]=C,p[25]=j,p[26]=g,p[27]=S,p[28]=R.length,p[29]=e):e=p[29],c=R.map(e),p[14]=y,p[15]=w,p[16]=C,p[17]=j,p[18]=g,p[19]=S,p[20]=R,p[21]=c}else c=p[21];return p[30]!==N||p[31]!==T||p[32]!==y||p[33]!==x?(d=T&&(0,m.jsx)("li",{className:ao.item,children:(0,m.jsx)("div",{className:(0,v.$)(ao.content,ao.toggleContent),children:(0,m.jsxs)("button",{type:"button",className:(0,v.$)(ao.toggleButton,y&&ao.shimmer),onClick:()=>I(!N),"aria-expanded":!N,"aria-controls":"issue-list",children:[(0,m.jsx)("span",{className:ao.toggleIcon,children:N?(0,m.jsx)(O.UnfoldIcon,{size:16}):(0,m.jsx)(O.FoldIcon,{size:16})}),N?`Show ${x.length-10} more`:"Show less"]})})}),p[30]=N,p[31]=T,p[32]=y,p[33]=x,p[34]=d):d=p[34],p[35]!==c||p[36]!==d||p[37]!==l?(u=(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{id:"issue-list",className:l,children:[c,d]})}),p[35]=c,p[36]=d,p[37]=l,p[38]=u):u=p[38],u}function am(e){return(0,m.jsx)(aa.r,{src:e,alt:"Assignee avatar"},e)}function ah(e){return(0,m.jsx)(ey.A,{size:"small",variant:"secondary",children:e},e)}try{ac.displayName||(ac.displayName="Description")}catch{}try{au.displayName||(au.displayName="ListBlock")}catch{}let ap="data-issues-list-block",af=(0,eR.F)(ap),ag={div:(e,t)=>{let n=(0,eR.k)(e,ap);return n?(0,m.jsx)(au,{...n}):t}},ay={markdownOverrides:"MarkdownViewer-module__markdownOverrides--ghD5J"},ax=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b=(0,h.c)(35);b[0]!==e?({messageId:r,messageIndex:a,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,...s}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=s):(t=b[1],n=b[2],r=b[3],a=b[4],i=b[5],s=b[6]);let S=(0,_.useRef)(!1);b[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{S.current=e},b[7]=o):o=b[7];let C=o;b[8]!==s.extensions?(c=s.extensions??[],d=function(e){return{transformMarkdown:t=>(0,eT.YR)(t,"code",t=>{let n=t.lang??"",{name:r,code:a}=function(e,t){let n=e&&rO.exec(e);if(n)return{name:n.groups?.name,code:t};let r=rF.exec(t);return r?{name:r.groups?.name,code:t.replace(rF,"")}:{code:t}}(t.meta??void 0,t.value);if(!r)return;e.includes(r)||e.push(r);let i=a.split(`
`,6),s=6===i.length,o=s?i.join(`
`):`${i.join(`
`)}
`,l=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[rM]:JSON.stringify({language:n,name:r,code:a,line:l,isStreaming:t.isStreaming??!1,isClipped:s,index:e.indexOf(r),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,eT.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&"code"===r.tagName&&rM in r.properties&&n.children.splice(t,1,r)}),reactComponents:rB}}([]),b[8]=s.extensions,b[9]=c,b[10]=d):(c=b[9],d=b[10]),b[11]===Symbol.for("react.memo_cache_sentinel")?(u={transformMarkdown:e=>(0,eT.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=at.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:r="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[ae]:JSON.stringify({owner:n,repo:r,issueNumber:a,href:e.url,children:(0,r7.d)(e)})}}}),reactComponents:an},p={transformMarkdown:e=>(0,eT.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=r$(rU.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[af]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eT.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&af in r.properties&&n.children.splice(t,1,r)}),reactComponents:ag},b[11]=u,b[12]=p):(u=b[11],p=b[12]),b[13]!==c||b[14]!==d?(f=[...c,d,u,p],b[13]=c,b[14]=d,b[15]=f):f=b[15];let j=f;if(ej.W.draftIssueUI){let e,t,n=j;b[16]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,eT.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue"===r$(rU.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rK]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eT.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&rK in r.properties&&n.children.splice(t,1,r)}),reactComponents:rJ},b[16]=e):e=b[16],b[17]!==j?(t=[...n,e],b[17]=j,b[18]=t):t=b[18],j=t}if(ej.W.draftIssueTree){let e,t,n=j;b[19]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,eT.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue-tree"===r$(rU.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[r6]:JSON.stringify({data:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eT.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&r6 in r.properties&&n.children.splice(t,1,r)}),reactComponents:{div:(e,t)=>{let n=(0,eR.k)(e,r5);return n?(0,m.jsx)(r4,{...n}):t}}},b[19]=e):e=b[19],b[20]!==j?(t=[...n,e],b[20]=j,b[21]=t):t=b[21],j=t}return l=j,b[22]!==t||b[23]!==n||b[24]!==r||b[25]!==a||b[26]!==i?(y={messageId:r,messageIndex:a,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,hasAutoOpenedPreviewPaneRef:S,setHasAutoOpenedPreviewPane:C},b[22]=t,b[23]=n,b[24]=r,b[25]=a,b[26]=i,b[27]=y):y=b[27],g=y,b[28]!==l||b[29]!==n||b[30]!==s?(x=(0,m.jsx)(rw.To,{...s,markdown:n,extensions:l,chatMode:"immersive",className:ay.markdownOverrides}),b[28]=l,b[29]=n,b[30]=s,b[31]=x):x=b[31],b[32]!==x||b[33]!==g?(v=(0,m.jsx)(rN.Provider,{value:g,children:x}),b[32]=x,b[33]=g,b[34]=v):v=b[34],v},av=_.memo(ax);try{ax.displayName||(ax.displayName="MarkdownViewer")}catch{}try{av.displayName||(av.displayName="MemoizedMarkdownViewer")}catch{}let a_={timelineEvent:"TimelineEvents-module__timelineEvent--Piv5d",icon:"TimelineEvents-module__icon--IYNGr",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--vlwlp TimelineEvents-module__timelineEvent--Piv5d",references:"TimelineEvents-module__references--r1iWF ChatMessage-module__references--Kunt2"};function ab(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function aS(e,t){return e.references?.some(e=>ab(e)&&(void 0===t||e.name.startsWith(`timeline-event: {"type": "${t}"`)))??!1}function aC(e){let t,n,r,a=(0,h.c)(10),{message:i,messageIndex:s,isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}=e;return a[0]!==i||a[1]!==s?(t=aS(i)&&(0,m.jsx)(aj,{message:i,messageIndex:s}),a[0]=i,a[1]=s,a[2]=t):t=a[2],a[3]!==c||a[4]!==l||a[5]!==o?(n=(0,m.jsx)(aN,{isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}),a[3]=c,a[4]=l,a[5]=o,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[t,n]}),a[7]=t,a[8]=n,a[9]=r):r=a[9],r}function aj(e){let t,n,r,a,i,s,o,l=(0,h.c)(24),{message:c,messageIndex:d}=e,{updateItem:u}=(0,nd.xx)();if(l[0]!==c.createdAt||l[1]!==c.id||l[2]!==c.references||l[3]!==d||l[4]!==u?(t=()=>{if(c.references)for(let e of c.references){let t=(0,nb.oR)({ref:e,messageIndex:d,messageId:c.id,timestamp:c.createdAt});null!=t&&u(t)}},n=[c.references,c.id,d,c.createdAt,u],l[0]=c.createdAt,l[1]=c.id,l[2]=c.references,l[3]=d,l[4]=u,l[5]=t,l[6]=n):(t=l[5],n=l[6]),(0,_.useEffect)(t,n),l[7]!==c.references){r=Symbol.for("react.early_return_sentinel");e:{let e=c.references?.filter(aw);if(!e){r=void 0;break e}for(let t of(a=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||O.CheckIcon;a.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}l[7]=c.references,l[8]=r,l[9]=a}else r=l[8],a=l[9];return r!==Symbol.for("react.early_return_sentinel")?r:(l[10]!==c.createdAt||l[11]!==c.id||l[12]!==c.references||l[13]!==d?(i=c.references&&c.references.length>0&&(0,m.jsx)(rj,{className:a_.references,messageId:c.id,messageTimestamp:c.createdAt,messageIndex:d,references:c.references,size:"medium"}),l[10]=c.createdAt,l[11]=c.id,l[12]=c.references,l[13]=d,l[14]=i):i=l[14],l[15]!==c.content||l[16]!==c.createdAt||l[17]!==c.id||l[18]!==d||l[19]!==a?(s=a.map(e=>{let{type:t,markdownContent:n,icon:r}=e;return(0,m.jsxs)("div",{className:a_.timelineEvent,children:[(0,m.jsx)(r,{className:a_.icon}),(0,m.jsx)(ax,{autoOpenPreviewPane:!1,markdown:n,messageId:c.id,messageIndex:d,messageTimestamp:c.createdAt,accessibleHeader:(0,eC.hV)("Timeline",c.content??"")})]},t)}),l[15]=c.content,l[16]=c.createdAt,l[17]=c.id,l[18]=d,l[19]=a,l[20]=s):s=l[20],l[21]!==i||l[22]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[21]=i,l[22]=s,l[23]=o):o=l[23],o)}function aw(e){return ab(e)}function aN(e){let t,n,r,a=(0,h.c)(9),{isSharedMessage:i,isViewingSharedThread:s,isLatestMessage:o}=e;return a[0]!==i||a[1]!==s?(t=i&&!s&&(0,m.jsxs)("div",{className:a_.situationalTimelineEvent,children:[(0,m.jsx)(O.LinkIcon,{className:a_.icon})," Messages up to this point are included in shared link"]}),a[0]=i,a[1]=s,a[2]=t):t=a[2],a[3]!==o||a[4]!==s?(n=o&&ej.W.copilotDuplicateThread&&s&&(0,m.jsxs)("div",{className:a_.situationalTimelineEvent,children:[(0,m.jsx)(O.RepoForkedIcon,{className:a_.icon})," Messages beyond this point will start a new private conversation"]}),a[3]=o,a[4]=s,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[t,n]}),a[6]=t,a[7]=n,a[8]=r):r=a[8],r}try{aC.displayName||(aC.displayName="TimelineEvents")}catch{}try{aj.displayName||(aj.displayName="UserMessageTimelineEvent")}catch{}try{aN.displayName||(aN.displayName="SituationalTimelineEvents")}catch{}let aI={container:"FailureState-module__container--_USh9",icon:"FailureState-module__icon--mLSLn",heading:"FailureState-module__heading--zWxg1",subtitle:"FailureState-module__subtitle--RsZIp"};function aE(e){let t,n,r,a,i,s=(0,h.c)(11),{title:o,description:l,icon:c}=e;return s[0]!==c?(t=(0,m.jsx)(c,{size:24,className:aI.icon}),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),s[2]=n):n=s[2],s[3]!==o?(r=(0,m.jsx)("h2",{className:aI.heading,children:o}),s[3]=o,s[4]=r):r=s[4],s[5]!==l?(a=(0,m.jsx)("p",{className:aI.subtitle,children:l}),s[5]=l,s[6]=a):a=s[6],s[7]!==t||s[8]!==r||s[9]!==a?(i=(0,m.jsxs)("div",{className:aI.container,children:[t,n,r,a]}),s[7]=t,s[8]=r,s[9]=a,s[10]=i):i=s[10],i}try{aE.displayName||(aE.displayName="FailureState")}catch{}var aR=n(52374),aT=n(11057),ak=n(69487);function aA(e){return(0,ak.readInlineData)(aR.G1,e)}function aD(e){return!!e}var aP=n(23812),aL=n(46996);function aM(e){let{openItem:t,updateItem:n}=(0,nd.xx)(),{selectedThreadID:r}=(0,z.Pk)(),a=rg(e.tag),i=`edited-${r}-${a}`,[s,o]=(0,aP.Fo)(i,void 0);return(0,_.useCallback)((i,s=!1)=>{let l,c=!1;for(l in i)(0,aL.A)(i[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:r,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...i};!s&&(d.id=a,d.isUserEdited=!0,ej.W.copilotPersistEditedDraftIssues&&o(d)),n(d),t(d.id)},[e,n,t,r,a,o])}function aO(e){return e.login}function aF(e){return e.login}let aB=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},r={defaultValue:null,kind:"LocalArgument",name:"repo"},a=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,r],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,r,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},s],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();aB.hash="e88ca04244b8cb67aad293081213c7ad";var aU=n(73966);function a$(e){return(0,aU.P5)(e)}function aV(e){return!!e}function aq(e){return e.name}function aW(e){return e.name}var aG=n(71400);function az(e){return(0,ak.readInlineData)(aG.xm,e)}function aH(e){return!!e}var aQ=n(90189);function aK(e){return!1===e.hasReachedItemsLimit}function aJ(e){return!1===e.closed}function aX(e){return e.toLowerCase()}function aY(e,t){return e.set(t.id,t),e}function aZ(e){return(0,ak.readInlineData)(aQ.dW,e)}function a0(e){return!!e}function a1(e){return e?.node}function a2(e){return(0,ak.readInlineData)(aQ.dW,e)}function a3(e){return!!e}function a4(e){return e?.node}function a5(e){return(0,ak.readInlineData)(aQ.dW,e)}function a6(e){return!!e}function a7(e){return e?.node}function a8(e){return(0,ak.readInlineData)(aQ.dW,e)}function a9(e){return!!e}function ie(e){return e.title}function it(e){return e.title}var ir=n(3213);function ia(e){return(0,ak.readInlineData)(ir.sH,e)}function ii(e){return!!e}function is(e){return e?.node}function io(e,t){return e?.toLowerCase()===t?.toLowerCase()}function il({draftIssue:e,template:t,issueFormRef:n,onCreate:r,onChange:a,onClose:i,onBeforeCreate:s,onFieldChange:o}){let{name:l,body:c="",defaultValuesById:d}=e,{repository:u,clearSessionData:p}=(0,n5.u)(),[f,y]=(0,_.useState)(l),[x,v]=(0,_.useState)(c),b=function(){let e,t=(0,h.c)(3),n=(0,g.b)(),r=(0,z.Pk)();return t[0]!==n||t[1]!==r?(e=async(e,t)=>{let a;if(e.parentMessageID&&(a=r.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!a||!a.content)return;let i={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:a.content,icon:O.XIcon};await n.sendChatMessage({thread:(0,rf.W)(r),content:a.content,references:[...a.references??[],i],topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model,parentMessageId:e.id})},t[0]=n,t[1]=r,t[2]=e):e=t[2],e}(),S=(0,z.Pk)(),C=(0,_.useCallback)(()=>{p(),n.current?.clearSessionStorage()},[p,n]),j=(0,_.useCallback)(()=>{C(),i?.()},[C,i]);if((0,_.useEffect)(()=>{y(l),v(c)},[c,l]),!function(e){let t,n,r,a,i,s,o,l=(0,h.c)(26),{repository:c,assignees:d,setAssignees:u}=(0,n5.u)(),[m,p]=(0,_.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.assignees||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,assignees:e.assignees},l[0]=e.assignees,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:x}=function(e){let t,n,r,a,i,s=(0,h.c)(16),{owner:o,repo:l,assignees:c}=e,d=(0,nc.useRelayEnvironment)();s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,aT.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),s[0]=t):t=s[0];let u=t;return s[1]!==d?(n=JSON.stringify(d),s[1]=d,s[2]=n):n=s[2],s[3]!==c||s[4]!==o||s[5]!==l||s[6]!==n?(r=["copilot-immersive-assignees",n,u,o,l,c],s[3]=c,s[4]=o,s[5]=l,s[6]=n,s[7]=r):r=s[7],s[8]!==c||s[9]!==d||s[10]!==o||s[11]!==l?(a=async()=>{if(!o||!l||!c)return[];let e=await (0,nt.SD)({environment:d,query:aR.OE,variables:{owner:o,name:l,loginNames:c.join(",")??[],first:c.length??0,capabilities:u}}).toPromise();return e?.repository?.suggestedActors?.ok?(e?.repository?.suggestedActors?.value.nodes??[]).filter(aD).map(aA):[]},s[8]=c,s[9]=d,s[10]=o,s[11]=l,s[12]=a):a=s[12],s[13]!==r||s[14]!==a?(i={queryKey:r,queryFn:a},s[13]=r,s[14]=a,s[15]=i):i=s[15],(0,rr.I)(i)}(t);l[4]!==x?(n=x?.map(aF)??[],l[4]=x,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(r={...e,assignees:n},l[6]=e,l[7]=n,l[8]=r):r=l[8];let v=aM(r);l[9]!==y||l[10]!==c||l[11]!==x||l[12]!==u?(a=()=>{!y&&x&&(c?.viewerIssueCreationPermissions?.assignable?u(x):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=x,l[12]=u,l[13]=a):a=l[13];let b=c?.viewerIssueCreationPermissions?.assignable;l[14]!==y||l[15]!==c||l[16]!==x||l[17]!==u||l[18]!==b?(i=[y,x,u,b,c],l[14]=y,l[15]=c,l[16]=x,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,_.useEffect)(a,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({assignees:d.map(aO)}),p(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,_.useEffect)(s,o)}(e),!function(e){let t,n,r,a,i,s,o,l=(0,h.c)(26),{repository:c,labels:d,setLabels:u}=(0,n5.u)(),[m,p]=(0,_.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.labels||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,labels:e.labels},l[0]=e.labels,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:x}=function(e){let t,n,r,a,i=(0,h.c)(15),{owner:s,repo:o,labels:l}=e,c=(0,nc.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(n=["copilot-immersive-labels",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(r=async()=>{if(!s||!o||!l)return[];let e=await (0,nt.SD)({environment:c,query:aB,variables:{owner:s,repo:o,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(aV).map(a$)},i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=r):r=i[11],i[12]!==n||i[13]!==r?(a={queryKey:n,queryFn:r},i[12]=n,i[13]=r,i[14]=a):a=i[14],(0,rr.I)(a)}(t);l[4]!==x?(n=x?.map(aW)??[],l[4]=x,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(r={...e,labels:n},l[6]=e,l[7]=n,l[8]=r):r=l[8];let v=aM(r);l[9]!==y||l[10]!==c||l[11]!==x||l[12]!==u?(a=()=>{!y&&x&&(c?.viewerIssueCreationPermissions?.labelable?u(x):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=x,l[12]=u,l[13]=a):a=l[13];let b=c?.viewerIssueCreationPermissions?.labelable;l[14]!==y||l[15]!==c||l[16]!==x||l[17]!==u||l[18]!==b?(i=[y,x,u,b,c],l[14]=y,l[15]=c,l[16]=x,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,_.useEffect)(a,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({labels:d.map(aq)}),p(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,_.useEffect)(s,o)}(e),!function(e){let t,n,r,a,i,s,o,l=(0,h.c)(30),{repository:c,issueType:d,setIssueType:u}=(0,n5.u)(),[m,p]=(0,_.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==f||l[1]!==g?(t={owner:f,repo:g},l[0]=f,l[1]=g,l[2]=t):t=l[2];let{isLoading:y,data:x}=function(e){let t,n,r,a,i=(0,h.c)(13),{owner:s,repo:o}=e,l=(0,nc.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-issue-types",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(r=async()=>{if(!s||!o)return[];let e=await (0,nt.SD)({environment:l,query:ir.xS,variables:{owner:s,repo:o,issueTypesPageSize:25}}).toPromise();if(!e?.repository)return[];let t=(0,ak.readInlineData)(ir.Jc,e.repository);return(t?.issueTypes?.edges?.flatMap(is)??[]).filter(ii).map(ia)},i[6]=l,i[7]=s,i[8]=o,i[9]=r):r=i[9],i[10]!==n||i[11]!==r?(a={queryKey:n,queryFn:r},i[10]=n,i[11]=r,i[12]=a):a=i[12],(0,rr.I)(a)}(t);e:{let t;if(!e.issueType||y){n=null;break e}l[3]!==e.issueType||l[4]!==x?(t=x?.find(t=>io(t.name,e.issueType)),l[3]=e.issueType,l[4]=x,l[5]=t):t=l[5],n=t}let v=n,b=v?.name;l[6]!==e||l[7]!==b?(r={...e,issueType:b},l[6]=e,l[7]=b,l[8]=r):r=l[8];let S=aM(r);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==u?(a=()=>{y||(c?.viewerIssueCreationPermissions?.typeable?u(v??null):null!=c&&u(null))},l[9]=y,l[10]=c,l[11]=v,l[12]=u,l[13]=a):a=l[13];let C=c?.viewerIssueCreationPermissions?.typeable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==u||l[18]!==C?(i=[y,v,u,C,c],l[14]=y,l[15]=c,l[16]=v,l[17]=u,l[18]=C,l[19]=i):i=l[19],(0,_.useEffect)(a,i),l[20]!==d||l[21]!==m?.name||l[22]!==y||l[23]!==S?(s=()=>{y||io(m?.name,d?.name)||(S({issueType:d?.name}),p(d))},l[20]=d,l[21]=m?.name,l[22]=y,l[23]=S,l[24]=s):s=l[24],l[25]!==d||l[26]!==m||l[27]!==y||l[28]!==S?(o=[y,m,d,S],l[25]=d,l[26]=m,l[27]=y,l[28]=S,l[29]=o):o=l[29],(0,_.useEffect)(s,o)}(e),!function(e){let t,n,r,a,i,s,o=(0,h.c)(28),{repository:l,milestone:c,setMilestone:d}=(0,n5.u)(),[u,m]=(0,_.useState)(c),p=l?.owner.login,f=l?.name;o[0]!==e.milestone||o[1]!==p||o[2]!==f?(t={owner:p,repo:f,milestone:e.milestone},o[0]=e.milestone,o[1]=p,o[2]=f,o[3]=t):t=o[3];let{isLoading:g,data:y}=function(e){let t,n,r,a,i=(0,h.c)(15),{owner:s,repo:o,milestone:l}=e,c=(0,nc.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(n=["copilot-immersive-milestones",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(r=async()=>{if(!s||!o||!l)return null;let e=await (0,ak.fetchQuery)(c,aG.KK,{owner:s,repo:o,query:l,count:1}).toPromise();return(e?.repository?.milestones?.nodes||[]).filter(aH).map(az)[0]??null},i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=r):r=i[11],i[12]!==n||i[13]!==r?(a={queryKey:n,queryFn:r},i[12]=n,i[13]=r,i[14]=a):a=i[14],(0,rr.I)(a)}(t),x=y?.title;o[4]!==e||o[5]!==x?(n={...e,milestone:x},o[4]=e,o[5]=x,o[6]=n):n=o[6];let v=aM(n);o[7]!==g||o[8]!==l||o[9]!==y||o[10]!==d?(r=()=>{g||(l?.viewerIssueCreationPermissions?.milestoneable?d(y??null):null!=l&&d(null))},o[7]=g,o[8]=l,o[9]=y,o[10]=d,o[11]=r):r=o[11];let b=l?.viewerIssueCreationPermissions?.milestoneable;o[12]!==g||o[13]!==l||o[14]!==y||o[15]!==d||o[16]!==b?(a=[g,y,d,b,l],o[12]=g,o[13]=l,o[14]=y,o[15]=d,o[16]=b,o[17]=a):a=o[17],(0,_.useEffect)(r,a),o[18]!==c||o[19]!==u?.title||o[20]!==g||o[21]!==v?(i=()=>{var e,t;g||(e=u?.title,t=c?.title,e?.toLowerCase()===t?.toLowerCase())||(v({milestone:c?.title}),m(c))},o[18]=c,o[19]=u?.title,o[20]=g,o[21]=v,o[22]=i):i=o[22],o[23]!==c||o[24]!==u||o[25]!==g||o[26]!==v?(s=[g,u,c,v],o[23]=c,o[24]=u,o[25]=g,o[26]=v,o[27]=s):s=o[27],(0,_.useEffect)(i,s)}(e),!function(e){let t,n,r,a,i,s,o,l=(0,h.c)(26),{repository:c,projects:d,setProjects:u}=(0,n5.u)(),[m,p]=(0,_.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.projects||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,projects:e.projects},l[0]=e.projects,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:x}=function(e){let t,n,r,a,i=(0,h.c)(15),{owner:s,repo:o,projects:l}=e,c=(0,nc.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==s||i[3]!==l||i[4]!==o||i[5]!==t?(n=["copilot-immersive-projects",t,s,o,l],i[2]=s,i[3]=l,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==s||i[9]!==l||i[10]!==o?(r=async()=>{if(!s||!o||!l||!l.length)return[];let e=await (0,ak.fetchQuery)(c,aQ.BT,{owner:s,repo:o,query:l.join(",")}).toPromise(),t=(e?.repository?.projectsV2?.nodes??[]).filter(a9).map(a8),n=(e?.repository?.recentProjects?.edges??[]).map(a7).filter(a6).map(a5),r=[...[...t,...n,...(e?.repository?.owner?.projectsV2?.edges??[]).map(a4).filter(a3).map(a2),...(e?.repository?.owner?.recentProjects?.edges??[]).map(a1).filter(a0).map(aZ)].reduce(aY,new Map).values()],a=new Set(l.map(aX));return r.filter(aJ).filter(aK).filter(e=>a.has(e.title.toLowerCase()))},i[7]=c,i[8]=s,i[9]=l,i[10]=o,i[11]=r):r=i[11],i[12]!==n||i[13]!==r?(a={queryKey:n,queryFn:r},i[12]=n,i[13]=r,i[14]=a):a=i[14],(0,rr.I)(a)}(t);l[4]!==x?(n=x?.map(it)??[],l[4]=x,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(r={...e,projects:n},l[6]=e,l[7]=n,l[8]=r):r=l[8];let v=aM(r);l[9]!==y||l[10]!==c||l[11]!==x||l[12]!==u?(a=()=>{!y&&x&&(c?.viewerIssueCreationPermissions?.triageable?u(x):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=x,l[12]=u,l[13]=a):a=l[13];let b=c?.viewerIssueCreationPermissions?.triageable;l[14]!==y||l[15]!==c||l[16]!==x||l[17]!==u||l[18]!==b?(i=[y,x,u,b,c],l[14]=y,l[15]=c,l[16]=x,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,_.useEffect)(a,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({projects:d.map(ie)}),p(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,_.useEffect)(s,o)}(e),null==u)return(0,m.jsx)(nX.Q,{optionConfig:{useViewportQueries:!1}});if(u&&!u.hasIssuesEnabled)return(0,m.jsx)(aE,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:O.IssueDraftIcon});let w=S.messages.at(-1);if(w&&aS(w,"switch-issue-template"))return(0,m.jsx)(nX.Q,{optionConfig:{useViewportQueries:!1}});let N=S.messages.find(t=>t.id===e.messageId),I=N?.parentMessageIndex!==void 0?S.messages[N.parentMessageIndex]:void 0;if(ej.W.draftIssueTemplateFormUI&&N&&I){let e=t&&(0,rb.GQ)(t.data),n=0===Object.keys(d||{}).length,r=!S.isWaitingOnCopilot,a=N.messageIndex===S.messages.length-1,i="assistant"===N.role,s=aS(I,"automatic-retry");if(e&&n)if(!r)return(0,m.jsx)(nX.Q,{optionConfig:{useViewportQueries:!1}});else if(a&&i&&!s)return b(N,"Copilot failed to use the issue template, retrying\u2026"),(0,m.jsx)(nX.Q,{optionConfig:{useViewportQueries:!1}});else return(0,m.jsx)(aE,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:O.IssueDraftIcon})}return(0,m.jsx)(r_.e,{repository:u,title:f,body:x,setTitle:e=>{y(e),a?.({name:e})},setBody:e=>{v(e),a?.({body:e})},clearOnCreate:j,issueFormRef:n,onCreateSuccess:({issue:e})=>r?.(e),onCreateError:rS.l,onCancel:j,onBeforeCreate:s,defaultValuesById:d,selectedTemplate:t,onFieldChange:o})}try{il.displayName||(il.displayName="CreateIssueForm")}catch{}let ic={container:"CreateIssuePreview-module__container--UdBdV",toolbar:"CreateIssuePreview-module__toolbar--KnRki FilePreview-module__toolbar--toYCM",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--WCzxL FilePreview-module__toolbarLeft--FG_Fy",toolbarActions:"CreateIssuePreview-module__toolbarActions--euLmx FilePreview-module__toolbarActions--GZPSm",feedbackLink:"CreateIssuePreview-module__feedbackLink--i1Sf3",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--rUXEz",form:"CreateIssuePreview-module__form--t92hw"};var id=n(66576);let iu={container:"RepositoryPicker-module__container--LguWf",label:"RepositoryPicker-module__label--UrLpA",ssoBanner:"RepositoryPicker-module__ssoBanner--iob3k"};function im(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(22),{draftIssue:u,resolvedDraftIssueRepo:p,loadingDraftIssueRepo:f,topRepos:g}=e,[y,x]=(0,_.useState)(void 0),{repository:b,setRepository:S}=(0,n5.u)(),C=aM(u);d[0]!==C||d[1]!==S?(t=e=>{null!=e&&(C({repository:e.nameWithOwner,template:void 0},!1),S(e))},d[0]=C,d[1]=S,d[2]=t):t=d[2];let j=t;!function(e,t,n,r){let a,i,s,o,l,c=(0,h.c)(13),{repository:d,setRepository:u}=(0,n5.u)(),[m,p]=(0,_.useState)(d),f=aM(e);t?.nameWithOwner,d?.nameWithOwner,a=!n&&t?.nameWithOwner==null||t?.nameWithOwner===d?.nameWithOwner,c[0]!==e.isStreaming||c[1]!==n||c[2]!==t||c[3]!==u||c[4]!==r?(i=()=>{e.isStreaming||n||(null!=t?u(t):null!=r&&r.length>0?u(r[0]):u(void 0))},s=[e.isStreaming,n,t,u,r],c[0]=e.isStreaming,c[1]=n,c[2]=t,c[3]=u,c[4]=r,c[5]=i,c[6]=s):(i=c[5],s=c[6]),(0,_.useEffect)(i,s),c[7]!==d||c[8]!==m||c[9]!==f||c[10]!==a?(o=()=>{m!==d&&(f({repository:d?.nameWithOwner},a),p(d))},l=[f,d,a,m],c[7]=d,c[8]=m,c[9]=f,c[10]=a,c[11]=o,c[12]=l):(o=c[11],l=c[12]),(0,_.useEffect)(o,l)}(u,p,f,g),d[3]!==b||d[4]!==f||d[5]!==g?(n=()=>{f||null==b||null==g||g.find(e=>e.id===b.id)||x(b.id)},r=[b,f,g],d[3]=b,d[4]=f,d[5]=g,d[6]=n,d[7]=r):(n=d[6],r=d[7]),(0,_.useEffect)(n,r);let{ssoOrganizations:w}=(0,z.Pk)();if(d[8]!==w?(i=w?.map(ip)??[],d[8]=w,d[9]=i):i=d[9],a=i,!f&&null==b&&(null==g||0===g.length))return null;let N=b??g?.[0],I=u.isStreaming||f||null==p;return d[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(id.A,{className:(0,v.$)(iu.label,"sr-only"),required:!0,children:"Repository"}),d[10]=s):s=d[10],d[11]!==I?(o={hasIssuesEnabled:!0,readonly:I},d[11]=I,d[12]=o):o=d[12],d[13]!==a?(l=(0,m.jsx)(H.x,{className:iu.ssoBanner,forceWrap:!0,protectedOrgs:a,maxVisibleOrgNames:0,redirectURI:ih}),d[13]=a,d[14]=l):l=d[14],d[15]!==y||d[16]!==j||d[17]!==N||d[18]!==o||d[19]!==l||d[20]!==g?(c=(0,m.jsxs)("div",{className:iu.container,children:[s,(0,m.jsx)(rt.ow,{initialRepository:N,onSelect:j,options:o,topRepositories:g,enforceAtleastOneSelected:!0,subtitle:l},y)]}),d[15]=y,d[16]=j,d[17]=N,d[18]=o,d[19]=l,d[20]=g,d[21]=c):c=d[21],c}function ih(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function ip(e){return e.login}try{im.displayName||(im.displayName="RepositoryPicker")}catch{}var ig=n(9039);function iy({issue:e}){let{openItem:t,versionedItems:n}=(0,nd.xx)(),r=ri(),a=function(){let e,t=(0,h.c)(4),n=(0,g.b)(),r=(0,z.Pk)(),{updateItem:a}=(0,nd.xx)();return t[0]!==n||t[1]!==r||t[2]!==a?(e=async e=>{let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},i={...e,parentTag:void 0,isUserEdited:!1};a(i);let s=(0,nb.g)(i);await n.sendChatMessage({thread:(0,rf.W)(r),content:"Unlink the sub-issue from its parent issue",references:[t,s],topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},t[0]=n,t[1]=r,t[2]=a,t[3]=e):e=t[3],e}(),i=r.get(e.tag),s=i?i.children:[],o=(0,_.useMemo)(()=>{if(!i)return 0;let e=-1;return ra(i,()=>e++),e},[i]);if(!ej.W.draftIssueTree)return null;let l=e=>{let r=(0,nb.LU)(e.item.id,n);return(0,m.jsx)(rY.r,{title:(0,m.jsx)(r1.T,{value:e.item.name,onClick:()=>{t(e.item.id,!0)},trailingBadges:null!=r?[(0,m.jsx)(n1.g,{version:r},`${e.item.tag}#${r}`)]:void 0}),secondaryActions:(0,m.jsx)(ig.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(tR.l.Item,{onSelect:()=>a(e.item),children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.LinkIcon,{})}),"Unlink sub-issue"]},`${e.item.tag}-unlink`)}]}),subItems:e.children?.length?e.children.map(l):void 0,defaultExpanded:!0,children:(0,m.jsx)(rZ.Q,{children:(0,m.jsx)(r0.D,{children:(0,m.jsx)(O.IssueDraftIcon,{})})})},e.item.tag)};return(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(rX.v,{title:"Sub-issues",header:(0,m.jsx)(r2.s,{title:(0,m.jsx)(r3.c,{title:"Sub-issues",className:"p-0",children:(0,m.jsx)(n8.A,{children:o})}),className:"border-0 bgColor-default"}),children:s.map(l)})})}try{iy.displayName||(iy.displayName="SubissuesList")}catch{}let ix=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i=[n,r,a,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],s=[n,r,a,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:i,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:s,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();ix.hash="582a468668cd62a5a95ad0f91f7ea5e5";let iv={kind:"InlineDataFragment",name:"TemplatePickerForm"};iv.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let i_={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};i_.hash="fa6038bb9389af7bff23ba3491dd0507";var ib=n(56424);function iS(e,t){return e.filename.localeCompare(t.filename)}function iC(e){return(0,ak.readInlineData)(iv,e)}function ij(e){return(0,ak.readInlineData)(i_,e)}function iw(e){let t,n,r,a,i=(0,h.c)(10),{draftIssue:s}=e,{repository:o}=(0,n5.u)(),l=o?.owner.login,c=o?.name;i[0]!==l||i[1]!==c?(t={owner:l,repo:c},i[0]=l,i[1]=c,i[2]=t):t=i[2];let{data:d}=function(e){let t,n,r,a,i=(0,h.c)(13),{owner:s,repo:o}=e,l=(0,nc.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-templates",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(r=async()=>{if(!s||!o)return[];let e=await (0,ak.fetchQuery)(l,ix,{owner:s,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(ij),...(e?.repository?.issueForms||[]).map(iC)].sort(iS)},i[6]=l,i[7]=s,i[8]=o,i[9]=r):r=i[9],i[10]!==n||i[11]!==r?(a={queryKey:n,queryFn:r},i[10]=n,i[11]=r,i[12]=a):a=i[12],(0,rr.I)(a)}(t);if(null==d||0===d.length)return null;i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("span",{children:"/"}),i[3]=n):n=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(id.A,{className:(0,v.$)(iu.label,"sr-only"),children:"Template"}),i[4]=r):r=i[4];let u=o?.nameWithOwner,p=o?.isBlankIssuesEnabled;return i[5]!==s||i[6]!==u||i[7]!==p||i[8]!==d?(a=(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsxs)("div",{className:iu.container,children:[r,(0,m.jsx)(iN,{templates:d,draftIssue:s,repositoryNwo:u,isBlankIssuesEnabled:p})]})]}),i[5]=s,i[6]=u,i[7]=p,i[8]=d,i[9]=a):a=i[9],a}function iN(e){let t,n,r,a,i,s,o,l,c=(0,h.c)(23),{templates:d,draftIssue:u,isBlankIssuesEnabled:p,repositoryNwo:f}=e,[y,x]=(0,_.useState)("");e:{let e;if(!y){t=d;break e}c[0]!==y||c[1]!==d?(e=d?.filter(e=>e.name?.toLowerCase().includes(y.toLowerCase())),c[0]=y,c[1]=d,c[2]=e):e=c[2],t=e}let v=t,[b,S]=(0,_.useState)(void 0);c[3]!==u.template||c[4]!==d?(n=()=>{if(!u.template)return void S(void 0);let e=u.template.split("/").pop();S(d?.find(t=>t.filename===e))},r=[d,u.template],c[3]=u.template,c[4]=d,c[5]=n,c[6]=r):(n=c[5],r=c[6]),(0,_.useEffect)(n,r);let C=function(){let e,t=(0,h.c)(4),n=(0,g.b)(),r=(0,z.Pk)(),{updateItem:a}=(0,nd.xx)();return t[0]!==n||t[1]!==r||t[2]!==a?(e=async(e,t,i)=>{let s=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the selected draft issue with the \`${t.filename}\` template${i?` in the \`${i}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` field.`:"Update the selected draft issue to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the `tag` field."}];if(e.isUserEdited){let t={...e,...i&&{repository:i},isUserEdited:!1};a(t),s.push((0,nb.g)(t))}await n.sendChatMessage({thread:(0,rf.W)(r),content:t?`Use the '${t.name}' template`:"Remove the template",references:s,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},t[0]=n,t[1]=r,t[2]=a,t[3]=e):e=t[3],e}(),j=(0,_.useRef)(null),w=null!=p&&!p;return c[7]!==v?(a=v??[],c[7]=v,c[8]=a):a=c[8],c[9]!==b?(i=b?[b]:[],c[9]=b,c[10]=i):i=c[10],c[11]!==b||c[12]!==w?(s=e=>(0,m.jsxs)(eM.Q,{trailingVisual:O.TriangleDownIcon,...e,ref:j,children:[b?(0,m.jsx)("span",{children:b.name}):"Select template",w&&(0,m.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),c[11]=b,c[12]=w,c[13]=s):s=c[13],c[14]!==u||c[15]!==C||c[16]!==f?(o=async e=>{let[t]=e;S(t),await C(u,t,f)},c[14]=u,c[15]=C,c[16]=f,c[17]=o):o=c[17],c[18]!==a||c[19]!==i||c[20]!==s||c[21]!==o?(l=(0,m.jsx)(ib.O,{items:a,initialSelectedItems:i,placeholderText:"Select template",selectionVariant:"single",filterItems:x,renderAnchor:s,getItemKey:iE,convertToItemProps:iI,onSelectionChange:o,selectPanelRef:j,height:"large",width:"medium"}),c[18]=a,c[19]=i,c[20]=s,c[21]=o,c[22]=l):l=c[22],l}function iI(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function iE(e){return e.filename}try{iw.displayName||(iw.displayName="TemplatePicker")}catch{}try{iN.displayName||(iN.displayName="TemplatePickerInternal")}catch{}var iR=n(24058),iT=n(71634),ik=n(40616);function iA(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,v,b,S,C,j,w,N,I,E,R,T=(0,h.c)(76),{isPreviewOpening:k,issue:A,onClose:D}=e,{openItem:P}=(0,nd.xx)(),L=ri();T[0]!==A.tag||T[1]!==L?(t=L.get(A.tag),T[0]=A.tag,T[1]=L,T[2]=t):t=T[2];let M=t,[O,F]=(0,_.useState)(k);T[3]!==O?(n=()=>{if(O){let e=setTimeout(()=>F(!1),400);return()=>clearTimeout(e)}},r=[O],T[3]=O,T[4]=n,T[5]=r):(n=T[4],r=T[5]),(0,_.useEffect)(n,r);let{selectedThreadID:B}=(0,z.Pk)(),{isLoading:U,data:$}=function(){let e,t,n,r,a=(0,h.c)(9),i=(0,nc.useRelayEnvironment)();return a[0]!==i?(e=JSON.stringify(i),a[0]=i,a[1]=e):e=a[1],a[2]!==e?(t=["copilot-immersive-top-repos",e],a[2]=e,a[3]=t):t=a[3],a[4]!==i?(n=async()=>await (0,rt.St)(i,{first:10,hasIssuesEnabled:!0}),a[4]=i,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(r={queryKey:t,queryFn:n},a[6]=t,a[7]=n,a[8]=r):r=a[8],(0,rr.I)(r)}();T[6]!==A.repository?(a=A.repository?.split("/")??[],T[6]=A.repository,T[7]=a):a=T[7];let[V,q]=a;T[8]!==V||T[9]!==q?(i={owner:V,repo:q},T[8]=V,T[9]=q,T[10]=i):i=T[10];let{isLoading:W,data:G}=function(e){let t,n,r,a,i=(0,h.c)(13),{owner:s,repo:o}=e,l=(0,nc.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-current-repo",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(r=async()=>s&&o?await (0,rt.tZ)(l,s,o):null,i[6]=l,i[7]=s,i[8]=o,i[9]=r):r=i[9],i[10]!==n||i[11]!==r?(a={queryKey:n,queryFn:r},i[10]=n,i[11]=r,i[12]=a):a=i[12],(0,rr.I)(a)}(i),H=ru(),Q=function(e){let t,n=(0,h.c)(10),{tag:r,template:a}=e,i=(0,z.Pk)(),s=(0,g.b)(),{items:o,updateItem:l,openItem:c,closeItem:d,openPreviewPane:u}=(0,nd.xx)(),m=rg(r);return n[0]!==d||n[1]!==o||n[2]!==s||n[3]!==c||n[4]!==u||n[5]!==i||n[6]!==a||n[7]!==l||n[8]!==m?(t=async e=>{(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED",mode:"immersive",threadId:(0,rf.W)(i)?.id,repositoryId:e.repository.databaseId,issueNumber:e.number,chatReferrer:document.referrer,templateType:a?a.endsWith(".md")?"markdown":"yaml":"none"});let t=e.number,n=e.repository.owner.login,r=e.repository.name,h=e.title,p=`issue:${n}/${r}/${t}`;l({id:p,messageId:rp.Wp,name:h,owner:n,repo:r,number:t,href:e.url,type:"issue"}),d(m),c(p),u();let f=[{type:"text",name:`timeline-event: {"type": "issue-created", "markdownContent": "Issue saved to [${n}/${r}#${t}](${e.url})"}`,text:`Fetch the issue details and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
- url: ${e.url}
  state: "open"
  draft: false
  title: "${h}"
  number: ${t}
  author: ${i.currentUserLogin}
  created_at: "2025-03-27T12:00:00Z"
  closed_at: "2025-03-27T12:00:00Z"
  labels:
  - name: "bug"
  - name: "good first issue"
\`\`\``}],g=o.get(m);g?.type==="new-issue"&&f.push((0,nb.g)(g)),await s.sendChatMessage({thread:(0,rf.W)(i),content:`Saved the issue to [${n}/${r}#${t}](${e.url})`,references:f,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},n[0]=d,n[1]=o,n[2]=s,n[3]=c,n[4]=u,n[5]=i,n[6]=a,n[7]=l,n[8]=m,n[9]=t):t=n[9],t}(A),K=aM(A),J=function(e,t){let n,r=(0,h.c)(3);return r[0]!==e||r[1]!==t?(n=(n,r,a)=>{if(!ej.W.draftIssueTemplateFormUI)return;let i=n||`${iR.y}-${r}`;if(e.defaultValuesById&&e.defaultValuesById[i]===a)return;let s={...e,defaultValuesById:{...e.defaultValuesById}};s.defaultValuesById[i]=a,t(s,!1)},r[0]=e,r[1]=t,r[2]=n):n=r[2],n}(A,K),X=(0,_.useRef)(null),Y=function(e){let t,n=(0,h.c)(2);n[0]!==e.current?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e.current,n[1]=t):t=n[1];let r=t;return(0,_.useSyncExternalStore)(iD,r)}(X),Z=ej.W.draftIssueTree&&M?.parent!=null,ee=(0,_.useRef)(null),et=G?.id??"",en=A.template||"";T[11]!==et||T[12]!==en?(s={repoId:et,filename:en},T[11]=et,T[12]=en,T[13]=s):s=T[13];let{isLoading:er,data:ea}=function(e){let t,n,r,a,i=(0,h.c)(13),{repoId:s,filename:o}=e,l=(0,nc.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=["copilot-immersive-template-payload",t,s,o],i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(r=async()=>{if(!s||!o)return null;let e=await (0,nc.fetchQuery)(l,iT.F,{repoId:s,filename:o}).toPromise();return e&&e.node?(0,ik.EV)(e.node)??null:null},i[6]=l,i[7]=o,i[8]=s,i[9]=r):r=i[9],i[10]!==n||i[11]!==r?(a={queryKey:n,queryFn:r},i[10]=n,i[11]=r,i[12]=a):a=i[12],(0,rr.I)(a)}(s),ei=G??void 0;T[14]!==ei?(o={repository:ei},T[14]=ei,T[15]=o):o=T[15];let es=o;if(O||U||er){let e;return T[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nX.Q,{optionConfig:{useViewportQueries:!1}}),T[16]=e):e=T[16],e}if(null==$&&!W&&null==G){let e;return T[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{children:"No repositories found."}),T[17]=e):e=T[17],e}let eo=`${A.id}@${B}`;T[18]!==Y||T[19]!==eo?(l=(0,nK.S)({storageKeyPrefix:eo,insidePortal:Y}),T[18]=Y,T[19]=eo,T[20]=l):l=T[20],T[21]===Symbol.for("react.memo_cache_sentinel")?(c=(0,nY.G)("create-issue-preview"),T[21]=c):c=T[21],T[22]!==A?(d=(0,m.jsx)("div",{children:(0,m.jsx)(n3,{item:A})}),T[22]=A,T[23]=d):d=T[23],T[24]!==M||T[25]!==P||T[26]!==Z?(u=Z&&(0,m.jsx)("div",{children:(0,m.jsx)(iP,{node:M,onItemSelected:e=>P(e.item.id,!0)})}),T[24]=M,T[25]=P,T[26]=Z,T[27]=u):u=T[27],T[28]!==d||T[29]!==u?(p=(0,m.jsxs)("div",{className:ic.toolbarLeft,children:[d,u]}),T[28]=d,T[29]=u,T[30]=p):p=T[30],T[31]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(nW.A,{href:"https://gh.io/copilot-create-issues-feedback",className:ic.feedbackLink,children:"Give feedback"}),T[31]=f):f=T[31],T[32]!==M||T[33]!==D||T[34]!==ea?(y=(0,m.jsxs)("div",{className:ic.toolbarActions,children:[f,(0,m.jsx)(rv,{issueTemplate:ea,issueNode:M,issueFormRef:ee,onClose:D})]}),T[32]=M,T[33]=D,T[34]=ea,T[35]=y):y=T[35],T[36]!==p||T[37]!==y?(x=(0,m.jsxs)("div",{className:ic.toolbar,children:[p,y]}),T[36]=p,T[37]=y,T[38]=x):x=T[38],T[39]!==$?(v=$||[],T[39]=$,T[40]=v):v=T[40],T[41]!==A||T[42]!==G||T[43]!==W||T[44]!==v?(b=(0,m.jsx)(im,{draftIssue:A,resolvedDraftIssueRepo:G,loadingDraftIssueRepo:W,topRepos:v}),T[41]=A,T[42]=G,T[43]=W,T[44]=v,T[45]=b):b=T[45],T[46]!==A?(S=(0,m.jsx)(iw,{draftIssue:A}),T[46]=A,T[47]=S):S=T[47],T[48]!==b||T[49]!==S?(C=(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[b,S]}),T[48]=b,T[49]=S,T[50]=C):C=T[50];let el=ej.W.draftIssueTemplateFormUI&&ea?ea:void 0;return T[51]!==G||T[52]!==H?(j=e=>H(G,e),T[51]=G,T[52]=H,T[53]=j):j=T[53],T[54]!==A||T[55]!==K||T[56]!==D||T[57]!==Q||T[58]!==J||T[59]!==el||T[60]!==j?(w=(0,m.jsx)(il,{draftIssue:A,template:el,issueFormRef:ee,onCreate:Q,onChange:K,onClose:D,onBeforeCreate:j,onFieldChange:J}),T[54]=A,T[55]=K,T[56]=D,T[57]=Q,T[58]=J,T[59]=el,T[60]=j,T[61]=w):w=T[61],T[62]!==M||T[63]!==A?(N=M?.children&&M.children.length>0&&(0,m.jsx)(iy,{issue:A}),T[62]=M,T[63]=A,T[64]=N):N=T[64],T[65]!==C||T[66]!==w||T[67]!==N?(I=(0,m.jsxs)("div",{className:ic.form,children:[C,w,N]}),T[65]=C,T[66]=w,T[67]=N,T[68]=I):I=T[68],T[69]!==x||T[70]!==I?(E=(0,m.jsxs)("div",{className:ic.container,ref:X,children:[x,I]}),T[69]=x,T[70]=I,T[71]=E):E=T[71],T[72]!==es||T[73]!==l||T[74]!==E?(R=(0,m.jsx)(nJ.S,{optionConfig:l,preselectedData:es,...c,children:E}),T[72]=es,T[73]=l,T[74]=E,T[75]=R):R=T[75],R}function iD(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}function iP({node:e,onItemSelected:t}){let n=(0,_.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent&&ej.W.draftIssueTree)return(0,m.jsxs)(tI.W,{children:[(0,m.jsxs)(tI.W.Button,{variant:"invisible",className:ic.parentSelectorAnchor,children:[(0,m.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,m.jsx)(tI.W.Overlay,{width:"large",children:(0,m.jsx)(tR.l,{children:n.map((n,r)=>(0,m.jsxs)(tR.l.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${r} * var(--base-size-12))`},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.IssueDraftIcon,{})}),(0,m.jsx)("div",{className:n0.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{iA.displayName||(iA.displayName="CreateIssuePreview")}catch{}try{iP.displayName||(iP.displayName="ParentSelector")}catch{}var iL=n(76325),iM=n(8579),iO=n(67991),iF=n(23125),iB=n(67621);let iU=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},i$={container:"FilePreview-module__container--_pENP",previewContainer:"FilePreview-module__previewContainer--vjKjn",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm",footer:"FilePreview-module__footer--pwLuO"};var iV=n(50539);let iq={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function iW(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let iG={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},iz={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function iH(e){let t,n=(0,h.c)(4),{error:r}=e;if(n[0]!==r){let e,a,i=r?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:iz.errorIcon,children:(0,m.jsx)(O.StopIcon,{size:24})}),a=(0,m.jsx)("h2",{className:iz.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,m.jsxs)("div",{className:iz.error,children:[e,a,i.length>0?(0,m.jsx)("p",{children:i.map(iQ)}):(0,m.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=r,n[1]=t}else t=n[1];return t}function iQ(e){return(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("br",{})]},`error-line-${e}}`)}try{iH.displayName||(iH.displayName="ErrorMessage")}catch{}function iK(e){let t,n,r,a,i=(0,h.c)(14),{content:s,inlineScripts:o,inlineStyles:l,headScripts:c,bodyScripts:d,styles:u,viewscreenUrl:p}=e,f=(0,ar.G7)("viewscreen_sandbox");i[0]!==p?(n=new URL("view/sandbox?url=client://sandbox",p).toString(),t=new URL(n,eu.fV.origin),i[0]=p,i[1]=t,i[2]=n):(t=i[1],n=i[2]);let g=t.origin,y=(0,_.useRef)(null),x=(0,_.useRef)(null);i[3]!==d||i[4]!==s||i[5]!==c||i[6]!==o||i[7]!==l||i[8]!==u?(r={content:s,headScripts:c,bodyScripts:d,inlineScripts:o,inlineStyles:l,styles:u},i[3]=d,i[4]=s,i[5]=c,i[6]=o,i[7]=l,i[8]=u,i[9]=r):r=i[9];let{renderState:v,errorMessage:b}=function(e,t,n,r){let a,i,s,o,l,c,d=(0,h.c)(16),[u,m]=(0,_.useState)(iq.LOADING),[p,f]=(0,_.useState)();d[0]!==t||d[1]!==e||d[2]!==r?(a=n=>(function(e,t,n,r,a,i){let s=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!s)return;let o=s.body,l=n.current?.contentWindow;switch(o){case"hello":iW(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),iW(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":i(iq.ERROR),s.payload?.error&&a(s.payload.error);break;case"loading":i(iq.LOADING);break;case"loaded":if(!n.current||!r.current)return;i(iq.LOADED);break;case"ready":if(!n.current||!r.current)return;i(iq.READY)}})(n,0,e,t,f,m),d[0]=t,d[1]=e,d[2]=r,d[3]=a):a=d[3];let g=a;return d[4]!==g?(i=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),s=[g],d[4]=g,d[5]=i,d[6]=s):(i=d[5],s=d[6]),(0,_.useEffect)(i,s),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(o=()=>{u===iq.READY&&e.current&&t.current&&function(e,t,n){let r={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};iW(e.contentWindow,r)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=o,d[12]=l):(o=d[11],l=d[12]),(0,_.useEffect)(o,l),d[13]!==p||d[14]!==u?(c={renderState:u,errorMessage:p},d[13]=p,d[14]=u,d[15]=c):c=d[15],c}(y,x,r,g);if(!f)return null;for(let e of((0,e1.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...c||[],...d||[],...u||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,e1.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return i[10]!==b||i[11]!==v||i[12]!==n?(a=(0,m.jsx)("div",{ref:x,className:iG.container,children:v===iq.ERROR?(0,m.jsx)(iH,{error:b}):(0,m.jsx)("iframe",{ref:y,className:iG.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),i[10]=b,i[11]=v,i[12]=n,i[13]=a):a=i[13],a}try{iK.displayName||(iK.displayName="SandboxView")}catch{}let iJ={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function iX(e,t,n){let r=`file:${e}`;if(!n.has(r))return null;let a=n.get(r)??[],i=a[a.length-1];if(!i)return null;let s=t.get(i);return s&&"file"===s.type?s:null}function iY(e){let t,n,r=(0,h.c)(15),{file:a}=e,{previewUrl:i}=(0,W.X)(),{items:s,versionedItems:o}=(0,nd.xx)(),{scripts:l,styles:c,files:d}=function(e,t,n){let r=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>iX(e,t,n)),a=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>iX(e,t,n)),i=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...r.map(e=>e?.value??""),...i,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:a.map(e=>e?.value??"").join(`
`),files:r.concat(a)}}(a.value,s,o),[u,p]=(0,_.useState)(!1),f=(a.isStreaming||d.some(iZ))&&!u;r[0]!==f||r[1]!==p?(t=()=>{if(f){let e=setTimeout(()=>{p(!0)},3e3);return()=>clearTimeout(e)}},r[0]=f,r[1]=p,r[2]=t):t=r[2],(0,_.useEffect)(t),r[3]!==a.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],r=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):r.push(a);return{headScripts:n,bodyScripts:r,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(a.value),r[3]=a.value,r[4]=n):n=r[4];let{headScripts:g,bodyScripts:y,styles:x}=n;if(f){let e;return r[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:iJ.loadingContainer,children:[(0,m.jsx)("div",{className:iJ.loadingHead,children:(0,m.jsx)(iV.N,{animationType:"thinking",loopAnimation:!0})}),(0,m.jsx)("p",{className:iJ.loadingText,children:"Preparing your preview\u2026"})]}),r[5]=e):e=r[5],e}{let e;return r[6]!==y||r[7]!==x||r[8]!==a.id||r[9]!==a.value||r[10]!==g||r[11]!==i||r[12]!==l||r[13]!==c?(e=(0,m.jsx)(iK,{inlineScripts:l,inlineStyles:c,headScripts:g,bodyScripts:y,styles:x,content:a.value,viewscreenUrl:i},a.id),r[6]=y,r[7]=x,r[8]=a.id,r[9]=a.value,r[10]=g,r[11]=i,r[12]=l,r[13]=c,r[14]=e):e=r[14],e}}function iZ(e){return!e||e.isStreaming}try{iY.displayName||(iY.displayName="HtmlPreview")}catch{}var i0=n(24880),i1=n(45968),i2=n(74022);let i3={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function i4(e){let t,n,r,a=(0,h.c)(7),{file:i}=e,s=function(e,t){let n,r,a,i,s=(0,h.c)(6),[o,l]=(0,_.useState)(e);return 2e3!==s[0]?(r=(0,i2.A)(l,t),s[0]=t,s[1]=r):r=s[1],n=r,s[2]!==n||s[3]!==e?(a=()=>n(e),i=[n,e],s[2]=n,s[3]=e,s[4]=a,s[5]=i):(a=s[4],i=s[5]),(0,_.useEffect)(a,i),o}(i.value,2e3);a[0]!==i.name||a[1]!==s?(t={queryKey:["copilot-immersive","MarkdownPreview",s,i.name],queryFn:async()=>{let e=await (0,F.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:s,filename:i.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:i0.rX,staleTime:1/0},a[0]=i.name,a[1]=s,a[2]=t):t=a[2];let{status:o,data:l}=(0,rr.I)(t);return a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("readme html-blob blob",i3.markdownPreview),a[3]=n):n=a[3],a[4]!==l||a[5]!==o?(r=(0,m.jsx)("div",{className:n,children:"pending"===o?(0,m.jsx)("div",{className:i3.spinner,children:(0,m.jsx)(rk.A,{srText:"Loading Markdown preview\u2026"})}):"error"===o?(0,m.jsxs)("div",{className:i3.error,children:[(0,m.jsx)("span",{className:i3.errorIcon,children:(0,m.jsx)(O.StopIcon,{size:24})}),(0,m.jsx)("h2",{className:i3.errorHeader,children:"Markdown rendering failed"}),(0,m.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,m.jsx)(i1.$6,{className:"markdown-body",html:l.html})}),a[4]=l,a[5]=o,a[6]=r):r=a[6],r}try{i4.displayName||(i4.displayName="MarkdownPreview")}catch{}function i5(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x=(0,h.c)(44),{isPreviewOpening:v,file:b,onClose:S}=e,{updateItem:C}=(0,nd.xx)(),j=(0,z.Pk)();x[0]!==b.isStreaming||x[1]!==b.messageId||x[2]!==j.messages?(t=b.isStreaming?j.messages[j.messages.length-1]:j.messages.find(e=>e.id===b.messageId),x[0]=b.isStreaming,x[1]=b.messageId,x[2]=j.messages,x[3]=t):t=x[3];let w=t,{linesOfCode:N,isPreviewable:I,size:E}=function(e){let t,n,r,a,i=(0,h.c)(12);if(i[0]!==e.language||i[1]!==e.value){let a,s,o=new Blob([e.value]).size;i[5]===Symbol.for("react.memo_cache_sentinel")?(a=new Set(["markdown","html"]),i[5]=a):a=i[5];let l=a;i[6]!==e.value?(s=e.value.split(`
`),i[6]=e.value,i[7]=s):s=i[7],t=s.length,n=l.has(e.language),r=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),i[0]=e.language,i[1]=e.value,i[2]=t,i[3]=n,i[4]=r}else t=i[2],n=i[3],r=i[4];return i[8]!==t||i[9]!==n||i[10]!==r?(a={linesOfCode:t,isPreviewable:n,size:r},i[8]=t,i[9]=n,i[10]=r,i[11]=a):a=i[11],a}(b);!function(e,t){let n,r,a,i,s,o,l,c=(0,h.c)(25),{reference:d}=e,u=(0,g.b)(),m=d?.type;c[0]!==d?(n=d?(0,eC.Vb)(d):void 0,c[0]=d,c[1]=n):n=c[1],c[2]!==m||c[3]!==n?(r=["copilot-reference-preview","copilot","references",m,n],c[2]=m,c[3]=n,c[4]=r):r=c[4],c[5]!==e||c[6]!==u||c[7]!==d||c[8]!==t?(a=async()=>{if(!d||"file"!==d.type||e.value)return null;let n=await u.service.hydrateReference(d);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},c[5]=e,c[6]=u,c[7]=d,c[8]=t,c[9]=a):a=c[9],c[10]!==r||c[11]!==a?(i={queryKey:r,queryFn:a,staleTime:Number.POSITIVE_INFINITY},c[10]=r,c[11]=a,c[12]=i):i=c[12];let{isLoading:p,isError:f,data:y}=(0,rr.I)(i);c[13]!==y||c[14]!==e||c[15]!==t?(s=()=>{y?.contents&&e.value!==y.contents&&t({...e,value:y.contents,isStreaming:!1})},c[13]=y,c[14]=e,c[15]=t,c[16]=s):s=c[16];let x=y?.contents;c[17]!==e||c[18]!==x||c[19]!==t?(o=[x,e,t],c[17]=e,c[18]=x,c[19]=t,c[20]=o):o=c[20],(0,_.useEffect)(s,o),c[21]!==y||c[22]!==f||c[23]!==p?(l={isLoading:p,isError:f,data:y},c[21]=y,c[22]=f,c[23]=p,c[24]=l):l=c[24]}(b,C);let[R,T]=(0,_.useState)("code"),[k,A]=(0,_.useState)(void 0);x[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{A(e)},x[4]=n):n=x[4];let D=n;x[5]!==w?.error?.type||x[6]!==S?(r=()=>{(w?.error?.type==="publicCode"||w?.error?.type==="filtered")&&S()},x[5]=w?.error?.type,x[6]=S,x[7]=r):r=x[7];let P=w?.error;x[8]!==S||x[9]!==P?(a=[P,S],x[8]=S,x[9]=P,x[10]=a):a=x[10],(0,_.useEffect)(r,a),x[11]!==I||x[12]!==R?(i=I&&(0,m.jsxs)(iO.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";T(t),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,m.jsx)(iO.I.Button,{selected:"preview"===R,children:"Preview"}),(0,m.jsx)(iO.I.Button,{selected:"code"===R,children:"Code"})]}),x[11]=I,x[12]=R,x[13]=i):i=x[13],x[14]!==b?(s=(0,m.jsx)(n3,{item:b,onVersionSelect:D}),x[14]=b,x[15]=s):s=x[15];let L=1===N?"line":"lines";return x[16]!==N||x[17]!==E||x[18]!==L?(o=(0,m.jsxs)("p",{className:i$.toolbarLoC,children:[N," ",L," \xb7 ",E]}),x[16]=N,x[17]=E,x[18]=L,x[19]=o):o=x[19],x[20]!==i||x[21]!==s||x[22]!==o?(l=(0,m.jsxs)("div",{className:i$.toolbarLeft,children:[i,s,o]}),x[20]=i,x[21]=s,x[22]=o,x[23]=l):l=x[23],x[24]!==b.value?(c=(0,m.jsx)(iM.T,{textToCopy:b.value,ariaLabel:"Copy code",onCopy:i6}),x[24]=b.value,x[25]=c):c=x[25],x[26]!==b.name||x[27]!==b.value||x[28]!==k?(d=(0,m.jsx)(tE.K,{"aria-label":"Download code",icon:O.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=b.name.lastIndexOf(".");if(e>0){let t=b.name.substring(0,e),n=b.name.substring(e);return void 0!==k?`${t}_${k}${n}`:b.name}return void 0!==k?`${b.name}_${k}`:b.name})();iU(new File([b.value],e)),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),x[26]=b.name,x[27]=b.value,x[28]=k,x[29]=d):d=x[29],x[30]!==c||x[31]!==d?(u=(0,m.jsxs)("div",{className:i$.toolbarActions,children:[c,d]}),x[30]=c,x[31]=d,x[32]=u):u=x[32],x[33]!==l||x[34]!==u?(p=(0,m.jsxs)("div",{className:i$.toolbar,children:[l,u]}),x[33]=l,x[34]=u,x[35]=p):p=x[35],x[36]!==b||x[37]!==v||x[38]!==I||x[39]!==R?(f=I&&"preview"===R?(0,m.jsx)(i9,{file:b}):(0,m.jsx)(i8,{file:b,isPreviewOpening:v}),x[36]=b,x[37]=v,x[38]=I,x[39]=R,x[40]=f):f=x[40],x[41]!==p||x[42]!==f?(y=(0,m.jsxs)("div",{className:i$.container,children:[p,f]}),x[41]=p,x[42]=f,x[43]=y):y=x[43],y}function i6(){return(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let i7=(0,iF.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function i8({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:r,versionedItems:a}=(0,nd.xx)(),i=(0,_.useRef)(!1),s=function(e,t){let n=e.get((0,nb.oy)(t.id))??[];return n[n.length-1]===t.id}(a,e),o=!e.reference||"thread-scoped-file"===e.reference.type,l=o&&!e.isStreaming&&s,c=(0,_.useId)(),d=function(e){let t,n,r,a=(0,h.c)(6);return a[0]!==e?(n=function({language:e,value:t}){var n;let r=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 8;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,r),indentWithTabs:"tab"===r,lineWrapping:function(e){let t=(0,rR.vL)(e);return t?.wrap??!1}(e)}}(e),a[0]=e,a[1]=n):n=a[1],t=n,a[2]!==t.indentUnit||a[3]!==t.indentWithTabs||a[4]!==t.lineWrapping?(r={indentUnit:t.indentUnit,indentWithTabs:t.indentWithTabs,lineWrapping:t.lineWrapping},a[2]=t.indentUnit,a[3]=t.indentWithTabs,a[4]=t.lineWrapping,a[5]=r):r=a[5],r}(e),[u,p]=(0,_.useState)(),f=u?.id===e.id?u.value:e.value,{messages:g}=(0,z.Pk)(),y=(0,_.useRef)(null),x=(0,_.useRef)(null),v=e=>{x.current=e},b=(0,_.useRef)(null);(0,_.useEffect)(()=>{if(!b.current)return;let e=b.current.querySelector(".cm-scroller");if(y.current=e,!e)return;let t=()=>{v(e.scrollTop)};return e.addEventListener("wheel",t,{passive:!0}),e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("mousedown",t),e.addEventListener("keydown",t),()=>{e.removeEventListener("wheel",t),e.removeEventListener("touchstart",t),e.removeEventListener("mousedown",t),e.removeEventListener("keydown",t)}},[]),(0,_.useEffect)(()=>{let t=y.current;t&&(e.isUserEdited||(t.scrollTop=x.current??0))},[e.isUserEdited,f]),(0,_.useEffect)(()=>{t&&(i.current=!0)},[t]);let S=(0,iB.K)((0,_.useCallback)(t=>{if(l&&t!==e.value)if(e.isUserEdited)p({value:t,id:e.id}),i7(e,t,r);else{let a={...e,messageId:rp.Wp,id:`file:${e.name}#${g.length}`,timestamp:new Date,isUserEdited:!0,value:t};r(a),n(a.id),p({value:t,id:a.id})}},[e,l,g.length,n,r]));return(0,m.jsxs)("div",{ref:b,className:i$.codeMirrorContainer,children:[(0,m.jsxs)("span",{id:c,className:"sr-only",children:[e.name," file contents"]}),(0,m.jsx)(iL.default,{ariaLabelledBy:c,containerClassName:i$.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!l,spacing:d,value:f,onChange:S,focusNextRenderRef:i,placeholder:"Loading...",hideHelp:!0}),o&&!s&&(0,m.jsx)("div",{className:i$.footer,children:"Switch to the latest version to edit this file."})]})}function i9(e){let t=(0,h.c)(4),{file:n}=e;if("markdown"===n.language){let e;return t[0]!==n?(e=(0,m.jsx)("div",{className:i$.previewContainer,children:(0,m.jsx)(i4,{file:n})}),t[0]=n,t[1]=e):e=t[1],e}if("html"!==n.language)return null;{let e;return t[2]!==n?(e=(0,m.jsx)("div",{className:i$.previewContainer,children:(0,m.jsx)(iY,{file:n})}),t[2]=n,t[3]=e):e=t[3],e}}try{i5.displayName||(i5.displayName="FilePreview")}catch{}try{i8.displayName||(i8.displayName="CodeMirrorView")}catch{}try{i9.displayName||(i9.displayName="PreviewComponent")}catch{}let se={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function st(e){let t,n=(0,h.c)(3),{image:r}=e;return n[0]!==r.altText||n[1]!==r.url?(t=(0,m.jsx)("div",{className:se.container,children:(0,m.jsx)("img",{className:se.imageElement,src:r.url,alt:r.altText})}),n[0]=r.altText,n[1]=r.url,n[2]=t):t=n[2],t}try{st.displayName||(st.displayName="ImagePreview")}catch{}var sn=n(92982),sr=n(80019);let sa={container:"IssuePreview-module__container--XUu9S"},si=(0,_.memo)(function(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(17),{isPreviewOpening:u,issue:p,onClose:f}=e,[g,y]=(0,_.useState)(u);if(d[0]!==g?(t=()=>{if(g){let e=setTimeout(()=>y(!1),400);return()=>clearTimeout(e)}},n=[g],d[0]=g,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,_.useEffect)(t,n),d[3]!==p.href?(a=(0,m.jsx)(tE.K,{icon:O.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(p.href,"_blank")}}),d[3]=p.href,d[4]=a):a=d[4],r=a,d[5]!==f||d[6]!==r?(s={navigate:rS.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:f,additionalHeaderActions:r,showRepositoryPill:!0},d[5]=f,d[6]=r,d[7]=s):s=d[7],i=s,d[8]!==p.number||d[9]!==p.owner||d[10]!==p.repo?(l={owner:p.owner,repo:p.repo,number:p.number,type:"Issue"},d[8]=p.number,d[9]=p.owner,d[10]=p.repo,d[11]=l):l=d[11],o=l,g){let e;return d[12]!==i?(e=(0,m.jsx)(nX.Q,{optionConfig:i}),d[12]=i,d[13]=e):e=d[13],e}return d[14]!==o||d[15]!==i?(c=(0,m.jsx)("div",{className:sa.container,children:(0,m.jsx)(sr.e,{children:(0,m.jsx)(sn.cI,{itemIdentifier:o,optionConfig:i})})}),d[14]=o,d[15]=i,d[16]=c):c=d[16],c});try{si.displayName||(si.displayName="IssuePreview")}catch{}function ss(e){let t,n=(0,h.c)(16),{isOpening:r,onClose:a,previewItem:i}=e,s=null;switch(i.type){case"file":{let e;n[0]!==r||n[1]!==a||n[2]!==i?(e=(0,m.jsx)(i5,{isPreviewOpening:r,file:i,onClose:a}),n[0]=r,n[1]=a,n[2]=i,n[3]=e):e=n[3],s=e;break}case"issue":{let e;n[4]!==r||n[5]!==a||n[6]!==i?(e=(0,m.jsx)(si,{isPreviewOpening:r,issue:i,onClose:a}),n[4]=r,n[5]=a,n[6]=i,n[7]=e):e=n[7],s=e;break}case"new-issue":{let e;n[8]!==r||n[9]!==a||n[10]!==i?(e=(0,m.jsx)(iA,{isPreviewOpening:r,issue:i,onClose:a}),n[8]=r,n[9]=a,n[10]=i,n[11]=e):e=n[11],s=e;break}case"image":{let e;n[12]!==i?(e=(0,m.jsx)(st,{image:i}),n[12]=i,n[13]=e):e=n[13],s=e}}return n[14]!==s?(t=s?(0,m.jsx)(nw.t,{fallback:(0,m.jsx)(nH,{regionName:"This workbench item"}),children:s}):null,n[14]=s,n[15]=t):t=n[15],t}try{ss.displayName||(ss.displayName="ContentPreviewItem")}catch{}let so={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function sl(e){let t=(0,h.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(rk.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(O.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(O.CodeIcon,{}),t[2]=e):e=t[2],e}}function sc(e){let t=(0,h.c)(5),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,m.jsx)(sl,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"image":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(O.ImageIcon,{}),t[2]=e):e=t[2],e}case"issue":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(O.IssueOpenedIcon,{}),t[3]=e):e=t[3],e}case"new-issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(O.IssueDraftIcon,{}),t[4]=e):e=t[4],e}default:return null}}let sd=(0,_.forwardRef)(function(e,t){let n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,b,S=(0,h.c)(38);if(S[0]!==e){let{onClick:t,onClose:c,isActive:d,item:u,controlHintId:m,tabPanelId:h,...p}=e;i=t,r=d,a=u,n=m,l=h,s=p,o=()=>{c&&c(),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},S[0]=e,S[1]=n,S[2]=r,S[3]=a,S[4]=i,S[5]=s,S[6]=o,S[7]=l}else n=S[1],r=S[2],a=S[3],i=S[4],s=S[5],o=S[6],l=S[7];let C=o,j=(0,_.useRef)(null),w=a.name;S[8]!==r?(c=(0,v.$)(so.tabContent,{[so.isActive]:r}),S[8]=r,S[9]=c):c=S[9];let N=r?"true":void 0;S[10]!==i?(d=e=>{i&&i(e),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},S[10]=i,S[11]=d):d=S[11],S[12]!==C?(u=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":C();break;case"tab":if(e.shiftKey)break;e.preventDefault(),j.current?.focus()}},p=e=>{1===e.button&&C()},S[12]=C,S[13]=u,S[14]=p):(u=S[13],p=S[14]),S[15]!==a?(f=(0,m.jsx)("span",{className:so.icon,children:(0,m.jsx)(sc,{item:a})}),S[15]=a,S[16]=f):f=S[16];let I=`content-preview-tab-${a.id}`;S[17]!==I||S[18]!==w?(g=(0,m.jsx)("span",{className:so.title,"data-title":w,"data-testid":I,children:w}),S[17]=I,S[18]=w,S[19]=g):g=S[19],S[20]!==n||S[21]!==t||S[22]!==s||S[23]!==N||S[24]!==d||S[25]!==u||S[26]!==p||S[27]!==f||S[28]!==g||S[29]!==l?(y=(0,m.jsxs)("button",{className:so.mainButton,type:"button",role:"tab","aria-selected":N,"aria-describedby":n,"aria-controls":l,onClick:d,onKeyDown:u,onAuxClick:p,ref:t,...s,children:[f,g]}),S[20]=n,S[21]=t,S[22]=s,S[23]=N,S[24]=d,S[25]=u,S[26]=p,S[27]=f,S[28]=g,S[29]=l,S[30]=y):y=S[30];let E=`Close ${w}`;return S[31]!==C||S[32]!==E?(x=(0,m.jsx)("div",{className:so.closeButton,children:(0,m.jsx)(tE.K,{icon:O.XIcon,size:"small",variant:"invisible","aria-label":E,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:C,ref:j})}),S[31]=C,S[32]=E,S[33]=x):x=S[33],S[34]!==y||S[35]!==x||S[36]!==c?(b=(0,m.jsx)("div",{className:so.tabContainer,children:(0,m.jsxs)("div",{className:c,children:[y,x]})}),S[34]=y,S[35]=x,S[36]=c,S[37]=b):b=S[37],b});try{sl.displayName||(sl.displayName="CodeTabIcon")}catch{}try{sc.displayName||(sc.displayName="TabIcon")}catch{}try{sd.displayName||(sd.displayName="ContentPreviewTab")}catch{}function su(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{su.displayName||(su.displayName="DiceIcon")}catch{}let sm={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function sh(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(23),{isOpening:y}=e,x=(0,g.b)(),v=(0,z.Pk)(),b=(0,ed.zy)(),S=(0,_.useRef)(null);f[0]!==v?(t=(0,rf.W)(v),f[0]=v,f[1]=t):t=f[1];let C=t,j=(0,W.X)();f[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],f[2]=n):n=f[2];let[w,N]=(0,_.useState)(n);f[3]!==j.icebreakers?(r=()=>{var e;if(Array.isArray(e=j.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=j.icebreakers.find(sp);e&&e.data.length>0&&N(e.data)}},f[3]=j.icebreakers,f[4]=r):r=f[4],f[5]!==b||f[6]!==j.icebreakers?(a=[j.icebreakers,b],f[5]=b,f[6]=j.icebreakers,f[7]=a):a=f[7],(0,_.useEffect)(r,a),f[8]!==y?(i=()=>{y&&S.current&&window.requestAnimationFrame(()=>{S.current?.focus()})},s=[y],f[8]=y,f[9]=i,f[10]=s):(i=f[9],s=f[10]),(0,_.useEffect)(i,s),f[11]!==C||f[12]!==w||f[13]!==x||f[14]!==v?(o=()=>{if(0===w.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(w),t=0===v.messages.length?C:(0,rf.W)(v),n=v.currentUserLogin,r=e.message;x.sendChatMessage({thread:t,content:r.replaceAll("$$USERNAME$$",n),references:v.currentReferences,topic:v.currentTopic,context:v.context,customInstructions:v.customInstructions,model:v.model}),(0,e1.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:v.currentTopic?.name,mode:"immersive",suggestionId:e.id})},f[11]=C,f[12]=w,f[13]=x,f[14]=v,f[15]=o):o=f[15];let I=o;return f[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(O.BrowserIcon,{size:24,className:sm.icon}),u=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,m.jsx)("h2",{className:sm.heading,children:"View files directly within Copilot"}),c=(0,m.jsx)("p",{className:sm.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),f[16]=l,f[17]=c,f[18]=d,f[19]=u):(l=f[16],c=f[17],d=f[18],u=f[19]),f[20]!==I||f[21]!==v.isWaitingOnCopilot?(p=(0,m.jsxs)("div",{className:sm.container,children:[d,u,l,c,(0,m.jsx)(eM.Q,{ref:S,leadingVisual:su,onClick:I,disabled:v.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),f[20]=I,f[21]=v.isWaitingOnCopilot,f[22]=p):p=f[22],p}function sp(e){return"interactional"===e.type}try{sh.displayName||(sh.displayName="EmptyState")}catch{}let sf={container:"LoadingState-module__container--a0Cz6"};function sg(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:sf.container,children:(0,m.jsx)(rk.A,{size:"large"})}),t[0]=e):e=t[0],e}try{sg.displayName||(sg.displayName="LoadingState")}catch{}function sy(e,t,n={}){(0,e1.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function sx({returnFocusRef:e}){let t=(0,nd.tZ)(),{items:n,allOpenItems:r,selectedItem:a,openItem:i,closeItem:s,closeItems:o,closePreviewPane:l,showLoadingState:c}=(0,nd.xx)(),d=(0,nN.S)(t),u=t&&!d,h=d&&!t,p=r.map(e=>n.get(e)).filter(e=>e?.type==="file"),f=(0,_.useId)(),g=(0,_.useId)(),y=(0,_.useId)(),x=r.map(e=>n.get(e)).filter(e=>!!e);(0,_.useEffect)(()=>{h&&e.current?.focus()},[h,e]);let b=async()=>{let e=p.map(e=>new File([e.value],e.name));iU(new File([await (function(e,t={}){let n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof t.length||Number.isInteger(t.length))&&t.length>0&&(n["Content-Length"]=String(t.length)),t.metadata&&(n["Content-Length"]=String(nq(t.metadata))),new Response(function(e,t={}){let n=function(e){let t=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){let e=await t.next();if(e.done)return e;let[n,r]=nV(e.value);return{done:0,value:Object.assign(function(e,t){if(void 0===t||t instanceof Date||(t=new Date(t)),e instanceof File)return{isFile:1,t:t||new Date(e.lastModified),i:e.stream()};if(e instanceof Response)return{isFile:1,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),i:e.body};if(void 0===t)t=new Date;else if(isNaN(t))throw Error("Invalid modification date.");if(void 0===e)return{isFile:0,t:t};if("string"==typeof e)return{isFile:1,t:t,i:nk(e)};if(e instanceof Blob)return{isFile:1,t:t,i:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:1,t:t,i:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:1,t:t,i:nT(e)};if(Symbol.asyncIterator in e)return{isFile:1,t:t,i:nP(e[Symbol.asyncIterator]())};throw TypeError("Unsupported input format.")}(...r),nL(...n))}},throw:t.throw?.bind(t),[Symbol.asyncIterator](){return this}}}(e);return nP(async function*(e,t){let n=[],r=0n,a=0n,i=0;for await(let s of e){let e=function({o:e,l:t},n){return 8*(!t||(n??function(e){try{nU.decode(e)}catch{return 0}return 1}(e)))}(s,t.buffersAreUTF8);yield function(e,t=0){let n=nR(30);return n.setUint32(0,0x504b0304),n.setUint32(4,0x2d000800|t),nB(e.t,n,10),n.setUint16(26,e.o.length,1),nT(n)}(s,e),yield new Uint8Array(s.o),s.isFile&&(yield*n$(s));let o=s.u>=4294967295n,l=12*(r>=4294967295n)|28*o;yield function(e,t){let n=nR(16+8*!!t);return n.setUint32(0,0x504b0708),n.setUint32(4,e.isFile?e.m:0,1),t?(n.setBigUint64(8,e.u,1),n.setBigUint64(16,e.u,1)):(n.setUint32(8,nA(e.u),1),n.setUint32(12,nA(e.u),1)),nT(n)}(s,o),n.push(function(e,t,n=0,r=0){let a=nR(46);return a.setUint32(0,0x504b0102),a.setUint32(4,0x2d032d00),a.setUint16(8,2048|n),nB(e.t,a,12),a.setUint32(16,e.isFile?e.m:0,1),a.setUint32(20,nA(e.u),1),a.setUint32(24,nA(e.u),1),a.setUint16(28,e.o.length,1),a.setUint16(30,r,1),a.setUint16(40,e.isFile?33204:16893,1),a.setUint32(42,nA(t),1),nT(a)}(s,r,e,l)),n.push(s.o),l&&n.push(function(e,t,n){let r=nR(n);return r.setUint16(0,1,1),r.setUint16(2,n-4,1),16&n&&(r.setBigUint64(4,e.u,1),r.setBigUint64(12,e.u,1)),r.setBigUint64(n-8,t,1),nT(r)}(s,r,l)),o&&(r+=8n),a++,r+=BigInt(46+s.o.length)+s.u,i||(i=o)}let s=0n;for(let e of n)yield e,s+=BigInt(e.length);if(i||r>=4294967295n){let e=nR(76);e.setUint32(0,0x504b0606),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,0x2d032d00),e.setBigUint64(24,a,1),e.setBigUint64(32,a,1),e.setBigUint64(40,s,1),e.setBigUint64(48,r,1),e.setUint32(56,0x504b0607),e.setBigUint64(64,r+s,1),e.setUint32(72,1,1),yield nT(e)}let o=nR(22);o.setUint32(0,0x504b0506),o.setUint16(8,nD(a),1),o.setUint16(10,nD(a),1),o.setUint32(12,nA(s),1),o.setUint32(16,nA(r),1),yield nT(o)}(n,t),n)}(e,t),{headers:n})})(e).blob()],"files.zip"))},S=x.find(e=>e.id===a)??x[0],C=(0,_.useCallback)((e=!1)=>{if(S){let t=e&&1===x.length;s(S.id),t&&(l(),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[s,l,x.length,S]),j=(0,_.useRef)([]),w=(0,_.useRef)(null);(0,nE.G)({containerRef:w,focusableElementFilter:e=>"tab"===e.role,bindKeys:nI.z0.ArrowHorizontal|nI.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[x]);let N=!(0,nj.g)(w),I=e=>{let t=x[e];if(!t)return;let n=j.current[e+1]??j.current[e-1]??w.current;n?.focus();let r=1===x.length;s(t.id),r&&l(),sy("filePreviewTab.close",t)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:nQ.toolbar,children:[(0,m.jsx)("div",{className:(0,v.$)(nQ.actions,nQ.rightDivider),children:(0,m.jsx)(sv,{})}),(0,m.jsx)("div",{className:nQ.tabsContainer,children:(0,m.jsxs)("div",{className:nQ.tabs,role:"tablist","aria-label":"Workbench items",ref:w,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[x.map((e,t)=>(0,m.jsx)(sd,{id:e.id===a?f:void 0,tabPanelId:e.id===a?g:void 0,controlHintId:y,isActive:e.id===a,onClick:()=>{i(e.id),sy("filePreviewTab.click",e)},onClose:()=>I(t),item:e,ref:e=>{j.current[t]=e}},e.id)),(0,m.jsx)("span",{id:y,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,m.jsx)("span",{})]})}),r.length>0&&(0,m.jsx)("div",{className:(0,v.$)(nQ.actions,N&&nQ.leftDivider),children:(0,m.jsxs)(tI.W,{children:[(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{icon:O.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsxs)(tR.l,{children:[p.length>0&&(0,m.jsxs)(tR.l.Item,{onSelect:b,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(tR.l.Item,{onSelect:()=>{o(),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,m.jsx)("div",{className:nQ.content,role:"tabpanel",id:g,"aria-labelledby":f,children:c?(0,m.jsx)(sg,{}):S?(0,m.jsx)(ss,{isOpening:u,previewItem:S,onClose:C}):(0,m.jsx)(sh,{isOpening:u})})]})}function sv(){let e,t=(0,h.c)(2),{closePreviewPane:n}=(0,nd.xx)();return t[0]!==n?(e=(0,m.jsx)(tE.K,{variant:"invisible",icon:O.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{n(),(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}}),t[0]=n,t[1]=e):e=t[1],e}function s_(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:nQ.toolbar,children:(0,m.jsx)("div",{className:(0,v.$)(nQ.actions,nQ.rightDivider),children:(0,m.jsx)(sv,{})})}),(0,m.jsx)("div",{className:(0,v.$)(nQ.content),children:(0,m.jsx)(nH,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function sb(e){let t,n,r,a,i=(0,h.c)(10),s=(0,_.useId)(),o=ne(),l=(0,nd.tZ)(),c=ej.W.navigableRefs&&l?o:void 0;return i[0]!==s?(t=(0,m.jsx)("h2",{id:s,className:"sr-only",children:"Workbench"}),i[0]=s,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(s_,{}),i[2]=n):n=i[2],i[3]!==e?(r=(0,m.jsx)(nw.t,{fallback:n,children:(0,m.jsx)(sx,{...e})}),i[3]=e,i[4]=r):r=i[4],i[5]!==s||i[6]!==c||i[7]!==t||i[8]!==r?(a=(0,m.jsxs)("div",{"aria-labelledby":s,className:nQ.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:c,children:[t,r]}),i[5]=s,i[6]=c,i[7]=t,i[8]=r,i[9]=a):a=i[9],a}try{sx.displayName||(sx.displayName="ContentPreviewInner")}catch{}try{sv.displayName||(sv.displayName="CloseContentPreviewButton")}catch{}try{s_.displayName||(s_.displayName="ContentPreviewFallback")}catch{}try{sb.displayName||(sb.displayName="ContentPreview")}catch{}var sS=n(80597),sC=n(24001);function sj(){let e=(0,ed.zy)(),t=eu.fV.pathname;return(!t||ej.W.newThreadNavigate)&&(t=e.pathname),(0,_.useMemo)(()=>t.includes("/share/"),[t])}let sw=/\/copilot\/c\/([^/]+)/,sN=/\/copilot\/share\/([^/]+)/;function sI(){let e,t=(0,h.c)(2),n=(0,ed.zy)(),r=eu.fV.pathname||n.pathname||"",{threadID:a}=(0,ed.g)();e:{let n;t[0]!==r?(n=r.match(sw)||r.match(sN),t[0]=r,t[1]=n):n=t[1];let a=n;if(!a){e=null;break e}let[,i]=a;e=i??null}let i=e;return ej.W.newThreadNavigate?a??null:i}function sE(e,t){let n,r,a=(0,h.c)(17),i=(0,z.Pk)(),{currentReferences:s,context:o}=i,l=(0,g.b)(),{reloadQuota:c}=(0,ny.xR)();a[0]!==i?(n=(0,rf.W)(i),a[0]=i,a[1]=n):n=a[1];let d=n,{updateItem:u}=(0,nd.xx)(),m=sj(),p=sI(),{activeCopilotSpaceId:f}=(0,sC.C)();return a[2]!==o||a[3]!==s||a[4]!==e||a[5]!==f||a[6]!==m||a[7]!==l||a[8]!==t||a[9]!==c||a[10]!==i.customInstructions||a[11]!==i.model||a[12]!==i.skillOptions||a[13]!==d||a[14]!==p||a[15]!==u?(r=async n=>{if(c("handle_message_submit"),""===n.trim())return;for(let e of s){let n=(0,nb.oR)({ref:e,messageIndex:t});null!=n&&u({...n,isUserEdited:!1})}let r={thread:d,content:n,references:s,topic:e.current,context:o,customInstructions:i.customInstructions,model:i.model,customCopilotId:f,skillOptions:i.skillOptions};if(m){let e=await l.continueSharedThread(p);if(e){let{thread:t,messages:n}=e,a=n.at(-1)?.id;await l.sendChatMessage({...r,thread:t,parentMessageId:a})}}else await l.sendChatMessage(r)},a[2]=o,a[3]=s,a[4]=e,a[5]=f,a[6]=m,a[7]=l,a[8]=t,a[9]=c,a[10]=i.customInstructions,a[11]=i.model,a[12]=i.skillOptions,a[13]=d,a[14]=p,a[15]=u,a[16]=r):r=a[16],r}var sR=n(66871),sT=n(26807);function sk(){let e,t=(0,h.c)(3),n=(0,g.b)(),r=(0,sT.Z)();return t[0]!==n||t[1]!==r?(e=async e=>{window.location.pathname!==eC.Jz&&(ej.W.newThreadNavigate?r(eC.Jz):(0,sR.kd)(eC.Jz),n.dispatch({type:"SELECT_PLUGIN",plugin:null}),await n.selectThread(null,e))},t[0]=n,t[1]=r,t[2]=e):e=t[2],e}var sA=n(75718);let sD={banner:"ChatInputBanners-module__banner--QlUDL"},sP={container:"QuotaExceededBanner-module__container--BbiER"};function sL(){let e,t,n,r,a=(0,h.c)(12),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,ny.xR)(),[d,u]=(0,_.useState)(sM);a[0]!==s||a[1]!==c||a[2]!==l?(e=()=>{if(ej.W.premiumRequestQuotasEnabled&&void 0!==s){let e=nx.J.getQuotaExceededBannerFlag();ej.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(nx.J.setQuotaExceededBannerFlag(!0),u(!0)):u(e):(nx.J.removeQuotaExceededBannerFlag(),u(!1))}},a[0]=s,a[1]=c,a[2]=l,a[3]=e):e=a[3],a[4]!==s||a[5]!==c||a[6]!==o||a[7]!==l?(t=[s,o,c,l],a[4]=s,a[5]=c,a[6]=o,a[7]=l,a[8]=t):t=a[8],(0,_.useEffect)(e,t),a[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{nx.J.setQuotaExceededBannerFlag(!1),u(!1)},a[9]=n):n=a[9];let m=n,p=d&&!i&&void 0!==s&&ej.W.premiumRequestQuotasEnabled;return a[10]!==p?(r={visible:p,onDismiss:m},a[10]=p,a[11]=r):r=a[11],r}function sM(){return nx.J.getQuotaExceededBannerFlag()??!1}function sO(e){let t,n,r,a,i=(0,h.c)(13),{onDismiss:s}=e,{canUpgradePlan:o,canPurchaseAdditionalQuota:l,resetDate:c}=(0,ny.xR)(),d=`You have reached your monthly limit for premium requests. ${o?`Select an upgrade option or switch to the default model. Limit resets on ${c}.`:`Enable additional requests or switch to the default model. Limit resets on ${c}.`}`;i[0]!==l||i[1]!==o?(t=o?(0,m.jsx)(nm.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:sU,children:"Upgrade"}):l?(0,m.jsx)(nm.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:sB,children:"Enable additional requests"}):null,i[0]=l,i[1]=o,i[2]=t):t=i[2];let u=t;i[3]!==l||i[4]!==o?(n=o&&l?(0,m.jsx)(nW.A,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:sF,children:"Enable additional requests"}):null,i[3]=l,i[4]=o,i[5]=n):n=i[5];let p=n;return i[6]!==s?(r=()=>{s(),(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},i[6]=s,i[7]=r):r=i[7],i[8]!==d||i[9]!==u||i[10]!==p||i[11]!==r?(a=(0,m.jsx)("div",{className:sP.container,children:(0,m.jsx)(nh.l,{variant:"upsell",title:"Limit reached",description:d,hideTitle:!0,primaryAction:u,secondaryAction:p,onDismiss:r})}),i[8]=d,i[9]=u,i[10]=p,i[11]=r,i[12]=a):a=i[12],a}function sF(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function sB(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function sU(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{sO.displayName||(sO.displayName="QuotaExceededBanner")}catch{}let s$=ej.W.premiumRequestQuotasEnabled?eC.mF:10;function sV(){let e,t,n,r,a=(0,h.c)(10),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,ny.xR)(),[d,u]=(0,_.useState)(sq);a[0]!==s||a[1]!==i||a[2]!==c||a[3]!==o||a[4]!==l?(e=()=>{if((i||ej.W.premiumRequestQuotasEnabled)&&void 0!==s){let e=nx.J.getMeterBannerFlag();s>0&&s<=s$||!i&&o>0&&o<=s$||!i&&l&&c?null===e?(nx.J.setMeterBannerFlag(!0),u(!0)):u(e):(nx.J.removeMeterBannerFlag(),u(!1))}},t=[i,s,o,c,l],a[0]=s,a[1]=i,a[2]=c,a[3]=o,a[4]=l,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,_.useEffect)(e,t),a[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{nx.J.setMeterBannerFlag(!1),u(!1)},a[7]=n):n=a[7];let m=n,p=d&&void 0!==s&&(i||ej.W.premiumRequestQuotasEnabled);return a[8]!==p?(r={visible:p,onDismiss:m},a[8]=p,a[9]=r):r=a[9],r}function sq(){return nx.J.getMeterBannerFlag()??!1}function sW(e){let t,n,r,a,i,s=(0,h.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:c,canUpgradePlan:d,canPurchaseAdditionalQuota:u,premiumInteractionsQuotaExceeded:p,resetDate:f}=(0,ny.xR)(),g=c?`You have used ${100-s$}% of your free requests this month.`:p?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-s$}% of your premium responses this month. ${d?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;s[0]!==u||s[1]!==d||s[2]!==p?(t=d&&!p?(0,m.jsx)(nm.z,{as:"a",href:eC.Zs,onClick:sQ,children:"Upgrade"}):u&&!p?(0,m.jsx)(nm.z,{as:"a",href:eC.pF,onClick:sH,children:"Enable additional requests"}):(0,m.jsx)(nm.z,{as:"a",href:eC.MB,onClick:sz,children:"Manage billing"}),s[0]=u,s[1]=d,s[2]=p,s[3]=t):t=s[3];let y=t;s[4]!==u||s[5]!==d||s[6]!==p?(n=d&&u&&!p?(0,m.jsx)(nW.A,{as:"a",href:eC.Zs,onClick:sG,children:"Enable additional requests"}):null,s[4]=u,s[5]=d,s[6]=p,s[7]=n):n=s[7];let x=n;return s[8]!==o?(r=()=>{o(),(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},s[8]=o,s[9]=r):r=s[9],s[10]!==g||s[11]!==y||s[12]!==x||s[13]!==r?(a=(0,m.jsx)(nh.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:x,onDismiss:r}),s[10]=g,s[11]=y,s[12]=x,s[13]=r,s[14]=a):a=s[14],s[15]!==l||s[16]!==a?(i=(0,m.jsx)("div",{className:l,children:a}),s[15]=l,s[16]=a,s[17]=i):i=s[17],i}function sG(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function sz(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function sH(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function sQ(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{sW.displayName||(sW.displayName="QuotaMeterBanner")}catch{}function sK(){let e,t,n,r,a=(0,h.c)(12),{ambientError:i}=(0,z.Pk)(),s=sV(),o=sL();return a[0]!==i?(e=i&&(0,m.jsx)(sA.P,{ambientError:i,useLargerBorderRadius:!0}),a[0]=i,a[1]=e):e=a[1],a[2]!==o.onDismiss||a[3]!==o.visible?(t=o.visible&&(0,m.jsx)(sO,{onDismiss:o.onDismiss}),a[2]=o.onDismiss,a[3]=o.visible,a[4]=t):t=a[4],a[5]!==s.onDismiss||a[6]!==s.visible?(n=s.visible&&(0,m.jsx)(sW,{className:sD.banner,onDismiss:s.onDismiss}),a[5]=s.onDismiss,a[6]=s.visible,a[7]=n):n=a[7],a[8]!==e||a[9]!==t||a[10]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[e,t,n]}),a[8]=e,a[9]=t,a[10]=n,a[11]=r):r=a[11],r}try{sK.displayName||(sK.displayName="ChatInputBanners")}catch{}let sJ={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",spaceBannerContainer:"Layout-module__spaceBannerContainer--hYIu0",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD",fullscreenPluginPane:"Layout-module__fullscreenPluginPane--nfB0s"},sX={notificationsSection:"NotificationsSection-module__notificationsSection--ArEtE",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--XY6vv",banner:"NotificationsSection-module__banner--gFs8T"},sY={container:"FreeChatExceededBanner-module__container--tU_jX"};function sZ(){let e,t,n=(0,h.c)(3),{resetDate:r}=(0,ny.xR)(),a=`You have reached your free plan limit. Limit resets on ${r}.`;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nm.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:s0,children:"Upgrade"}),n[0]=e):e=n[0];let i=e;return n[1]!==a?(t=(0,m.jsx)("div",{className:sY.container,children:(0,m.jsx)(nh.l,{variant:"upsell",title:"Limit reached",description:a,hideTitle:!0,primaryAction:i})}),n[1]=a,n[2]=t):t=n[2],t}function s0(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{sZ.displayName||(sZ.displayName="FreeChatExceededBanner")}catch{}function s1(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nh.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function s2(e){let t,n=(0,h.c)(3),{customCopilot:r}=e,a=(0,ed.Zp)();return n[0]!==r||n[1]!==a?(t=r&&(0,m.jsx)(nh.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,m.jsx)(nm.z,{as:"a",href:(0,nv.Cb)(r),onClick:e=>{e.preventDefault(),a((0,nv.Cb)(r))},children:"Edit"})}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}function s3(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nh.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function s4(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nh.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function s5(e){let t,n,r,a=(0,h.c)(8),{errorMessages:i,onDismiss:s,className:o}=e,l=void 0===o?"":o;if(0===i.length)return null;a[0]!==i?(t=Array.from(new Set(i)),a[0]=i,a[1]=t):t=a[1];let c=t;a[2]!==c?(n=1===c.length?c[0]:(0,m.jsxs)(m.Fragment,{children:["Errors during attachment upload:",(0,m.jsx)("ul",{style:{paddingLeft:"1.2em"},children:c.map(s6)})]}),a[2]=c,a[3]=n):n=a[3];let d=n;return a[4]!==l||a[5]!==d||a[6]!==s?(r=(0,m.jsx)(nh.l,{variant:"critical",description:d,title:"Error during attachment upload",hideTitle:!0,className:l,onDismiss:s}),a[4]=l,a[5]=d,a[6]=s,a[7]=r):r=a[7],r}function s6(e){return(0,m.jsx)("li",{children:e},e)}try{s1.displayName||(s1.displayName="SpaceDeletedBanner")}catch{}try{s2.displayName||(s2.displayName="SpaceSizeExceededBanner")}catch{}try{s3.displayName||(s3.displayName="ReferenceSizeExceededBanner")}catch{}try{s4.displayName||(s4.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{s5.displayName||(s5.displayName="UploadErrorBanner")}catch{}let s7={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function s8(e){let t=(0,h.c)(4),{variant:n,customCopilot:r}=e;switch(n){case s7.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(s1,{}),t[0]=e):e=t[0],e}case s7.customCopilotSizeExceeded:{let e;return t[1]!==r?(e=(0,m.jsx)(s2,{customCopilot:r}),t[1]=r,t[2]=e):e=t[2],e}case s7.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}function s9(e,t){let n,r,a=(0,h.c)(9),{isPending:i,data:s,error:o}=(0,n_.Ao)(e),l=o instanceof n_.i9,c=o instanceof n_.OW;if(o&&!l&&!c)throw o;let d=i||l||c||!s?void 0:s;a[0]!==d||a[1]!==e||a[2]!==i||a[3]!==t?(n=function(e,t,n,r){if(e&&!r)return s7.spaceHomepage;if(n)return null;let a=!!t;return e&&!a?s7.customCopilotDisabled:(0,nv.Hh)(t)?s7.customCopilotSizeExceeded:null}(e,d,i,t),a[0]=d,a[1]=e,a[2]=i,a[3]=t,a[4]=n):n=a[4];let u=n;return a[5]!==d||a[6]!==i||a[7]!==u?(r={variant:u,customCopilot:d,isLoading:i},a[5]=d,a[6]=i,a[7]=u,a[8]=r):r=a[8],r}try{s8.displayName||(s8.displayName="SpaceConversationBanner")}catch{}function oe(){let e,t,n=(0,h.c)(16),{ambientError:r,customCopilots:a,selectedThreadID:i}=(0,z.Pk)(),s=(0,sS.G)();n[0]!==s||n[1]!==a?(e=(0,nv.JB)(a,s),n[0]=s,n[1]=a,n[2]=e):e=n[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:c}=(0,ny.xR)(),{variant:d,customCopilot:u}=s9(s,i),p=(!d||o)&&!(c&&l),f=sV(),g=sL(),y=d===s7.customCopilotDisabled,x=d===s7.customCopilotSizeExceeded,v=p&&r,_=p&&g.visible,b=p&&f.visible,S=!p,C=y||x,j=y||x||v||_||b||S;return n[3]!==r||n[4]!==u||n[5]!==g||n[6]!==f||n[7]!==v||n[8]!==S||n[9]!==_||n[10]!==b||n[11]!==j||n[12]!==y||n[13]!==C||n[14]!==x?(t=j&&(0,m.jsxs)("section",{"aria-label":"Notifications",className:sX.notificationsSection,children:[C&&(0,m.jsxs)("div",{className:sX.spaceBannerContainer,children:[y&&(0,m.jsx)(s1,{}),x&&(0,m.jsx)(s2,{customCopilot:u})]}),v&&(0,m.jsx)(sA.P,{ambientError:r,useLargerBorderRadius:!0}),!C&&(0,m.jsxs)(m.Fragment,{children:[_&&(0,m.jsx)(sO,{onDismiss:g.onDismiss}),b&&(0,m.jsx)(sW,{className:sX.banner,onDismiss:f.onDismiss}),S&&(0,m.jsx)(sZ,{})]})]}),n[3]=r,n[4]=u,n[5]=g,n[6]=f,n[7]=v,n[8]=S,n[9]=_,n[10]=b,n[11]=j,n[12]=y,n[13]=C,n[14]=x,n[15]=t):t=n[15],t}try{oe.displayName||(oe.displayName="NotificationsSection")}catch{}function ot(e){let t,n,r,a,i,s=(0,h.c)(17),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:c}=e,d=(0,z.Pk)(),{chatQuotaExceeded:u,isLicensedLimited:p}=(0,ny.xR)(),g=sk(),y=function(){let e,t=(0,h.c)(2),{figmaAuthUrl:n}=(0,W.X)();if(n){if(t[0]!==n){let r=new URL(n,location.origin);r.searchParams.set("return_url",location.pathname+location.search),e=r.toString(),t[0]=n,t[1]=e}else e=t[1];return e}}();s[0]!==c?(t={messageIndex:c},s[0]=c,s[1]=t):t=s[1];let x=nS(t),{versionedItems:v,items:_}=(0,nd.xx)();if(s[2]!==_){for(let[,e]of(r=new Set,_))"file"===e.type&&r.add(e.name);s[2]=_,s[3]=r}else r=s[3];n=r;let b=!(p&&u);return s[4]!==b||s[5]!==n||s[6]!==y||s[7]!==l||s[8]!==g||s[9]!==c||s[10]!==x||s[11]!==d||s[12]!==o||s[13]!==v?(a=b?(0,m.jsxs)(m.Fragment,{children:[ej.W.groupNotifications&&(0,m.jsx)(oe,{}),!ej.W.groupNotifications&&(0,m.jsx)(sK,{}),(0,m.jsx)(f.V,{showModelPicker:!0,onNewThreadSelected:g,textAreaRef:o,onSubmit:l,isStreaming:!!d.streamingMessage,size:"large",showSpacesSelect:!0,onSelectReference:x,getReferenceVersion:e=>(0,nb.wt)(e,c,v),existingFileNames:n,figmaAuthUrl:y})]}):!ej.W.groupNotifications&&(0,m.jsx)(sZ,{}),s[4]=b,s[5]=n,s[6]=y,s[7]=l,s[8]=g,s[9]=c,s[10]=x,s[11]=d,s[12]=o,s[13]=v,s[14]=a):a=s[14],s[15]!==a?(i=(0,m.jsx)("div",{className:sJ.chatInputContainer,children:a}),s[15]=a,s[16]=i):i=s[16],i}try{ot.displayName||(ot.displayName="ChatInputContainer")}catch{}var on=n(22469),or=n(53850),oa=n(86571);function oi(e){let t,n,r,a=(0,h.c)(7),{onFilesDrop:i,fileAcceptanceFn:s,onRejectedFiles:o}=e,[l,c]=(0,_.useState)(!1),d=(0,_.useRef)(0);return a[0]!==s||a[1]!==i||a[2]!==o?(t=()=>{let e=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(d.current=d.current+1,1===d.current&&c(!0))},t=e=>{e.preventDefault(),e.stopPropagation(),d.current=d.current-1,d.current<=0&&(d.current=0,c(!1))},n=e=>{e.preventDefault(),e.stopPropagation(),d.current=0,c(!1);let t=e.dataTransfer?.files;if(t&&0!==t.length)if(s){let e=Array.from(t),n=[],r=[];for(let t=0;t<e.length;t++){let a=e[t];s(a,t,e)?n.push(a):r.push(a)}if(r.length>0&&o&&o(r),n.length>0){let e=new DataTransfer;for(let t of n)e.items.add(t);i(e.files,r.length>0)}}else i(t,!1)};return document.addEventListener("dragover",os),document.addEventListener("dragenter",e),document.addEventListener("dragleave",t),document.addEventListener("drop",n),()=>{document.removeEventListener("dragover",os),document.removeEventListener("dragenter",e),document.removeEventListener("dragleave",t),document.removeEventListener("drop",n)}},n=[i,s,o],a[0]=s,a[1]=i,a[2]=o,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,_.useEffect)(t,n),a[5]!==l?(r={isDragging:l},a[5]=l,a[6]=r):r=a[6],r}function os(e){e.preventDefault(),e.stopPropagation()}let oo=(0,_.createContext)(void 0);function ol(e){let t,n,r,a,i,s=(0,h.c)(11),{children:o,model:l,state:c,manager:d}=e;s[0]!==d||s[1]!==l||s[2]!==c?(t=async(e,t)=>{if(!e)return;[...e].some(oc)&&!l.capabilities.supports.vision&&(d.addAmbientError(`The ${l.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,or.d)("vision_not_supported_for_model",{modelId:l.id,uploadType:t}));let[n,r]=on.s.getAllowedFiles([...e],l);if(n.length>0&&new on.s(c,d).addImageAttachments(n,t),r.length>0){let e=[],n=new oa.E(d);await Promise.allSettled(r.map(async t=>{await oa.E.isAttachable(t)?await n.addAttachment(t):e.push(t.type)})),e.length>0&&(0,or.d)("included_unsupported_file",{fileTypes:e.join(","),uploadType:t})}},s[0]=d,s[1]=l,s[2]=c,s[3]=t):t=s[3];let u=t;s[4]!==u?(n={onFilesDrop:e=>{u(e,"drag")}},s[4]=u,s[5]=n):n=s[5];let{isDragging:p}=oi(n);return s[6]!==p?(a={isDragging:p},s[6]=p,s[7]=a):a=s[7],r=a,s[8]!==o||s[9]!==r?(i=(0,m.jsx)(oo.Provider,{value:r,children:o}),s[8]=o,s[9]=r,s[10]=i):i=s[10],i}function oc(e){return e.type.startsWith("image/")}try{oo.displayName||(oo.displayName="DragDropContext")}catch{}try{ol.displayName||(ol.displayName="DragDropProvider")}catch{}var od=n(75320),ou=n(74302),om=n(7479),oh=n(40961),op=n(84464),of=n(53526),og=n(73451),oy=n(9591);let ox={hideOnDesktop:"ConversationActions-module__hideOnDesktop--zHNNV"};var ov=n(48071),o_=n(640),ob=n(52464);let oS={container:"ConversationSharingDialog-module__container--AYIbb",innerContainer:"ConversationSharingDialog-module__innerContainer--aF_PO",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--ccuni",textInputContainer:"ConversationSharingDialog-module__textInputContainer--IoJB6",textInput:"ConversationSharingDialog-module__textInput--hqfoz",success:"ConversationSharingDialog-module__success--IlwFA",spinner:"ConversationSharingDialog-module__spinner--yV4lB",successIcon:"ConversationSharingDialog-module__successIcon--tw4y6",mutedText:"ConversationSharingDialog-module__mutedText--VVQZ_",warningText:"ConversationSharingDialog-module__warningText--Pp3s_",snapshotText:"ConversationSharingDialog-module__snapshotText--Rrl0m",buttonStack:"ConversationSharingDialog-module__buttonStack--uAtQJ",lockIcon:"ConversationSharingDialog-module__lockIcon--zZ_aM",cancelButton:"ConversationSharingDialog-module__cancelButton--TjQ9X",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--FrM1T"},oC=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,v,b,S,C,j,w,N,I,E,R,T=(0,h.c)(83),{closeDialog:k,threadId:A,returnFocusRef:D}=e,P=(0,z.Pk)(),L=(0,g.b)(),[M,F]=(0,_.useState)(!1),[B,U]=(0,_.useState)(!1),[$,V]=(0,_.useState)(!1),[q,W]=(0,_.useState)(!1),{selectedThreadID:G,ssoOrganizations:H,apiUrl:Q,threads:K}=P;T[0]!==G||T[1]!==A||T[2]!==K?(t=K.get(A||G),T[0]=G,T[1]=A,T[2]=K,T[3]=t):t=T[3];let J=t;T[4]!==J?.sharedID?(n=()=>J?.sharedID||"",T[4]=J?.sharedID,T[5]=n):n=T[5];let[X,Y]=(0,_.useState)(n);T[6]!==J?(r=()=>J?.sharedMessageID?J.sharedMessageID:"",T[6]=J,T[7]=r):r=T[7];let[Z,ee]=(0,_.useState)(r),et=eu.fV.origin,en=`${et}/copilot/share/${X}`;T[8]!==M?(a=()=>{if(M){let e=setTimeout(()=>F(!1),1500);return()=>clearTimeout(e)}},i=[M],T[8]=M,T[9]=a,T[10]=i):(a=T[9],i=T[10]),(0,_.useEffect)(a,i),T[11]!==$?(s=()=>{if($){let e=setTimeout(()=>V(!1),1500);return()=>clearTimeout(e)}},o=[$],T[11]=$,T[12]=s,T[13]=o):(s=T[12],o=T[13]),(0,_.useEffect)(s,o),T[14]!==en?(l=async()=>{try{await (0,o_.D)(en),F(!0),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},T[14]=en,T[15]=l):l=T[15];let er=l;T[16]!==J?.sharedID||T[17]!==G||T[18]!==A?(c=()=>{(A||G)&&Y(J?.sharedID||"")},T[16]=J?.sharedID,T[17]=G,T[18]=A,T[19]=c):c=T[19];let ea=J?.sharedID;T[20]!==G||T[21]!==ea||T[22]!==A?(d=[ea,G,A],T[20]=G,T[21]=ea,T[22]=A,T[23]=d):d=T[23],(0,_.useEffect)(c,d),T[24]!==Q||T[25]!==L||T[26]!==G||T[27]!==H||T[28]!==A?(u=async()=>{U(!0);let e=A||G,t=new ov.k(Q,H),n=await t.shareThread(e,ej.W.copilotShareActiveSubthread&&e===G?L.FindLastMessageID():"");if(n.ok){U(!1);let{sharedAt:t,sharedID:r,sharedMessageID:a}=n.payload;Y(r),V(!0),ee(a),L.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:r,sharedAt:t,sharedMessageID:a}}),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:r})}else U(!1)},T[24]=Q,T[25]=L,T[26]=G,T[27]=H,T[28]=A,T[29]=u):u=T[29];let ei=u;T[30]!==Q||T[31]!==L||T[32]!==G||T[33]!==X||T[34]!==q||T[35]!==H||T[36]!==A?(p=async()=>{if(!q)return void W(!0);W(!1),U(!0);let e=A||G,t=new ov.k(Q,H),n=await t.unshareThread(e);if(n.ok){U(!1),ee("");let{sharedID:t,sharedAt:r,sharedMessageID:a}=n.payload;L.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:r,sharedMessageID:a}}),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:X})}else U(!1)},T[30]=Q,T[31]=L,T[32]=G,T[33]=X,T[34]=q,T[35]=H,T[36]=A,T[37]=p):p=T[37];let es=p;T[38]!==ei||T[39]!==B||T[40]!==X?(f=()=>{if(!X)return(0,m.jsx)(eM.Q,{variant:"primary",disabled:B,onClick:ei,children:"Share"})},T[38]=ei,T[39]=B,T[40]=X,T[41]=f):f=T[41];let eo=f;T[42]!==es||T[43]!==B||T[44]!==X?(y=()=>{if(X)return(0,m.jsx)(eM.Q,{variant:"danger",disabled:B,onClick:es,children:"Unshare"})},T[42]=es,T[43]=B,T[44]=X,T[45]=y):y=T[45];let el=y;T[46]!==M||T[47]!==B||T[48]!==X||T[49]!==q||T[50]!==$?(x=()=>B?(0,m.jsxs)("div",{className:oS.quickFadeUp,children:[(0,m.jsx)(rk.A,{size:"small",className:oS.spinner}),X?"Unsharing conversation...":"Sharing conversation..."]}):q?(0,m.jsxs)("div",{className:oS.quickFadeUp,children:[(0,m.jsx)(ob.A,{size:"medium",className:oS.warningText,children:"Confirm unsharing this conversation?"}),(0,m.jsx)(eM.Q,{variant:"default",onClick:()=>W(!1),className:oS.cancelButton,children:"Cancel"})]}):M?(0,m.jsxs)("div",{className:oS.quickFadeUp,children:[(0,m.jsx)(O.CheckIcon,{className:oS.successIcon}),(0,m.jsx)(ob.A,{size:"medium",className:oS.success,children:"Copied to clipboard"})]}):$?(0,m.jsxs)("div",{className:oS.quickFadeUp,children:[(0,m.jsx)(O.CheckIcon,{className:oS.successIcon}),(0,m.jsx)(ob.A,{size:"medium",className:oS.success,children:"Conversation shared"})]}):X?(0,m.jsxs)("div",{children:[(0,m.jsx)(O.UnlockIcon,{className:oS.lockIcon}),(0,m.jsx)(ob.A,{size:"medium",className:oS.mutedText,children:"Visible to anyone with the link"})]}):(0,m.jsx)("div",{}),T[46]=M,T[47]=B,T[48]=X,T[49]=q,T[50]=$,T[51]=x):x=T[51];let ec=x,ed=X?"Conversation shared":"Share conversation";T[52]!==Z||T[53]!==X?(v=(0,m.jsx)(nZ.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:Z?(0,m.jsxs)("span",{children:[(0,m.jsx)("span",{className:oS.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):X?(0,m.jsx)("span",{children:"This conversation and future messages are visible to anyone with the link. If private repository content is included, repository access is required to view."}):(0,m.jsx)("span",{children:"When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view."})}),T[52]=Z,T[53]=X,T[54]=v):v=T[54];let em=X&&en,eh=X?void 0:"https://github.com/copilot/share/\u2026";return T[55]!==er||T[56]!==X?(b=X?(0,m.jsx)(oy.A.Action,{onClick:()=>void er(),icon:O.CopyIcon,"aria-label":"Copy link"}):void 0,T[55]=er,T[56]=X,T[57]=b):b=T[57],T[58]!==em||T[59]!==eh||T[60]!==b?(S=(0,m.jsx)("div",{className:oS.innerContainer,children:(0,m.jsx)("div",{className:oS.sharedLinkContainer,children:(0,m.jsx)("div",{className:oS.textInputContainer,children:(0,m.jsx)(oy.A,{"aria-label":"Shared link",size:"large",readOnly:!0,value:em,placeholder:eh,className:oS.textInput,trailingAction:b})})})}),T[58]=em,T[59]=eh,T[60]=b,T[61]=S):S=T[61],T[62]!==v||T[63]!==S?(C=(0,m.jsxs)(nZ.B,{direction:"vertical",gap:"condensed",children:[v,S]}),T[62]=v,T[63]=S,T[64]=C):C=T[64],T[65]!==ec?(j=ec(),T[65]=ec,T[66]=j):j=T[66],T[67]!==eo?(w=eo(),T[67]=eo,T[68]=w):w=T[68],T[69]!==el?(N=el(),T[69]=el,T[70]=N):N=T[70],T[71]!==j||T[72]!==w||T[73]!==N?(I=(0,m.jsxs)(nZ.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:oS.buttonStack,children:[j,w,N]}),T[71]=j,T[72]=w,T[73]=N,T[74]=I):I=T[74],T[75]!==C||T[76]!==I?(E=(0,m.jsxs)("div",{className:oS.container,children:[C,I]}),T[75]=C,T[76]=I,T[77]=E):E=T[77],T[78]!==k||T[79]!==D||T[80]!==ed||T[81]!==E?(R=(0,m.jsx)(n7.l,{title:ed,onClose:k,width:"large",returnFocusRef:D,children:E}),T[78]=k,T[79]=D,T[80]=ed,T[81]=E,T[82]=R):R=T[82],R};try{oC.displayName||(oC.displayName="ConversationSharingDialog")}catch{}function oj(e){let t,n,r,a,i,s,o,l,c=(0,h.c)(21),{onOpenDialog:d,showShare:u,hideShareOnDesktop:p,isShared:f}=e,g=void 0===u||u,y=void 0!==p&&p,x=void 0!==f&&f,{canShareThread:v}=(0,W.X)(),{isWaitingOnCopilot:_,messages:b}=(0,z.Pk)(),S=(0,eC.Q7)(b).length>0||_;return c[0]!==d?(t=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),d("rename")},c[0]=d,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.PencilIcon,{})}),c[2]=n):n=c[2],c[3]!==t?(r=(0,m.jsxs)(tR.l.Item,{onSelect:t,children:[n,"Rename"]}),c[3]=t,c[4]=r):r=c[4],c[5]!==v||c[6]!==y||c[7]!==x||c[8]!==d||c[9]!==S||c[10]!==g?(a=g&&v&&(0,m.jsxs)(tR.l.Item,{className:y?ox.hideOnDesktop:void 0,disabled:S,onSelect:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),d("share")},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:x?(0,m.jsx)(O.UnlockIcon,{}):(0,m.jsx)(O.LockIcon,{})}),"Share"]}),c[5]=v,c[6]=y,c[7]=x,c[8]=d,c[9]=S,c[10]=g,c[11]=a):a=c[11],c[12]!==d?(i=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),d("delete")},c[12]=d,c[13]=i):i=c[13],c[14]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),c[14]=s):s=c[14],c[15]!==i?(o=(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:i,children:[s,"Delete"]}),c[15]=i,c[16]=o):o=c[16],c[17]!==o||c[18]!==r||c[19]!==a?(l=(0,m.jsxs)(m.Fragment,{children:[r,a,o]}),c[17]=o,c[18]=r,c[19]=a,c[20]=l):l=c[20],l}function ow(e){let t,n,r,a,i,s=(0,h.c)(28),{visibleDialog:o,onClose:l,threadName:c,threadId:d,selectedThreadId:u,onStartLoading:p,onFinishLoading:f}=e,{threads:y}=(0,z.Pk)(),x=(0,g.b)(),v=sk();s[0]!==l?(t=()=>{l(),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},s[0]=l,s[1]=t):t=s[1];let _=t;s[2]!==x||s[3]!==v||s[4]!==l||s[5]!==f||s[6]!==p||s[7]!==u||s[8]!==d||s[9]!==y?(n=async()=>{l(),(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),p();let e=y.get(d);e&&(d===u&&await v({clearTopic:!0,includeThreads:!1}),await x.deleteThread(e)),f()},s[2]=x,s[3]=v,s[4]=l,s[5]=f,s[6]=p,s[7]=u,s[8]=d,s[9]=y,s[10]=n):n=s[10];let b=n;s[11]!==x||s[12]!==l||s[13]!==f||s[14]!==p||s[15]!==d||s[16]!==y?(r=async e=>{l(),(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),p();let t=y.get(d);t&&await x.renameThread(t,e),f()},s[11]=x,s[12]=l,s[13]=f,s[14]=p,s[15]=d,s[16]=y,s[17]=r):r=s[17];let S=r;return s[18]!==_||s[19]!==b||s[20]!==l||s[21]!==S||s[22]!==d||s[23]!==c||s[24]!==o?(a="delete"===o?(0,m.jsx)(oN,{onCancel:l,onConfirm:b}):"rename"===o?(0,m.jsx)(oI,{currentName:c,onCancel:l,onSubmit:S}):"share"===o?(0,m.jsx)(oC,{closeDialog:_,threadId:d}):null,s[18]=_,s[19]=b,s[20]=l,s[21]=S,s[22]=d,s[23]=c,s[24]=o,s[25]=a):a=s[25],s[26]!==a?(i=(0,m.jsx)(m.Fragment,{children:a}),s[26]=a,s[27]=i):i=s[27],i}let oN=e=>{let t,n=(0,h.c)(3),{onConfirm:r,onCancel:a}=e;return n[0]!==a||n[1]!==r?(t=(0,m.jsx)(of.K,{title:"Delete conversation",onClose:e=>{"confirm"===e?((0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"}),r()):((0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),a())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t},oI=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(33),{currentName:g,onCancel:y,onSubmit:x}=e,[v,b]=(0,_.useState)(void 0),S=(0,_.useRef)(null),C=(0,_.useId)(),j=(0,_.useId)();f[0]!==x?(t=e=>{e.preventDefault();let t=S.current?.value?.trim()??"";t?t.length>100?(b("max_length"),S.current?.focus()):(b(void 0),x(t)):(b("required"),S.current?.focus())},f[0]=x,f[1]=t):t=f[1];let w=t;f[2]!==y?(n=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),y()},f[2]=y,f[3]=n):n=f[3];let N=n;f[4]!==j?(r=(0,m.jsx)("span",{id:j,children:"Rename conversation"}),f[4]=j,f[5]=r):r=f[5],f[6]!==N?(a={content:"Cancel",onClick:N},f[6]=N,f[7]=a):a=f[7],f[8]!==C?(i={content:"Update",buttonType:"primary",type:"submit",form:C,onClick:oE},f[8]=C,f[9]=i):i=f[9],f[10]!==a||f[11]!==i?(s=[a,i],f[10]=a,f[11]=i,f[12]=s):s=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(og.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),f[13]=o):o=f[13];let I=v?"error-message":void 0,E=v?"true":void 0;return f[14]!==g||f[15]!==j||f[16]!==I||f[17]!==E?(l=(0,m.jsx)(oy.A,{"aria-labelledby":j,"aria-describedby":I,"aria-invalid":E,ref:S,defaultValue:g,block:!0}),f[14]=g,f[15]=j,f[16]=I,f[17]=E,f[18]=l):l=f[18],f[19]!==v?(c=v&&(0,m.jsx)(og.A.Validation,{id:"error-message",variant:"error",children:"required"===v?"Enter a name":"Name cannot exceed 100 characters"}),f[19]=v,f[20]=c):c=f[20],f[21]!==l||f[22]!==c?(d=(0,m.jsxs)(og.A,{required:!0,children:[o,l,c]}),f[21]=l,f[22]=c,f[23]=d):d=f[23],f[24]!==C||f[25]!==w||f[26]!==d?(u=(0,m.jsx)("form",{id:C,onSubmit:w,children:d}),f[24]=C,f[25]=w,f[26]=d,f[27]=u):u=f[27],f[28]!==N||f[29]!==u||f[30]!==r||f[31]!==s?(p=(0,m.jsx)(n7.l,{title:r,onClose:N,width:"small",footerButtons:s,initialFocusRef:S,children:u}),f[28]=N,f[29]=u,f[30]=r,f[31]=s,f[32]=p):p=f[32],p};try{oj.displayName||(oj.displayName="ConversationActions")}catch{}try{ow.displayName||(ow.displayName="ConversationActionDialogs")}catch{}try{oN.displayName||(oN.displayName="DeleteDialog")}catch{}try{oI.displayName||(oI.displayName="RenameDialog")}catch{}function oE(){return(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}var oR=n(42522),oT=n(91321);let ok={shareButton:"ManageSharedConversationButton-module__shareButton--A4cNu",menuButton:"ManageSharedConversationButton-module__menuButton--BAXN7",successState:"ManageSharedConversationButton-module__successState--o6D7d",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--HzeSN"},oA={container:"UnshareConversationDialog-module__container--vV3vj",buttonStack:"UnshareConversationDialog-module__buttonStack--IQJqH",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--iNgZ2",threadTitle:"UnshareConversationDialog-module__threadTitle--aYFcp",threadDescription:"UnshareConversationDialog-module__threadDescription--Cpoli"},oD=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,v,b,S,C,j,w=(0,h.c)(60),{closeDialog:N,threadId:I}=e,E=(0,z.Pk)(),R=(0,g.b)(),{selectedThreadID:T,ssoOrganizations:k,apiUrl:A,threads:D}=E,[P,L]=(0,_.useState)(E.messages);w[0]!==I||w[1]!==D?(t=()=>{let e=D.get(I);return e?.sharedID||""},w[0]=I,w[1]=D,w[2]=t):t=w[2];let[M,O]=(0,_.useState)(t),F=(0,_.useRef)(""!==M),B=(0,_.useRef)("");w[3]!==P||w[4]!==M||w[5]!==E.apiUrl||w[6]!==E.ssoOrganizations||w[7]!==I?(n=()=>{let e=async()=>{if(0===P.filter(e=>e.threadID===I).length){let e=new ov.k(E.apiUrl,E.ssoOrganizations),t=await e.listSharedThreadMessages(M);t.ok&&L(t.payload.messages)}};B.current!==M&&M&&(B.current=M,e())},r=[M,I,P,E.apiUrl,E.ssoOrganizations],w[3]=P,w[4]=M,w[5]=E.apiUrl,w[6]=E.ssoOrganizations,w[7]=I,w[8]=n,w[9]=r):(n=w[8],r=w[9]),(0,_.useEffect)(n,r),w[10]!==T||w[11]!==I||w[12]!==D?(a=D.get(I||T),w[10]=T,w[11]=I,w[12]=D,w[13]=a):a=w[13];let U=a,$=P[P.length-1],V=$?.content||"";w[14]!==T||w[15]!==I||w[16]!==D?(i=()=>{let e=I||T;if(e){let t=D.get(e);O(t?.sharedID||"")}},w[14]=T,w[15]=I,w[16]=D,w[17]=i):i=w[17],w[18]!==R||w[19]!==T||w[20]!==I||w[21]!==D?(s=[R,O,T,D,I],w[18]=R,w[19]=T,w[20]=I,w[21]=D,w[22]=s):s=w[22],(0,_.useEffect)(i,s),w[23]!==A||w[24]!==N||w[25]!==R||w[26]!==T||w[27]!==M||w[28]!==k||w[29]!==I?(o=async()=>{let e=I||T,t=new ov.k(A,k),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:r,sharedMessageID:a}=n.payload;R.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:r,sharedMessageID:a}}),F.current=!1,N(),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:M})}},w[23]=A,w[24]=N,w[25]=R,w[26]=T,w[27]=M,w[28]=k,w[29]=I,w[30]=o):o=w[30];let q=o;w[31]!==N?(l=()=>{N()},w[31]=N,w[32]=l):l=w[32];let W=l;w[33]!==q||w[34]!==M?(c=()=>{if(M)return(0,m.jsx)(eM.Q,{onClick:q,variant:"danger",children:"Unshare"})},w[33]=q,w[34]=M,w[35]=c):c=w[35];let G=c;w[36]!==N?(d=()=>(0,m.jsx)(eM.Q,{onClick:N,children:"Cancel"}),w[36]=N,w[37]=d):d=w[37];let H=d;w[38]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),w[38]=u):u=w[38];let Q=U?.name||"";return w[39]!==Q?(p=(0,m.jsx)("span",{className:oA.threadTitle,children:Q}),w[39]=Q,w[40]=p):p=w[40],w[41]!==V?(f=(0,m.jsx)("span",{className:oA.threadDescription,children:V}),w[41]=V,w[42]=f):f=w[42],w[43]!==p||w[44]!==f?(y=(0,m.jsxs)(nZ.B,{direction:"vertical",className:oA.threadInfoStack,"aria-label":"Thread information",children:[p,f]}),w[43]=p,w[44]=f,w[45]=y):y=w[45],w[46]===Symbol.for("react.memo_cache_sentinel")?(x=(0,m.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),w[46]=x):x=w[46],w[47]!==H?(v=H(),w[47]=H,w[48]=v):v=w[48],w[49]!==G?(b=G(),w[49]=G,w[50]=b):b=w[50],w[51]!==v||w[52]!==b?(S=(0,m.jsxs)(nZ.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:oA.buttonStack,children:[v,b]}),w[51]=v,w[52]=b,w[53]=S):S=w[53],w[54]!==y||w[55]!==S?(C=(0,m.jsxs)("div",{className:oA.container,children:[u,y,x,S]}),w[54]=y,w[55]=S,w[56]=C):C=w[56],w[57]!==W||w[58]!==C?(j=(0,m.jsx)(n7.l,{title:"Unshare conversation",onClose:W,width:"large",children:C}),w[57]=W,w[58]=C,w[59]=j):j=w[59],j};try{oD.displayName||(oD.displayName="UnshareConversationDialog")}catch{}let oP=_.forwardRef(function(e,t){let n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b,S,C=(0,h.c)(46),{openDialog:j}=e,{selectedThreadID:w,threads:N}=(0,z.Pk)(),[I,E]=(0,_.useState)(!1),[R,T]=(0,_.useState)(!1),[k,A]=(0,_.useState)(!1),[D,P]=(0,_.useState)("Copy link");C[0]!==w||C[1]!==N?(n=N.get(w)?.sharedID,C[0]=w,C[1]=N,C[2]=n):n=C[2];let L=n,M=`${eu.fV.origin}/copilot/share/${L||"\u2026"}`,{messages:F}=(0,z.Pk)(),B=(0,eC.Q7)(F).length>0;C[3]!==B?(r=()=>B?"Disabled for Copilot extensions":"Anyone with the link can view this conversation",C[3]=B,C[4]=r):r=C[4];let U=r;C[5]!==w||C[6]!==M||C[7]!==L?(a=async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,o_.D)(M),T(!0),P("Copied!"),setTimeout(()=>{T(!1),P("Copy link")},2e3),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive",originalThreadId:w,sharedThreadId:L})}catch{}},C[5]=w,C[6]=M,C[7]=L,C[8]=a):a=C[8];let $=a;C[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{E(!0),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"})},C[9]=i):i=C[9];let V=i;C[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{E(!1),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})},C[10]=s):s=C[10];let q=s;C[11]!==B||C[12]!==j?(o=()=>{B||j()},C[11]=B,C[12]=j,C[13]=o):o=C[13];let W=o,G=U();C[14]!==B||C[15]!==W?(l=(0,m.jsx)(eM.Q,{leadingVisual:O.UnlockIcon,onClick:W,inactive:B,children:"Share"}),C[14]=B,C[15]=W,C[16]=l):l=C[16],C[17]!==t||C[18]!==G||C[19]!==l?(c=(0,m.jsx)(oR.m,{text:G,direction:"n",type:"label",ref:t,children:l}),C[17]=t,C[18]=G,C[19]=l,C[20]=c):c=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tI.W.Button,{"aria-label":"Additional share options",icon:O.TriangleDownIcon,className:ok.menuButton}),C[21]=d):d=C[21],C[22]!==R?(u=(0,m.jsx)(tR.l.LeadingVisual,{children:R?(0,m.jsx)(O.CheckIcon,{className:ok.successState}):(0,m.jsx)(O.CopyIcon,{})}),C[22]=R,C[23]=u):u=C[23];let H=R?ok.successState:void 0;return C[24]!==D||C[25]!==H?(p=(0,m.jsx)("span",{className:H,children:D}),C[24]=D,C[25]=H,C[26]=p):p=C[26],C[27]!==$||C[28]!==u||C[29]!==p?(f=(0,m.jsxs)(tR.l.Item,{onSelect:$,children:[u,p]},"copy-link"),C[27]=$,C[28]=u,C[29]=p,C[30]=f):f=C[30],C[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:V,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.UnlinkIcon,{})}),"Unshare"]},"Unshare-link"),C[31]=g):g=C[31],C[32]!==f?(y=(0,m.jsx)(tI.W.Overlay,{width:"small",children:(0,m.jsx)(tR.l,{children:(0,m.jsxs)(m.Fragment,{children:[f,g]})})}),C[32]=f,C[33]=y):y=C[33],C[34]!==k||C[35]!==y?(x=(0,m.jsxs)(tI.W,{open:k,onOpenChange:A,children:[d,y]}),C[34]=k,C[35]=y,C[36]=x):x=C[36],C[37]!==x||C[38]!==c?(v=(0,m.jsxs)(oT.A,{"data-testid":"manage-shared-conversations",className:`${ok.shareButton} ${ok.hideOnMobile}`,children:[c,x]}),C[37]=x,C[38]=c,C[39]=v):v=C[39],C[40]!==w||C[41]!==I?(b=I&&(0,m.jsx)(oD,{threadId:w,closeDialog:q}),C[40]=w,C[41]=I,C[42]=b):b=C[42],C[43]!==v||C[44]!==b?(S=(0,m.jsxs)(m.Fragment,{children:[v,b]}),C[43]=v,C[44]=b,C[45]=S):S=C[45],S});try{oP.displayName||(oP.displayName="ManageSharedConversationButton")}catch{}try{(i=ManageSharedConversationButtonWithRef).displayName||(i.displayName="ManageSharedConversationButtonWithRef")}catch{}let oL={shareButton:"ShareConversationButton-module__shareButton--_CML9",hideOnMobile:"ShareConversationButton-module__hideOnMobile--AYVjz"},oM=_.forwardRef(function(e,t){let n,r,a,i,s=(0,h.c)(12),{openDialog:o}=e,{messages:l}=(0,z.Pk)(),c=(0,eC.Q7)(l).length>0;s[0]!==c||s[1]!==o?(n=()=>{c||o()},s[0]=c,s[1]=o,s[2]=n):n=s[2];let d=n;s[3]!==c?(r=()=>c?"Disabled for Copilot extensions":"This conversation has not yet been shared",s[3]=c,s[4]=r):r=s[4];let u=r();return s[5]!==c||s[6]!==d?(a=(0,m.jsx)(eM.Q,{leadingVisual:O.LockIcon,inactive:c,onClick:d,className:`${oL.shareButton} ${oL.hideOnMobile}`,children:"Share"}),s[5]=c,s[6]=d,s[7]=a):a=s[7],s[8]!==t||s[9]!==u||s[10]!==a?(i=(0,m.jsx)(oR.m,{text:u,direction:"n",type:"label",ref:t,children:a}),s[8]=t,s[9]=u,s[10]=a,s[11]=i):i=s[11],i});try{oM.displayName||(oM.displayName="ShareConversationButton")}catch{}try{(s=ShareConversationButtonWithRef).displayName||(s.displayName="ShareConversationButtonWithRef")}catch{}let oO=()=>{let e,t,n,r,a,i,s=(0,h.c)(12),{selectedThreadID:o,threads:l}=(0,z.Pk)();s[0]!==o||s[1]!==l?(e=o&&l.get(o)?.sharedID,s[0]=o,s[1]=l,s[2]=e):e=s[2];let c=!!e,[d,u]=(0,_.useState)(!1),p=(0,_.useRef)(null);s[3]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{u(!0),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"})},s[3]=t):t=s[3];let f=t;s[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{u(!1),(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},s[4]=n):n=s[4];let g=n;return s[5]!==c?(r=c?(0,m.jsx)(oP,{openDialog:f,ref:p}):(0,m.jsx)(oM,{openDialog:f,ref:p}),s[5]=c,s[6]=r):r=s[6],s[7]!==d?(a=d&&(0,m.jsx)(oC,{closeDialog:g,returnFocusRef:p}),s[7]=d,s[8]=a):a=s[8],s[9]!==r||s[10]!==a?(i=(0,m.jsxs)(m.Fragment,{children:[r,a]}),s[9]=r,s[10]=a,s[11]=i):i=s[11],i};try{oO.displayName||(oO.displayName="ConversationSharingButton")}catch{}let oF={header:"Header-module__header--ufLgW",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP"};var oB=n(8386),oU=n(56221);let o$={dialog:"ManageSharedConversationsDialog-module__dialog--kEiyu",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--JL7Md",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--vcDiF",footer:"ManageSharedConversationsDialog-module__footer--qEM5d",mutedText:"ManageSharedConversationsDialog-module__mutedText--ZU5NV",footerContent:"ManageSharedConversationsDialog-module__footerContent--x0AC3",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--hfY2Z",footerRight:"ManageSharedConversationsDialog-module__footerRight--bhyxU",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--h4QXT",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--L_rid",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--kiSX1"},oV=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},oq=({closeDialog:e,returnFocusRef:t})=>{let n=(0,g.b)(),r=(0,z.Pk)(),[a,i]=(0,_.useState)(0),[s,o]=(0,_.useState)([]),[l,c]=(0,_.useState)(!0),[d,u]=(0,_.useState)(!1),[h,p]=(0,_.useState)(null),[f,y]=(0,_.useState)(!1),[x,v]=(0,_.useState)(5>s.length),b=5*a,S=s.slice(b,b+5);(0,_.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:oV(e.updatedAt),sharedUrl:`${eu.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eu.fV.origin}/copilot/c/${e.id}`}))),c(!1)})()},[n]),(0,_.useEffect)(()=>{x&&a>0&&s.length<=5*a&&i(0);let e=5<s.length;e!==x&&v(e)},[s,a,5,x]);let C=(0,_.useCallback)(()=>{e()},[e]),j=(0,_.useCallback)(async()=>{if(!f)return void y(!0);y(!1),c(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{c(!1)}},[f,n]),w=e=>{p(e),u(!0)},N=async()=>{u(!1),p(null),c(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:oV(e.updatedAt),sharedUrl:`${eu.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eu.fV.origin}/copilot/c/${e.id}`}))),c(!1)},I=l||"error"===r.sharedThreadsLoading.state||0===s.length,E=(0,_.useMemo)(()=>{if(!s.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{f?j():y(!0)}};return f?[{buttonType:"default",content:"Cancel",onClick:()=>y(!1)},e]:[e]},[s.length,f,j]),R=e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`,T=(0,_.useMemo)(()=>l?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===r.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[l,r.sharedThreadsLoading.state]);return(0,m.jsxs)(n7.l,{title:"Manage shared conversations",width:"xlarge",className:o$.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:C,returnFocusRef:t,renderFooter:()=>E?.length?(0,m.jsx)(n7.l.Footer,{className:o$.footer,children:(0,m.jsxs)("div",{className:o$.footerContent,children:[(0,m.jsx)("div",{className:o$.footerLeft,children:f&&(0,m.jsx)("div",{className:`${o$.confirmationText} ${o$.quickFadeUp}`,children:R(s.length)})}),(0,m.jsx)("div",{className:o$.footerRight,children:(0,m.jsx)(n7.l.Buttons,{buttons:E})})]})}):null,children:[I?(0,m.jsxs)(nG.E,{children:[(0,m.jsx)(nG.E.Visual,{children:T.isSpinner?(0,m.jsx)(nZ.B,{direction:"horizontal",align:"center",children:(0,m.jsx)(rk.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,m.jsx)("div",{className:o$.mutedText,children:"error"===T.result?(0,m.jsx)(O.AlertIcon,{size:"medium",className:o$.alertIcon,"aria-label":"Error loading shared conversations"}):(0,m.jsx)(O.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,m.jsx)(nG.E.Heading,{children:T.heading}),(0,m.jsx)(nG.E.Description,{children:T.description})]}):(0,m.jsxs)(oB.X.Container,{children:[(0,m.jsx)(oU.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,m.jsx)(nW.A,{href:e.threadUrl,className:o$.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,m.jsx)("span",{className:o$.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,m.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:o$.actionButtons,children:[(0,m.jsx)(iM.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,m.jsx)(tE.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:O.UnlinkIcon,variant:"invisible",onClick:()=>w(e)})]})})}],data:S}),s.length>5&&(0,m.jsx)(oB.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:a,totalCount:s.length,onChange:e=>{i(e.pageIndex)},showPages:!1})]}),d&&h&&(0,m.jsx)(oD,{threadId:h.id,closeDialog:N})]})};try{oq.displayName||(oq.displayName="ManageSharedConversationsDialog")}catch{}var oW=n(74547);let oG=()=>{let e=(0,z.Pk)(),t=(0,sS.G)(),n=(0,nv.JB)(e.customCopilots,t),r=(0,nv.mM)(),a=(0,nv.FQ)(),i=r||n,s=!a&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];i&&e.push({label:"Spaces",href:eC.VR}),s&&n&&e.push({label:n.name,href:(0,nv.Cb)(n)}),(0,oW.FC)(e)}}},oz={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},oH=(0,_.forwardRef)(function(e,t){let n,r,a,i,s,o,l,c=(0,h.c)(12),d=(0,g.b)(),[u,p]=(0,_.useState)(!1),[f,y]=(0,_.useState)(void 0);c[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>p(!0)}),c[0]=n):n=c[0],(0,_.useImperativeHandle)(t,n),c[1]!==d?(r=()=>{(async()=>{y(await d.getSystemPrompt())})()},a=[d],c[1]=d,c[2]=r,c[3]=a):(r=c[2],a=c[3]),(0,_.useEffect)(r,a),c[4]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{p(!1),(0,e1.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},c[4]=i):i=c[4];let x=i;c[5]!==f?(s=()=>(0,m.jsxs)("div",{className:oz.content,children:[(0,m.jsxs)("p",{className:oz.description,children:["The system prompt for"," ",(0,m.jsx)(nW.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,m.jsx)("div",{className:oz.textareaContainer,children:(0,m.jsx)("textarea",{className:oz.textarea,readOnly:!0,children:f})})]}),c[5]=f,c[6]=s):s=c[6];let v=s;return c[7]!==u||c[8]!==v?(o=u&&(0,m.jsx)(n7.l,{onClose:x,title:"System prompt",renderBody:v,className:oz.dialog}),c[7]=u,c[8]=v,c[9]=o):o=c[9],c[10]!==o?(l=(0,m.jsx)(m.Fragment,{children:o}),c[10]=o,c[11]=l):l=c[11],l});try{oH.displayName||(oH.displayName="SystemPromptDialog")}catch{}function oQ(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,x,b,S,C,j,w,N,I,E,R,T,k,A,D,P,L,M,F,B,U,$,V,q=(0,h.c)(75),{showPreviewPaneButton:G,conversationSpecificItems:H,customButtons:Q}=e,K=void 0===G||G,J=(0,g.b)(),X=(0,z.Pk)(),{repoCustomInstructionsEnabled:Y,selectedThreadID:Z,threads:ee,messagesLoading:et,currentReferences:en}=X,er=(0,z.pn)(oY),ea=sj(),ei=(0,sS.G)(),es=(0,nv.JB)(X.customCopilots,ei);es?(0,y.D)(`${er} \xb7 GitHub Copilot Spaces \xb7 ${es.name}`):ea?(0,y.D)("Shared conversation \xb7 GitHub Copilot"):(0,y.D)(`${er} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:eo}=oG();q[0]!==eo?(t=()=>{eo()},q[0]=eo,q[1]=t):t=q[1],q[2]!==ei||q[3]!==eo?(n=[eo,ei],q[2]=ei,q[3]=eo,q[4]=n):n=q[4],(0,_.useEffect)(t,n);let el=(0,_.useRef)(null),ec=(0,_.useRef)(null);q[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,om.X)(),q[5]=a):a=q[5],r=a,q[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,ar.G7)("copilot_staff_prompt_dialog")&&r,q[6]=i):i=q[6];let ed=i,[eu,em]=(0,_.useState)(!1),[eh,ep]=(0,_.useState)(!1),ef=(0,_.useRef)(null),eg=!!nx.J.settings?.instructionPrompt,{isLicensedLimited:ex}=(0,ny.xR)(),ev=(0,_.useRef)(null),[e_,eb]=(0,_.useState)(null),eS=(0,eC.NJ)(en).length>0,[ej,ew,eN]=(0,op.B)(!1),{canShareThread:eI}=(0,W.X)(),eE="loaded"===et.state,[eR,eT]=(0,_.useState)(!1),ek=eI&&!ea&&Z&&!ei&&eE,eA=(0,nv.mM)(),eD=!!(ei||eA);return q[7]!==ek?(s=ek&&(0,m.jsx)(oO,{}),q[7]=ek,q[8]=s):s=q[8],q[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,v.$)(eg&&oF.editedPromptIndicator),q[9]=o):o=q[9],q[10]!==ej?(l=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{icon:O.KebabHorizontalIcon,"aria-label":"Menu",onClick:oX,className:o,loading:ej})}),q[10]=ej,q[11]=l):l=q[11],q[12]!==ea||q[13]!==ei||q[14]!==Z||q[15]!==ee?(c=Z&&!ea&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tR.l.Group,{children:[(0,m.jsx)(tR.l.GroupHeading,{children:"Conversation"}),(0,m.jsx)(oj,{onOpenDialog:eb,isShared:!!ee.get(Z)?.sharedID,showShare:!ei,hideShareOnDesktop:!0})]}),(0,m.jsx)(tR.l.Divider,{})]}),q[12]=ea,q[13]=ei,q[14]=Z,q[15]=ee,q[16]=c):c=q[16],q[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tR.l.GroupHeading,{children:"Prompt"}),q[17]=d):d=q[17],q[18]!==J||q[19]!==Y||q[20]!==eS?(u=eS&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>{J.toggleRepoCustomInstructions(!Y)},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.RepoIcon,{})}),Y?"Disable custom instructions":"Enable custom instructions"]}),q[18]=J,q[19]=Y,q[20]=eS,q[21]=u):u=q[21],q[22]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{ep(!0),(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},q[22]=p):p=q[22],q[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsxs)(tR.l.Item,{onSelect:p,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.NoteIcon,{})}),"Personal instructions"]}),q[23]=f):f=q[23],q[24]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{ec.current?.openDialog(),(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},q[24]=x):x=q[24],q[25]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsxs)(tR.l.Item,{onSelect:x,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.CpuIcon,{})}),"System prompt"]}),S=ed&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>em(!0),children:[(0,m.jsx)(tR.l.LeadingVisual,{children:eg?(0,m.jsx)("span",{className:(0,v.$)(oF.editedPromptIndicator,oF.leadingVisual),children:(0,m.jsx)(O.BeakerIcon,{})}):(0,m.jsx)(O.BeakerIcon,{})}),"Edit prompt",(0,m.jsx)(tR.l.TrailingVisual,{children:(0,m.jsx)(ey.A,{variant:"attention",children:"Staff"})})]}),q[25]=b,q[26]=S):(b=q[25],S=q[26]),q[27]!==u?(C=(0,m.jsxs)(tR.l.Group,{children:[d,u,f,b,S]}),q[27]=u,q[28]=C):C=q[28],q[29]===Symbol.for("react.memo_cache_sentinel")?(j=(0,m.jsx)(tR.l.Divider,{}),q[29]=j):j=q[29],q[30]!==eD?(w=!eD&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>{eT(!0)},children:["Manage shared conversations",(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.ListUnorderedIcon,{})})]}),q[30]=eD,q[31]=w):w=q[31],q[32]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{el.current?.openDialog(),(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},q[32]=N):N=q[32],q[33]===Symbol.for("react.memo_cache_sentinel")?(I=(0,m.jsxs)(tR.l.Item,{onSelect:N,children:["Give feedback",(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.CommentIcon,{})})]}),q[33]=I):I=q[33],q[34]!==ex?(E=ex&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tR.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:oJ,children:["Upgrade to Pro",(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.CopilotIcon,{})})]})}),q[34]=ex,q[35]=E):E=q[35],q[36]===Symbol.for("react.memo_cache_sentinel")?(R=(0,m.jsxs)(tR.l.LinkItem,{href:"/settings/copilot",onClick:oK,children:["Settings",(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.GearIcon,{})})]}),q[36]=R):R=q[36],q[37]!==w||q[38]!==E?(T=(0,m.jsxs)(tR.l.Group,{children:[w,I,E,R]}),q[37]=w,q[38]=E,q[39]=T):T=q[39],q[40]!==H||q[41]!==c||q[42]!==C||q[43]!==T?(k=(0,m.jsx)(tI.W.Overlay,{width:"small",children:(0,m.jsxs)(tR.l,{children:[H,c,C,j,T]})}),q[40]=H,q[41]=c,q[42]=C,q[43]=T,q[44]=k):k=q[44],q[45]!==k||q[46]!==l?(A=(0,m.jsxs)(tI.W,{anchorRef:ev,children:[l,k]}),q[45]=k,q[46]=l,q[47]=A):A=q[47],q[48]!==K?(D=K&&(0,m.jsx)(oZ,{}),q[48]=K,q[49]=D):D=q[49],q[50]===Symbol.for("react.memo_cache_sentinel")?(P=(0,m.jsx)(oH,{ref:ec}),L=(0,m.jsx)(tN.l,{ref:el,mode:"immersive",returnFocusRef:ev}),q[50]=P,q[51]=L):(P=q[50],L=q[51]),q[52]!==e_||q[53]!==Z||q[54]!==ew||q[55]!==eN||q[56]!==er?(M=Z&&(0,m.jsx)(ow,{visibleDialog:e_,onClose:()=>{(0,oh.flushSync)(()=>eb(null)),ev.current?.focus()},threadName:er,threadId:Z,selectedThreadId:Z,onStartLoading:ew,onFinishLoading:eN}),q[52]=e_,q[53]=Z,q[54]=ew,q[55]=eN,q[56]=er,q[57]=M):M=q[57],q[58]!==Q||q[59]!==A||q[60]!==D||q[61]!==M||q[62]!==s?(F=(0,m.jsxs)("div",{className:oF.rightControls,children:[s,Q,A,D,P,L,M]}),q[58]=Q,q[59]=A,q[60]=D,q[61]=M,q[62]=s,q[63]=F):F=q[63],q[64]!==eu?(B=eu&&(0,m.jsx)(ou.X,{promptDialogRef:ef,onDismiss:()=>em(!1)}),q[64]=eu,q[65]=B):B=q[65],q[66]!==eh?(U=eh&&(0,m.jsx)(od.Y,{onDismiss:()=>ep(!1),returnFocusRef:ev}),q[66]=eh,q[67]=U):U=q[67],q[68]!==eR?($=eR&&(0,m.jsx)(oq,{closeDialog:()=>{eT(!1)}}),q[68]=eR,q[69]=$):$=q[69],q[70]!==F||q[71]!==B||q[72]!==U||q[73]!==$?(V=(0,m.jsxs)("div",{className:oF.header,children:[F,B,U,$]}),q[70]=F,q[71]=B,q[72]=U,q[73]=$,q[74]=V):V=q[74],V}function oK(){return(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function oJ(){return(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"})}function oX(){return(0,e1.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}function oY(e){return(0,eC.CB)((0,rf.W)(e))}function oZ(){let e,t=(0,h.c)(4),n=(0,nd.tZ)(),{openPreviewPane:r}=(0,nd.xx)(),a=ne();return t[0]!==a||t[1]!==r||t[2]!==n?(e=!n&&(0,m.jsx)(tE.K,{icon:O.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),r()},ref:ej.W.navigableRefs?a:void 0}),t[0]=a,t[1]=r,t[2]=n,t[3]=e):e=t[3],e}try{oQ.displayName||(oQ.displayName="Header")}catch{}try{oZ.displayName||(oZ.displayName="PreviewPaneButton")}catch{}let o0={container:"Breadcrumbs-module__container--YKNHG",list:"Breadcrumbs-module__list--TnuV6",item:"Breadcrumbs-module__item--_vfSo",link:"Breadcrumbs-module__link--mbjKG",icon:"Breadcrumbs-module__icon--_xcXd"},o1=e=>{let t,n,r=(0,h.c)(5),{children:a,"aria-label":i}=e,s=void 0===i?"Breadcrumbs":i;return r[0]!==a?(t=(0,m.jsx)("ol",{className:o0.list,children:a}),r[0]=a,r[1]=t):t=r[1],r[2]!==s||r[3]!==t?(n=(0,m.jsx)("nav",{className:o0.container,"aria-label":s,children:t}),r[2]=s,r[3]=t,r[4]=n):n=r[4],n},o2=e=>{let t,n,r,a,i=(0,h.c)(8);return i[0]!==e?({href:n,children:t,...r}=e,i[0]=e,i[1]=t,i[2]=n,i[3]=r):(t=i[1],n=i[2],r=i[3]),i[4]!==t||i[5]!==n||i[6]!==r?(a=(0,m.jsx)("li",{className:o0.item,children:(0,m.jsx)(ed.N_,{...r,to:n,className:o0.link,"aria-current":"page",children:t})}),i[4]=t,i[5]=n,i[6]=r,i[7]=a):a=i[7],a},o3=e=>{let t,n,r,a=(0,h.c)(6),{children:i,menuOverlay:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("span",{className:o0.icon,children:(0,m.jsx)(O.TriangleDownIcon,{})}),a[0]=t):t=a[0],a[1]!==i?(n=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsxs)("button",{className:o0.link,"aria-current":"page","aria-haspopup":"true",children:[i,t]})}),a[1]=i,a[2]=n):n=a[2],a[3]!==s||a[4]!==n?(r=(0,m.jsx)("li",{className:o0.item,children:(0,m.jsxs)(tI.W,{children:[n,s]})}),a[3]=s,a[4]=n,a[5]=r):r=a[5],r};o1.Item=o2,o1.ItemWithMenu=o3;try{o1.displayName||(o1.displayName="Breadcrumbs")}catch{}try{o2.displayName||(o2.displayName="Item")}catch{}try{o3.displayName||(o3.displayName="ItemWithMenu")}catch{}let o4={header:"HeaderV2-module__header--cIsU8",leftControls:"HeaderV2-module__leftControls--QxvCJ",rightControls:"HeaderV2-module__rightControls--BPxjz"};function o5(e){let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(37),{showPreviewPaneButton:f,conversationSpecificItems:g,customButtons:x}=e,v=void 0===f||f,b=(0,z.Pk)(),{selectedThreadID:S,threads:C,messagesLoading:j,activePlugin:w,messages:N}=b,I=(0,z.pn)(o6),E=sj(),R=(0,sS.G)(),T=(0,nv.JB)(b.customCopilots,R),k=(0,n_.BV)(),A=(0,nv.mM)(),D=(0,eS.qw)();p[0]!==w||p[1]!==D?(t=w?D.find(e=>e.id===w)?.displayName:null,p[0]=w,p[1]=D,p[2]=t):t=p[2];let P=t,[,L,M]=(0,op.B)(!1);T?(0,y.D)(`${I} \xb7 GitHub Copilot Spaces \xb7 ${T.name}`):E?(0,y.D)("Shared conversation \xb7 GitHub Copilot"):(0,y.D)(`${I} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:F}=oG();p[3]!==F?(n=()=>{F()},p[3]=F,p[4]=n):n=p[4],p[5]!==R||p[6]!==F?(r=[F,R],p[5]=R,p[6]=F,p[7]=r):r=p[7],(0,_.useEffect)(n,r),p[8]!==E||p[9]!==S||p[10]!==C?(a=()=>{if(!S)return eC.Jz;if(E){let e=C.get(S)?.sharedID;return e?`/copilot/shared/${e}`:`/copilot/c/${S}`}return`/copilot/c/${S}`},p[8]=E,p[9]=S,p[10]=C,p[11]=a):a=p[11];let B=a;i=A&&!R||!S&&!w&&!A;let U=(0,_.useRef)(null),[$,V]=(0,_.useState)(null),{canShareThread:q}=(0,W.X)(),G="loaded"===j.state,H=q&&!E&&S&&!R&&G,Q=(0,eC.Q7)(N).length>0;p[12]!==Q||p[13]!==V?(s=()=>{Q||V("share")},p[12]=Q,p[13]=V,p[14]=s):s=p[14];let K=s,J=ej.W.immersiveAppShell&&(0,m.jsx)("div",{className:o4.leftControls,children:!i&&(0,m.jsx)(o1,{children:k&&R?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o1.Item,{href:eC.VR,children:"Spaces"}),S||!g?(0,m.jsx)(o1.Item,{href:T?(0,nv.Cb)(T):eC.VR,children:T?.name||""}):(0,m.jsx)(o1.ItemWithMenu,{menuOverlay:(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsx)(tR.l,{children:g})}),children:T?.name||""}),S&&(0,m.jsx)(o1.ItemWithMenu,{menuOverlay:(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(oj,{onOpenDialog:V,isShared:!!C.get(S)?.sharedID,showShare:!R,hideShareOnDesktop:!0})})}),children:I})]}):w?(0,m.jsx)(o1.Item,{href:`/copilot/${w}`,children:P||"Plugin"}):S&&!E?(0,m.jsx)(o1.ItemWithMenu,{menuOverlay:(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(oj,{onOpenDialog:V,isShared:!!C.get(S)?.sharedID,showShare:!R,hideShareOnDesktop:!0})})}),children:I}):E?(0,m.jsx)(o1.Item,{href:B(),children:I}):null})});return p[15]!==Q||p[16]!==K||p[17]!==H?(o=H&&(0,m.jsx)(eM.Q,{leadingVisual:O.LockIcon,inactive:Q,onClick:K,className:`${oL.shareButton} ${oL.hideOnMobile}`,children:"Share"}),p[15]=Q,p[16]=K,p[17]=H,p[18]=o):o=p[18],p[19]!==v?(l=v&&(0,m.jsx)(o7,{}),p[19]=v,p[20]=l):l=p[20],p[21]!==$||p[22]!==S||p[23]!==V||p[24]!==L||p[25]!==M||p[26]!==I?(c=S&&(0,m.jsx)(ow,{visibleDialog:$,onClose:()=>{(0,oh.flushSync)(()=>V(null)),U.current?.focus()},threadName:I,threadId:S,selectedThreadId:S,onStartLoading:L,onFinishLoading:M}),p[21]=$,p[22]=S,p[23]=V,p[24]=L,p[25]=M,p[26]=I,p[27]=c):c=p[27],p[28]!==x||p[29]!==o||p[30]!==l||p[31]!==c?(d=(0,m.jsxs)("div",{className:o4.rightControls,children:[o,x,l,c]}),p[28]=x,p[29]=o,p[30]=l,p[31]=c,p[32]=d):d=p[32],p[33]!==d||p[34]!==o4.header||p[35]!==J?(u=(0,m.jsxs)("div",{className:o4.header,children:[J,d]}),p[33]=d,p[34]=o4.header,p[35]=J,p[36]=u):u=p[36],u}function o6(e){return(0,eC.CB)((0,rf.W)(e))}function o7(){let e,t=(0,h.c)(3),n=(0,nd.tZ)(),{openPreviewPane:r}=(0,nd.xx)();return t[0]!==r||t[1]!==n?(e=!n&&(0,m.jsx)(tE.K,{icon:O.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),r()}}),t[0]=r,t[1]=n,t[2]=e):e=t[2],e}try{o5.displayName||(o5.displayName="Header")}catch{}try{o7.displayName||(o7.displayName="PreviewPaneButton")}catch{}var o8=n(44669),o9=n(40136),le=n(70066),lt=n(84863),ln=n(59220),lr=n(17515),la=n(8387),li=n(45064),ls=n(56521),lo=n(40509),ll=n(57531);let lc=e=>{let t,n,r,a,i=(0,h.c)(12),{functionCall:s,manager:o,panelWidth:l,messageInterrupted:c}=e,{functionMetadata:d,functionRenderer:u,parsedArgs:p}=(0,ll.BO)(s);return i[0]!==s||i[1]!==c?(n=c&&"started"===s.status?{...s,status:"error"}:s,i[0]=s,i[1]=c,i[2]=n):n=i[2],t=n,i[3]!==d||i[4]!==u||i[5]!==t||i[6]!==o||i[7]!==l||i[8]!==p?(r=d&&u&&p&&u(t,d,o,l,p,!1),i[3]=d,i[4]=u,i[5]=t,i[6]=o,i[7]=l,i[8]=p,i[9]=r):r=i[9],i[10]!==r?(a=(0,m.jsx)(m.Fragment,{children:r}),i[10]=r,i[11]=a):a=i[11],a};try{lc.displayName||(lc.displayName="FunctionCallBadge")}catch{}var ld=n(4699),lu=n(87928),lm=n(5279),lh=n(85332),lp=n(79311),lf=n(39376),lg=n(84842),ly=n(88011),lx=n(90851),lv=n(97785);let l_={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},lb=e=>{let t,n,r,a,i=(0,h.c)(18),{messageId:s,src:o,alt:l,name:c,mode:d,squareView:u}=e,{openPreviewPane:p,openItem:f,updateItem:g}=(0,nd.xx)(),y=`image:${o}`;i[0]!==y||i[1]!==f||i[2]!==p?(t=e=>{e.metaKey||e.ctrlKey||((0,e1.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),p(),e.preventDefault())},i[0]=y,i[1]=f,i[2]=p,i[3]=t):t=i[3];let x=t;return i[4]!==l||i[5]!==y||i[6]!==s||i[7]!==c||i[8]!==o||i[9]!==g?(n=()=>{g({altText:l,id:y,messageId:s,name:c,type:"image",url:o})},r=[y,l,s,c,o,g],i[4]=l,i[5]=y,i[6]=s,i[7]=c,i[8]=o,i[9]=g,i[10]=n,i[11]=r):(n=i[10],r=i[11]),(0,_.useEffect)(n,r),i[12]!==l||i[13]!==d||i[14]!==x||i[15]!==u||i[16]!==o?(a=(0,m.jsx)("div",{className:l_.imageAttachment,children:(0,m.jsx)(lv.o,{src:o,alt:l,onClick:x,mode:d,useOverlay:!0,squareView:u})}),i[12]=l,i[13]=d,i[14]=x,i[15]=u,i[16]=o,i[17]=a):a=i[17],a},lS=(0,_.memo)(lb);try{lb.displayName||(lb.displayName="ChatImageAttachmentUnmemoized")}catch{}try{lS.displayName||(lS.displayName="ChatImageAttachment")}catch{}let lC={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",imageGrid:"ChatMessage-module__imageGrid--juCGt",imageRow:"ChatMessage-module__imageRow--HFSCK",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI",errorFallback:"ChatMessage-module__errorFallback--d0bNW",blinkingCursor:"ChatMessage-module__blinkingCursor--M3kDA"},lj={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function lw(e){let t,n,r,a,i,s,o=(0,h.c)(23),{currentPage:l,totalPages:c,onPrev:d,onNext:u,isUserMessage:p}=e,f=(0,z.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(c<1)throw Error("totalPages must be greater than or equal to 1");if(l>c)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===c||f,x=g?lj.disabledButton:"",v=y?lj.disabledButton:"";o[0]!==l||o[1]!==p||o[2]!==d||o[3]!==g?(t=()=>{if(g)return;let e=p?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,e1.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),d(l-1)},o[0]=l,o[1]=p,o[2]=d,o[3]=g,o[4]=t):t=o[4];let _=t;o[5]!==l||o[6]!==p||o[7]!==y||o[8]!==u?(n=()=>{if(y)return;let e=p?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,e1.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),u(l+1)},o[5]=l,o[6]=p,o[7]=y,o[8]=u,o[9]=n):n=o[9];let b=n;return o[10]!==_||o[11]!==x?(r=(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Previous response",onClick:_,icon:O.ChevronLeftIcon,className:x}),o[10]=_,o[11]=x,o[12]=r):r=o[12],o[13]!==l||o[14]!==c?(a=(0,m.jsxs)("span",{className:lj.pageIndicator,children:[l,"/",c]}),o[13]=l,o[14]=c,o[15]=a):a=o[15],o[16]!==b||o[17]!==v?(i=(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Next response",onClick:b,icon:O.ChevronRightIcon,className:v}),o[16]=b,o[17]=v,o[18]=i):i=o[18],o[19]!==r||o[20]!==a||o[21]!==i?(s=(0,m.jsxs)("div",{className:lj.container,"data-testid":"chat-paging-component",children:[r,a,i]}),o[19]=r,o[20]=a,o[21]=i,o[22]=s):s=o[22],s}try{lw.displayName||(lw.displayName="ChatPagingComponent")}catch{}let lN={container:"ClientConfirmations-module__container--gWbBU",text:"ClientConfirmations-module__text--WHq3j"};function lI(e){let t,n,r,a=(0,h.c)(5),{authorName:i,clientConfirmations:s}=e,o=s?.[0]?.state;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)("my-1",lN.container),a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(O.CheckIcon,{}),a[1]=n):n=a[1],a[2]!==i||a[3]!==o?(r=(0,m.jsx)("div",{className:t,children:(0,m.jsxs)("span",{className:lN.text,children:[n," ",i," ",o," the action"]})}),a[2]=i,a[3]=o,a[4]=r):r=a[4],r}try{lI.displayName||(lI.displayName="ClientConfirmations")}catch{}let lE={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},lR=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,g=(0,h.c)(25),{messageContent:y,onSubmit:x,onCancel:v}=e,b=(0,z.A3)("isWaitingOnCopilot"),[S,C]=(0,_.useState)(y),j=(0,_.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{j.current&&(j.current.style.height="auto",j.current.style.height=`${j.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==S?(n=[S],g[1]=S,g[2]=n):n=g[2],(0,_.useEffect)(t,n),g[3]!==S||g[4]!==x?(r=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),x(S)},g[3]=S,g[4]=x,g[5]=r):r=g[5];let w=r;g[6]!==y||g[7]!==v?(a=()=>{v(),C(y),(0,e1.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[6]=y,g[7]=v,g[8]=a):a=g[8];let N=a,I=b?void 0:w;return g[9]!==N||g[10]!==I?(i={"copilot-chat:send-message":I,"github:cancel":N},g[9]=N,g[10]=I,g[11]=i):i=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,nY.G)("user-message-edit-box"),g[12]=s):s=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>C(e.target.value),g[13]=o):o=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{j.current&&(j.current.style.height="auto",j.current.style.height=`${j.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==S?(c=(0,m.jsx)("div",{className:lE.inputContainer,children:(0,m.jsx)("textarea",{ref:j,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:S,onChange:o,className:lE.input,autoFocus:!0,onInput:l,onFocus:lT})}),g[15]=S,g[16]=c):c=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(n6.cQ,{commandId:"github:cancel",children:"Cancel"}),g[17]=d):d=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,nY.G)("user-message-edit-submit"),g[18]=u):u=g[18],g[19]!==b?(p=(0,m.jsxs)("div",{className:lE.actions,children:[d,(0,m.jsx)(n6.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...u,disabled:b,children:"Send"})]}),g[19]=b,g[20]=p):p=g[20],g[21]!==c||g[22]!==p||g[23]!==i?(f=(0,m.jsxs)(n6.tL,{commands:i,className:lE.container,...s,children:[c,p]}),g[21]=c,g[22]=p,g[23]=i,g[24]=f):f=g[24],f};try{lR.displayName||(lR.displayName="UserMessageEdit")}catch{}function lT(e){return e.target.setSelectionRange(0,e.target.value.length)}let lk=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLatestUserMessage:r,isFirstReply:a,isStreaming:i,panelWidth:s,parentMessage:o,messageIndex:l,autoOpenPreviewPane:c,...d})=>{let{message:u}=(0,eA.V)(),h=(0,g.b)(),p=(0,z.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),f=(0,ly.tD)(),{items:y,versionedItems:x,openItem:b,removeItems:S,getOpenItems:C,openItemsBeforeSubthreadChange:j,setOpenItemsBeforeSubthreadChange:w,enableLoadingState:N,disableLoadingState:I}=(0,nd.xx)(),E=nS({messageIndex:l,messageId:u.id,messageTimestamp:u.createdAt}),R=(0,_.useCallback)(()=>{let e=f(),t=[],n=u;for(;null!=n;)t.push(n.id),n=void 0!==n.selectedChildIndex?e.messages[n.selectedChildIndex]:void 0;let r=new Map;for(let[e,t]of y){let n=r.get(t.messageId)||[];n.push(e),r.set(t.messageId,n)}let a=[];for(let e of t){let t=r.get(e);if(t)for(let e of t)a.push(e)}for(let[e,t]of y)t.messageId===rp.Wp&&a.push(e);let i=C();w([...i]),a.some(e=>i.includes(e))&&N(),S(a)},[y,N,f,u,C,S,w]),{author:T,handleConfirmationAction:k,handleRetryErrorMessage:A,handleRetryCopilotResponse:D,handleEditUserMessage:P,hasClientConfirmations:L,isAgentError:M,isAI:F,isCopilot:B,isError:U,isInterrupted:$,isUser:V,myRef:q,rendererConfig:W,renderFeedback:G,shouldShowMessageActions:H,skillExecutionToUseForRespondingText:Q,showRetryButton:K}=(0,lf.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:i,removeOutdatedContentPreviewItems:R}),J=sj(),X=p.editingMessage===u.id,Y=i&&!U&&!u.confirmations&&!H&&n&&(!e||F),Z=(o?.childMessageIndexes?.findIndex(e=>e===l)||0)+1||1,ee=o?.childMessageIndexes?.length||1,et=ee>=lg.L9,en=h.maxMessagesReached(),er=ee>1,ea=(0,_.useMemo)(()=>u.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[u.mediaContent]),ei=(0,_.useMemo)(()=>ej.W.attachImagesImmersive&&void 0!==ea&&ea.length>0||!1,[ea]),es=H&&J&&(B||er),eo=(0,_.useRef)(null),el=(0,lx.M)(e=>{let t=x.get((0,nb.oy)(e))?.at(-1);t&&b(t,!1)});(0,_.useEffect)(()=>{if(eo.current!==u.id&&n&&j.length>0){let e=setTimeout(()=>{for(let e of j)el.current(e);I(),w([])});return()=>clearTimeout(e)}eo.current=u.id},[I,u.id,j,n,w,el]);let ec=(0,_.useCallback)(()=>{let{messages:e}=f(),t=Z-1;h.setSelectedMessage(e[o.childMessageIndexes[t-1]]),R()},[Z,h,o,R,f]),ed=(0,_.useCallback)(()=>{let{messages:e}=f(),t=Z-1;h.setSelectedMessage(e[o.childMessageIndexes[t+1]]),R()},[Z,h,o,R,f]),eu=sk(),{model:em,availableModels:eh}=(0,z.bP)("model","availableModels"),ep=em;u.model&&(ep=(eh??[ep]).find(e=>e.id===u.model)||ep);let ef=()=>h.startEditingMessage(u.id),eg=(0,sS.G)(),ey=!!(0,nv.JB)(p.customCopilots,eg),ex=et||en||!!eg&&!ey,ev=B&&i&&n&&!u.content,e_=(0,_.useCallback)(e=>{h.setWrapCodeLines(e)},[h]),eb=i?ax:av;return(0,m.jsxs)("div",{className:(0,v.$)("message-container",lC.chatMessage,V&&lC.user,F&&lC.ai,X?lC.editing:"",n&&lC.latest),ref:q,...(0,nY.G)(`message-${U?"error":i?"streaming":u.id}`),children:[F?(0,m.jsx)(li.W,{isLoading:i&&n,isLoadingSkills:(u.skillExecutions??[]).length>0&&i&&""===u.content&&n,isError:U&&u.error?.type!=="agentUnauthorized",className:lC.avatar,mode:p.mode,isFirstMessage:a,message:u.content||"",createdAt:u.createdAt}):null,V&&ei&&(0,m.jsx)("div",{className:ea?.length===4?lC.imageGrid:lC.imageRow,children:ea?.map(e=>(0,m.jsx)(lS,{name:e?.name||"Uploaded image",messageId:u.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:p.mode,squareView:ea?.length>=2},e?.url||""))}),V&&u.references&&u.references.length>0&&(0,m.jsx)(rj,{className:lC.references,messageId:u.id,messageTimestamp:u.createdAt,messageIndex:l,references:u.references,size:"medium"}),!X&&(0,m.jsx)("div",{className:lC.content,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,v.$)("js-snippet-clipboard-copy-unpositioned",lC.messageArea),children:[L?(0,m.jsx)(lI,{authorName:T.name,clientConfirmations:u.clientConfirmations??[]}):V?(0,m.jsx)(lh.R,{accessibleHeader:(0,eC.hV)("You",u.content??""),className:lC.userMessage}):(0,m.jsxs)(m.Fragment,{children:[!ej.W.newImmersiveReferencesUI&&B&&u.skillExecutions?.map((e,t)=>(0,m.jsx)(lc,{functionCall:e,manager:h,panelWidth:s,messageInterrupted:u.interrupted},t)),ev&&(ej.W.newImmersiveReferencesUI?(0,m.jsx)(lp.b,{className:(0,v.$)(lC.skillExecutionText,"mb-2"),children:`${(0,ll.WA)(Q)}...`}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:lC.blinkingCursor,children:"\u258B"}),(0,m.jsx)("span",{className:"sr-only",children:"Waiting for reply\u2026"})]})),ej.W.newImmersiveReferencesUI&&u.references&&u.references.length>0&&u.content&&(0,m.jsx)(rC.s,{className:"mb-2",references:u.references,isImmersive:!0,onClick:(e,t)=>{"draft-issue"===e.type&&E(e,t)}}),!L&&u.content&&(0,m.jsx)(lA,{children:(0,m.jsx)(eb,{autoOpenPreviewPane:c,markdown:u.content,messageId:u.id,messageIndex:l,messageTimestamp:u.createdAt,accessibleHeader:(0,eC.hV)("Copilot",u.content??""),copilotAnnotations:u.copilotAnnotations,wrapCodeLines:p.wrapCodeLines,onWrapCodeLinesChange:e_,...W})}),U?(0,m.jsx)(ls.K,{manager:h}):null,M&&u.agentErrors&&(0,m.jsx)(ls.h,{errors:u.agentErrors}),$?(0,m.jsx)(ld.h,{messageHasContent:!!u.content||!!u.skillExecutions?.length}):null,F&&!ev&&(0,eC.Ye)(u.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,m.jsx)(la.m,{confirmation:e,handleConfirmation:k,isLatestMessage:n},t))]}),er&&!n&&(0,m.jsxs)("div",{className:lC.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[Z,"/",ee]})]}),Y&&(0,m.jsx)("div",{className:lC.actionsPlaceholder}),!H&&K&&(0,m.jsx)(lu.$,{handleRetryMessage:A,disabled:ex}),H&&!J&&(0,m.jsxs)(lm.M,{"aria-label":"Message tools",className:lC.actions,"data-testid":"nonshared-toolbar",children:[V&&(r?(0,m.jsx)(n6.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ef,icon:O.PencilIcon,disabled:ex,...(0,nY.G)("edit-message-button")}):(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Edit message",onClick:ef,icon:O.PencilIcon,disabled:ex,...(0,nY.G)("edit-message-button")})),B&&(0,m.jsxs)(m.Fragment,{children:[G&&(0,m.jsx)(lo.G,{iconSize:"medium"}),!!u.content&&!i&&(0,m.jsx)(iM.T,{textToCopy:u.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,e1.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),K&&U?(0,m.jsx)(lu.$,{handleRetryMessage:A,disabled:ex}):F&&!U&&!u.clientSide&&(0,m.jsx)(lu.$,{handleRetryMessage:D,disabled:ex,showModelPicker:!!eh&&eh.length>1,model:ep,navigateToNewThread:eu}),er&&(0,m.jsx)(lw,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:V})]}),es&&(0,m.jsxs)(lm.M,{"aria-label":"Message tools",className:lC.sharedThreadActions,"data-testid":"shared-toolbar",children:[B&&(0,m.jsx)(m.Fragment,{children:!!u.content&&!i&&(0,m.jsx)(iM.T,{textToCopy:u.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,e1.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),er&&(0,m.jsx)(lw,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:V})]})]})}),X&&(0,m.jsx)(lR,{messageContent:u.content||"",onSubmit:P,onCancel:()=>h.cancelEditingMessage()})]})},lA=e=>{let t,n,r=(0,h.c)(3),{children:a}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nh.l,{className:lC.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),r[0]=t):t=r[0],r[1]!==a?(n=(0,m.jsx)(nw.t,{fallback:t,children:a}),r[1]=a,r[2]=n):n=r[2],n},lD=e=>{let t,n,r,a,i,s,o,l,c=(0,h.c)(23);c[0]!==e?({message:r,messageIndex:a,isSharedMessage:n,isLatestMessage:t,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=a,c[5]=i):(t=c[1],n=c[2],r=c[3],a=c[4],i=c[5]);let d=sj();return c[6]!==t||c[7]!==n||c[8]!==d||c[9]!==r||c[10]!==a||c[11]!==i?(s=!aS(r)&&(0,m.jsx)(lk,{...i,messageIndex:a,isSharedMessage:n,isLatestMessage:t,isViewingSharedThread:d}),c[6]=t,c[7]=n,c[8]=d,c[9]=r,c[10]=a,c[11]=i,c[12]=s):s=c[12],c[13]!==t||c[14]!==n||c[15]!==d||c[16]!==r||c[17]!==a?(o=(0,m.jsx)(aC,{message:r,messageIndex:a,isViewingSharedThread:d,isSharedMessage:n,isLatestMessage:t}),c[13]=t,c[14]=n,c[15]=d,c[16]=r,c[17]=a,c[18]=o):o=c[18],c[19]!==r||c[20]!==s||c[21]!==o?(l=(0,m.jsxs)(eA.$,{message:r,children:[s,o]}),c[19]=r,c[20]=s,c[21]=o,c[22]=l):l=c[22],l},lP=(0,_.memo)(lD),lL=e=>{let t,n,r=(0,h.c)(7),{message:a}=e,i=(0,z.Pk)();r[0]!==a||r[1]!==i.messages?(t=(0,rd.CX)(i.messages,a),r[0]=a,r[1]=i.messages,r[2]=t):t=r[2];let s=t,o="user"===a.role&&i.messages.findLast(lO)?.id===a.id;return r[3]!==o||r[4]!==s||r[5]!==e?(n=(0,m.jsx)(lP,{...e,parentMessage:s,isLatestUserMessage:o}),r[3]=o,r[4]=s,r[5]=e,r[6]=n):n=r[6],n},lM=e=>{let t,n=(0,h.c)(2);return n[0]!==e?(t=(0,m.jsx)(lA,{children:(0,m.jsx)(lL,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{lk.displayName||(lk.displayName="InnerChatMessage")}catch{}try{lA.displayName||(lA.displayName="MessageErrorBoundary")}catch{}try{lD.displayName||(lD.displayName="ChatMessageUnmemoized")}catch{}try{lP.displayName||(lP.displayName="ChatMessageMemoized")}catch{}try{lL.displayName||(lL.displayName="ChatMessageWrapped")}catch{}try{lM.displayName||(lM.displayName="ChatMessage")}catch{}function lO(e){return"user"===e.role}var lF=n(94232);let lB={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function lU(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:lB.ConversationLoader__userGroup,children:(0,m.jsx)(lF.O,{variant:"rounded",height:"20px",width:"random"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:lB.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,m.jsxs)("div",{className:lB.ConversationLoader__assistantGroup,children:[(0,m.jsx)(lF.O,{className:lB.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map(l$)]})]}),n[1]=t):t=n[1],t}function l$(e,t){return(0,m.jsx)(lF.O,{variant:"rounded",height:"20px",width:"random"},t)}try{lU.displayName||(lU.displayName="ConversationLoader")}catch{}let lV={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b",sso:"ErrorState-module__sso--b2klG"};function lq(e){let t,n,r,a,i,s=(0,h.c)(11),{title:o,description:l,ssoOrgs:c}=e,d=c&&c.length>0;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(nG.E.Visual,{children:(0,m.jsx)(O.AlertIcon,{size:"medium",className:lV.icon})}),s[1]=n):n=s[1],s[2]!==o?(r=(0,m.jsx)(nG.E.Heading,{as:"h2",children:o}),s[2]=o,s[3]=r):r=s[3],s[4]!==l||s[5]!==d||s[6]!==c?(a=(void 0!==l||d)&&(0,m.jsxs)("div",{className:lV.description,children:[(0,m.jsx)(nG.E.Description,{children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("div",{className:lV.sso,children:d&&(0,m.jsx)(H.x,{protectedOrgs:c})})]}),s[4]=l,s[5]=d,s[6]=c,s[7]=a):a=s[7],s[8]!==r||s[9]!==a?(i=(0,m.jsxs)("div",{className:lV.container,children:[t,(0,m.jsxs)(nG.E,{border:!1,children:[n,r,a]})]}),s[8]=r,s[9]=a,s[10]=i):i=s[10],i}function lW(){let e,t,n,r,a,i=(0,h.c)(6),{helpUrl:s}=(0,W.X)();i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nG.E.Visual,{children:(0,m.jsx)(O.LockIcon,{size:"medium",className:lV.icon})}),n=(0,m.jsx)(nG.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),i[1]=t,i[2]=n):(t=i[1],n=i[2]),i[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(nG.E.Description,{children:(0,m.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),i[3]=r):r=i[3];let o=`${s}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return i[4]!==o?(a=(0,m.jsxs)("div",{className:lV.container,children:[e,(0,m.jsxs)(nG.E,{border:!1,children:[t,n,(0,m.jsxs)("div",{className:lV.description,children:[r,(0,m.jsx)(nW.A,{inline:!0,href:o,children:"Learn more"})]})]})]}),i[4]=o,i[5]=a):a=i[5],a}try{lq.displayName||(lq.displayName="ErrorState")}catch{}try{lW.displayName||(lW.displayName="SharedThreadForbidden")}catch{}let lG={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"},lz=e=>{let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(44),{inputRef:f,panelWidth:g,isMobile:y}=e,{scrollToBottom:x}=(0,o9.b)(),v=(0,z.Pk)(),{isWaitingOnCopilot:b,messagesLoading:S,streamingMessage:C,messages:j}=v,{reloadQuota:w,premiumChatQuotaRemaining:N,isLicensedLimited:I}=(0,ny.xR)();p[0]!==v?(n=(0,rf.W)(v),t=(0,eC.CB)(n),p[0]=v,p[1]=t,p[2]=n):(t=p[1],n=p[2]);let E=t,R=n?.sharedMessageID,{messages:T,groupedMessages:k}=(0,ln.a)(v);p[3]!==T?(r=T.find(lY)?.id,p[3]=T,p[4]=r):r=p[4];let A=r;p[5]!==x?(a=()=>x("instant"),i=[x],p[5]=x,p[6]=a,p[7]=i):(a=p[6],i=p[7]),(0,lr.N)(a,i);let D=(0,nN.S)(v.streamingMessage);if(p[8]!==I||p[9]!==b||p[10]!==T.length||p[11]!==S.state||p[12]!==N||p[13]!==D||p[14]!==w||p[15]!==C?(s=()=>{T.length>0&&!I&&ej.W.premiumRequestQuotasEnabled&&N<=eC.aX&&!b&&"loaded"===S.state&&D&&!C&&w("quota_low_trigger")},o=[I,b,T.length,S.state,N,D,w,C],p[8]=I,p[9]=b,p[10]=T.length,p[11]=S.state,p[12]=N,p[13]=D,p[14]=w,p[15]=C,p[16]=s,p[17]=o):(s=p[16],o=p[17]),(0,_.useEffect)(s,o),p[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("h1",{children:"Copilot Chat"}),p[18]=l):l=p[18],p[19]!==E?(c=(0,m.jsxs)("div",{className:"sr-only",children:[l,(0,m.jsx)("h2",{children:E})]}),p[19]=E,p[20]=c):c=p[20],p[21]!==j||p[22]!==A||p[23]!==k||p[24]!==f||p[25]!==y||p[26]!==b||p[27]!==g||p[28]!==R||p[29]!==C?.id){let e;p[31]!==j||p[32]!==A||p[33]!==k.length||p[34]!==f||p[35]!==y||p[36]!==b||p[37]!==g||p[38]!==R||p[39]!==C?.id?(e=(e,t)=>(0,m.jsx)(o8.i,{isLastGroup:t===k.length-1,children:e.map((n,r)=>{let a=-1===n.messageIndex?j.length:n.messageIndex,i=t===k.length-1&&r===e.length-1;return(0,m.jsx)(lM,{isLatestMessage:i,isSharedMessage:n.id===R,isFirstReply:n.id===A,message:n,messageIndex:a,inputRef:f,panelWidth:g,isStreaming:n.id===C?.id||i&&b,autoOpenPreviewPane:!y},r)})},t),p[31]=j,p[32]=A,p[33]=k.length,p[34]=f,p[35]=y,p[36]=b,p[37]=g,p[38]=R,p[39]=C?.id,p[40]=e):e=p[40],d=k.map(e),p[21]=j,p[22]=A,p[23]=k,p[24]=f,p[25]=y,p[26]=b,p[27]=g,p[28]=R,p[29]=C?.id,p[30]=d}else d=p[30];return p[41]!==c||p[42]!==d?(u=(0,m.jsxs)("div",{children:[c,d]}),p[41]=c,p[42]=d,p[43]=u):u=p[43],u},lH=()=>{let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lq,{title:"Conversation failed to load",description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nW.A,{href:"",onClick:lZ,inline:!0,children:"Reload the page"})," ","to try again."]})}),t[0]=e):e=t[0],e},lQ=()=>{let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lq,{title:"Access denied",description:"You do not have permission to view this."}),t[0]=e):e=t[0],e},lK=e=>{let t,n,r=(0,h.c)(7),{isSharedThread:a}=e,{messagesLoading:i,ssoOrganizations:s}=(0,z.Pk)(),o=a?"Shared conversation not found":"Conversation not found";r[0]!==i.missingOrgIds||r[1]!==s?(t=i.missingOrgIds?.map(l0).map(e=>s?.find(t=>t.id===e)?.login).filter(l1),r[0]=i.missingOrgIds,r[1]=s,r[2]=t):t=r[2];let l=t,c=l&&l.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return r[3]!==c||r[4]!==l||r[5]!==o?(n=(0,m.jsx)(lq,{title:o,description:c,ssoOrgs:l}),r[3]=c,r[4]=l,r[5]=o,r[6]=n):n=r[6],n},lJ=e=>{let t,n,r,a,i,s=(0,h.c)(20),{inputRef:o,panelWidth:l,isMobile:c}=e,d=(0,z.Pk)(),{messagesLoading:u,threadsLoading:p,messages:f,showTopicPicker:g,pendingFirstMessage:y}=d,x=(0,rf.W)(d),{textAreaRef:v}=(0,lt.Y)(o),_=sj(),b=null,S=null;if((0,rd.B)(f,y).length&&"loaded"===u.state){let e;s[0]!==c||s[1]!==l||s[2]!==v?(e=(0,m.jsx)(lz,{inputRef:v,panelWidth:l,isMobile:c}),s[0]=c,s[1]=l,s[2]=v,s[3]=e):e=s[3],b=e}else if(("loading"===u.state||"pending"===u.state)&&d.selectedThreadID&&!g){let e;s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lU,{}),s[4]=e):e=s[4],b=e}else if("error"===u.state&&d.selectedThreadID&&(null===x||u.notFound))if(_&&d.fetchSharedThreads?.ok===!1&&403===d.fetchSharedThreads.status){let e;s[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lW,{}),s[5]=e):e=s[5],S=e}else{let e;s[6]!==_?(e=(0,m.jsx)(lK,{isSharedThread:_}),s[6]=_,s[7]=e):e=s[7],S=e}else if("error"===u.state||"error"===p.state){let e;s[8]!==p.status?(e=403===p.status?(0,m.jsx)(lQ,{}):(0,m.jsx)(lH,{}),s[8]=p.status,s[9]=e):e=s[9],S=e}let C=ne(),j=ej.W.navigableRefs?C:void 0;return s[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(lX,{}),s[10]=t):t=s[10],s[11]!==S?(n=S&&(0,m.jsx)("div",{className:lG.emptyContent,children:S}),s[11]=S,s[12]=n):n=s[12],s[13]!==b?(r=b&&(0,m.jsxs)("div",{className:lG.messageContent,children:[b,(0,m.jsx)(le.Cb,{})]}),s[13]=b,s[14]=r):r=s[14],s[15]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(le.zc,{}),s[15]=a):a=s[15],s[16]!==j||s[17]!==n||s[18]!==r?(i=(0,m.jsxs)(o9.$,{className:lG.container,containerRef:j,children:[t,n,r,a]}),s[16]=j,s[17]=n,s[18]=r,s[19]=i):i=s[19],i},lX=()=>{let e,t,n,r=(0,h.c)(7),{isScrolledUp:a,scrollToBottom:i}=(0,o9.b)(),s=!a&&lG.hidden;return r[0]!==s?(e=(0,v.$)(lG.scrollToBottomButton,s),r[0]=s,r[1]=e):e=r[1],r[2]!==i?(t=()=>i("smooth"),r[2]=i,r[3]=t):t=r[3],r[4]!==e||r[5]!==t?(n=(0,m.jsx)(tE.K,{as:"a","aria-label":"Scroll to bottom",className:e,onClick:t,icon:O.ArrowDownIcon,tooltipDirection:"n",href:"#copilot-chat-textarea"}),r[4]=e,r[5]=t,r[6]=n):n=r[6],n};try{lz.displayName||(lz.displayName="Messages")}catch{}try{lH.displayName||(lH.displayName="FailedToLoadThreadError")}catch{}try{lQ.displayName||(lQ.displayName="AccessDeniedError")}catch{}try{lK.displayName||(lK.displayName="NotFoundError")}catch{}try{lJ.displayName||(lJ.displayName="ImmersiveChat")}catch{}try{lX.displayName||(lX.displayName="ScrollToBottomButton")}catch{}function lY(e){return"assistant"===e.role}function lZ(e){e.preventDefault(),window.location.reload()}function l0(e){return String(e)}function l1(e){return!!e}var l2=n(60183);let l3=JSON.parse('{"Files":{"id":"files-group","name":"Files","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Mermaid architecture overview"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-green-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-green-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]}}');var l4=n(65556);function l5(e){let t,n,r,a,i,s=(0,h.c)(12),{className:o}=e,[l,c]=(0,_.useState)(iV.L.Static),[d,u]=(0,_.useState)(!0),{safeSetTimeout:p}=(0,l4.A)();return s[0]!==p?(t=()=>{let e=p(()=>{nx.J.getProPlusAnimationFlag()?(c(iV.L.Activate),u(!1)):(c(iV.L.Idle),u(!0))},1e3);return()=>clearTimeout(e)},n=[p],s[0]=p,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,_.useEffect)(t,n),s[3]!==l?(r=()=>{l===iV.L.Activate&&(c(iV.L.Idle),u(!0),nx.J.removeProPlusAnimationFlag())},s[3]=l,s[4]=r):r=s[4],s[5]!==l||s[6]!==d||s[7]!==r?(a=(0,m.jsx)(iV.N,{animationType:l,onAnimationEnd:r,loopAnimation:d,size:48}),s[5]=l,s[6]=d,s[7]=r,s[8]=a):a=s[8],s[9]!==o||s[10]!==a?(i=(0,m.jsx)("div",{className:o,children:a}),s[9]=o,s[10]=a,s[11]=i):i=s[11],i}try{l5.displayName||(l5.displayName="CopilotEmptyStateAnimation")}catch{}let l6={scrollContainer:"NewConversation-module__scrollContainer--Xfaaj",container:"NewConversation-module__container--Qt89h",banner:"NewConversation-module__banner--nBNmy",main:"NewConversation-module__main--GVJMw",content:"NewConversation-module__content--j88E1",alignTop:"NewConversation-module__alignTop--gdI7p",innerContainer:"NewConversation-module__innerContainer--gDENn",footer:"NewConversation-module__footer--uQNk1",starters:"NewConversation-module__starters--leV1b",item:"NewConversation-module__item--PJdL6",spaceName:"NewConversation-module__spaceName--yEZaT"},l7={container:"StarterPill-module__container--BCDeZ",icon:"StarterPill-module__icon--ca2DE",title:"StarterPill-module__title--ODdkN",dropdown:"StarterPill-module__dropdown--wcx2F"},l8=_.forwardRef((e,t)=>{let n,r,a,i,s=(0,h.c)(14),{name:o,icon:l,color:c,onClick:d,dropdown:u,open:p}=e;return s[0]!==c||s[1]!==l?(n=tj.I&&(0,m.jsx)("div",{className:l7.icon,children:(0,m.jsx)(tj.I,{icon:l,color:c})}),s[0]=c,s[1]=l,s[2]=n):n=s[2],s[3]!==u?(r=u&&(0,m.jsx)("div",{className:l7.dropdown,children:(0,m.jsx)(O.TriangleDownIcon,{})}),s[3]=u,s[4]=r):r=s[4],s[5]!==o||s[6]!==r?(a=(0,m.jsxs)("div",{className:l7.title,children:[o,r]}),s[5]=o,s[6]=r,s[7]=a):a=s[7],s[8]!==d||s[9]!==p||s[10]!==t||s[11]!==n||s[12]!==a?(i=(0,m.jsxs)("button",{ref:t,className:l7.container,onClick:d,"aria-expanded":p,children:[n,a]}),s[8]=d,s[9]=p,s[10]=t,s[11]=n,s[12]=a,s[13]=i):i=s[13],i});function l9(){let e,t,n=(0,h.c)(5),r=(0,g.b)(),a=(0,z.Pk)();n[0]!==r||n[1]!==a?(e=()=>{let e=(0,rf.W)(a);r.sendChatMessage({thread:e,content:"First, create a new draft issue. Then ask for additional information to fill out the issue",references:a.currentReferences,topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model}),(0,e1.BI)("dotcom_chat.activate",{target:"STARTER_CUSTOM_CREATE_ISSUE",mode:"immersive"})},n[0]=r,n[1]=a,n[2]=e):e=n[2];let i=e;return n[3]!==i?(t=(0,m.jsx)("li",{className:l6.item,children:(0,m.jsx)(l8,{name:"Create issue",icon:"issue-draft",color:"var(--fgColor-muted)",onClick:i})}),n[3]=i,n[4]=t):t=n[4],t}l8.displayName="StarterPill";try{l9.displayName||(l9.displayName="CreateIssue")}catch{}var ce=n(23985),ct=n(33036),cn=n(88245);let cr={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function ca(){let e,t,n,r,a,i=(0,h.c)(10),s=(0,z.A3)("isEditorUpsellBannerDismissed"),o=(0,g.b)(),{isLicensedLimited:l}=(0,ny.xR)(),c=(0,_.useId)(),d=ci;return s||!l?null:(i[0]!==c?(e=(0,m.jsx)("h2",{className:cr.title,id:c,children:"Install Copilot in your favorite code editor"}),i[0]=c,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("p",{className:cr.description,children:"Copilot is available for a multitude of editors to fit your needs"}),n=ej.W.freeToPaidSettingsUpgrade?(0,m.jsx)(ce.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,m.jsxs)(oT.A,{className:cr.actions,children:[(0,m.jsx)(nm.z,{className:cr.editorButton,href:cn.A.vscode.url,leadingVisual:(0,m.jsx)("img",{src:cn.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{d("vscode","ide_menu_primary_button_click")},children:cn.A.vscode.name}),(0,m.jsxs)(tI.W,{children:[(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{"aria-label":"More editors",icon:O.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{d("menu","ide_menu_open")}})}),(0,m.jsx)(tI.W.Overlay,{align:"end",children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(ct.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),i[2]=t,i[3]=n):(t=i[2],n=i[3]),i[4]!==o?(r=(0,m.jsx)(tE.K,{variant:"invisible",className:cr.closeButton,icon:O.XIcon,"aria-label":"Dismiss banner",onClick:()=>{o.dismissEditorUpsellBanner(),(0,e1.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),i[4]=o,i[5]=r):r=i[5],i[6]!==e||i[7]!==r||i[8]!==c?(a=(0,m.jsx)("div",{className:cr.container,children:(0,m.jsxs)("section",{className:cr.banner,"aria-labelledby":c,children:[e,t,n,r]})}),i[6]=e,i[7]=r,i[8]=c,i[9]=a):a=i[9],a)}function ci(e,t){ej.W.freeToPaidTelemetry?(0,ct.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,e1.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{ca.displayName||(ca.displayName="EditorUpsellBanner")}catch{}function cs(){return nx.J.getProPlusSuccessBannerFlag()??!1}function co(e){let t,n,r=(0,h.c)(5),{onDismiss:a,className:i}=e;return r[0]!==a?(t=(0,m.jsx)(nh.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{a(),(0,e1.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),r[0]=a,r[1]=t):t=r[1],r[2]!==i||r[3]!==t?(n=(0,m.jsx)("div",{className:i,children:t}),r[2]=i,r[3]=t,r[4]=n):n=r[4],n}try{co.displayName||(co.displayName="ProPlusSuccessBanner")}catch{}function cl(){return(nx.J.getTrialSuccessBannerFlag()&&!nx.J.getProPlusSuccessBannerFlag())??!1}function cc(e){let t,n,r=(0,h.c)(5),{onDismiss:a,className:i}=e;return r[0]!==a?(t=(0,m.jsx)(nh.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{a(),(0,e1.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),r[0]=a,r[1]=t):t=r[1],r[2]!==i||r[3]!==t?(n=(0,m.jsx)("div",{className:i,children:t}),r[2]=i,r[3]=t,r[4]=n):n=r[4],n}try{cc.displayName||(cc.displayName="TrialSuccessBanner")}catch{}function cd(){let e,t,n,r,a=(0,h.c)(12),i=(0,ny.xR)().licenseType,s=function(){let e,t,n=(0,h.c)(3),[r,a]=(0,_.useState)(cl);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{nx.J.removeTrialSuccessBannerFlag(),a(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==r?(t={visible:r,onDismiss:i},n[1]=r,n[2]=t):t=n[2],t}(),o=function(){let e,t,n=(0,h.c)(3),[r,a]=(0,_.useState)(cs);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{nx.J.removeProPlusSuccessBannerFlag(),nx.J.removeTrialSuccessBannerFlag(),a(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==r?(t={visible:r,onDismiss:i},n[1]=r,n[2]=t):t=n[2],t}(),l=o.visible,c=!l&&s.visible&&i===rp.mF.LicensedFull,d=!l&&!c;return a[0]!==d?(e=d&&(0,m.jsx)(ca,{}),a[0]=d,a[1]=e):e=a[1],a[2]!==c||a[3]!==s?(t=c&&(0,m.jsx)(cc,{className:sD.banner,onDismiss:s.onDismiss}),a[2]=c,a[3]=s,a[4]=t):t=a[4],a[5]!==o.onDismiss||a[6]!==l?(n=l&&(0,m.jsx)(co,{className:sD.banner,onDismiss:o.onDismiss}),a[5]=o.onDismiss,a[6]=l,a[7]=n):n=a[7],a[8]!==e||a[9]!==t||a[10]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[e,t,n]}),a[8]=e,a[9]=t,a[10]=n,a[11]=r):r=a[11],r}try{cd.displayName||(cd.displayName="NewConversationBanners")}catch{}var cu=n(88334);function cm(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(26),{currentTopic:u}=e,[p,f]=(0,_.useState)(!1),g=(0,_.useRef)(null),y=(0,ed.Zp)();d[0]!==p?(t=()=>{f(!p)},d[0]=p,d[1]=t):t=d[1];let x=t;d[2]!==u?.name||d[3]!==y?(n=()=>{y(eC.QT),(0,e1.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_CREATE_SPACE",topic:u?.name,mode:"immersive"})},d[2]=u?.name,d[3]=y,d[4]=n):n=d[4];let v=n;d[5]!==u?.name||d[6]!==y?(r=e=>{y((0,nv.Cb)({id:e.id,owner:e.owner})),(0,e1.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_SPACES_MENU_ITEM",topic:u?.name,mode:"immersive",spaceId:`${e.owner}/${e.id}`})},d[5]=u?.name,d[6]=y,d[7]=r):r=d[7];let b=r,{data:S}=(0,cu.I)();d[8]!==S?(a=void 0===S?[]:S,d[8]=S,d[9]=a):a=d[9];let C=a;return(0,n_.BV)()?(d[10]!==x||d[11]!==p?(i=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(l8,{ref:g,name:"Spaces",icon:"spaces",color:"gray",onClick:x,dropdown:!0,open:p})}),d[10]=x,d[11]=p,d[12]=i):i=d[12],d[13]!==C.length?(s=C.length>0?{width:"260px"}:{},d[13]=C.length,d[14]=s):s=d[14],d[15]!==v||d[16]!==b||d[17]!==C?(o=(0,m.jsx)(tR.l,{children:C.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tR.l.Group,{children:[(0,m.jsx)(tR.l.GroupHeading,{children:"Recent"}),C.map(e=>(0,m.jsx)(tR.l.Item,{onSelect:()=>b(e),children:(0,m.jsx)("span",{className:l6.spaceName,children:e.name})},`${e.owner}, ${e.id}`))]}),(0,m.jsx)(tR.l.Divider,{}),(0,m.jsx)(tR.l.Item,{onSelect:v,children:"Create a space"})]}):(0,m.jsx)(tR.l.Item,{onSelect:v,children:"Create your first space"})}),d[15]=v,d[16]=b,d[17]=C,d[18]=o):o=d[18],d[19]!==s||d[20]!==o?(l=(0,m.jsx)(tI.W.Overlay,{style:s,children:o}),d[19]=s,d[20]=o,d[21]=l):l=d[21],d[22]!==p||d[23]!==i||d[24]!==l?(c=(0,m.jsx)("li",{className:l6.item,children:(0,m.jsxs)(tI.W,{open:p,onOpenChange:f,children:[i,l]})}),d[22]=p,d[23]=i,d[24]=l,d[25]=c):c=d[25],c):null}try{cm.displayName||(cm.displayName="SpacesMenu")}catch{}function ch(e){let t,n,r,a,i,s,o=(0,h.c)(20),{group:l,onEntrySelect:c}=e,[d,u]=(0,_.useState)(!1),p=(0,_.useRef)(null);o[0]!==d?(t=()=>{u(!d)},o[0]=d,o[1]=t):t=o[1];let f=t;if(o[2]!==l.color||o[3]!==l.icon||o[4]!==l.name||o[5]!==f||o[6]!==d?(n=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(l8,{ref:p,name:l.name,icon:l.icon,color:l.color,onClick:f,dropdown:!0,open:d})}),o[2]=l.color,o[3]=l.icon,o[4]=l.name,o[5]=f,o[6]=d,o[7]=n):n=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(r={width:"260px"},o[8]=r):r=o[8],o[9]!==l.entries||o[10]!==c){let e;o[12]!==c?(e=e=>(0,m.jsx)(tR.l.Item,{onSelect:()=>c(e),children:(0,m.jsx)(i1.$6,{html:e.titleHtml})},e.id),o[12]=c,o[13]=e):e=o[13],a=l.entries.map(e),o[9]=l.entries,o[10]=c,o[11]=a}else a=o[11];return o[14]!==a?(i=(0,m.jsx)(tI.W.Overlay,{style:r,children:(0,m.jsx)(tR.l,{children:a})}),o[14]=a,o[15]=i):i=o[15],o[16]!==d||o[17]!==n||o[18]!==i?(s=(0,m.jsx)("li",{className:l6.item,children:(0,m.jsxs)(tI.W,{open:d,onOpenChange:u,children:[n,i]})}),o[16]=d,o[17]=n,o[18]=i,o[19]=s):s=o[19],s}function cp(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,v,_,b=(0,h.c)(47),{textAreaRef:S,handleUserSubmit:C,nextMessageIndex:j}=e,w=(0,g.b)(),N=(0,z.Pk)();b[0]!==N?(t=(0,rf.W)(N),b[0]=N,b[1]=t):t=b[1];let I=t;b[2]!==I||b[3]!==w||b[4]!==N?(n=e=>{let t=0===N.messages.length?I:(0,rf.W)(N),n=N.currentUserLogin||"",r=e.message.replaceAll("$$USERNAME$$",n);w.sendChatMessage({thread:t,content:r,references:N.currentReferences,topic:N.currentTopic,context:N.context,customInstructions:N.customInstructions,model:N.model}),(0,e1.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:N.currentTopic?.name,mode:"immersive",starterId:e.id})},b[2]=I,b[3]=w,b[4]=N,b[5]=n):n=b[5];let E=n,R=Object.values(l3);b[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("div",{className:l6.banner,children:(0,m.jsx)(cd,{})}),b[6]=r):r=b[6];let T=(0,l2.u)("copilot_pro_plus_animation")?(0,m.jsx)(l5,{}):(0,m.jsx)(nu.A,{hidden:!0});b[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),b[7]=a):a=b[7],b[8]!==C||b[9]!==j||b[10]!==S?(i=(0,m.jsx)(ot,{textAreaRef:S,handleUserSubmit:C,nextMessageIndex:j}),b[8]=C,b[9]=j,b[10]=S,b[11]=i):i=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),b[12]=s):s=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(l9,{}),b[13]=o):o=b[13],b[14]!==N?(l=!ej.W.spacesInputMenuSelect&&(0,m.jsx)(cm,{currentTopic:N.currentTopic}),b[14]=N,b[15]=l):l=b[15],b[16]!==E?(c=e=>(0,m.jsx)(ch,{group:e,onEntrySelect:E},e.id),b[16]=E,b[17]=c):c=b[17];let k=R.map(c);return b[18]!==l6.starters||b[19]!==o||b[20]!==l||b[21]!==k?(d=(0,m.jsxs)("ul",{className:l6.starters,children:[o,l,k]}),b[18]=l6.starters,b[19]=o,b[20]=l,b[21]=k,b[22]=d):d=b[22],b[23]!==l6.innerContainer||b[24]!==a||b[25]!==i||b[26]!==s||b[27]!==d?(u=(0,m.jsxs)("div",{className:l6.innerContainer,children:[a,i,s,d]}),b[23]=l6.innerContainer,b[24]=a,b[25]=i,b[26]=s,b[27]=d,b[28]=u):u=b[28],b[29]!==u||b[30]!==l6.alignTop||b[31]!==T?(p=(0,m.jsxs)("div",{className:l6.alignTop,children:[T,u]}),b[29]=u,b[30]=l6.alignTop,b[31]=T,b[32]=p):p=b[32],b[33]!==p||b[34]!==l6.content?(f=(0,m.jsx)("div",{className:l6.content,children:p}),b[33]=p,b[34]=l6.content,b[35]=f):f=b[35],b[36]!==f||b[37]!==l6.main?(y=(0,m.jsx)("div",{className:l6.main,children:f}),b[36]=f,b[37]=l6.main,b[38]=y):y=b[38],b[39]===Symbol.for("react.memo_cache_sentinel")?(x=(0,m.jsx)("div",{className:l6.footer,children:(0,m.jsx)(ts.h,{})}),b[39]=x):x=b[39],b[40]!==y||b[41]!==l6.container||b[42]!==r?(v=(0,m.jsxs)("div",{className:l6.container,children:[r,y,x]}),b[40]=y,b[41]=l6.container,b[42]=r,b[43]=v):v=b[43],b[44]!==v||b[45]!==l6.scrollContainer?(_=(0,m.jsx)("div",{className:l6.scrollContainer,children:v}),b[44]=v,b[45]=l6.scrollContainer,b[46]=_):_=b[46],_}try{ch.displayName||(ch.displayName="StarterGroupWithMenu")}catch{}try{cp.displayName||(cp.displayName="NewConversation")}catch{}let cf={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function cg(){let e,t,n,r,a,i,s,o,l=(0,h.c)(11),{resetDate:c}=(0,ny.xR)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("img",{className:cf.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),l[0]=e):e=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h2",{className:cf.heading,children:"You\u2019ve reached your free plan limit"}),l[1]=t):t=l[1],l[2]!==c?(n=(0,m.jsxs)("p",{className:cf.description,children:["Your limits will reset on ",c,"."]}),l[2]=c,l[3]=n):n=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(nm.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/features/copilot#pricing",onClick:cy,children:"Upgrade to Pro"}),l[4]=r):r=l[4],l[5]!==n?(a=(0,m.jsxs)("div",{className:cf.main,children:[e,(0,m.jsxs)("div",{className:cf.copy,children:[t,n,r]})]}),l[5]=n,l[6]=a):a=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("strong",{children:"Part of an organization?"}),l[7]=i):i=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsxs)("div",{className:cf.footer,children:[i,(0,m.jsxs)("span",{children:["Upgrade to"," ",(0,m.jsx)(nW.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),l[8]=s):s=l[8],l[9]!==a?(o=(0,m.jsxs)("div",{className:cf.container,children:[a,s]}),l[9]=a,l[10]=o):o=l[10],o}function cy(){(0,e1.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{cg.displayName||(cg.displayName="QuotaExceededEmptyState")}catch{}function cx(e){let t,n,r,a,i,s,o,l,c,d,u=(0,h.c)(28),{isMobile:p,textAreaRef:f}=e,y=(0,z.Pk)(),{messages:x,messagesLoading:v,threadsLoading:b}=y,S=(0,g.b)(),{model:C}=(0,z.bP)("model"),j=ej.W.attachImagesImmersive&&ej.W.wholeAreaDragDrop,{chatQuotaExceeded:w}=(0,ny.xR)(),N=(0,sS.G)();u[0]!==N||u[1]!==y.customCopilots?(t=(0,nv.JB)(y.customCopilots,N),u[0]=N,u[1]=y.customCopilots,u[2]=t):t=u[2];let I=!!t,{variant:E,customCopilot:R}=s9(N,y.selectedThreadID),T=(0,_.useRef)(y.currentTopic),k=sj(),A=!E||I;n=!y.selectedThreadID&&nx.J.getEntrypointMessage();e:{if(y.selectedThreadID||y.pendingFirstMessage||n||N||w||"error"===v.state||"error"===b.state){r=!1;break e}r=!0}let D=r,P=x.length,L=sE(T,P);u[3]!==y.currentTopic?(a=()=>{T.current=y.currentTopic},i=[y.currentTopic],u[3]=y.currentTopic,u[4]=a,u[5]=i):(a=u[4],i=u[5]),(0,_.useEffect)(a,i),u[6]!==w||u[7]!==L?(s=()=>{let e=nx.J.getEntrypointMessage();e&&!w&&(nx.J.setEntrypointMessage(null),setTimeout(()=>{L(e)},100))},o=[L,w],u[6]=w,u[7]=L,u[8]=s,u[9]=o):(s=u[8],o=u[9]),(0,_.useEffect)(s,o),u[10]===Symbol.for("react.memo_cache_sentinel")?(l=ej.W.immersiveAppShell?(0,m.jsx)(o5,{}):(0,m.jsx)(oQ,{}),u[10]=l):l=u[10],u[11]!==w||u[12]!==R||u[13]!==L||u[14]!==p||u[15]!==k||u[16]!==P||u[17]!==D||u[18]!==A||u[19]!==E||u[20]!==y.selectedThreadID||u[21]!==f?(c=(0,m.jsxs)(m.Fragment,{children:[l,!y.selectedThreadID&&w?(0,m.jsx)(cg,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:sJ.content,children:D?(0,m.jsx)(cp,{textAreaRef:f,handleUserSubmit:L,nextMessageIndex:P}):(0,m.jsx)(lJ,{inputRef:f,isMobile:p})}),(!k||ej.W.copilotDuplicateThread)&&!D&&(0,m.jsxs)("div",{className:sJ.footer,children:[ej.W.groupNotifications&&!A&&(0,m.jsx)(oe,{}),!ej.W.groupNotifications&&E&&(0,m.jsx)("div",{className:sJ.spaceBannerContainer,children:(0,m.jsx)(s8,{variant:E,customCopilot:R})}),A&&(0,m.jsx)(ot,{textAreaRef:f,handleUserSubmit:L,nextMessageIndex:P})]})]})]}),u[11]=w,u[12]=R,u[13]=L,u[14]=p,u[15]=k,u[16]=P,u[17]=D,u[18]=A,u[19]=E,u[20]=y.selectedThreadID,u[21]=f,u[22]=c):c=u[22];let M=c;return u[23]!==M||u[24]!==S||u[25]!==C||u[26]!==y?(d=j?(0,m.jsx)(ol,{model:C,state:y,manager:S,children:M}):M,u[23]=M,u[24]=S,u[25]=C,u[26]=y,u[27]=d):d=u[27],d}function cv(e){let t,n,r=(0,h.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nH,{regionName:"This conversation"}),r[0]=t):t=r[0],r[1]!==e?(n=(0,m.jsx)(nw.t,{fallback:t,children:(0,m.jsx)(cx,{...e})}),r[1]=e,r[2]=n):n=r[2],n}try{cx.displayName||(cx.displayName="ConversationViewInner")}catch{}try{cv.displayName||(cv.displayName="ConversationView")}catch{}function c_(e){let t,n=(0,h.c)(4),{plugin:r}=e,a=(0,z.Pk)(),{PageComponent:i}=r;return n[0]!==i||n[1]!==r||n[2]!==a?(t=i?(0,m.jsx)(_.Suspense,{children:(0,m.jsx)(i,{chatState:a,plugin:r})}):null,n[0]=i,n[1]=r,n[2]=a,n[3]=t):t=n[3],t}try{c_.displayName||(c_.displayName="PluginPageContent")}catch{}function cb(e){let t,n=(0,h.c)(6),{plugin:r}=e,a=(0,z.Pk)(),{closePreviewPane:i,openPreviewPane:s}=(0,nd.xx)(),{ViewComponent:o}=r;return n[0]!==o||n[1]!==i||n[2]!==s||n[3]!==r||n[4]!==a?(t=o?(0,m.jsx)(o,{chatState:a,closePreviewPane:i,openPreviewPane:s,plugin:r}):null,n[0]=o,n[1]=i,n[2]=s,n[3]=r,n[4]=a,n[5]=t):t=n[5],t}try{cb.displayName||(cb.displayName="PluginViewContent")}catch{}var cS=n(90495),cC=n(84217),cj=n(35642);let cw=(0,eJ.A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),cN="THREAD_TIME_PATCH";function cI(){let e=cw.getItem(cN);return e?JSON.parse(e):null}function cE(){cw.removeItem(cN)}let cR={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function cT({selectedItemID:e,loadingState:t,onConversationSelect:n}){let r=(0,g.b)(),{threads:a}=(0,z.Pk)(),i=(0,_.useMemo)(()=>((function(e){let t=cI();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():cE())}})(a),r.sortThreads(a).map(e=>({id:e.id,text:(0,eC.CB)(e),href:`${eC.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[a,r]),s=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let r=new Date(t);r.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===n.toDateString()?s.push(c):c.date>r?o.push(c):c.date>a&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(i),o=0===i.length,l=(0,_.useId)();return(0,m.jsx)("nav",{"aria-labelledby":`${l}-conversations`,id:`${l}-conversation-list`,tabIndex:-1,className:cR.ConversationList__container,children:o&&("loading"===t||"pending"===t)?(0,m.jsx)(cj.r,{lines:5}):o?(0,m.jsx)(cD,{}):(0,m.jsxs)("div",{className:cR.ConversationList__section,children:[(0,m.jsx)("h3",{id:`${l}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(s).map(([t,r])=>r.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{id:`${l}_${t}`,className:cR.ConversationList__title,children:t}),(0,m.jsx)("ul",{className:cR.ConversationList,children:r.map(t=>(0,m.jsx)(ck,{item:t,selectedItemId:e??void 0,onSelect:n,threads:a},t.id))})]},t))]})})}function ck(e){let t,n,r,a=(0,h.c)(17),{item:i,selectedItemId:s,onSelect:o,threads:l}=e,c=i.id===s,[d,u]=(0,_.useState)(null),[p,f,g]=(0,op.B)(!1);a[0]!==s||a[1]!==l?(t=l.get(s),a[0]=s,a[1]=l,a[2]=t):t=a[2];let y=t,x=!!y?.customCopilotID,v=(0,_.useRef)(null);a[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,oh.flushSync)(()=>u(null)),v.current?.focus()},a[3]=n):n=a[3];let b=n;return a[4]!==d||a[5]!==x||a[6]!==i.href||a[7]!==i.id||a[8]!==i.text||a[9]!==p||a[10]!==o||a[11]!==c||a[12]!==s||a[13]!==f||a[14]!==g||a[15]!==l?(r=i.href&&(0,m.jsxs)("li",{className:cR.ConversationList__item,children:[(0,m.jsx)(ed.N_,{className:cR.ConversationList__link,to:i.href,"aria-current":c?"page":void 0,onClick:()=>{o(),(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:i.id,mode:"immersive"})},children:(0,m.jsx)("span",{className:cR.ConversationList__text,children:i.text})}),(0,m.jsx)("span",{className:cR.ConversationList__context,children:(0,m.jsxs)(tI.W,{anchorRef:v,children:[(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{loading:p,icon:O.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:cA})}),(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(oj,{onOpenDialog:u,isShared:!!l.get(i.id)?.sharedID,showShare:!x})})})]})}),(0,m.jsx)(ow,{visibleDialog:d,onClose:b,threadName:i.text,threadId:i.id,selectedThreadId:s,onStartLoading:f,onFinishLoading:g})]},i.id),a[4]=d,a[5]=x,a[6]=i.href,a[7]=i.id,a[8]=i.text,a[9]=p,a[10]=o,a[11]=c,a[12]=s,a[13]=f,a[14]=g,a[15]=l,a[16]=r):r=a[16],r}function cA(){return(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function cD(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cC.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:cR.ConversationList__empty,children:[e,(0,m.jsx)(ob.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]}),n[1]=t):t=n[1],t}try{cT.displayName||(cT.displayName="ConversationList")}catch{}try{ck.displayName||(ck.displayName="ConversationListEntry")}catch{}try{cD.displayName||(cD.displayName="EmptyState")}catch{}function cP(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{cP.displayName||(cP.displayName="ComposeIcon")}catch{}let cL={container:"FreeChatUpgradeBanner-module__container--wbKbQ",content:"FreeChatUpgradeBanner-module__content--GSeCA"};function cM(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:cL.container,children:(0,m.jsxs)("p",{className:cL.content,children:[(0,m.jsx)(nW.A,{href:"https://github.com/github-copilot/pro",inline:!0,onClick:cO,children:"Upgrade to Pro"})," ","to access higher limits and premium models."]})}),t[0]=e):e=t[0],e}function cO(){(0,e1.BI)("dotcom_chat.activate",{target:"FREE_CHAT_UPGRADE_BANNER_LINK",mode:"immersive"})}try{cM.displayName||(cM.displayName="FreeChatUpgradeBanner")}catch{}function cF(e){let t,n,r=(0,h.c)(4),{className:a,size:i}=e,s=void 0===i?16:i;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"}),r[0]=t):t=r[0],r[1]!==a||r[2]!==s?(n=(0,m.jsx)("svg",{className:a,width:s,height:s,"aria-hidden":"true",fill:"none",viewBox:"0 0 16 16",children:t}),r[1]=a,r[2]=s,r[3]=n):n=r[3],n}try{cF.displayName||(cF.displayName="SpacesIcon")}catch{}let cB={list:"ServiceList-module__list--YDLyn",icon:"ServiceList-module__icon--iUANO"};function cU(e){let t,n,r,a,i,s,o=(0,h.c)(22),{toggleFloatingSidebar:l}=e,c=(0,z.Pk)(),{activePlugin:d,selectedThreadID:u}=c,p=(0,eS.qw)(),f=(0,g.b)(),y=sk(),x=(0,nv.mM)();o[0]!==y||o[1]!==l?(t=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),l(),await y({clearTopic:!0,includeThreads:!1}),(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},o[0]=y,o[1]=l,o[2]=t):t=o[2];let v=t;o[3]!==l?(n=e=>{e.metaKey||e.ctrlKey||l()},o[3]=l,o[4]=n):n=o[4];let _=n;o[5]!==f||o[6]!==l?(r=(e,t)=>{e.metaKey||e.ctrlKey||(l(),f.selectPlugin(t))},o[5]=f,o[6]=l,o[7]=r):r=o[7];let b=r,S=u||d||x?void 0:"page";o[8]!==v||o[9]!==S?(a=(0,m.jsx)(ec,{"aria-current":S,displayName:"Home",href:eC.Jz,icon:O.HomeIcon,id:"home",onLinkClick:v}),o[8]=v,o[9]=S,o[10]=a):a=o[10];let C=(0,n_.BV)()&&(0,m.jsx)(ec,{"aria-current":x?"page":void 0,displayName:"Spaces",href:eC.VR,iconOverride:(0,m.jsx)(cF,{className:cB.icon,size:16}),id:"spaces",onLinkClick:_,label:(0,m.jsx)(ey.A,{variant:"success",children:"Preview"})});if(o[11]!==c||o[12]!==b||o[13]!==p){let e;o[15]!==c||o[16]!==b?(e=e=>void 0!==e.NavigationComponent?(0,m.jsx)(e.NavigationComponent,{chatState:c,onLinkClick:b},e.id):null,o[15]=c,o[16]=b,o[17]=e):e=o[17],i=p.map(e),o[11]=c,o[12]=b,o[13]=p,o[14]=i}else i=o[14];return o[18]!==a||o[19]!==C||o[20]!==i?(s=(0,m.jsxs)("ul",{className:cB.list,children:[a,C,i]}),o[18]=a,o[19]=C,o[20]=i,o[21]=s):s=o[21],s}try{cU.displayName||(cU.displayName="ServiceList")}catch{}let c$={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",quicklinks:"Sidebar-module__quicklinks--wbmcD",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function cV(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,b,S,C,j,w,N,I,E=(0,h.c)(72),{isVisible:R,isPinned:T,isFloating:k,onNewThread:A,onToggle:D}=e,P=(0,z.Pk)(),{threads:L,selectedThreadID:M}=P,F=k?R:T,B=(0,g.b)(),U=(0,_.useRef)(!1),$=sk(),V=sj(),{closePreviewPane:q}=(0,nd.xx)(),W=(0,n_.BV)(),G=ej.W.immersiveServiceNavigation||W;E[0]!==B||E[1]!==L.size?(t=()=>{0!==L.size||U.current||(U.current=!0,B.fetchThreads())},E[0]=B,E[1]=L.size,E[2]=t):t=E[2],E[3]!==B||E[4]!==P||E[5]!==L?(n=[L,B,P],E[3]=B,E[4]=P,E[5]=L,E[6]=n):n=E[6],(0,_.useEffect)(t,n),E[7]!==k||E[8]!==R||E[9]!==D?(r=()=>{k&&R&&D()},E[7]=k,E[8]=R,E[9]=D,E[10]=r):r=E[10];let H=r;E[11]!==q||E[12]!==H?(a=()=>{H(),q()},E[11]=q,E[12]=H,E[13]=a):a=E[13];let Q=a,K=(0,_.useRef)(null),J=ne(),X=ej.W.navigableRefs&&F?J:K,Y=ne();E[14]!==k||E[15]!==R||E[16]!==D||E[17]!==X?(i=()=>{if(R&&k){let e=e=>{X.current&&!X.current.contains(e.target)&&D()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},s=[R,k,D,X],E[14]=k,E[15]=R,E[16]=D,E[17]=X,E[18]=i,E[19]=s):(i=E[18],s=E[19]),(0,_.useEffect)(i,s);let Z=(0,_.useId)(),ee=function(){let{isLicensedLimited:e}=(0,ny.xR)(),{visible:t}=sL();return!t&&e&&ej.W.freeToPaidHyperspaceUpgradePrompt}(),et=!ej.W.floatingSidebarFocusTrap||!(R&&k);E[20]!==X||E[21]!==et?(o={disabled:et,containerRef:X},E[20]=X,E[21]=et,E[22]=o):o=E[22],(0,cS.r)(o);let en=`${Z}-copilot-navigation`,er=R&&c$.visible,ea=T&&c$.pinned;E[23]!==er||E[24]!==ea?(l=(0,v.$)(c$.container,er,ea),E[23]=er,E[24]=ea,E[25]=l):l=E[25];let ei=`${Z}-copilot-navigation`;E[26]!==ei?(c=(0,m.jsx)("h2",{id:ei,className:"sr-only",children:"Copilot navigation"}),E[26]=ei,E[27]=c):c=E[27];let es=F?O.SidebarExpandIcon:O.SidebarCollapseIcon,eo=F?"Close conversations":"Open conversations";E[28]!==F||E[29]!==D?(d=()=>{D(),F?(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},E[28]=F,E[29]=D,E[30]=d):d=E[30];let el=ej.W.navigableRefs&&!F?Y:void 0;E[31]!==es||E[32]!==eo||E[33]!==d||E[34]!==el?(u=(0,m.jsx)(tE.K,{icon:es,"aria-label":eo,onClick:d,variant:"default",ref:el}),E[31]=es,E[32]=eo,E[33]=d,E[34]=el,E[35]=u):u=E[35],E[36]!==$||E[37]!==A||E[38]!==H?(p=(0,m.jsx)(tE.K,{as:ed.N_,to:eC.Jz,icon:cP,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),H(),await $({clearTopic:!0,includeThreads:!1}),A(),(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"}),E[36]=$,E[37]=A,E[38]=H,E[39]=p):p=E[39],E[40]!==c||E[41]!==u||E[42]!==p?(f=(0,m.jsxs)("div",{className:c$.header,children:[c,u,p]}),E[40]=c,E[41]=u,E[42]=p,E[43]=f):f=E[43],E[44]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsx)(cq,{}),E[44]=y):y=E[44];let ec=`${Z}-quick-links`,eu=`${Z}-quick-links`;E[45]!==eu?(x=(0,m.jsx)("h3",{id:eu,className:"sr-only",children:"Quick links"}),E[45]=eu,E[46]=x):x=E[46],E[47]!==Q||E[48]!==G?(b=G&&(0,m.jsx)(cU,{toggleFloatingSidebar:Q}),E[47]=Q,E[48]=G,E[49]=b):b=E[49],E[50]!==ec||E[51]!==x||E[52]!==b?(S=(0,m.jsxs)("nav",{"aria-labelledby":ec,className:c$.quicklinks,children:[x,b]}),E[50]=ec,E[51]=x,E[52]=b,E[53]=S):S=E[53];let em=V?null:M;return E[54]!==Q||E[55]!==P.threadsLoading.state||E[56]!==em?(C=(0,m.jsx)(cT,{selectedItemID:em,loadingState:P.threadsLoading.state,onConversationSelect:Q}),E[54]=Q,E[55]=P.threadsLoading.state,E[56]=em,E[57]=C):C=E[57],E[58]!==S||E[59]!==C?(j=(0,m.jsx)(nw.t,{fallback:y,children:(0,m.jsxs)("div",{className:c$.conversations,children:[S,C]})}),E[58]=S,E[59]=C,E[60]=j):j=E[60],E[61]!==ee?(w=ee?(0,m.jsx)(cM,{}):null,E[61]=ee,E[62]=w):w=E[62],E[63]!==j||E[64]!==w?(N=(0,m.jsxs)("div",{className:c$.sidebar,children:[j,w]}),E[63]=j,E[64]=w,E[65]=N):N=E[65],E[66]!==X||E[67]!==l||E[68]!==f||E[69]!==N||E[70]!==en?(I=(0,m.jsxs)("aside",{"aria-labelledby":en,ref:X,className:l,children:[f,N]}),E[66]=X,E[67]=l,E[68]=f,E[69]=N,E[70]=en,E[71]=I):I=E[71],I}function cq(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:c$.blankslateContainer,children:(0,m.jsx)(nH,{regionName:"The conversations menu"})}),t[0]=e):e=t[0],e}try{cV.displayName||(cV.displayName="Sidebar")}catch{}try{cq.displayName||(cq.displayName="SidebarContentsFallback")}catch{}function cW(e){let t=cI();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():cE())}}function cG(e){return"org_public"===e?"Shared":"Private"}let cz={container:"SpaceNotFoundComponent-module__container--hltG9",description:"SpaceNotFoundComponent-module__description--b8Rdv",banner:"SpaceNotFoundComponent-module__banner--ntKjI",icon:"SpaceNotFoundComponent-module__icon--hM9CP"},cH=e=>{let t,n,r,a,i,s=(0,h.c)(7),{protectedOrganizations:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(O.AlertIcon,{className:cz.icon}),n=(0,m.jsx)("h3",{children:"Space not found"}),r=(0,m.jsx)("p",{className:cz.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),s[0]=t,s[1]=n,s[2]=r):(t=s[0],n=s[1],r=s[2]),s[3]!==o?(a=o&&(0,m.jsx)(H.x,{protectedOrgs:o,redirectURI:cQ}),s[3]=o,s[4]=a):a=s[4],s[5]!==a?(i=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:cz.container,children:[t,n,r,(0,m.jsx)("div",{className:cz.banner,children:a})]})}),s[5]=a,s[6]=i):i=s[6],i};try{cH.displayName||(cH.displayName="SpaceNotFoundComponent")}catch{}function cQ(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}let cK={dialogTitle:"AllAttachmentsDialog-module__dialogTitle--A4eQa"},cJ={attachmentText:"AttachmentPreview-module__attachmentText--GPjjd",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--W6lEk"};function cX(e){let t=(0,h.c)(13),{attachment:n}=e;if(!n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{className:cJ.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(n.type){case"free_text":{let e;return t[1]!==n.text?(e=(0,m.jsx)("p",{className:cJ.attachmentText,children:n.text}),t[1]=n.text,t[2]=e):e=t[2],e}case"media_content":{let e,r,a,i=`image: ${n.name}`;return t[3]!==n.url||t[4]!==i?(e=(0,m.jsx)("img",{alt:i,src:n.url}),t[3]=n.url,t[4]=i,t[5]=e):e=t[5],t[6]!==n.name||t[7]!==n.url?(r=(0,m.jsx)(eM.Q,{onClick:()=>(function(e,t,n="image"){let r=document.createElement("a");r.href=e,r.setAttribute("download",t||n),document.body.appendChild(r),r.click(),document.body.removeChild(r)})(n.url,n.name),children:"Download"}),t[6]=n.name,t[7]=n.url,t[8]=r):r=t[8],t[9]!==e||t[10]!==r?(a=(0,m.jsxs)("div",{className:cJ.attachmentPreviewImage,children:[e,r]}),t[9]=e,t[10]=r,t[11]=a):a=t[11],a}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{cX.displayName||(cX.displayName="AttachmentPreview")}catch{}function cY(e){let t=(0,h.c)(14),{attachment:n,className:r}=e;switch(n.type){case"github_file":{let e;return t[0]!==r?(e=(0,m.jsx)(O.FileIcon,{className:r}),t[0]=r,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==r?(e=(0,m.jsx)(O.PasteIcon,{className:r}),t[2]=r,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==r?(e=(0,m.jsx)(O.FileIcon,{className:r}),t[4]=r,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==r?(e=(0,m.jsx)(O.IssueOpenedIcon,{className:r}),t[6]=r,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==r?(e=(0,m.jsx)(O.GitPullRequestIcon,{className:r}),t[8]=r,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==r?(e=(0,m.jsx)(O.ImageIcon,{className:r}),t[10]=r,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==r?(e=(0,m.jsx)(O.RepoIcon,{className:r}),t[12]=r,t[13]=e):e=t[13],e}default:return null}}try{cY.displayName||(cY.displayName="AttachmentIcon")}catch{}let cZ={attachmentList:"AttachmentsList-module__attachmentList--bXIct",attachmentItem:"AttachmentsList-module__attachmentItem--nReRG",attachmentItemButton:"AttachmentsList-module__attachmentItemButton--EYA7M",attachmentItemLink:"AttachmentsList-module__attachmentItemLink--jglX0",attachmentText:"AttachmentsList-module__attachmentText--CuSQm",attachmentName:"AttachmentsList-module__attachmentName--tRjFT",attachmentContent:"AttachmentsList-module__attachmentContent--qKH5R",attachmentIcon:"AttachmentsList-module__attachmentIcon--diR8_",lineClamp:"AttachmentsList-module__lineClamp--Nrbdd"};function c0(e){let t,n,r=(0,h.c)(7),{attachments:a,onFileClick:i}=e;if(r[0]!==a||r[1]!==i){let e;r[3]!==i?(e=e=>(0,m.jsx)(c1,{attachment:e,onFileClick:i},e.id),r[3]=i,r[4]=e):e=r[4],t=a.map(e),r[0]=a,r[1]=i,r[2]=t}else t=r[2];return r[5]!==t?(n=(0,m.jsx)("ul",{className:cZ.attachmentList,children:t}),r[5]=t,r[6]=n):n=r[6],n}function c1(e){let t=(0,h.c)(74),{attachment:n,onFileClick:r}=e;switch(n.type){case"github_file":{let e,r,a,i,s,o,l;t[0]!==n?(e=(0,nv.q5)(n),t[0]=n,t[1]=e):e=t[1];let{filePath:c,fileName:d,fileUrl:u}=e;return t[2]!==n?(r=(0,m.jsx)("div",{className:cZ.attachmentIcon,children:(0,m.jsx)(cY,{attachment:n})}),t[2]=n,t[3]=r):r=t[3],t[4]!==d?(a=(0,m.jsx)("div",{className:cZ.attachmentName,children:d}),t[4]=d,t[5]=a):a=t[5],t[6]!==c?(i=(0,m.jsx)("p",{className:cZ.attachmentContent,children:c}),t[6]=c,t[7]=i):i=t[7],t[8]!==a||t[9]!==i?(s=(0,m.jsxs)("div",{className:cZ.attachmentText,children:[a,i]}),t[8]=a,t[9]=i,t[10]=s):s=t[10],t[11]!==u||t[12]!==r||t[13]!==s?(o=(0,m.jsxs)("a",{className:cZ.attachmentItemLink,href:u,rel:"noopener noreferrer",target:"_blank",children:[r,s]}),t[11]=u,t[12]=r,t[13]=s,t[14]=o):o=t[14],t[15]!==n.id||t[16]!==o?(l=(0,m.jsx)("li",{className:cZ.attachmentItem,children:o},n.id),t[15]=n.id,t[16]=o,t[17]=l):l=t[17],l}case"free_text":case"media_content":{let e,a,i,s,o,l,c,d,u,h=n.id;return t[18]!==n||t[19]!==r?(e=()=>r(n),t[18]=n,t[19]=r,t[20]=e):e=t[20],t[21]!==n?(a=(0,m.jsx)("div",{className:cZ.attachmentIcon,children:(0,m.jsx)(cY,{attachment:n})}),t[21]=n,t[22]=a):a=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(i=(0,v.$)(cZ.attachmentName,cZ.lineClamp),t[23]=i):i=t[23],t[24]!==n.name?(s=(0,m.jsx)("div",{className:i,children:n.name}),t[24]=n.name,t[25]=s):s=t[25],t[26]!==n?(o="text"in n&&(0,m.jsx)("p",{className:(0,v.$)(cZ.attachmentContent,cZ.lineClamp),children:n.text}),t[26]=n,t[27]=o):o=t[27],t[28]!==s||t[29]!==o?(l=(0,m.jsxs)("div",{className:cZ.attachmentText,children:[s,o]}),t[28]=s,t[29]=o,t[30]=l):l=t[30],t[31]!==a||t[32]!==l?(c=(0,m.jsxs)("span",{className:cZ.attachmentItemLink,children:[a,l]}),t[31]=a,t[32]=l,t[33]=c):c=t[33],t[34]!==e||t[35]!==c?(d=(0,m.jsx)("button",{type:"button",onClick:e,className:cZ.attachmentItemButton,children:c}),t[34]=e,t[35]=c,t[36]=d):d=t[36],t[37]!==n.id||t[38]!==d?(u=(0,m.jsx)("li",{className:cZ.attachmentItem,children:d},h),t[37]=n.id,t[38]=d,t[39]=u):u=t[39],u}case"uploaded_text_file":{let e,r,a,i,s,o=n.id,l=n.url,c=n.name;return t[40]!==n?(e=(0,m.jsx)("div",{className:cZ.attachmentIcon,children:(0,m.jsx)(cY,{attachment:n})}),t[40]=n,t[41]=e):e=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(r=(0,v.$)(cZ.attachmentName,cZ.lineClamp),t[42]=r):r=t[42],t[43]!==n.name?(a=(0,m.jsx)("div",{className:cZ.attachmentText,children:(0,m.jsx)("div",{className:r,children:n.name})}),t[43]=n.name,t[44]=a):a=t[44],t[45]!==n.name||t[46]!==n.url||t[47]!==e||t[48]!==a?(i=(0,m.jsxs)("a",{className:cZ.attachmentItemLink,href:l,download:c,children:[e,a]}),t[45]=n.name,t[46]=n.url,t[47]=e,t[48]=a,t[49]=i):i=t[49],t[50]!==n.id||t[51]!==i?(s=(0,m.jsx)("li",{className:cZ.attachmentItem,children:i},o),t[50]=n.id,t[51]=i,t[52]=s):s=t[52],s}case"github_issue":case"github_pull_request":{let e,r,a,i,s,o,l,c,d,u=n.id,h=n.url;t[53]!==n?(e=(0,m.jsx)("div",{className:cZ.attachmentIcon,children:(0,m.jsx)(cY,{attachment:n,className:"fgColor-success"})}),t[53]=n,t[54]=e):e=t[54],t[55]===Symbol.for("react.memo_cache_sentinel")?(r=(0,v.$)(cZ.attachmentName,cZ.lineClamp),t[55]=r):r=t[55];let p=`#${n.number}`;return t[56]!==p?(a=(0,m.jsx)("span",{className:"fgColor-muted text-light",children:p}),t[56]=p,t[57]=a):a=t[57],t[58]!==n.title||t[59]!==a?(i=(0,m.jsxs)("div",{className:r,children:[n.title,"\xa0",a]}),t[58]=n.title,t[59]=a,t[60]=i):i=t[60],t[61]===Symbol.for("react.memo_cache_sentinel")?(s=(0,v.$)(cZ.attachmentContent,cZ.lineClamp),t[61]=s):s=t[61],t[62]!==n.nwo?(o=(0,m.jsx)("div",{className:s,children:n.nwo}),t[62]=n.nwo,t[63]=o):o=t[63],t[64]!==i||t[65]!==o?(l=(0,m.jsxs)("div",{className:cZ.attachmentText,children:[i,o]}),t[64]=i,t[65]=o,t[66]=l):l=t[66],t[67]!==n.url||t[68]!==l||t[69]!==e?(c=(0,m.jsxs)("a",{className:cZ.attachmentItemLink,href:h,rel:"noopener noreferrer",target:"_blank",children:[e,l]}),t[67]=n.url,t[68]=l,t[69]=e,t[70]=c):c=t[70],t[71]!==n.id||t[72]!==c?(d=(0,m.jsx)("li",{className:cZ.attachmentItem,children:c},u),t[71]=n.id,t[72]=c,t[73]=d):d=t[73],d}default:return null}}try{c0.displayName||(c0.displayName="AttachmentsList")}catch{}try{c1.displayName||(c1.displayName="AttachmentItem")}catch{}function c2(e){let t,n,r,a,i,s=(0,h.c)(17),{copilotSpace:o,onClose:l,returnFocusRef:c,initialAttachment:d}=e,u=(0,ed.Zp)(),[p,f]=(0,_.useState)(d??null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen"},s[0]=t):t=s[0],s[1]!==o||s[2]!==u||s[3]!==p?(n=!0===o.editable&&null===p?[{content:"Edit",leadingVisual:O.PencilIcon,onClick:()=>void u(`${(0,nv.GL)(o)}#attachments`)}]:void 0,s[1]=o,s[2]=u,s[3]=p,s[4]=n):n=s[4],s[5]!==l||s[6]!==p?(r=()=>(0,m.jsx)(n7.l.Header,{children:(0,m.jsxs)("div",{className:"d-flex flex-items-center",children:[p?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tE.K,{icon:O.ArrowLeftIcon,variant:"invisible",onClick:()=>f(null),"aria-label":"Back",className:"mr-1"}),(0,m.jsx)(n7.l.Title,{className:cK.dialogTitle,children:p?.name??"Attachments"})]}):(0,m.jsx)(n7.l.Title,{className:(0,v.$)(cK.dialogTitle,"pl-2"),children:"Attachments"}),(0,m.jsx)(n7.l.CloseButton,{onClose:l})]})}),s[5]=l,s[6]=p,s[7]=r):r=s[7],s[8]!==o.resources||s[9]!==p?(a=p?(0,m.jsx)(cX,{attachment:p}):(0,m.jsx)(c0,{attachments:o.resources,onFileClick:f}),s[8]=o.resources,s[9]=p,s[10]=a):a=s[10],s[11]!==l||s[12]!==c||s[13]!==n||s[14]!==r||s[15]!==a?(i=(0,m.jsx)(n7.l,{onClose:l,position:t,returnFocusRef:c,footerButtons:n,renderHeader:r,children:a}),s[11]=l,s[12]=c,s[13]=n,s[14]=r,s[15]=a,s[16]=i):i=s[16],i}try{c2.displayName||(c2.displayName="AllAttachmentsDialog")}catch{}let c3={instructionsText:"FullInstructionsDialog-module__instructionsText--K7H7X"},c4=e=>{let t,n=(0,h.c)(2);return n[0]!==e?(t=(0,m.jsx)(O.CheckIcon,{...e,className:"fgColor-success"}),n[0]=e,n[1]=t):t=n[1],t};function c5(e){let t,n,r,a,i,s,o,l=(0,h.c)(20),{copilotSpace:c,onClose:d,returnFocusRef:u}=e,[p,f]=(0,_.useState)(!1);l[0]!==c.generalInstructions?(t=function(){(0,o_.D)(c.generalInstructions||""),f(!0),setTimeout(()=>f(!1),2e3)},l[0]=c.generalInstructions,l[1]=t):t=l[1];let g=t,y=(0,ed.Zp)();l[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen"},l[2]=n):n=l[2];let x=p?"Copied":"Copy",v=p?c4:O.CopyIcon;return l[3]!==g||l[4]!==x||l[5]!==v?(r={content:x,leadingVisual:v,onClick:g},l[3]=g,l[4]=x,l[5]=v,l[6]=r):r=l[6],l[7]!==c||l[8]!==y?(a=!0===c.editable?[{content:"Edit",leadingVisual:O.PencilIcon,onClick:()=>y(`${(0,nv.GL)(c)}#instructions`)}]:[],l[7]=c,l[8]=y,l[9]=a):a=l[9],l[10]!==r||l[11]!==a?(i=[r,...a],l[10]=r,l[11]=a,l[12]=i):i=l[12],l[13]!==c.generalInstructions?(s=()=>(0,m.jsx)("div",{className:"p-3",children:(0,m.jsx)("p",{className:c3.instructionsText,children:c.generalInstructions})}),l[13]=c.generalInstructions,l[14]=s):s=l[14],l[15]!==d||l[16]!==u||l[17]!==i||l[18]!==s?(o=(0,m.jsx)(n7.l,{title:"Instructions",onClose:d,returnFocusRef:u,position:n,footerButtons:i,renderBody:s}),l[15]=d,l[16]=u,l[17]=i,l[18]=s,l[19]=o):o=l[19],o}try{c4.displayName||(c4.displayName="SuccessCheckIcon")}catch{}try{c5.displayName||(c5.displayName="FullInstructionsDialog")}catch{}var c6=n(29255),c7=n(97665);let c8=e=>{let t,n,r,a,i,s,o,l=(0,h.c)(18),c=(0,g.b)(),{customCopilots:d}=(0,z.Pk)(),u=(0,c7.jE)();l[0]!==e||l[1]!==u?(t=async()=>(e&&await u.invalidateQueries({queryKey:(0,c6.dp)(e)}),u.invalidateQueries({queryKey:c6.O6})),l[0]=e,l[1]=u,l[2]=t):t=l[2],l[3]!==d||l[4]!==e||l[5]!==c?(n=async t=>{let n=(0,nv.JB)(d,e);if(!n)return;let r=`${(0,nv.Cb)(e)}/stars`,a=t.starred?"POST":"DELETE";if((await (0,F.lS)(r,{method:a})).ok)return n.starred=t.starred,c.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:n}),n},l[3]=d,l[4]=e,l[5]=c,l[6]=n):n=l[6],l[7]!==t||l[8]!==n?(r={onSuccess:t,mutationFn:n},l[7]=t,l[8]=n,l[9]=r):r=l[9];let m=(0,rn.n)(r);return l[10]!==m?({mutateAsync:s,isPending:a,...i}=m,l[10]=m,l[11]=a,l[12]=i,l[13]=s):(a=l[11],i=l[12],s=l[13]),l[14]!==a||l[15]!==i||l[16]!==s?(o={starCopilotSpace:s,isLoading:a,...i},l[14]=a,l[15]=i,l[16]=s,l[17]=o):o=l[17],o},c9={container:"SpaceDetailsPage-module__container--NBzl3",main:"SpaceDetailsPage-module__main--VvzPx",contain:"SpaceDetailsPage-module__contain--oqicC",mobileOnly:"SpaceDetailsPage-module__mobileOnly--kEz8Z",desktopOnly:"SpaceDetailsPage-module__desktopOnly--xwqTV",meta:"SpaceDetailsPage-module__meta--juYEp",header:"SpaceDetailsPage-module__header--eIaez",chatInput:"SpaceDetailsPage-module__chatInput--Auq6g",conversations:"SpaceDetailsPage-module__conversations--VZDbm",info:"SpaceDetailsPage-module__info--VWAb_",sideTitle:"SpaceDetailsPage-module__sideTitle--m6GP5",sideSection:"SpaceDetailsPage-module__sideSection--p8xws",sideSectionTitle:"SpaceDetailsPage-module__sideSectionTitle--ieSV8",sideSectionHeader:"SpaceDetailsPage-module__sideSectionHeader--lofn9",conversationsListTitle:"SpaceDetailsPage-module__conversationsListTitle--Qi4h1",noConversations:"SpaceDetailsPage-module__noConversations--L9F5I",conversationsPlaceholder:"SpaceDetailsPage-module__conversationsPlaceholder--YUty1",contextPlaceholder:"SpaceDetailsPage-module__contextPlaceholder--TJQfK",conversationsPlaceholderText:"SpaceDetailsPage-module__conversationsPlaceholderText--X4UwU",conversationsHeader:"SpaceDetailsPage-module__conversationsHeader--WPiMC",conversationsContainer:"SpaceDetailsPage-module__conversationsContainer--vapwm",conversationsList:"SpaceDetailsPage-module__conversationsList--q27bh",conversationItem:"SpaceDetailsPage-module__conversationItem--yTwgT",conversationItemMenuOpen:"SpaceDetailsPage-module__conversationItemMenuOpen--OkeFA",conversationItemLeftColumn:"SpaceDetailsPage-module__conversationItemLeftColumn--lf_vr",conversationName:"SpaceDetailsPage-module__conversationName--lRecN",conversationTimestamp:"SpaceDetailsPage-module__conversationTimestamp--bMWsn",instructionsText:"SpaceDetailsPage-module__instructionsText--Qa5J2",infoDescription:"SpaceDetailsPage-module__infoDescription--NU98Y",noDescription:"SpaceDetailsPage-module__noDescription--QMqlj",starButton:"SpaceDetailsPage-module__starButton--VxOa3",visibilityLabel:"SpaceDetailsPage-module__visibilityLabel--kJe6N",descriptionExpander:"SpaceDetailsPage-module__descriptionExpander--HWK9U",starFillIcon:"SpaceDetailsPage-module__starFillIcon--FEdbK",instructionsLink:"SpaceDetailsPage-module__instructionsLink--Xw19Y",attachmentsLink:"SpaceDetailsPage-module__attachmentsLink--Q28Yi",actionListOffset:"SpaceDetailsPage-module__actionListOffset--jaFU6",lineClamp:"SpaceDetailsPage-module__lineClamp--_by4z"};function de(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nZ.B,{direction:"horizontal",align:"center",className:"p-4 px-md-6",children:(0,m.jsx)(nZ.B.Item,{grow:!0,children:(0,m.jsx)(lU,{})})}),t[0]=e):e=t[0],e}try{de.displayName||(de.displayName="SpaceLoader")}catch{}Object.keys({BeakerIcon:O.BeakerIcon,BookIcon:O.BookIcon,BroadcastIcon:O.BroadcastIcon,CloudIcon:O.CloudIcon,CodeIcon:O.CodeIcon,DatabaseIcon:O.DatabaseIcon,DependabotIcon:O.DependabotIcon,HubotIcon:O.HubotIcon,OrganizationIcon:O.OrganizationIcon,PlusIcon:O.PlusIcon,ProjectRoadmapIcon:O.ProjectRoadmapIcon,TelescopeIcon:O.TelescopeIcon,TerminalIcon:O.TerminalIcon});let dt=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],dn=e=>dt.find(t=>t===e)??"blue",dr={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},da={auburn:dr.auburn,blue:dr.blue,brown:dr.brown,coral:dr.coral,cyan:dr.cyan,gray:dr.gray,green:dr.green,indigo:dr.indigo,lemon:dr.lemon,lime:dr.lime,olive:dr.olive,orange:dr.orange,pine:dr.pine,pink:dr.pink,plum:dr.plum,purple:dr.purple,red:dr.red,teal:dr.teal,yellow:dr.yellow};function di(e){let t,n,r,a,i=(0,h.c)(11),{color:s,size:o}=e,l=void 0===o?16:o,{spaceColor:c}={icon:cF,spaceColor:dn(s)},d=`Spaces avatar in ${c} color`,u=`var(--base-size-${2*l})`;i[0]!==u?(t={"--custom-size":u},i[0]=u,i[1]=t):t=i[1];let p=da[c];return i[2]!==p?(n=(0,v.$)(dr.container,p),i[2]=p,i[3]=n):n=i[3],i[4]!==l?(r=(0,m.jsx)(cF,{size:l}),i[4]=l,i[5]=r):r=i[5],i[6]!==d||i[7]!==t||i[8]!==n||i[9]!==r?(a=(0,m.jsx)("div",{role:"img","aria-label":d,style:t,className:n,children:r}),i[6]=d,i[7]=t,i[8]=n,i[9]=r,i[10]=a):a=i[10],a}try{di.displayName||(di.displayName="SpacesAvatar")}catch{}let ds={container:"Tip-module__container--Ut3fK",prefix:"Tip-module__prefix--PQJdZ"};function dl(e){let t,n,r=(0,h.c)(3),{children:a}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:ds.prefix,children:[(0,m.jsx)(O.LightBulbIcon,{}),"Tip"]}),r[0]=t):t=r[0],r[1]!==a?(n=(0,m.jsxs)("div",{className:ds.container,children:[t,a]}),r[1]=a,r[2]=n):n=r[2],n}try{dl.displayName||(dl.displayName="Tip")}catch{}function dc({customCopilotId:e,onChatSubmit:t,selectedThreadID:n,textAreaRef:r}){let{threads:a,streamingMessage:i,ambientError:s}=(0,z.Pk)(),o=(0,g.b)(),l=sk(),[c,d]=(0,_.useState)(null),{isPending:u,data:h,error:p}=(0,n_.Ao)(e),[y,x]=(0,_.useState)(!1),[b,S]=(0,_.useState)(!1),C=(0,_.useMemo)(()=>{if(!h)return[];cW(a);let t=new Map(Array.from(a.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return o.sortThreads(t).slice(0,10)},[a,e,o,h]);(0,_.useEffect)(()=>{h&&o.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:h}),o.clearCurrentReferences(["image"])},[h,o]);let j=(0,_.useRef)(!1);(0,_.useEffect)(()=>()=>{j.current||(o.clearCurrentReferences(),j.current=!1)},[o,e]);let w=(0,_.useCallback)(async e=>{t&&(j.current=!0,await t(e))},[t]);if(p instanceof n_.i9)return(0,m.jsx)(cH,{});if(p instanceof n_.OW)return(0,m.jsx)(cH,{protectedOrganizations:p.protectedOrganizations});if(u||!h)return(0,m.jsx)(de,{});let N=(0,nv.Hh)(h),I=cG(h.visibility);return(0,m.jsx)("div",{className:c9.container,children:(0,m.jsxs)("div",{className:c9.main,children:[(0,m.jsxs)("div",{className:c9.contain,children:[N&&(0,m.jsx)(s3,{}),(0,m.jsxs)("div",{className:c9.header,children:[(0,m.jsx)(di,{size:16,color:h.iconColor}),(0,m.jsxs)("h3",{className:c9.sideTitle,children:[h.name,(0,m.jsx)(ey.A,{className:c9.visibilityLabel,size:"small",variant:"secondary",children:I})]})]}),(0,m.jsxs)("div",{className:c9.chatInput,children:[s&&(0,m.jsx)(sA.P,{ambientError:s}),(0,m.jsx)(f.V,{textAreaRef:r,onSubmit:w,isStreaming:!!i,size:"large",disabled:N,showModelPicker:!0,onNewThreadSelected:l},n)]}),(0,m.jsx)("div",{className:c9.conversations,children:C.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:c9.conversationsContainer,children:(0,m.jsxs)("nav",{"aria-labelledby":"conversations-heading",children:[(0,m.jsx)("div",{className:c9.conversationsHeader,children:(0,m.jsx)("h2",{id:"conversations-heading",className:c9.conversationsListTitle,children:"Your last conversations"})}),(0,m.jsx)("ul",{role:"menu",className:c9.conversationsList,children:C.map(e=>(0,m.jsx)(dd,{conversation:e,activeMenuConversationId:c,setActiveMenuConversationId:d},e.id))})]})}),h.ownerIsOrg&&(0,m.jsx)(dl,{children:"Your conversations stay private when you share a space."})]}):(0,m.jsx)("div",{className:c9.noConversations,children:(0,m.jsx)(dh,{})})})]}),(0,m.jsxs)("aside",{className:c9.meta,children:[(0,m.jsx)(dp,{copilotSpace:h}),(0,m.jsx)(df,{copilotSpace:h,setInstructionsDialogOpen:x,setAttachmentsDialogOpen:S}),h.generalInstructions||h.starredUsers.length>0||h.resources.length>0?(0,m.jsxs)(m.Fragment,{children:[h.generalInstructions&&(0,m.jsx)(dg,{copilotSpace:h,isDialogOpen:y,setDialogOpen:x}),h.starredUsers.length>0&&(0,m.jsx)(dx,{copilotSpace:h}),h.resources.length>0&&(0,m.jsx)(dy,{copilotSpace:h,isDialogOpen:b,setDialogOpen:S})]}):(0,m.jsx)("section",{className:(0,v.$)(c9.noConversations,c9.desktopOnly),children:(0,m.jsxs)("div",{className:c9.contextPlaceholder,children:[(0,m.jsx)(O.PaperclipIcon,{size:24}),(0,m.jsx)("div",{className:c9.conversationsPlaceholderText,children:"This space doesn\u2019t have any instructions or attachments yet"})]})})]})]})})}function dd(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,_,b=(0,h.c)(38),{conversation:S,activeMenuConversationId:C,setActiveMenuConversationId:j}=e,w=(0,sT.Z)(),N=(0,g.b)();b[0]!==S?(t=(0,eC.CB)(S),b[0]=S,b[1]=t):t=b[1];let I=t,E=`${eC.Jz}/c/${S.id}`;b[2]!==S||b[3]!==N?(n=function(){N.deleteThread(S)},b[2]=S,b[3]=N,b[4]=n):n=b[4];let R=n;b[5]!==w||b[6]!==E?(r=()=>{w(E)},a=e=>{"Enter"===e.key&&w(E)},b[5]=w,b[6]=E,b[7]=r,b[8]=a):(r=b[7],a=b[8]);let T=null!==C&&c9.conversationItemMenuOpen;b[9]!==T?(i=(0,v.$)(c9.conversationItem,T),b[9]=T,b[10]=i):i=b[10],b[11]!==I?(s=(0,m.jsx)("div",{className:c9.conversationName,children:I}),b[11]=I,b[12]=s):s=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(O.ClockIcon,{}),b[13]=o):o=b[13],b[14]!==S.updatedAt?(l=new Date(S.updatedAt),b[14]=S.updatedAt,b[15]=l):l=b[15],b[16]!==l?(c=(0,m.jsxs)("div",{className:c9.conversationTimestamp,children:[o," ",(0,m.jsx)(ai.A,{format:"relative",prefix:"",date:l})]}),b[16]=l,b[17]=c):c=b[17],b[18]!==c||b[19]!==s?(d=(0,m.jsxs)("div",{className:c9.conversationItemLeftColumn,children:[s,c]}),b[18]=c,b[19]=s,b[20]=d):d=b[20];let k=C===S.id;return b[21]!==S.id||b[22]!==j?(u=e=>{j(e?S.id:null)},b[21]=S.id,b[22]=j,b[23]=u):u=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Conversation options",icon:O.KebabHorizontalIcon,onClick:dm})}),b[24]=p):p=b[24],b[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),b[25]=f):f=b[25],b[26]!==R?(y=(0,m.jsx)(tI.W.Overlay,{onClick:du,align:"end",children:(0,m.jsx)(tR.l,{children:(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:R,children:[f,"Delete"]})})}),b[26]=R,b[27]=y):y=b[27],b[28]!==k||b[29]!==u||b[30]!==y?(x=(0,m.jsxs)(tI.W,{open:k,onOpenChange:u,children:[p,y]}),b[28]=k,b[29]=u,b[30]=y,b[31]=x):x=b[31],b[32]!==d||b[33]!==x||b[34]!==r||b[35]!==a||b[36]!==i?(_=(0,m.jsxs)("li",{role:"menuitem",onClick:r,onKeyDown:a,className:i,children:[d,x]}),b[32]=d,b[33]=x,b[34]=r,b[35]=a,b[36]=i,b[37]=_):_=b[37],_}function du(e){return e.stopPropagation()}function dm(e){e.stopPropagation()}function dh(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("section",{className:c9.noConversations,children:(0,m.jsxs)("div",{className:c9.conversationsPlaceholder,children:[(0,m.jsx)(O.CommentDiscussionIcon,{size:24}),(0,m.jsx)("div",{className:c9.conversationsPlaceholderText,children:"Start your first conversation using the input above"})]})}),t[0]=e):e=t[0],e}function dp(e){let t,n,r,a,i,s,o,l,c=(0,h.c)(23),{copilotSpace:d}=e,[u,p]=(0,_.useState)(!1),f=(d.description?.length??0)>140&&!u,{starCopilotSpace:g,isLoading:y}=c8(d);c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("div",{className:(0,v.$)(c9.sideSectionHeader,c9.desktopOnly),children:(0,m.jsx)("h4",{className:c9.sideSectionTitle,children:"About"})}),c[0]=t):t=c[0],c[1]!==d.description||c[2]!==f?(n=d.description?(f?d.description.slice(0,140):d.description).replaceAll(`

`,`
`):(0,m.jsx)("span",{className:(0,v.$)(c9.noDescription,c9.desktopOnly),children:"No description"}),c[1]=d.description,c[2]=f,c[3]=n):n=c[3],c[4]!==d.description||c[5]!==f?(r=d.description&&f&&(0,m.jsx)("button",{type:"button","aria-label":"Expand description",className:c9.descriptionExpander,onClick:()=>p(!0),children:(0,m.jsx)(O.EllipsisIcon,{size:16})}),c[4]=d.description,c[5]=f,c[6]=r):r=c[6],c[7]!==n||c[8]!==r?(a=(0,m.jsxs)("p",{className:c9.infoDescription,children:[n,r]}),c[7]=n,c[8]=r,c[9]=a):a=c[9],c[10]!==d.starred||c[11]!==g?(i=()=>void g({starred:!d.starred}),c[10]=d.starred,c[11]=g,c[12]=i):i=c[12],c[13]!==d.starred?(s=d.starred?(0,m.jsx)(O.StarFillIcon,{className:c9.starFillIcon}):(0,m.jsx)(O.StarIcon,{}),c[13]=d.starred,c[14]=s):s=c[14];let x=d.starred?"Starred":"Star";return c[15]!==y||c[16]!==i||c[17]!==s||c[18]!==x?(o=(0,m.jsx)(eM.Q,{className:c9.starButton,block:!0,disabled:y,onClick:i,leadingVisual:s,variant:"default",children:x}),c[15]=y,c[16]=i,c[17]=s,c[18]=x,c[19]=o):o=c[19],c[20]!==a||c[21]!==o?(l=(0,m.jsxs)("section",{className:c9.info,children:[t,a,o]}),c[20]=a,c[21]=o,c[22]=l):l=c[22],l}function df(e){let t,n,r,a,i,s,o=(0,h.c)(19),{copilotSpace:l,setInstructionsDialogOpen:c,setAttachmentsDialogOpen:d}=e,u=`/${l.owner}`;return o[0]!==l.ownerAvatar||o[1]!==l.ownerIsOrg?(t=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(aa.r,{size:16,square:l.ownerIsOrg,src:l.ownerAvatar})}),o[0]=l.ownerAvatar,o[1]=l.ownerIsOrg,o[2]=t):t=o[2],o[3]!==l.owner?(n=(0,m.jsxs)("span",{className:"fgColor-muted",children:["Owned by ",(0,m.jsx)("strong",{className:"text-semibold",children:l.owner})]}),o[3]=l.owner,o[4]=n):n=o[4],o[5]!==u||o[6]!==t||o[7]!==n?(r=(0,m.jsxs)(tR.l.LinkItem,{href:u,children:[t,n]}),o[5]=u,o[6]=t,o[7]=n,o[8]=r):r=o[8],o[9]!==l.generalInstructions||o[10]!==c?(a=l.generalInstructions&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>c(!0),className:c9.mobileOnly,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.NoteIcon,{})}),(0,m.jsx)("span",{className:"fgColor-muted",children:"View instructions"})]}),o[9]=l.generalInstructions,o[10]=c,o[11]=a):a=o[11],o[12]!==l.resources.length||o[13]!==d?(i=l.resources.length>0&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>d(!0),className:c9.mobileOnly,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.PaperclipIcon,{})}),(0,m.jsxs)("span",{className:"fgColor-muted",children:[l.resources.length," attachment",l.resources.length>1?"s":""]})]}),o[12]=l.resources.length,o[13]=d,o[14]=i):i=o[14],o[15]!==r||o[16]!==a||o[17]!==i?(s=(0,m.jsxs)(tR.l,{variant:"full",className:c9.actionListOffset,children:[r,a,i]}),o[15]=r,o[16]=a,o[17]=i,o[18]=s):s=o[18],s}function dg(e){let t,n,r,a,i,s,o,l=(0,h.c)(19),{copilotSpace:c,isDialogOpen:d,setDialogOpen:u}=e,p=(0,_.useRef)(null),f=c.generalInstructions||"";return l[0]!==f?(t=f.replaceAll(`

`,`
`),l[0]=f,l[1]=t):t=l[1],l[2]!==t?(n=(0,m.jsx)("p",{className:c9.instructionsText,children:t}),l[2]=t,l[3]=n):n=l[3],l[4]!==u?(r=()=>u(!0),l[4]=u,l[5]=r):r=l[5],l[6]!==d||l[7]!==r?(a=(0,m.jsx)(nW.A,{className:c9.instructionsLink,as:"button",ref:p,onClick:r,"aria-haspopup":"dialog","aria-expanded":d,children:"View full instructions"}),l[6]=d,l[7]=r,l[8]=a):a=l[8],l[9]!==n||l[10]!==a?(i=(0,m.jsxs)(d_,{title:"Instructions",children:[n,a]}),l[9]=n,l[10]=a,l[11]=i):i=l[11],l[12]!==c||l[13]!==d||l[14]!==u?(s=d&&(0,m.jsx)(c5,{copilotSpace:c,onClose:()=>u(!1),returnFocusRef:p}),l[12]=c,l[13]=d,l[14]=u,l[15]=s):s=l[15],l[16]!==i||l[17]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[16]=i,l[17]=s,l[18]=o):o=l[18],o}function dy(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g=(0,h.c)(35),{copilotSpace:y,isDialogOpen:x,setDialogOpen:v}=e,[b,S]=(0,_.useState)(null),C=(0,_.useRef)(null);if(g[0]!==y.resources||g[1]!==v){let e,l=y.resources.slice(0,5);n=d_,s="Attachments",o=y.resources.length,t=tR.l,r="full",a=c9.actionListOffset,g[9]!==v?(e=e=>{if("free_text"===e.type||"media_content"===e.type)return(0,m.jsxs)(tR.l.Item,{onSelect:()=>{S(e),v(!0)},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(cY,{attachment:e})}),(0,m.jsx)("span",{className:c9.lineClamp,children:e.name})]},e.id);if("uploaded_text_file"===e.type)return(0,m.jsxs)(tR.l.LinkItem,{href:e.url,download:e.name,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(cY,{attachment:e})}),(0,m.jsx)("span",{className:c9.lineClamp,children:e.name})]},e.id);if("repository"===e.type)return(0,m.jsxs)(tR.l.LinkItem,{href:`/${e.nwo}`,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(cY,{attachment:e})}),(0,m.jsx)("span",{className:c9.lineClamp,children:e.nwo})]},e.id);let t=(0,nv.$s)(e)?"fgColor-success":"",{fileName:n,fileUrl:r}="github_file"===e.type?(0,nv.q5)(e):{fileName:e.title,fileUrl:e.url};return(0,m.jsxs)(tR.l.LinkItem,{href:r,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(cY,{attachment:e,className:t})}),(0,m.jsx)("span",{className:c9.lineClamp,children:n})]},e.id)},g[9]=v,g[10]=e):e=g[10],i=l.map(e),g[0]=y.resources,g[1]=v,g[2]=t,g[3]=n,g[4]=r,g[5]=a,g[6]=i,g[7]=s,g[8]=o}else t=g[2],n=g[3],r=g[4],a=g[5],i=g[6],s=g[7],o=g[8];return g[11]!==t||g[12]!==r||g[13]!==a||g[14]!==i?(l=(0,m.jsx)(t,{variant:r,className:a,children:i}),g[11]=t,g[12]=r,g[13]=a,g[14]=i,g[15]=l):l=g[15],g[16]!==v?(c=()=>v(!0),g[16]=v,g[17]=c):c=g[17],g[18]!==x||g[19]!==c?(d=(0,m.jsx)(nW.A,{className:c9.attachmentsLink,as:"button",ref:C,onClick:c,"aria-haspopup":"dialog","aria-expanded":x,children:"View all attachments"}),g[18]=x,g[19]=c,g[20]=d):d=g[20],g[21]!==n||g[22]!==s||g[23]!==o||g[24]!==l||g[25]!==d?(u=(0,m.jsxs)(n,{title:s,count:o,children:[l,d]}),g[21]=n,g[22]=s,g[23]=o,g[24]=l,g[25]=d,g[26]=u):u=g[26],g[27]!==y||g[28]!==b||g[29]!==x||g[30]!==v?(p=x&&(0,m.jsx)(c2,{copilotSpace:y,initialAttachment:b,onClose:()=>{S(null),v(!1)},returnFocusRef:C}),g[27]=y,g[28]=b,g[29]=x,g[30]=v,g[31]=p):p=g[31],g[32]!==p||g[33]!==u?(f=(0,m.jsxs)(m.Fragment,{children:[u,p]}),g[32]=p,g[33]=u,g[34]=f):f=g[34],f}function dx(e){let t,n,r,a=(0,h.c)(7),{copilotSpace:i}=e,s=i.starredUsersCount;return a[0]!==i.starredUsers?(t=i.starredUsers.map(dv),a[0]=i.starredUsers,a[1]=t):t=a[1],a[2]!==t?(n=(0,m.jsx)("div",{children:t}),a[2]=t,a[3]=n):n=a[3],a[4]!==i.starredUsersCount||a[5]!==n?(r=(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(d_,{title:"Starred by",count:s,children:n})}),a[4]=i.starredUsersCount,a[5]=n,a[6]=r):r=a[6],r}function dv(e){return(0,m.jsx)(aa.r,{className:"mr-2",size:32,src:e.avatarUrl,alt:e.login},e.login)}function d_(e){let t,n,r,a,i=(0,h.c)(9),{title:s,count:o,children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(c9.sideSection,c9.desktopOnly),i[0]=t):t=i[0],i[1]!==o?(n=!!o&&(0,m.jsx)(n8.A,{children:o}),i[1]=o,i[2]=n):n=i[2],i[3]!==n||i[4]!==s?(r=(0,m.jsx)("div",{className:c9.sideSectionHeader,children:(0,m.jsxs)("h4",{className:c9.sideSectionTitle,children:[s," ",n]})}),i[3]=n,i[4]=s,i[5]=r):r=i[5],i[6]!==l||i[7]!==r?(a=(0,m.jsxs)("div",{className:t,children:[r,l]}),i[6]=l,i[7]=r,i[8]=a):a=i[8],a}try{dc.displayName||(dc.displayName="SpaceDetailsPage")}catch{}try{dd.displayName||(dd.displayName="ConversationItem")}catch{}try{dh.displayName||(dh.displayName="NoConversationsPlaceholder")}catch{}try{dp.displayName||(dp.displayName="InfoSection")}catch{}try{df.displayName||(df.displayName="MetadataSection")}catch{}try{dg.displayName||(dg.displayName="InstructionsSection")}catch{}try{dy.displayName||(dy.displayName="AttachmentsSection")}catch{}try{dx.displayName||(dx.displayName="StarredSection")}catch{}try{d_.displayName||(d_.displayName="SideSection")}catch{}var db=n(6869),dS=n(58569);function dC(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}let dj=e=>{let t,n,r,a,i,s,o=(0,h.c)(15),l=(0,g.b)(),c=(0,c7.jE)();o[0]!==e||o[1]!==c?(t=async()=>(e&&await c.invalidateQueries({queryKey:(0,c6.dp)(e)}),c.invalidateQueries({queryKey:c6.O6})),o[0]=e,o[1]=c,o[2]=t):t=o[2],o[3]!==e||o[4]!==l?(n=async t=>{let n=e?(0,nv.fn)(e):"/custom_copilots",r=e?"PUT":"POST",a={custom_copilot:{owner_id:t.ownerId,owner_type:t.ownerType,name:t.name,icon_type:t.iconType,icon_color:t.iconColor,description:t.description,general_instructions:t.generalInstructions,resources_attributes:t.resources?.map(dw),visibility:t.visibility,base_role:t.baseRole}},i=await (0,F.lS)(n,{method:r,body:a}),s=await i.json();if(!i.ok)throw s.errorMessages;return l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},o[3]=e,o[4]=l,o[5]=n):n=o[5],o[6]!==t||o[7]!==n?(r={onSuccess:t,mutationFn:n},o[6]=t,o[7]=n,o[8]=r):r=o[8];let d=(0,rn.n)(r);return o[9]!==d?({mutateAsync:i,...a}=d,o[9]=d,o[10]=a,o[11]=i):(a=o[10],i=o[11]),o[12]!==a||o[13]!==i?(s={upsertCopilotSpace:i,...a},o[12]=a,o[13]=i,o[14]=s):s=o[14],s};function dw(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:dC(e)}}let dN=(e,t)=>{let n,r,a,i,s,o,l,c,d,u,m,p,f,g,y,x,v,_=(0,h.c)(44),b=(0,c7.jE)(),S=(0,nv.Cb)({id:t,owner:e}),C=`${S}/permissions`;_[0]!==C?(n={queryKey:["copilotSpaceCollaborators",C],queryFn:async()=>{let e=await (0,F.lS)(C),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},_[0]=C,_[1]=n):n=_[1];let{data:j,isLoading:w}=(0,rr.I)(n);_[2]!==C?(r=async e=>{let t=await (0,F.lS)(C,{method:"POST",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},_[2]=C,_[3]=r):r=_[3],_[4]!==C||_[5]!==b?(a=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),_[4]=C,_[5]=b,_[6]=a):a=_[6],_[7]!==r||_[8]!==a?(i={mutationFn:r,onSuccess:a},_[7]=r,_[8]=a,_[9]=i):i=_[9];let N=(0,rn.n)(i);_[10]!==N?({mutateAsync:s,...o}=N,_[10]=N,_[11]=s,_[12]=o):(s=_[11],o=_[12]),_[13]!==C?(l=async e=>{let t=await (0,F.lS)(C,{method:"PUT",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},_[13]=C,_[14]=l):l=_[14],_[15]!==C||_[16]!==b?(c=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),_[15]=C,_[16]=b,_[17]=c):c=_[17],_[18]!==l||_[19]!==c?(d={mutationFn:l,onSuccess:c},_[18]=l,_[19]=c,_[20]=d):d=_[20];let I=(0,rn.n)(d);_[21]!==I?({mutateAsync:u,...m}=I,_[21]=I,_[22]=u,_[23]=m):(u=_[22],m=_[23]),_[24]!==C?(p=async e=>{let t=await (0,F.lS)(C,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},_[24]=C,_[25]=p):p=_[25],_[26]!==C||_[27]!==b?(f=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),_[26]=C,_[27]=b,_[28]=f):f=_[28],_[29]!==f||_[30]!==p?(g={mutationFn:p,onSuccess:f},_[29]=f,_[30]=p,_[31]=g):g=_[31];let E=(0,rn.n)(g);return _[32]!==E?({mutateAsync:y,...x}=E,_[32]=E,_[33]=y,_[34]=x):(y=_[33],x=_[34]),_[35]!==s||_[36]!==o||_[37]!==j||_[38]!==w||_[39]!==y||_[40]!==x||_[41]!==u||_[42]!==m?(v={collaborators:j,isLoading:w,addCollaborator:s,updateCollaborator:u,removeCollaborator:y,isAddPending:o.isPending,isUpdatePending:m.isPending,isRemovePending:x.isPending,...o,...m,...x},_[35]=s,_[36]=o,_[37]=j,_[38]=w,_[39]=y,_[40]=x,_[41]=u,_[42]=m,_[43]=v):v=_[43],v},dI=e=>{let t,n,r,a,i,s,o=(0,h.c)(16),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.query||o[3]!==l.spaceId||o[4]!==l.spaceOwner?(n=async()=>{let e=(0,nv.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,n=await (0,F.lS)(t);if(!n.ok)throw Error("Failed to fetch suggested collaborators");return(await n.json()).suggestions.map(dE)},o[2]=l.query,o[3]=l.spaceId,o[4]=l.spaceOwner,o[5]=n):n=o[5];let c=!!l.query;o[6]!==t||o[7]!==n||o[8]!==c?(r={queryKey:t,queryFn:n,enabled:c},o[6]=t,o[7]=n,o[8]=c,o[9]=r):r=o[9];let d=(0,rr.I)(r);return o[10]!==d?({data:a,...i}=d,o[10]=d,o[11]=a,o[12]=i):(a=o[11],i=o[12]),o[13]!==a||o[14]!==i?(s={data:a,...i},o[13]=a,o[14]=i,o[15]=s):s=o[15],s};function dE(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let dR={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--4WK0E",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--vfcJr"};function dT(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x=(0,h.c)(38),{copilotSpace:v,onError:b}=e,[S,C]=(0,_.useState)(""),[j,w]=(0,_.useState)(!1),N=(0,_.useRef)(null);x[0]!==S?(t=S.startsWith("@")?S.trim().slice(1):S.trim(),x[0]=S,x[1]=t):t=x[1];let I=(0,_.useDeferredValue)(t);x[2]!==v.id||x[3]!==v.owner||x[4]!==I?(n={input:{query:I,spaceOwner:v.owner,spaceId:v.id}},x[2]=v.id,x[3]=v.owner,x[4]=I,x[5]=n):n=x[5];let{data:E,isLoading:R}=dI(n),{collaborators:T,addCollaborator:k,error:A,isLoading:D}=dN(v.owner,v.id);x[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{let e=function(e){N.current&&!N.current.contains(e.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},a=[],x[6]=r,x[7]=a):(r=x[6],a=x[7]),(0,_.useEffect)(r,a),x[8]!==S||x[9]!==E||x[10]!==R?(i=()=>{w(!!(S&&!R&&E&&E.length>0))},s=[S,E,R],x[8]=S,x[9]=E,x[10]=R,x[11]=i,x[12]=s):(i=x[11],s=x[12]),(0,_.useEffect)(i,s),x[13]!==k||x[14]!==T||x[15]!==b?(o=async function(e){if(T?.some(t=>t.actor_id===e.id&&t.actor_type===e.actor_type)){C(""),w(!1);return}try{await k({actor_id:e.id,role_name:"custom_copilot_reader",actor_type:e.actor_type}),C(""),w(!1)}catch{b({base:"An error occurred while adding a collaborator."})}},x[13]=k,x[14]=T,x[15]=b,x[16]=o):o=x[16];let P=o;return x[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),x[17]=l):l=x[17],x[18]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},x[18]=c):c=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(d=e=>C(e.target.value),x[19]=d):d=x[19],x[20]!==S?(u=(0,m.jsx)(oy.A,{block:!0,placeholder:"Username or full name",value:S,onChange:d,className:"color-fg-muted","aria-label":"Search for users or teams to share this space with"}),x[20]=S,x[21]=u):u=x[21],x[22]!==P||x[23]!==j||x[24]!==E?(p=j&&E&&(0,m.jsx)("div",{ref:N,children:(0,m.jsx)(dL,{items:E,onSelect:P})}),x[22]=P,x[23]=j,x[24]=E,x[25]=p):p=x[25],x[26]!==u||x[27]!==p?(f=(0,m.jsxs)(nZ.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:dR.copyLinkSection,style:c,children:[u,p]})]}),x[26]=u,x[27]=p,x[28]=f):f=x[28],x[29]!==T||x[30]!==A||x[31]!==D||x[32]!==v||x[33]!==b?(g=D?(0,m.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,m.jsx)(rk.A,{})}):A?(0,m.jsx)(nh.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):T&&T.length>0?(0,m.jsx)(nZ.B,{direction:"vertical",gap:"condensed",align:"start",children:T.map(e=>(0,m.jsx)(dk,{actor:e,copilotSpace:v,onError:b},`${e.actor_type}-${e.actor_id}`))}):(0,m.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"}),x[29]=T,x[30]=A,x[31]=D,x[32]=v,x[33]=b,x[34]=g):g=x[34],x[35]!==f||x[36]!==g?(y=(0,m.jsxs)(m.Fragment,{children:[f,g]}),x[35]=f,x[36]=g,x[37]=y):y=x[37],y}function dk(e){let t,n,r,a,i,s,o,l,c,d=(0,h.c)(25),{actor:u,copilotSpace:p,onError:f}=e,g="user"===u.actor_type?u.display_login:u.slug;return d[0]!==u.avatar_url?(t=(0,m.jsx)(aa.r,{src:u.avatar_url,className:"mr-2",square:!0,size:32}),d[0]=u.avatar_url,d[1]=t):t=d[1],d[2]!==g?(n=(0,m.jsx)("b",{children:g}),d[2]=g,d[3]=n):n=d[3],d[4]!==g||d[5]!==n?(r=(0,m.jsx)("span",{className:"ml-1",children:(0,m.jsx)(dS.A,{maxWidth:"230px",title:g,inline:!0,children:n})}),d[4]=g,d[5]=n,d[6]=r):r=d[6],d[7]!==u.name?(a=(0,m.jsx)("p",{children:u.name}),d[7]=u.name,d[8]=a):a=d[8],d[9]!==u.name||d[10]!==a?(i=(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,m.jsx)(dS.A,{maxWidth:"230px",title:u.name,inline:!0,children:a})}),d[9]=u.name,d[10]=a,d[11]=i):i=d[11],d[12]!==r||d[13]!==i?(s=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[r,i]}),d[12]=r,d[13]=i,d[14]=s):s=d[14],d[15]!==t||d[16]!==s?(o=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,s]}),d[15]=t,d[16]=s,d[17]=o):o=d[17],d[18]!==u||d[19]!==p||d[20]!==f?(l=(0,m.jsx)(dP,{actor:u,onError:f,copilotSpace:p}),d[18]=u,d[19]=p,d[20]=f,d[21]=l):l=d[21],d[22]!==o||d[23]!==l?(c=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),d[22]=o,d[23]=l,d[24]=c):c=d[24],c}let dA=[{text:"Viewer",value:"custom_copilot_reader"},{text:"Editor",value:"custom_copilot_writer"},{text:"Admin",value:"custom_copilot_admin"}],dD={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function dP({actor:e,onError:t,copilotSpace:n}){let[r,a]=(0,_.useState)(!1),i=(0,_.useRef)(null),s=dA.find(t=>t.value===e.role),{updateCollaborator:o,removeCollaborator:l,isUpdatePending:c,isRemovePending:d}=dN(n.owner,n.id);async function u(n){try{await o({actor_id:e.actor_id,role_name:n,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{a(!1)}}async function h(){try{await l({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{a(!1)}}return(0,m.jsxs)(tI.W,{onOpenChange:a,anchorRef:i,open:r,children:[(0,m.jsx)(tI.W.Button,{loading:c||d,variant:"invisible",className:"text-small",ref:i,onClick:()=>a(!0),"aria-label":`Change role for ${e.name}`,children:(0,m.jsx)(dS.A,{title:s?.text||"",inline:!0,className:"mr-1",children:s?.text})}),(0,m.jsx)(tI.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsxs)(tR.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[dA.map(e=>(0,m.jsxs)(tR.l.Item,{selected:e.value===s?.value,onSelect:()=>u(e.value),children:[(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("p",{children:dD[e.value]})})]},e.value)),(0,m.jsx)(tR.l.Divider,{}),(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:()=>h(),children:[(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("b",{children:"Remove"})}),(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("p",{children:"Loses access to this content"})})]},"remove")]})})]})}function dL(e){let t,n,r=(0,h.c)(7),{items:a,onSelect:i}=e;if(r[0]!==a||r[1]!==i){let e;r[3]!==i?(e=e=>{let t=`${e.actor_type}-${e.id}`,n="user"===e.actor_type?e.login:e.slug;return(0,m.jsxs)(tR.l.Item,{onSelect:()=>i(e),role:"option",children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(aa.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,m.jsx)("span",{className:"text-bold",children:n}),e.name&&(0,m.jsx)(tR.l.Description,{children:e.name})]},t)},r[3]=i,r[4]=e):e=r[4],t=a.map(e),r[0]=a,r[1]=i,r[2]=t}else t=r[2];return r[5]!==t?(n=(0,m.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:dR.spacesSuggestionsList,children:(0,m.jsx)(tR.l,{children:t})}),r[5]=t,r[6]=n):n=r[6],n}try{dT.displayName||(dT.displayName="SpaceCollaborators")}catch{}try{dk.displayName||(dk.displayName="SpaceCollaboratorRow")}catch{}try{dP.displayName||(dP.displayName="ActorRoleSelect")}catch{}try{dL.displayName||(dL.displayName="SpacesSuggestionsList")}catch{}let dM={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--Xhqt8",dialogFooterText:"SpaceSharingDialog-module__dialogFooterText--yMmLR",errorBanner:"SpaceSharingDialog-module__errorBanner--iRqou"};function dO(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(23),{closeDialog:g,customCopilotId:y}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={},f[0]=t):t=f[0];let[x,v]=(0,_.useState)(t),[b,S]=(0,_.useState)(!1),C=(0,_.useRef)(null),j=()=>(0,m.jsx)(dV,{copySharedLink:w,copied:b,isSpaceLoading:E,copilotSpace:R});f[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{C.current&&(clearTimeout(C.current),C.current=null)},r=[],f[1]=n,f[2]=r):(n=f[1],r=f[2]),(0,_.useEffect)(n,r),a=`${eu.fV.origin}${(0,nv.Cb)(e.customCopilotId)}`;let w=()=>{(0,o_.D)(a),S(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{S(!1),C.current=null},2e3)},{isPending:N,data:I}=(0,n_.Ao)(y),E=N,R=I;return f[3]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},f[3]=i):i=f[3],f[4]!==x.base||f[5]!==x.visibility?(s=x.base||x.visibility?(0,m.jsx)(nh.l,{hideTitle:!0,title:"Unable to update space",description:x.visibility||x.base,"aria-label":"Critical",variant:"critical",className:dM.errorBanner}):null,f[4]=x.base,f[5]=x.visibility,f[6]=s):s=f[6],f[7]!==R?(o=R&&(0,m.jsx)(dT,{copilotSpace:R,onError:v}),f[7]=R,f[8]=o):o=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(tR.l.Divider,{}),f[9]=l):l=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),f[10]=c):c=f[10],f[11]!==R||f[12]!==E||f[13]!==e?(d=(0,m.jsxs)(nZ.B,{direction:"vertical",gap:"condensed",align:"start",children:[c,(0,m.jsx)(dF,{onError:v,copilotSpace:R,isSpaceLoading:E,...e})]}),f[11]=R,f[12]=E,f[13]=e,f[14]=d):d=f[14],f[15]!==d||f[16]!==o?(u=(0,m.jsxs)(nZ.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[o,l,d]}),f[15]=d,f[16]=o,f[17]=u):u=f[17],f[18]!==g||f[19]!==j||f[20]!==u||f[21]!==s?(p=(0,m.jsxs)(n7.l,{position:i,title:"Share this space",renderFooter:j,onClose:g,className:dM.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[s,u]}),f[18]=g,f[19]=j,f[20]=u,f[21]=s,f[22]=p):p=f[22],p}function dF(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:x}=e,{data:v,isLoading:b,error:S}=(0,n_.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==x||f[4]!==v?(t=()=>{y||b||g&&v||x({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,v,x],f[0]=g,f[1]=y,f[2]=b,f[3]=x,f[4]=v,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,_.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,j=v?.memberCount;return f[9]!==g.ownerAvatar?(r=(0,m.jsx)(aa.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=r):r=f[10],f[11]!==g.ownerDisplayName?(a=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=a):a=f[12],f[13]!==g.ownerDisplayName||f[14]!==a?(i=(0,m.jsx)(dS.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:a}),f[13]=g.ownerDisplayName,f[14]=a,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==S||f[20]!==b||f[21]!==j||f[22]!==C?(l=C&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==j&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(b||S||null===j)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=S,f[20]=b,f[21]=j,f[22]=C,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==r||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[r,c]}),f[27]=r,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==x?(u=(0,m.jsx)(d$,{onError:x,copilotSpace:g}),f[30]=g,f[31]=x,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(p=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=p):p=f[35],p}let dB=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],dU={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function d$({copilotSpace:e,onError:t}){let[n,r]=(0,_.useState)(!1),a=(0,_.useRef)(null),i=dB.find(t=>t.value===e.baseRole),{upsertCopilotSpace:s,isPending:o}=dj(e);async function l(e){if(!o)try{await s({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{r(!1)}}return e.adminable?(0,m.jsxs)(tI.W,{onOpenChange:r,anchorRef:a,open:n,children:[(0,m.jsx)(tI.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:a,onClick:()=>r(!0),children:(0,m.jsx)(dS.A,{title:i?.text||"",inline:!0,className:"mr-1",children:i?.text})}),(0,m.jsx)(tI.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsx)(tR.l,{selectionVariant:"single",children:dB.map(e=>(0,m.jsxs)(tR.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:[(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small",children:(0,m.jsx)("p",{children:dU[e.value]})})]},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function dV(e){let t,n,r,a,i=(0,h.c)(8),{copySharedLink:s,copied:o,isSpaceLoading:l,copilotSpace:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,m.jsx)(O.InfoIcon,{size:16,className:"mr-2"}),(0,m.jsx)("span",{className:dM.dialogFooterText,children:"Viewers need access to all content."})]}),r={minWidth:"90px"},i[1]=n,i[2]=r):(n=i[1],r=i[2]),i[3]!==o||i[4]!==c||i[5]!==s||i[6]!==l?(a=(0,m.jsxs)(n7.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[n,(0,m.jsx)("div",{style:r,className:"d-flex flex-items-center gap-2",children:o?(0,m.jsx)(eM.Q,{className:"color-fg-success",disabled:l||!c,children:"Link copied"}):(0,m.jsx)(eM.Q,{onClick:s,leadingVisual:O.LinkIcon,disabled:l||!c,children:"Copy link"})})]}),i[3]=o,i[4]=c,i[5]=s,i[6]=l,i[7]=a):a=i[7],a}try{dO.displayName||(dO.displayName="SpaceSharingDialog")}catch{}try{dF.displayName||(dF.displayName="VisibilitySettings")}catch{}try{d$.displayName||(d$.displayName="BaseRoleSelect")}catch{}try{dV.displayName||(dV.displayName="CopilotSpaceSharingDialogFooter")}catch{}let dq={spaceVisibilityDialog:"SpaceVisibilityDialog-module__spaceVisibilityDialog--tz_qs",copyLinkSection:"SpaceVisibilityDialog-module__copyLinkSection--f0xw8",copyLinkButtonContainer:"SpaceVisibilityDialog-module__copyLinkButtonContainer--jlB56",copyLinkButton:"SpaceVisibilityDialog-module__copyLinkButton--StwOK",copiedLinkButton:"SpaceVisibilityDialog-module__copiedLinkButton--nn5vt",dialogFooterText:"SpaceVisibilityDialog-module__dialogFooterText--Nnpv_",errorBanner:"SpaceVisibilityDialog-module__errorBanner--QhyJE"};function dW(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b,S,C=(0,h.c)(43),{closeDialog:j,customCopilotId:w}=e;C[0]===Symbol.for("react.memo_cache_sentinel")?(t={},C[0]=t):t=C[0];let[N,I]=(0,_.useState)(t),[E,R]=(0,_.useState)(!1),T=(0,_.useRef)(null);C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{T.current&&(clearTimeout(T.current),T.current=null)},r=[],C[1]=n,C[2]=r):(n=C[1],r=C[2]),(0,_.useEffect)(n,r),a=`${eu.fV.origin}${(0,nv.Cb)(e.customCopilotId)}`,C[3]!==a?(i=()=>{(0,o_.D)(a),R(!0),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{R(!1),T.current=null},2e3)},C[3]=a,C[4]=i):i=C[4];let k=i,{data:A,isLoading:D}=(0,n_.jS)(!0);C[5]!==w||C[6]!==A?(s=A?.find(e=>(0,nv.UG)(e,w)),C[5]=w,C[6]=A,C[7]=s):s=C[7];let P=s;C[8]!==N.base||C[9]!==N.visibility?(o=N.base||N.visibility?(0,m.jsx)(nh.l,{hideTitle:!0,title:"Unable to update space visibility",description:N.visibility||N.base,"aria-label":"Critical",variant:"critical",className:dq.errorBanner}):null,C[8]=N.base,C[9]=N.visibility,C[10]=o):o=C[10],C[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"Link"}),C[11]=l):l=C[11],C[12]!==a?(c=(0,m.jsx)(oy.A,{block:!0,value:a,readOnly:!0,className:"color-fg-muted"}),C[12]=a,C[13]=c):c=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(d={position:"relative"},C[14]=d):d=C[14];let L=E?"hidden":"visible";C[15]!==L?(u={visibility:L},C[15]=L,C[16]=u):u=C[16];let M=E?-1:1,F=E?"true":"false",B=D||!P||P?.visibility==="private";return C[17]!==k||C[18]!==u||C[19]!==M||C[20]!==F||C[21]!==B?(p=(0,m.jsx)(eM.Q,{className:dq.copyLinkButton,leadingVisual:O.LinkIcon,variant:"default",onClick:k,style:u,tabIndex:M,"aria-hidden":F,disabled:B,children:"Copy link"}),C[17]=k,C[18]=u,C[19]=M,C[20]=F,C[21]=B,C[22]=p):p=C[22],C[23]!==E?(f=E&&(0,m.jsx)(eM.Q,{variant:"default",className:dq.copiedLinkButton,tabIndex:-1,"aria-hidden":"false",children:"Link copied"}),C[23]=E,C[24]=f):f=C[24],C[25]!==p||C[26]!==f?(g=(0,m.jsxs)("div",{style:d,className:dq.copyLinkButtonContainer,children:[p,f]}),C[25]=p,C[26]=f,C[27]=g):g=C[27],C[28]!==g||C[29]!==c?(y=(0,m.jsxs)(nZ.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:dq.copyLinkSection,children:[c,g]})]}),C[28]=g,C[29]=c,C[30]=y):y=C[30],C[31]===Symbol.for("react.memo_cache_sentinel")?(x=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mt-2",children:"Base role"}),C[31]=x):x=C[31],C[32]!==P||C[33]!==D||C[34]!==e?(v=(0,m.jsxs)(nZ.B,{direction:"vertical",gap:"condensed",align:"start",children:[x,(0,m.jsx)(dz,{onError:I,copilotSpace:P,isSpaceLoading:D,...e})]}),C[32]=P,C[33]=D,C[34]=e,C[35]=v):v=C[35],C[36]!==y||C[37]!==v?(b=(0,m.jsxs)(nZ.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[y,v]}),C[36]=y,C[37]=v,C[38]=b):b=C[38],C[39]!==j||C[40]!==b||C[41]!==o?(S=(0,m.jsxs)(n7.l,{title:"Share this space",renderFooter:dG,onClose:j,className:dq.spaceVisibilityDialog,width:"large",children:[o,b]}),C[39]=j,C[40]=b,C[41]=o,C[42]=S):S=C[42],S}function dG(){return(0,m.jsx)(dK,{})}function dz(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:x}=e,{data:v,isLoading:b,error:S}=(0,n_.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==x||f[4]!==v?(t=()=>{y||b||g&&v||x({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,v,x],f[0]=g,f[1]=y,f[2]=b,f[3]=x,f[4]=v,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,_.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,j=v?.memberCount;return f[9]!==g.ownerAvatar?(r=(0,m.jsx)(aa.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=r):r=f[10],f[11]!==g.ownerDisplayName?(a=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=a):a=f[12],f[13]!==g.ownerDisplayName||f[14]!==a?(i=(0,m.jsx)(dS.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:a}),f[13]=g.ownerDisplayName,f[14]=a,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==S||f[20]!==b||f[21]!==j||f[22]!==C?(l=C&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==j&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(b||S||null===j)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=S,f[20]=b,f[21]=j,f[22]=C,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==r||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[r,c]}),f[27]=r,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==x?(u=(0,m.jsx)(dQ,{onError:x,copilotSpace:g}),f[30]=g,f[31]=x,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(p=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=p):p=f[35],p}let dH=[{text:"No access",value:"private"},{text:"Read",value:"org_public"}];function dQ({copilotSpace:e,onError:t}){let[n,r]=(0,_.useState)(!1),a=(0,_.useRef)(null),i=dH.find(t=>t.value===e.visibility),{upsertCopilotSpace:s,isPending:o}=dj(e);async function l(e){if(!o)try{await s({visibility:e})}catch{t({base:"An error occurred while updating your space's visibility."})}finally{r(!1)}}return e.adminable?(0,m.jsxs)(tI.W,{onOpenChange:r,anchorRef:a,open:n,children:[(0,m.jsx)(tI.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:a,onClick:()=>r(!0),children:(0,m.jsx)(dS.A,{title:i?.text||"",inline:!0,className:"mr-1",children:i?.text})}),(0,m.jsx)(tI.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsx)(tR.l,{selectionVariant:"single",children:dH.map(e=>(0,m.jsx)(tR.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:(0,m.jsx)("span",{className:"text-small",children:e.text})},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function dK(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={backgroundColor:"var(--bgColor-muted)",borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)"},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(n7.l.Footer,{style:e,className:"color-fg-muted flex-justify-center text-small p-2",children:(0,m.jsx)("span",{className:dq.dialogFooterText,children:"This space may include private content. Viewers need content access."})}),n[1]=t):t=n[1],t}try{dW.displayName||(dW.displayName="SpaceVisibilityDialog")}catch{}try{dz.displayName||(dz.displayName="VisibilitySettings")}catch{}try{dQ.displayName||(dQ.displayName="VisibilitySelect")}catch{}try{dK.displayName||(dK.displayName="CopilotSpaceVisibilityDialogFooter")}catch{}function dJ(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y=(0,h.c)(32),{onDelete:x,copilot:v}=e,[b,S]=(0,_.useState)(null),[C,j]=(0,_.useState)(!1),w=(0,_.useRef)(null),N=(0,ed.Zp)(),I=ej.W.spacesPermissionsTabEnabled,E=I?v?.ownerIsOrg&&v?.adminable:v?.ownerIsOrg;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,oh.flushSync)(()=>S(null)),w.current?.focus()},y[0]=t):t=y[0];let R=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),R()},y[1]=n):n=y[1];let T=n;y[2]===Symbol.for("react.memo_cache_sentinel")?(r=async e=>{R(),j(!0),await e(),j(!1)},y[2]=r):r=y[2];let k=r;y[3]!==x?(a=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),k(x)},y[3]=x,y[4]=a):a=y[4];let A=a;y[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),S("share")},y[5]=i):i=y[5];let D=i;return y[6]!==C?(s=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{loading:C,icon:O.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:dX})}),y[6]=C,y[7]=s):s=y[7],y[8]!==v||y[9]!==N?(o=v.editable&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),N((0,nv.GL)(v))},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.PencilIcon,{})}),"Edit"]}),y[8]=v,y[9]=N,y[10]=o):o=y[10],y[11]!==E?(l=E&&(0,m.jsxs)(tR.l.Item,{onSelect:D,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.ShareIcon,{})}),"Share"]}),y[11]=E,y[12]=l):l=y[12],y[13]!==v.adminable?(c=v.adminable&&(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),S("delete")},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),"Delete"]}),y[13]=v.adminable,y[14]=c):c=y[14],y[15]!==o||y[16]!==l||y[17]!==c?(d=(0,m.jsx)(tI.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsxs)(tR.l,{children:[o,l,c]})}),y[15]=o,y[16]=l,y[17]=c,y[18]=d):d=y[18],y[19]!==d||y[20]!==s?(u=(0,m.jsxs)(tI.W,{anchorRef:w,children:[s,d]}),y[19]=d,y[20]=s,y[21]=u):u=y[21],y[22]!==A||y[23]!==b?(p="delete"===b?(0,m.jsx)(dY,{onCancel:R,onConfirm:A}):null,y[22]=A,y[23]=b,y[24]=p):p=y[24],y[25]!==v||y[26]!==b?(f="share"===b?I?(0,m.jsx)(dO,{closeDialog:T,customCopilotId:v}):(0,m.jsx)(dW,{closeDialog:T,customCopilotId:v}):null,y[25]=v,y[26]=b,y[27]=f):f=y[27],y[28]!==u||y[29]!==p||y[30]!==f?(g=(0,m.jsxs)(m.Fragment,{children:[u,p,f]}),y[28]=u,y[29]=p,y[30]=f,y[31]=g):g=y[31],g}function dX(){return(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let dY=e=>{let t,n=(0,h.c)(3),{onConfirm:r,onCancel:a}=e;return n[0]!==a||n[1]!==r?(t=(0,m.jsx)(of.K,{title:"Delete space",onClose:e=>{"confirm"===e?((0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"}),r()):((0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),a())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t};try{dJ.displayName||(dJ.displayName="CopilotSpacesMenu")}catch{}try{dY.displayName||(dY.displayName="DeleteDialog")}catch{}let dZ={starButton:"SpacesHeader-module__starButton--MYloD"};var d0=n(19647);let d1={instructionsContainer:"InstructionsDialog-module__instructionsContainer--Pif1O",grow:"InstructionsDialog-module__grow--NEqmK",footerContainer:"InstructionsDialog-module__footerContainer--meuYH"};function d2({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:r,maxDescriptionLength:a}){let{upsertCopilotSpace:i,isPending:s}=dj(e),[o,l]=(0,_.useState)(e.description??""),[c,d]=(0,_.useState)(null);async function u(){try{let e=await i({description:o});n?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function h(){l(e.description??""),t()}return(0,m.jsx)(n7.l,{title:"Description",onClose:h,returnFocusRef:r,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:"p-3",children:[c&&(0,m.jsx)(nh.l,{variant:"critical",title:c,className:"mb-2"}),(0,m.jsxs)(og.A,{children:[(0,m.jsx)(og.A.Label,{visuallyHidden:!0,children:"Description"}),(0,m.jsx)(d0.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,m.jsx)(d3,{text:o,promptCharLimit:a})]})]}),renderFooter:()=>(0,m.jsxs)("div",{className:d1.footerContainer,children:[(0,m.jsx)(eM.Q,{variant:"default",onClick:h,children:"Cancel"}),(0,m.jsx)(eM.Q,{loading:s,loadingAnnouncement:"Saving description",variant:"primary",onClick:()=>{u()},children:"Save"})]})})}function d3(e){let t,n,r,a,i=(0,h.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(n=o.toLocaleString(),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=r):r=i[6];let c=r;return i[7]!==c||i[8]!==l?(a=l?(0,m.jsx)(og.A.Validation,{variant:"error",children:c}):(0,m.jsx)(og.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=a):a=i[9],a}try{d2.displayName||(d2.displayName="DescriptionDialog")}catch{}try{d3.displayName||(d3.displayName="CharacterCount")}catch{}function d4(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,v,b,S,C,j,w,N,I,E,R,T,k=(0,h.c)(72),{onCreateSpace:A}=e,D=(0,z.Pk)(),P=(0,g.b)(),L=(0,ed.zy)(),M=(0,sS.G)(),{updateGlobalNavigationBreadcrumbs:F}=oG(),B=(0,sT.Z)(),[U,$]=(0,_.useState)(!1),[V,q]=(0,_.useState)(!1),[G,H]=(0,_.useState)(!1),[Q,K]=(0,_.useState)(null),J=(0,_.useRef)(null),X=ej.W.newThreadNavigate?L.pathname:eu.fV.pathname,Y=M&&X!==eC.VR,Z=ej.W.spacesV3UI,ee=ej.W.spacesPermissionsTabEnabled,{mutateAsync:et}=(0,n_.$7)(),{copilotSpacesConfig:en}=(0,W.X)(),{maxDescriptionLength:er}=en;e:{let e;if(!M){t=null;break e}k[0]!==M||k[1]!==D.customCopilots?(e=(0,nv.JB)(D.customCopilots,M),k[0]=M,k[1]=D.customCopilots,k[2]=e):e=k[2],t=e}let ea=t,ei=ee?ea?.ownerIsOrg&&ea?.adminable:ea?.ownerIsOrg,{starCopilotSpace:es,isLoading:eo}=c8(M);k[3]!==F?(n=()=>{F()},r=[F],k[3]=F,k[4]=n,k[5]=r):(n=k[4],r=k[5]),(0,_.useEffect)(n,r),k[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),q(!1)},k[6]=a):a=k[6];let el=a;k[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),$(!1)},k[7]=i):i=k[7];let ec=i;k[8]!==ea||k[9]!==B?(s=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),B((0,nv.GL)(ea))},k[8]=ea,k[9]=B,k[10]=s):s=k[10];let em=s;k[11]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),q(!0)},k[11]=o):o=k[11];let eh=o;k[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),$(!0)},k[12]=l):l=k[12];let ep=l;k[13]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,e1.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DESCRIPTION",mode:"immersive"}),H(!0)},k[13]=c):c=k[13];let ef=c;k[14]!==et||k[15]!==B||k[16]!==M?(d=async()=>{if(M)try{await et(M),B(eC.VR)}catch(e){K(e instanceof Error?e:Error(String(e))),ec()}},k[14]=et,k[15]=B,k[16]=M,k[17]=d):d=k[17];let eg=d;k[18]!==ea||k[19]!==es?(u=()=>{ea&&es&&((0,e1.BI)("dotcom_chat.activate",{target:ea.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),es({starred:!ea.starred}))},k[18]=ea,k[19]=es,k[20]=u):u=k[20];let ey=u,ex=ea?.editable,ev=ea?.adminable;k[21]!==ev?(p=ev&&(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:ep,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),"Delete"]}),k[21]=ev,k[22]=p):p=k[22];let e_=p;k[23]!==ex?(f=ex&&Z&&(0,m.jsxs)(tR.l.Item,{onSelect:ef,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.NoteIcon,{})}),"Edit description"]}),k[23]=ex,k[24]=f):f=k[24];let eb=f;k[25]!==e_||k[26]!==eb||k[27]!==Y||k[28]!==D?(y=Y&&!D.selectedThreadID&&(e_||eb)?ej.W.immersiveAppShell?(0,m.jsxs)(m.Fragment,{children:[eb,e_]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tR.l.Group,{children:[(0,m.jsx)(tR.l.GroupHeading,{children:"Space"}),eb,e_]}),(0,m.jsx)(tR.l.Divider,{})]}):null,k[25]=e_,k[26]=eb,k[27]=Y,k[28]=D,k[29]=y):y=k[29];let eS=y;k[30]!==A?(x=Z?null:(0,m.jsx)(eM.Q,{variant:"primary",onClick:A,children:"New space"}),k[30]=A,k[31]=x):x=k[31];let ew=x;k[32]!==ex||k[33]!==em?(v=ex&&!Z&&(0,m.jsx)(eM.Q,{leadingVisual:O.PencilIcon,onClick:em,children:"Edit"}),k[32]=ex,k[33]=em,k[34]=v):v=k[34];let eN=v;k[35]!==ei?(b=ei&&(0,m.jsx)(eM.Q,{onClick:eh,leadingVisual:O.ShareIcon,children:"Share"}),k[35]=ei,k[36]=b):b=k[36];let eI=b;k[37]!==ea||k[38]!==ey||k[39]!==eo||k[40]!==M?(S=ea&&M&&Z&&(0,m.jsx)(tE.K,{ref:J,onClick:ey,disabled:eo,icon:ea.starred?O.StarFillIcon:O.StarIcon,className:ea.starred?dZ.starButton:void 0,"aria-label":ea.starred?"Unstar space":"Star space"}),k[37]=ea,k[38]=ey,k[39]=eo,k[40]=M,k[41]=S):S=k[41];let eE=S,eR=!M&&ew;k[42]!==eN||k[43]!==eE||k[44]!==eI||k[45]!==eR?(C=(0,m.jsxs)(m.Fragment,{children:[eR,eN,eI,eE]}),k[42]=eN,k[43]=eE,k[44]=eI,k[45]=eR,k[46]=C):C=k[46];let eT=C;k[47]!==P?(j=e=>{P.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},k[47]=P,k[48]=j):j=k[48];let ek=j;return k[49]!==eT||k[50]!==eS?(w=ej.W.immersiveAppShell?(0,m.jsx)(o5,{showPreviewPaneButton:!1,conversationSpecificItems:eS,customButtons:eT}):(0,m.jsx)(oQ,{showPreviewPaneButton:!1,conversationSpecificItems:eS,customButtons:eT}),k[49]=eT,k[50]=eS,k[51]=w):w=k[51],k[52]!==Q?(N=Q&&(0,m.jsxs)(db.A,{variant:"danger",children:[(0,m.jsx)(O.AlertIcon,{}),"There was a problem deleting your space."]}),k[52]=Q,k[53]=N):N=k[53],k[54]!==eg||k[55]!==M||k[56]!==U?(I=U&&M?(0,m.jsx)(dY,{onCancel:ec,onConfirm:eg}):null,k[54]=eg,k[55]=M,k[56]=U,k[57]=I):I=k[57],k[58]!==M||k[59]!==V?(E=V&&M?ee?(0,m.jsx)(dO,{closeDialog:el,customCopilotId:M}):(0,m.jsx)(dW,{closeDialog:el,customCopilotId:M}):null,k[58]=M,k[59]=V,k[60]=E):E=k[60],k[61]!==ea||k[62]!==ek||k[63]!==er||k[64]!==G?(R=G&&ea?(0,m.jsx)(d2,{copilotSpace:ea,onClose:()=>H(!1),returnFocusRef:J,maxDescriptionLength:er,onSaved:ek}):null,k[61]=ea,k[62]=ek,k[63]=er,k[64]=G,k[65]=R):R=k[65],k[66]!==w||k[67]!==N||k[68]!==I||k[69]!==E||k[70]!==R?(T=(0,m.jsxs)(m.Fragment,{children:[w,N,I,E,R]}),k[66]=w,k[67]=N,k[68]=I,k[69]=E,k[70]=R,k[71]=T):T=k[71],T}try{d4.displayName||(d4.displayName="SpacesHeader")}catch{}function d5(e){let t,n,r,a=(0,h.c)(7),{customCopilotId:i,selectedThreadID:s,textAreaRef:o}=e,l=(0,z.Pk)(),{messages:c}=l,d=sE((0,_.useRef)(l.currentTopic),c.length);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(d4,{}),a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(nH,{regionName:"This space"}),a[1]=n):n=a[1],a[2]!==i||a[3]!==d||a[4]!==s||a[5]!==o?(r=(0,m.jsxs)(m.Fragment,{children:[t,(0,m.jsx)(nw.t,{fallback:n,children:(0,m.jsx)(dc,{customCopilotId:i,onChatSubmit:d,selectedThreadID:s,textAreaRef:o})})]}),a[2]=i,a[3]=d,a[4]=s,a[5]=o,a[6]=r):r=a[6],r}try{d5.displayName||(d5.displayName="SpacesConversation")}catch{}var d6=n(8601),d7=n(62834),d8=n(98637),d9=n(21113),ue=n(99987),ut=n(11251),un=n(55864),ur=n(65607),ua=n(75177),ui=n(53110);function us(e,t,n){let r=[];for(let a of t)if(a.startsWith(e)){let t=a.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,o=`${e}/${s}`;if(n&&n.some(e=>e.path===o))continue;let l={items:[],data:{contentType:o===a?"file":"directory",name:s,path:o,isClientOnly:!0}};r.push(l)}return r}let uo={checkbox:"FileTreePicker-module__checkbox--sS_UT",itemContainer:"FileTreePicker-module__itemContainer--EmnHR",Box:"FileTreePicker-module__Box--y6v5U",Box_1:"FileTreePicker-module__Box_1--jOkmh",Octicon:"FileTreePicker-module__Octicon--uVmod",Box_2:"FileTreePicker-module__Box_2--CBUAV"};function ul(e,t){let n=new Set(e);switch(t.type){case"SELECT_FILE":n.add(t.path),(0,e1.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,e1.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,e1.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,e1.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function uc({isActive:e,file:t,onItemSelected:n,getItemUrl:r,selectedItemRef:a,navigate:i,onRenderRow:s,getFileTrailingVisual:o,getFileIcon:l,navigateOnClick:c,isSelected:d}){let{sendRepoClickEvent:u}=(0,d8.T)(),h=_.useRef(null),p=(0,ut.Z)({focusRowRef:h,mouseRowRef:h}),f="submodule"===t.data.contentType,g=o?.(t.data);(0,_.useEffect)(()=>{e&&h.current&&requestAnimationFrame(()=>{h.current?.scrollIntoView({block:"center"})})},[e]);let y=_.useCallback(e=>{f?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(r(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),u("FILES_TREE.ITEM",{item_path:t.data.path}),c&&i(r(t.data)),e.stopPropagation())},[t,r,f,i,c,n,u]);return s?.(),(0,m.jsxs)(un.G.Item,{ref:h,onSelect:y,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,m.jsx)(un.G.LeadingVisual,{children:l?l(t.data):f?(0,m.jsx)(O.FileSubmoduleIcon,{}):(0,m.jsx)(O.FileIcon,{})}),(0,m.jsxs)("div",{className:uo.itemContainer,children:[(0,m.jsx)(ur.A,{className:uo.checkbox,checked:d||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,m.jsx)("span",{ref:a,style:{color:f?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,m.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),p&&(0,m.jsx)(ue.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:h,"aria-label":t.data.name,open:!0,direction:"ne"}),!!g?.screenReaderText&&(0,m.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,m.jsx)(un.G.TrailingVisual,{children:g.trailingVisual})]})}let ud=_.memo(uc),uu=_.memo(ur.A);function um({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:r,leadingPath:a,onItemSelected:i,getItemUrl:s,getFetchUrl:o,selectedItemRef:l,navigate:c,onRenderRow:d,getFileTrailingVisual:u,getFileIcon:h,navigateOnClick:p,selectedChildren:f,expandedPath:g}){let[y,x]=(0,_.useState)(r),{sendRepoClickEvent:v}=(0,d8.T)(),b=_.useRef(null),S=_.useRef(null),C=(0,ut.Z)({focusRowRef:S,mouseRowRef:b}),j=_.useMemo(()=>f?.filter(e=>e.startsWith(`${t.data.path}/`)),[f,t.data.path]),w=_.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let n=e.data.totalCount||0,r=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===r?"none":r===n?"all":"partial"})(t,f),[t,f]),[N,I,E,R,T,k,A]=function(e,t,n){let[r,a]=_.useState(e.items),[i,s]=_.useState(e.data.totalCount||0),[o,l]=_.useState(!1),[c,d]=_.useState(!1),{safeSetTimeout:u}=(0,l4.A)();_.useEffect(()=>{a(e.items)},[e.items]),_.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=_.useCallback(()=>{d(!1)},[]),h=_.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),u(()=>{a(n),void 0!==t&&s(t)},1)},[r,u]);return[_.useCallback(async r=>{let i=new Map;if(e.data.isClientOnly){if(r){let n=us(e.data.path,r);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?h(n,n.length):(a(n),s(n.length))}}else{let o=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,F.lS)(`${o}?noancestors=1`);try{if(u.ok){let n=await u.json(),o=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,r){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let a=n.name.slice(0,n.name.lastIndexOf("/")),i=a.indexOf("/")>-1,s={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:a,hasSimplifiedPath:i},o={items:[t],data:s};return(r.set(s.path,o),i)?e(o,{...s},r):o}(t,e,i):t});if(r){let t=e.data.path,a=us(t,r,n.payload.tree.items);for(let e of(o.push(...a),a))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=n.payload.tree.totalCount,o.length>100?h(o,n.payload.tree.totalCount):(a(o),s(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,h]),h,r,o,c,m,i]}(t,()=>{},o),D=a?`${a}/`:"",P=A-E.length;(0,_.useEffect)(()=>{n&&b.current&&requestAnimationFrame(()=>{b.current?.scrollIntoView({block:"center"})})},[n]);let L=_.useCallback(e=>{!e||y||R||T||!(t.items.length>100)||I(),e!==y&&x(e)},[y,R,T,t.items.length,I]),M=_.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&p?(window.open(s(t.data),"_blank"),e.preventDefault()):(i?.(t.data,t),v("FILES_TREE.ITEM",{item_path:t.data.path}),p&&c(s(t.data)),e.stopPropagation())},[t,s,c,p,i,v]);_.useEffect(()=>{r&&!y&&L?.(!0)},[r]),_.useEffect(()=>{0===t.items.length&&y?L?.(!1):!y&&t.autoExpand&&L?.(!0)},[t.items.length]);let O=_.useCallback(e=>{l&&n&&l(e),b.current=e},[l,n]);if(1===t.items.length){let r=t.items[0];if(r&&"directory"===r.data.contentType)return(0,m.jsx)(uf,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:D+t.data.name,inheritsActive:n,onItemSelected:i,selectedItemRef:l,getItemUrl:s,directoryNavigateOnClick:p,navigateOnClick:p,getFileTrailingVisual:u,getFileIcon:h,selectedChildren:j,expandedPath:g})}return d?.(),(0,m.jsxs)(un.G.Item,{ref:S,expanded:y,onExpandedChange:L,current:n,onSelect:M,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,m.jsx)(un.G.LeadingVisual,{children:(0,m.jsx)(un.G.DirectoryIcon,{})}),(0,m.jsxs)("div",{className:uo.itemContainer,children:[(0,m.jsx)(uu,{className:uo.checkbox,checked:"all"===w,indeterminate:"partial"===w,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===w?"true":void 0}),(0,m.jsxs)("span",{ref:O,children:[D&&(0,m.jsx)("span",{children:D}),(0,m.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),C&&(0,m.jsx)(ue.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:S,"aria-label":`${D}${t.data.name}`,open:!0,direction:"ne"}),(0,m.jsx)(un.G.SubTree,{state:R?"loading":T?"error":"done",children:T?(0,m.jsx)(un.G.ErrorDialog,{onRetry:N,onDismiss:k,children:"There was an error loading the folder contents."}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(uf,{clientOnlyFilePaths:e,directoryItems:E,onItemSelected:i,selectedItemRef:l,getItemUrl:s,directoryNavigateOnClick:p,navigateOnClick:p,getFileTrailingVisual:u,getFileIcon:h,selectedChildren:j,expandedPath:g}),P>0&&(0,m.jsx)(uy,{message:`${P} entries not shown`})]})})]})}let uh=_.memo(um,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function up({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:a,selectedItemRef:i,onRenderRow:s,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,directoryNavigateOnClick:d,navigateOnClick:u,selectedChildren:h,expandedPath:p}){let f=(0,d9.Z)(),g=(0,sT.Z)(),y=_.useRef(g),x=_.useRef(a);_.useEffect(()=>{x.current=a,y.current=g},[a,g]);let v=_.useCallback((e,t)=>{x.current?.(e,t)},[]),b=_.useMemo(()=>t.map(t=>{let a=p===t.data.path,y=h?.includes(t.data.path),x=a||p.startsWith(`${t.data.path}/`),_=h?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,m.jsx)(uh,{clientOnlyFilePaths:e,isActive:r||a,isAncestorOfActive:x,onItemSelected:v,leadingPath:n,directory:t,getItemUrl:o,getFetchUrl:f.getItemUrl,selectedItemRef:x?i:void 0,navigate:g,onRenderRow:s,navigateOnClick:d,getFileTrailingVisual:l,getFileIcon:c,itemCount:t.items.length,isSelected:y,selectedChildren:_,expandedPath:p},t.data.name):(0,m.jsx)(ud,{onItemSelected:v,file:t,isActive:a,getItemUrl:o,selectedItemRef:a?i:void 0,navigate:g,navigateOnClick:u,onRenderRow:s,getFileTrailingVisual:l,getFileIcon:c,isSelected:y},t.data.name)}),[t,p,h,e,r,v,n,o,f.getItemUrl,i,g,s,d,l,c,u]);return(0,m.jsx)(m.Fragment,{children:b})}let uf=_.memo(up);function ug(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:r,loading:a,onRenderRow:i,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:l,expandedPath:c,onSelectionChange:d}=e,[u,h]=(0,_.useReducer)(ul,new Set),p=e.selectedItems||u,f=(0,_.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of f(n))t.add(e);return Array.from(t)},[]),g=(0,_.useCallback)((e,t)=>{let n=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};d?d(ul(p,n)):h(n)},[d,p]),y=(0,_.useCallback)((e,t)=>{let n=f(e),r=t?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};d?d(ul(p,r)):h(r)},[f,d,p]),x=(0,_.useCallback)((e,t)=>{if("directory"===e.contentType){let e=f(t).every(e=>p.has(e));y(t,e)}else g(e.path,p.has(e.path))},[f,y,g,p]),v=(0,_.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,m.jsx)(ua.A,{onMouseDown:v,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:uo.Box,children:a?(0,m.jsxs)("div",{className:uo.Box_1,children:[(0,m.jsx)(rk.A,{"aria-label":"Loading file tree"}),(0,m.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,m.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,m.jsxs)(un.G,{"aria-label":"Files",children:[r&&(0,m.jsx)(uy,{message:"Some files could not be loaded."}),(0,m.jsx)(uf,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:x,selectedChildren:p?Array.from(p):[],selectedItemRef:e.selectedItemRef,onRenderRow:i,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:l,expandedPath:c})]})})})}function uy({message:e}){return(0,m.jsxs)(un.G.Item,{id:"error-tree-row",children:[(0,m.jsx)(un.G.LeadingVisual,{children:(0,m.jsx)(ui.A,{icon:O.AlertFillIcon,className:uo.Octicon})}),(0,m.jsx)("div",{className:uo.Box_2,children:e||"Couldn't load."})]})}try{uc.displayName||(uc.displayName="WrappedFileTreeRow")}catch{}try{ud.displayName||(ud.displayName="FileTreeRow")}catch{}try{uu.displayName||(uu.displayName="MemoizedCheckbox")}catch{}try{um.displayName||(um.displayName="WrappedDirectoryTreeRow")}catch{}try{uh.displayName||(uh.displayName="DirectoryTreeRow")}catch{}try{up.displayName||(up.displayName="WrappedDirectoryContents")}catch{}try{uf.displayName||(uf.displayName="DirectoryContents")}catch{}try{ug.displayName||(ug.displayName="FileTreePicker")}catch{}try{uy.displayName||(uy.displayName="ErrorTreeRow")}catch{}var ux=n(76016),uv=n(88795),u_=n(85579),ub=n(141),uS=n(69098),uC=n(89276),uj=n(27406),uw=n(81367),uN=n(96235),uI=n(3971),uE=n(91385),uR=n(70170),uT=n(54763);let uk={TextInput:"FilesSearchBox-module__TextInput--G0iN6",Box:"FilesSearchBox-module__Box--NOLNq"},uA=_.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:r,className:a,onBlur:i,onFocus:s,onKeyDown:o,onPreload:l,onSearch:c,query:d,searchPlaceholder:u,loading:h,sx:p},f)=>{let{sendRepoClickEvent:g}=(0,d8.T)(),[y,x]=_.useState(d),b=_.useRef((0,uR.s)(e=>c(e),250));_.useEffect(()=>{x(d)},[d]);let S=d?(0,m.jsx)(oy.A.Action,{onClick:()=>{g("FILE_TREE.CANCEL_SEARCH"),c("")},icon:O.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,m.jsx)(oy.A,{autoFocus:uD(),className:(0,v.$)(a,uk.TextInput),ref:f,value:y,onKeyDown:o,onChange:e=>{x(e.target.value),l(),b.current(e.target.value)},sx:p,"aria-label":u||"Go to file","aria-activedescendant":e,role:r?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":r?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:u||"Go to file",loading:""!==d&&h,leadingVisual:O.SearchIcon,trailingAction:S,trailingVisual:S?void 0:()=>(0,m.jsx)(uT.E,{children:(0,m.jsx)("div",{className:uk.Box,children:(0,m.jsx)("kbd",{children:"t"})})}),onFocus:e=>{l(),e.target.select(),s?.(e)},onBlur:i,onClick:()=>g("FILE_TREE.SEARCH_BOX")})});function uD(){return"1"===new URLSearchParams(eu.fV.search).get("search")}uA.displayName="FilesSearchBox";let uP={Box:"FileResultsList-module__Box--W1Jqy",ActionList:"FileResultsList-module__ActionList--jyBtr",FilesSearchBox:"FileResultsList-module__FilesSearchBox--mUJl5",HighlightMatch:"FileResultsList-module__HighlightMatch--RNVsR",Octicon:"FileResultsList-module__Octicon--jn8tc"},uL={excludeDirectories:!1,excludeSeeAllResults:!1};function uM({actionListSx:e,additionalResults:t,className:n,commitOid:r,config:a=uL,findFileWorkerPath:i,getItemUrl:s,onRenderRow:o,onItemSelected:l,searchBoxRef:c,sx:d}){let{excludeDirectories:u,excludeSeeAllResults:h}=a,{query:p,setQuery:f}=(0,u_.JS)(),g=(0,uv.t)(),y=_.useRef(null),x=c??y,[v,b]=_.useState(p.length>0),[S,C]=_.useState(!!p),{list:j,directories:w,loading:N,error:I}=(0,d7.o)(r,v,!!u),{path:E}=(0,ub.eu)(),{getUrl:R}=(0,d9.Z)(),{queryText:T,queryLine:k}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(p),{matches:A,clearMatches:D}=function(e,t,n,r){let[a,i]=_.useState(),s=_.useRef(""),o=_.useRef(),{sendStats:l}=(0,d8.T)(),c=_.useRef(!1),d=_.useCallback(()=>{let e=new uC.z(n,uj.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[l,n]);return _.useEffect(()=>{if(r)return d(),function(){o.current?.terminate()}},[d,r]),_.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let n=s.current&&t.startsWith(s.current);c.current=!0,o.current?.postMessage({baseList:n&&a||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:a,clearMatches:()=>i(void 0)}}((0,_.useMemo)(()=>[...j,...t??[]].sort(),[t,j]),T,i,v),{sendRepoClickEvent:P}=(0,d8.T)(),L=(0,sT.Z)(),[M,O]=_.useState(0),[F,B]=_.useState(()=>uD()),U=_.useRef(null),$=_.useRef(null),V="file-results-list",{sendRepoKeyDownEvent:q}=(0,d8.T)(),{screenSize:W}=(0,nn.lm)(),G=a.enableOverlay??W>=nn.Gy.large,z=_.useCallback(e=>{P("FILE_TREE.SEARCH_RESULT_CLICK"),l?.(e),C(!1)},[P,l]),H=(e,t,n)=>s?s(e,t,n):R({path:e,action:t?"tree":"blob",hash:n}),{containerRef:Q}=(0,nE.G)({bindKeys:nI.z0.ArrowVertical|nI.z0.HomeAndEnd,focusInStrategy:"previous"},[N,I]);_.useEffect(()=>{p||C(!1)},[p]),_.useEffect(()=>{document.activeElement!==x.current&&G&&C(!1)},[E,x,G]);let K=A?.slice(0,20)||[],J=A&&A.length>K.length,X=!a.disableNavigation,Y=$.current?.getBoundingClientRect().width,Z=(0,m.jsx)(ua.A,{sx:{maxHeight:G?"180px":"100% !important",width:G?Y:"100%"},className:uP.Box,children:I?(0,m.jsx)(db.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,m.jsxs)(tR.l,{ref:Q,sx:{p:G?2:3,pr:3*!!G,pt:G?3:"2px !important",...e},role:"listbox",className:uP.ActionList,children:[!N&&K.map((e,t)=>{let n=w.includes(e),r=H(e,n,k?`L${k}`:"");return(0,m.jsx)(uU,{active:!1,index:t,focused:F&&M===t,match:e,onRender:o,query:T,onClick:z,isDirectory:n,to:r,useOverlay:G,listRef:Q,noAnchor:a.disableNavigation},e)}),0===K.length&&(0,m.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ua.A,{className:n,ref:$,sx:d,children:(0,m.jsx)(uA,{ariaActiveDescendant:(!G&&p||G&&S)&&F&&M>-1?J&&M===K.length?"see-all-results-link":`file-result-${M}`:void 0,ariaExpanded:G?S:void 0,ariaHasPopup:G,ariaControls:G?V:void 0,ref:x,loading:N,query:p,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:r,altKey:a,ctrlKey:i}=e;if(!n&&!r&&!a){if("Escape"===t)p?(q("FILE_TREE.CANCEL_SEARCH"),f(""),D()):document.activeElement&&document.activeElement.blur();else if(!p)return;else if("Enter"===t){if(!h&&J&&M===K.length)X&&L((0,uN.Y8Y)({owner:g.ownerLogin,repo:g.name,searchTerm:`path:${T}`})),l?.();else if(K[M]){let e=K[M];X&&L(H(K[M],!1,k?`L${k}`:"")),C(!1),l?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!h&&J&&M>=K.length-1){if(O(K.length),U.current&&Q.current){let e=(0,uw.U)(Q.current);(0,nI.Rt)(U.current,e,{behavior:"instant"})}}else O(Math.min(M+1,K.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){O(Math.max(M-1,0)),e.preventDefault();return}}},onPreload:()=>b(!0),onSearch:e=>{f(e),e?C(!0):(D(),C(!1)),O(0)},onBlur:e=>{Q.current?.contains(e.relatedTarget)||(C(!1),B(!1))},onFocus:()=>{p&&C(!0),B(!0)},searchPlaceholder:a.searchPlaceholder,className:uP.FilesSearchBox})}),G&&K.length>0&&(0,m.jsx)(uI.T,{anchorRef:$,open:G&&S,renderAnchor:null,onClose:()=>{C(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:V,role:"dialog"},children:Z}),!G&&p&&Z]})}let uO=({active:e,focused:t,index:n,match:r,query:a,to:i,isDirectory:s,onClick:o,onRender:l,useOverlay:c,listRef:d,noAnchor:u})=>{let h=(0,uE.Xq)(a,r);l?.();let p=_.useRef(null);_.useEffect(()=>{if(t&&p.current&&d?.current){let e=(0,uw.U)(d.current);(0,nI.Rt)(p.current,e,{behavior:"instant"})}},[t,d]);let f={};t&&(f={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let g={id:`file-result-${n}`,active:e,onSelect:(0,_.useCallback)(()=>{o?.(r)},[r,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...f},role:"option","data-focus-visible-added":t||void 0,tabIndex:c?-1:0},y=(0,m.jsx)("div",{className:"d-flex",children:(0,m.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,m.jsx)(u$,{text:r,positionsList:h,LeadingIcon:s?uF:uB,className:uP.HighlightMatch})})});return u?(0,m.jsx)(tR.l.Item,{...g,children:y},r):(0,m.jsx)(tR.l.LinkItem,{...g,ref:p,as:eo.N,to:i,children:y},r)},uF=()=>(0,m.jsx)(ui.A,{"aria-label":"Directory",icon:O.FileDirectoryFillIcon,size:"small",className:uP.Octicon}),uB=()=>(0,m.jsx)(ui.A,{"aria-label":"File",icon:O.FileIcon,className:"fgColor-muted mr-2",size:"small"}),uU=_.memo(uO);function u$({className:e,text:t,positionsList:n,sx:r,LeadingIcon:a}){let i=[],s=0;for(let e of n){if(Number(e)!==e||e<s||e>t.length)continue;let n=t.slice(s,e);n&&i.push(uV(n)),s=e+1,i.push((0,m.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return i.push(uV(t.slice(s))),(0,m.jsx)(ua.A,{className:e,sx:r,children:(0,m.jsxs)(m.Fragment,{children:[a&&(0,m.jsx)(a,{}),i]})})}function uV(e){return e.replaceAll("/","/\u200B")}try{uM.displayName||(uM.displayName="FileResultsList")}catch{}try{uO.displayName||(uO.displayName="FileResultRow")}catch{}try{uF.displayName||(uF.displayName="DirectoryIcon")}catch{}try{uB.displayName||(uB.displayName="FileResultIcon")}catch{}try{uU.displayName||(uU.displayName="MemoizedFileResultRow")}catch{}try{u$.displayName||(u$.displayName="HighlightMatch")}catch{}let uq={dialogHeader:"MultiFilePicker-module__dialogHeader--z4rKg",Box:"MultiFilePicker-module__Box--bwEHF",Dialog:"MultiFilePicker-module__Dialog--tzxbE"};function uW({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:r,processingTime:a,expandedPath:i}){let[s,o]=(0,_.useState)(()=>new Set),[l,c]=(0,_.useState)(()=>new Set),{list:d,directories:u,loading:h}=(0,d7.o)(e.commitOID,!0),[p,f]=(0,_.useState)([]);(0,_.useEffect)(()=>{f(function e(t,n){let r=t[n];return r?r.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,r={},a=new Set(n);for(let e of(r[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n),r[e]||(r[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!a.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};r[t]||(r[t]={items:[],totalCount:0}),r[t].items.push(n)}for(let e in r){let t=r[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=r[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in r){let t=r[e];t&&(t.totalCount=i(e))}return r}({paths:d,directories:u}),"")),c(new Set(u))},[d,u,f,e.commitOID]),(0,_.useEffect)(()=>{let n=Array.from(s).filter(e=>!l.has(e));r?.(n.length),t(n.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[s,l,e,t,r]);let g=(0,_.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:uq.Box,children:(0,m.jsx)(ug,{rootItems:p,expandedPath:i,selectedItemRef:()=>{},setRootItems:f,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:s,onSelectionChange:o,processingTime:a,loading:h||!1,fetchError:!!n,getItemUrl:g,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})}function uG({onClose:e}){return(0,m.jsx)(tE.K,{icon:O.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function uz({formData:e,onCancel:t,onSaveFiles:n,onSaveRepository:r,findFileWorkerPath:a,attachmentButtonRef:i,owner:s,resourceCounts:o}){let[l,c]=(0,_.useState)({}),[d,u]=(0,_.useState)(null),[h,p]=(0,_.useState)(null),[f,g]=(0,_.useState)(!0),[y,x]=(0,_.useState)(e),[v]=(0,_.useState)(0),[b,S]=(0,_.useState)(!1),[C,j]=(0,_.useState)(null),[w,N]=(0,_.useState)(""),[I,E]=(0,_.useState)(0),R=(0,_.useRef)(!1),T=ej.W.spacesRepoContext,k=async e=>{let t;if(R.current=!0,l[e])return void p(t=l[e]);try{let n=await (0,F.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!n.ok)return void u(`Failed to fetch repository details: ${n.status}`);t=await n.json(),c(n=>({...n,[e]:t})),p(t),g(!1)}catch(e){u(e instanceof Error?e.message:"An unknown error occurred")}R.current=!1},A=()=>{p(null),x([]),g(!0)},D=!1,P=void 0!==o;D=P?o.currentResourceCount+I>o.maxResourceCount:I>50;let L=async()=>{if(S(!0),T&&0===I&&h)try{r({type:"repository",id:`${h.id}`,repositoryId:h.id,nwo:`${h.ownerLogin}/${h.name}`,markedForDestroy:!1});return}catch{j("Could not save repository. Please try again.")}finally{S(!1)}if(D)return void S(!1);try{await n(y)}catch(t){let e="An unknown error occurred";if(t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base)if(t.base.startsWith("unsupported_file_type")&&"files"in t){let n=t.files;if(1===n.length)e=`This file can't be submitted: ${n[0]}. Only supported file types are allowed.`;else{let[t,r]=[n.slice(0,3),n.slice(3)];e="One or more files can't be submitted: "+t.map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(e.length-t,e.length)}`;return`<b>${n}</b>`})(e)).join(", "),r.length>0?e+=`, and ${r.length} more.`:e+=".",e+=" Only supported file types are allowed."}}else e=t.base;e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),j(e)}finally{S(!1)}};(0,_.useEffect)(()=>{j(null)},[y]);let M=D&&(P?`${o.currentResourceCount+I} / ${o.maxResourceCount} possible sources selected, add fewer files.`:"Up to 50 files can be added at a time.");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ux.X1,{selectionVariant:"instant",open:!h&&f,onOpenChange:e=>{R.current||(g(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(x([]),await k(e))},cancelReturnFocusRef:i,submitReturnFocusRef:i,error:d??void 0,ownerDisplayLogin:s,includeForks:!0}),h&&(0,m.jsx)(n7.l,{onClose:t,title:`Add files from ${h.ownerLogin}/${h.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,m.jsxs)(n7.l.Header,{children:[(0,m.jsxs)("div",{className:uq.dialogHeader,children:[(0,m.jsx)(tE.K,{icon:O.ArrowLeftIcon,"aria-label":"Back",onClick:A,variant:"invisible"})," ",(0,m.jsx)(n7.l.Title,{children:"Select folders and files"}),(0,m.jsx)(uG,{onClose:()=>e("close-button")})]}),(0,m.jsx)(n7.l.Subtitle,{className:"mt-0",children:(0,m.jsx)(uv.d,{repository:h,children:(0,m.jsx)(u_.Ck,{children:(0,m.jsx)(ub.qV,{refInfo:{name:h.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:h.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)(uS.$,{allShortcutsEnabled:!1,children:(0,m.jsx)(uM,{commitOid:h.commitOID,findFileWorkerPath:a,onItemSelected:e=>{e&&N(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,m.jsxs)(n7.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:M&&(0,m.jsx)(og.A.Validation,{variant:"error",children:M})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(eM.Q,{onClick:t,children:"Cancel"}),(0,m.jsxs)(eM.Q,{...(0,nY.G)("save-resource-button"),variant:"primary",onClick:L,count:b?void 0:I||void 0,loading:b,children:["Add ",(0,m.jsx)("span",{children:T&&0===I?"whole repository":""})]})]})]}),renderBody:()=>(0,m.jsxs)("div",{className:"d-flex flex-column",children:[d&&(0,m.jsx)("span",{children:d}),C&&(0,m.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,m.jsx)(db.A,{full:!0,variant:"danger",children:(0,m.jsx)(i1.JR,{as:"span",html:C})})}),(0,m.jsx)(uv.d,{repository:h,children:(0,m.jsx)(u_.Ck,{children:(0,m.jsx)(ub.qV,{refInfo:{name:h.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:h.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)("div",{className:"p-2",children:(0,m.jsx)(uW,{expandedPath:w,currentRepo:h,localFormData:y,setLocalFormData:x,onFileCountChange:E,fetchError:d,processingTime:v})})})})})]}),className:uq.Dialog})]})}try{uW.displayName||(uW.displayName="FilePickerForm")}catch{}try{uG.displayName||(uG.displayName="CloseButton")}catch{}try{uz.displayName||(uz.displayName="MultiFilePicker")}catch{}var uH=n(57596),uQ=n(7324);function uK(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function uJ(e,t,n){return uX(e,t),uK(n,"get"),n.get?n.get.call(e):n.value}function uX(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}let UploadableFileExtensions=class UploadableFileExtensions{static get text(){return null!=uJ(this,UploadableFileExtensions,uY)||!function(e,t,n,r){uX(e,t),uK(n,"set");if(n.set)n.set.call(e,r);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=r}}(this,UploadableFileExtensions,uY,new Set([...oa.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"].map(e=>e.toLowerCase()))),uJ(this,UploadableFileExtensions,uY)}static images(e){return new Set(on.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var uY={writable:!0,value:void 0};let uZ=()=>{let e,t,n,r,a=(0,h.c)(7);a[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:u1},a[0]=e):e=a[0];let i=(0,rn.n)(e);return a[1]!==i?({mutateAsync:t,...n}=i,a[1]=i,a[2]=t,a[3]=n):(t=a[2],n=a[3]),a[4]!==t||a[5]!==n?(r={getCopilotSpaceResourceSizes:t,...n},a[4]=t,a[5]=n,a[6]=r):r=a[6],r};function u0(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:dC(e)}}async function u1(e){let t={resources:e.resources?.map(u0)},n=await (0,F.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),r=await n.json();if(!n.ok)throw r.errorMessages;return r}function u2({onResourcesAdded:e,onError:t,onUploadingChange:n}){let{availableModels:r}=(0,z.Pk)(),{hydrateResourcesWithSizePercentages:a}=function(){let e,t,n=(0,h.c)(4),{getCopilotSpaceResourceSizes:r}=uZ();n[0]!==r?(e=async e=>{if(0===e.length)return;let t=await r({resources:e});for(let n of e)n.sizePercentage=t[n.id]??0},n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t={hydrateResourcesWithSizePercentages:a},n[2]=a,n[3]=t):t=n[3],t}();return{processFiles:(0,_.useCallback)(async(i,{source:s})=>{if(i&&0!==i.length){(function(e,{source:t}){for(let n of((0,e1.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=u3(n.name);(0,e1.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:n.type,fileSize:n.size,source:t})}})(i,{source:s}),n?.(!0);try{let{imageFiles:n,nonImageFiles:s}=function(e,t){let n=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let n=u3(e.name);return t.has(n)}(t,n)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(i,r),[o,l]=await Promise.all([u7(s),u5(n,r)]),c=[...o.resources,...l.resources];await a(c),c.length>0&&e(c);let d=[...o.errorMessages,...l.errorMessages];d.length>0&&t?.(d)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{n?.(!1)}}},[r,e,t,a,n])}}function u3(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function u4(e){let t=[],n=[];for(let r of e)"fulfilled"===r.status?"resource"in r.value?t.push(r.value.resource):n.push(r.value.error):n.push("An unexpected error occurred while processing a file.");return{errorMessages:n,resources:t}}async function u5(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!(ej.W.dotcomChatFileUpload&&ej.W.spacesImagesEnabled))return{errorMessages:["Images are not yet supported"],resources:[]};let n=e.map(e=>u6(e,on.s.getMimeTypes(t)));return u4(await Promise.allSettled(n))}async function u6(e,t){try{if(e.size>on.s.getAttachmentSizeLimit())return{error:mt(e.name)};if(!t.includes(e.type))return{error:me(e.name)};let{id:n,attachment:r}=on.s.makeImageReference(e,""),a=await r.prefetch();return{resource:{id:n,type:"media_content",mediaType:e.type,name:e.name||"Image",url:a.href||"",copilotChatAttachmentId:a.id||0,height:r.height||0,width:r.width||0,markedForDestroy:!1}}}catch(t){var n,r;return n=t,r=e,n instanceof Error&&"FileSizeError"===n.name?{error:mt(r.name)}:{error:u9(r.name)}}}async function u7(e){if(0===e.length)return{errorMessages:[],resources:[]};if(!ej.W.customCopilotsFileUploads)return{errorMessages:["Text file uploads are not yet supported."],resources:[]};let t=e.map(e=>u8(e));return u4(await Promise.allSettled(t))}async function u8(e){try{var t;if(!e.type.startsWith("text/")){let t=u3(e.name);if(!UploadableFileExtensions.text.has(t))return{error:me(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let n=crypto.randomUUID(),r=await new uQ.N(n,e).prefetch();return{resource:{id:n,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:r.id,url:r.href,markedForDestroy:!1}}}catch(a){var n=a,r=e;if(!(n instanceof uH.ZK))return{error:u9(r.name)};let t=n.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||u9(r.name)}}}function u9(e){return`An error occurred uploading "${e}".`}function me(e){return`File "${e}" is not a supported file type.`}function mt(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;let a=Math.round(100*n)/100;return`${a}${t[r]}`}(on.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let mn=(0,_.forwardRef)((e,t)=>{let n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(18),{onResourcesAdded:f,onError:g,onUploadingChange:y}=e;p[0]!==g||p[1]!==f||p[2]!==y?(n={onResourcesAdded:f,onError:g,onUploadingChange:y},p[0]=g,p[1]=f,p[2]=y,p[3]=n):n=p[3];let{processFiles:x}=u2(n),{availableModels:v}=(0,z.Pk)();p[4]===Symbol.for("react.memo_cache_sentinel")?(a=Array.from(UploadableFileExtensions.text),p[4]=a):a=p[4];let b=a;p[5]!==v?(i=Array.from(UploadableFileExtensions.images(v)),p[5]=v,p[6]=i):i=p[6];let S=i;p[7]!==S?(s=[...b,...S],p[7]=S,p[8]=s):s=p[8];let C=s;p[9]!==C?(o=["text/*",...C],p[9]=C,p[10]=o):o=p[10],r=o.join(","),p[11]!==x?(l=e=>{e.target.files&&(x(e.target.files,{source:"file-upload"}),e.target.value="")},p[11]=x,p[12]=l):l=p[12];let j=l,w=(0,_.useRef)(null);return p[13]===Symbol.for("react.memo_cache_sentinel")?(c=()=>({addResources:()=>w.current?.click()}),p[13]=c):c=p[13],(0,_.useImperativeHandle)(t,c),p[14]===Symbol.for("react.memo_cache_sentinel")?(d={display:"none"},p[14]=d):d=p[14],p[15]!==r||p[16]!==j?(u=(0,m.jsx)("input",{"data-testid":"file-upload-input",ref:w,type:"file",accept:r,multiple:!0,style:d,onChange:j}),p[15]=r,p[16]=j,p[17]=u):u=p[17],u});mn.displayName="FileUploadInput";var mr=n(44263);function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let UrlDetails=class UrlDetails{constructor(e,t="",n="",r="",a=0,i="",s="unknown"){ma(this,"url",void 0),ma(this,"owner",void 0),ma(this,"repo",void 0),ma(this,"number",void 0),ma(this,"type",void 0),ma(this,"id",void 0),ma(this,"file_path",void 0),ma(this,"errorMessage",void 0),this.id=e,this.url=t,this.owner=n,this.repo=r,this.number=a,this.type=s,this.file_path=i}};let mi=()=>{let e,t,n,r,a=(0,h.c)(7);a[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:mo},a[0]=e):e=a[0];let i=(0,rn.n)(e);return a[1]!==i?({mutateAsync:n,...t}=i,a[1]=i,a[2]=t,a[3]=n):(t=a[2],n=a[3]),a[4]!==t||a[5]!==n?(r={validateUrlResources:n,...t},a[4]=t,a[5]=n,a[6]=r):r=a[6],r};function ms(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path};default:throw Error("Unsupported resource")}}(e)}}async function mo(e){let{input:t,spaceOwner:n}=e,r={resources_attributes:t.map(ms),space_owner:n},a=await (0,F.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:r}),i=await a.json();if(!a.ok)throw i;return i}function ml(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b=(0,h.c)(61),{onClose:S,onSave:C,resourcesToSave:j,owner:w,resourceCounts:N}=e,[I,E]=(0,_.useState)(!1),[R,T]=(0,_.useState)(mu),[k,A]=(0,_.useState)(!1),[D,P]=(0,_.useState)(!1),L=ej.W.copilotSpacesFileUrls,{validateUrlResources:M}=mi();if(b[0]!==I||b[1]!==S||b[2]!==C||b[3]!==w||b[4]!==j||b[5]!==R||b[6]!==M){t=t=>{t?.preventDefault(),t?.stopPropagation(),I||(E(!0),e().finally(()=>{E(!1)}))};let e=async()=>{A(!1),P(!1);let e=(()=>{let e=new Set(j?.filter(md).map(mc)??[]),t=new Set;return R.filter(n=>{let r=`${n.owner}/${n.repo}/${n.number}/${n.type}`;return!(t.has(r)||e.has(r))&&""!==n.url.trim()&&(t.add(r),!0)})})(),t=e.filter(e=>"unknown"===e.type||w&&e.owner!==w);if(t.length>0){T(R.map(e=>w&&e.owner&&e.owner!==w?{...e,errorMessage:`This doesn't belong to the ${w} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),A(!0);return}if(0===e.length)return void S();try{let t=await M({input:e,spaceOwner:w});C(t),S()}catch(e){if(Array.isArray(e)){for(let t of e){let e=R.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}A(!0)}}};b[0]=I,b[1]=S,b[2]=C,b[3]=w,b[4]=j,b[5]=R,b[6]=M,b[7]=t}else t=b[7];let F=!!N&&N.currentResourceCount+R.length+1>N.maxResourceCount;b[8]!==R||b[9]!==F?(n=()=>{if(F)return void P(!0);T([...R,new UrlDetails(crypto.randomUUID())])},b[8]=R,b[9]=F,b[10]=n):n=b[10];let B=n,U=D&&N?`You can select a maximum of ${N.maxResourceCount} sources.`:null;b[11]!==D||b[12]!==N?(r=e=>{D&&N&&(N.currentResourceCount+e.length>N.maxResourceCount||P(!1))},b[11]=D,b[12]=N,b[13]=r):r=b[13];let $=r;b[14]!==$||b[15]!==R?(a=e=>{let t=[...R];t.splice(e,1),T(t),$(t)},b[14]=$,b[15]=R,b[16]=a):a=b[16];let V=a;if(b[17]!==$||b[18]!==R){i=(t,n)=>{let r=[...R],a=e(n,r[t]||new UrlDetails(crypto.randomUUID()));r[t]=a,T(r),$(r)};let e=(e,t)=>{let n=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),r=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),a=e.match(/\/([^/]+)\/([^/]+)\/blob\/[^/]+\/(.+)$/);return t.url=e,n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_issue"):r?(t.owner=r[1]??"",t.repo=r[2]??"",t.number=parseInt(r[3]??"0",10),t.type="github_pull_request"):a&&L&&(t.owner=a[1]??"",t.repo=a[2]??"",t.file_path=a[3]??"",t.type="github_file"),t};b[17]=$,b[18]=R,b[19]=i}else i=b[19];if(b[20]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen"},b[20]=s):s=b[20],b[21]!==t||b[22]!==I||b[23]!==S||b[24]!==U?(o=()=>(0,m.jsxs)(n7.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:U&&(0,m.jsx)(og.A.Validation,{variant:"error",children:U})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(eM.Q,{onClick:S,children:"Cancel"}),(0,m.jsx)(eM.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),b[21]=t,b[22]=I,b[23]=S,b[24]=U,b[25]=o):o=b[25],b[26]!==k?(l=k&&(0,m.jsx)(nh.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),b[26]=k,b[27]=l):l=b[27],b[28]!==w?(c=w&&(0,m.jsx)(i1.JR,{html:`from the <b>${w}</b> organization`}),b[28]=w,b[29]=c):c=b[29],b[30]!==c?(d=(0,m.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",c," you want to add. You can include issues and pull requests."]}),b[30]=c,b[31]=d):d=b[31],b[32]!==t?(u={"github:submit-form":()=>t()},b[32]=t,b[33]=u):u=b[33],b[34]!==k||b[35]!==i||b[36]!==V||b[37]!==R){let e;b[39]!==k||b[40]!==i||b[41]!==V||b[42]!==R.length?(e=(e,t)=>(0,m.jsxs)("div",{style:{width:"100%"},children:[(0,m.jsx)(mm,{index:t,removeUrlTextInputRow:V,inputCount:R.length,updateUrls:i,setIsUpdating:E,urlValue:e.url}),k&&void 0!==e.errorMessage&&(0,m.jsx)(og.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),b[39]=k,b[40]=i,b[41]=V,b[42]=R.length,b[43]=e):e=b[43],p=R.map(e),b[34]=k,b[35]=i,b[36]=V,b[37]=R,b[38]=p}else p=b[38];return b[44]!==p?(f=(0,m.jsx)(nZ.B,{direction:"vertical",align:"center",children:p}),b[44]=p,b[45]=f):f=b[45],b[46]!==t||b[47]!==f?(g=(0,m.jsx)("form",{onSubmit:t,children:f}),b[46]=t,b[47]=f,b[48]=g):g=b[48],b[49]!==g||b[50]!==u?(y=(0,m.jsx)(n6.tL,{commands:u,children:g}),b[49]=g,b[50]=u,b[51]=y):y=b[51],b[52]!==B?(x=(0,m.jsx)(eM.Q,{leadingVisual:O.PlusIcon,className:"mt-3",onClick:B,children:"Add another"}),b[52]=B,b[53]=x):x=b[53],b[54]!==S||b[55]!==y||b[56]!==x||b[57]!==o||b[58]!==l||b[59]!==d?(v=(0,m.jsxs)(n7.l,{position:s,width:"large",title:"Add via GitHub URL",onClose:S,renderFooter:o,children:[l,d,y,x]}),b[54]=S,b[55]=y,b[56]=x,b[57]=o,b[58]=l,b[59]=d,b[60]=v):v=b[60],v}function mc(e){return`${e.nwo}/${e.number}/${e.type}`}function md(e){return"github_issue"===e.type||"github_pull_request"===e.type}function mu(){return[new UrlDetails(crypto.randomUUID())]}function mm(e){let t,n,r,a,i,s,o,l=(0,h.c)(18),{index:c,removeUrlTextInputRow:d,inputCount:u,updateUrls:p,setIsUpdating:f,urlValue:g}=e,[y,x]=(0,_.useState)(g),[v,b]=(0,_.useState)(!1);l[0]!==g?(t=()=>{x(g)},n=[g],l[0]=g,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,_.useEffect)(t,n);let S=e=>{let t=e.target.value;x(t),v||(b(!0),f(!0)),C(t)};l[3]!==c||l[4]!==f||l[5]!==p?(r=e=>{p(c,e),b(!1),f(!1)},l[3]=c,l[4]=f,l[5]=p,l[6]=r):r=l[6];let C=(0,mr.d)(r,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(og.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=a):a=l[7],l[8]!==S||l[9]!==y?(i=(0,m.jsx)(oy.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:S,className:"width-full"}),l[8]=S,l[9]=y,l[10]=i):i=l[10],l[11]!==c||l[12]!==u||l[13]!==d?(s=u>1&&(0,m.jsx)(tE.K,{icon:O.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>d(c)}),l[11]=c,l[12]=u,l[13]=d,l[14]=s):s=l[14],l[15]!==i||l[16]!==s?(o=(0,m.jsxs)(og.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[a,i,s]}),l[15]=i,l[16]=s,l[17]=o):o=l[17],o}try{ml.displayName||(ml.displayName="GitHubUrlDialog")}catch{}try{(o=AddUrlTextInputRow).displayName||(o.displayName="AddUrlTextInputRow")}catch{}try{mm.displayName||(mm.displayName="UrlTextInputRow")}catch{}let mh={dialogBody:"TextFileDialog-module__dialogBody--vEXW_",grow:"TextFileDialog-module__grow--WN1h9",form:"TextFileDialog-module__form--i5zZL",footerContainer:"TextFileDialog-module__footerContainer--Mz0uf"};function mp({sizePercentage:e,onClose:t,onSave:n,resource:r}){let{copilotSpacesConfig:{maxContentSize:a}}=(0,W.X)(),[i,s]=(0,_.useState)(r?.name||""),[o,l]=(0,_.useState)(r?.text||""),[c,d]=(0,_.useState)(!1),[u,h]=(0,_.useState)(""),[p,f]=(0,_.useState)(!1),g=r?.text??"",[y,x]=(0,_.useState)({}),{getCopilotSpaceResourceSizes:v}=uZ(),b=async e=>{e?.preventDefault(),e?.stopPropagation();let a=!i.trim(),s=!o.trim();if(a||s)return void x(e=>({...e,"resources.name":a?"Name is required":"","resources.text":s?"Content is required":""}));d(!0),h("");try{let e={id:r?.id||Date.now().toString(),databaseId:r?.databaseId,type:"free_text",name:i,text:o,markedForDestroy:!1},a=await v({resources:[e]});n({...e,sizePercentage:a[e.id]}),t()}catch{h("An unexpected error occurred while validating the text file")}finally{d(!1)}};return(0,m.jsx)(n7.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,m.jsxs)("div",{className:mh.dialogBody,children:[u&&(0,m.jsx)(nh.l,{variant:"critical",className:"mb-2",title:u}),(0,m.jsx)(n6.tL,{className:mh.grow,commands:{"github:submit-form":()=>void b()},children:(0,m.jsxs)("form",{onSubmit:b,className:mh.form,children:[(0,m.jsxs)(og.A,{required:!0,children:[(0,m.jsx)(og.A.Label,{children:"Name"}),(0,m.jsx)(oy.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{s(e.target.value),x(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:y["resources.name"]?"error":void 0,...(0,nY.G)("text-file-name-input")}),y["resources.name"]&&(0,m.jsx)(og.A.Validation,{variant:"error",children:y["resources.name"]})]}),(0,m.jsxs)(og.A,{required:!0,className:mh.grow,children:[(0,m.jsx)(og.A.Label,{children:"Content"}),(0,m.jsx)(d0.Ay,{block:!0,name:"content",value:o,placeholder:"Enter content here",resize:"none",className:mh.grow,onChange:e=>{l(e.target.value),x(e=>({...e,"resources.text":""}))},...(0,nY.G)("text-file-content-input")}),y["resources.text"]?(0,m.jsx)(og.A.Validation,{variant:"error",children:y["resources.text"]}):void 0!==e&&(0,m.jsx)(mf,{text:o,percentage:e,resourceContent:g,setOverSpaceLimit:f,maxContentSize:a})]})]})})]}),renderFooter:()=>(0,m.jsxs)("div",{className:mh.footerContainer,children:[(0,m.jsx)(eM.Q,{onClick:t,children:"Cancel"}),(0,m.jsx)(eM.Q,{variant:"primary",onClickCapture:p?void 0:b,loadingAnnouncement:"Validating resource",inactive:p,loading:c,...(0,nY.G)("save-text-file-button"),children:"Add"})]})})}function mf(e){let t,n,r,a=(0,h.c)(8),{text:i,percentage:s,resourceContent:o,setOverSpaceLimit:l,maxContentSize:c}=e,d=s/100*c+(i.length>o.length?Math.abs(i.length-o.length):-Math.abs(i.length-o.length)),u=Math.floor(d/c*100),p=d>c;if(a[0]!==l||a[1]!==p?(t=()=>{l(p)},n=[p,l],a[0]=l,a[1]=p,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,_.useEffect)(t,n),p){let e,t=`Total percent used: ${u}%`;return a[4]!==t?(e=(0,m.jsx)(og.A.Validation,{variant:"error",children:t}),a[4]=t,a[5]=e):e=a[5],e}let f=`Total percent used: ${u}%`;return a[6]!==f?(r=(0,m.jsx)(og.A.Caption,{children:f}),a[6]=f,a[7]=r):r=a[7],r}try{mp.displayName||(mp.displayName="TextFileDialog")}catch{}try{mf.displayName||(mf.displayName="CharacterCount")}catch{}let mg=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b,S,C,j=(0,h.c)(47),{children:w,findFileWorkerPath:N,onResourcesAdded:I,onError:E,owner:R,sizePercentage:T,resourcesToSave:k,resourceCounts:A,onUploadingChange:D}=e,[P,L]=(0,_.useState)(!1),[M,F]=(0,_.useState)(!1),[B,U]=(0,_.useState)(!1),$=(0,_.useRef)(null),{getCopilotSpaceResourceSizes:V}=uZ();j[0]!==I?(t=e=>{I([e]),F(!1)},j[0]=I,j[1]=t):t=j[1];let q=t;j[2]!==I||j[3]!==V?(n=async e=>{if(0===e.length)return void F(!1);let t=await V({resources:e});I(e.map(e=>{let n=t[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:n}})),F(!1)},j[2]=I,j[3]=V,j[4]=n):n=j[4];let W=n,G=(0,_.useRef)(null),z=ej.W.customCopilotsFileUploads,H=ej.W.spacesImagesEnabled&&ej.W.dotcomChatFileUpload,Q=ej.W.copilotSpacesFileUrls;return j[5]!==E||j[6]!==I||j[7]!==D?(r=(z||H)&&(0,m.jsx)(mn,{ref:$,onResourcesAdded:I,onError:E,onUploadingChange:D}),j[5]=E,j[6]=I,j[7]=D,j[8]=r):r=j[8],j[9]!==w?(a=(0,m.jsx)(tI.W.Anchor,{children:w}),j[9]=w,j[10]=a):a=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tR.l.GroupHeading,{children:"Repository"}),j[11]=i):i=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(s=()=>F(!0),j[12]=s):s=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(tR.l.Item,{onSelect:s,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.FileCodeIcon,{...(0,nY.G)("add-github-files-menu-item-icon")})}),"Attach files and folders"]}),j[13]=o):o=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>U(!0),j[14]=l):l=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.LinkIcon,{})}),j[15]=c):c=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(tR.l.Group,{children:[i,o,(0,m.jsxs)(tR.l.Item,{onSelect:l,children:[c,Q?"Link files, pull requests, and issues":"Link pull requests and issues"]})]}),u=(0,m.jsx)(tR.l.Divider,{}),j[16]=d,j[17]=u):(d=j[16],u=j[17]),j[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(tR.l.GroupHeading,{children:"Local"}),f=(z||H)&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>{(0,e1.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),$.current?.addResources()},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.UploadIcon,{})}),"Upload a file"]}),j[18]=p,j[19]=f):(p=j[18],f=j[19]),j[20]===Symbol.for("react.memo_cache_sentinel")?(g=()=>L(!0),j[20]=g):g=j[20],j[21]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsx)(tI.W.Overlay,{align:"end",width:"small",children:(0,m.jsxs)(tR.l,{children:[d,u,(0,m.jsxs)(tR.l.Group,{children:[p,f,(0,m.jsxs)(tR.l.Item,{onSelect:g,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.PasteIcon,{...(0,nY.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),j[21]=y):y=j[21],j[22]!==a?(x=(0,m.jsxs)(tI.W,{anchorRef:G,children:[a,y]}),j[22]=a,j[23]=x):x=j[23],j[24]!==I||j[25]!==P||j[26]!==T?(v=P&&(0,m.jsx)(mp,{sizePercentage:T,onClose:()=>L(!1),onSave:e=>I([e])}),j[24]=I,j[25]=P,j[26]=T,j[27]=v):v=j[27],j[28]!==N||j[29]!==R||j[30]!==A||j[31]!==W||j[32]!==q||j[33]!==M?(b=M&&(0,m.jsx)(uz,{formData:[],onCancel:()=>F(!1),onSaveFiles:W,onSaveRepository:q,findFileWorkerPath:N,attachmentButtonRef:G,owner:R,resourceCounts:A}),j[28]=N,j[29]=R,j[30]=A,j[31]=W,j[32]=q,j[33]=M,j[34]=b):b=j[34],j[35]!==I||j[36]!==R||j[37]!==A||j[38]!==k||j[39]!==B?(S=B&&(0,m.jsx)(ml,{onClose:()=>U(!1),onSave:e=>I(e),resourcesToSave:k,resourceCounts:A,owner:R}),j[35]=I,j[36]=R,j[37]=A,j[38]=k,j[39]=B,j[40]=S):S=j[40],j[41]!==x||j[42]!==v||j[43]!==b||j[44]!==S||j[45]!==r?(C=(0,m.jsxs)(m.Fragment,{children:[r,x,v,b,S]}),j[41]=x,j[42]=v,j[43]=b,j[44]=S,j[45]=r,j[46]=C):C=j[46],C};try{mg.displayName||(mg.displayName="AddAttachmentMenu")}catch{}var my=n(21114);let mx={capitalize:"ColorPicker-module__capitalize--Frq3z"},mv=dt.map(e=>({leadingVisual:()=>(0,m.jsx)("span",{className:da[e],style:{display:"inline-block",width:12,height:12,backgroundColor:"var(--avatar-foregroundColor)",borderRadius:"50%"}}),key:e,text:e,color:e}));function m_(e){let t,n,r,a,i,s,o,l,c,d,u=(0,h.c)(21),{value:p,onChange:f}=e,[g,y]=(0,_.useState)(!1),[x,v]=(0,_.useState)("");u[0]!==x||u[1]!==p?(n=mv.filter(e=>e.text===p||e.text?.toLowerCase().startsWith(x.toLowerCase())),u[0]=x,u[1]=p,u[2]=n):n=u[2],t=n,u[3]!==p?(a=mv.find(e=>e.text===p),u[3]=p,u[4]=a):a=u[4],r=a;let b=(0,_.useId)();return u[5]!==b?(i=(0,m.jsx)(og.A.Label,{visuallyHidden:!0,htmlFor:b,children:"Color"}),u[5]=b,u[6]=i):i=u[6],u[7]!==b?(s=e=>{let{children:t,...n}=e;return(0,m.jsxs)(eM.Q,{...n,id:b,size:"small",trailingAction:O.TriangleDownIcon,"aria-haspopup":"dialog",className:mx.capitalize,children:[(0,m.jsx)("span",{className:"fgColor-muted mr-1",children:"Color:"}),t]})},u[7]=b,u[8]=s):s=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o={width:"small",maxHeight:"medium"},u[9]=o):o=u[9],u[10]!==f?(l=e=>{e&&f(e.text)},u[10]=f,u[11]=l):l=u[11],u[12]!==t||u[13]!==g||u[14]!==r||u[15]!==s||u[16]!==l?(c=(0,m.jsx)(my.X,{renderAnchor:s,className:mx.capitalize,overlayProps:o,title:"Select a color",placeholder:"Select a color",open:g,onOpenChange:y,items:t,selected:r,placeholderText:"Filter colors",onSelectedChange:l,onFilterChange:v}),u[12]=t,u[13]=g,u[14]=r,u[15]=s,u[16]=l,u[17]=c):c=u[17],u[18]!==i||u[19]!==c?(d=(0,m.jsxs)(og.A,{children:[i,c]}),u[18]=i,u[19]=c,u[20]=d):d=u[20],d}try{m_.displayName||(m_.displayName="ColorPicker")}catch{}function mb(e){let t,n,r,a,i,s,o,l,c=(0,h.c)(20),{fileAcceptanceFn:d,onFilesDrop:u,onRejectedFiles:p,isUploading:f}=e,g=void 0!==f&&f;c[0]!==p?(t=e=>{0!==e.length&&p?.(e)},c[0]=p,c[1]=t):t=c[1];let y=t;c[2]!==g||c[3]!==u?(n=(e,t)=>{g||u(e,t)},c[2]=g,c[3]=u,c[4]=n):n=c[4];let x=n;c[5]!==d||c[6]!==x||c[7]!==y?(r={onFilesDrop:x,fileAcceptanceFn:d,onRejectedFiles:y},c[5]=d,c[6]=x,c[7]=y,c[8]=r):r=c[8];let{isDragging:v}=oi(r),_=null;c[9]===Symbol.for("react.memo_cache_sentinel")?(a={},c[9]=a):a=c[9];let b=a;if(g){let e;c[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(rk.A,{size:"large"}),(0,m.jsx)("div",{children:"Uploading files..."})]}),c[10]=e):e=c[10],_=e}else if(v){let e,t;c[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(O.UploadIcon,{size:64}),(0,m.jsx)("div",{children:"Drop files to upload"})]}),c[11]=e):e=c[11],_=e,c[12]===Symbol.for("react.memo_cache_sentinel")?(t={border:"var(--base-size-4) dashed",borderColor:"border.default"},c[12]=t):t=c[12],b=t}return _?(c[13]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen",regular:"fullscreen",wide:"fullscreen"},c[13]=i):i=c[13],c[14]===Symbol.for("react.memo_cache_sentinel")?(s={alignItems:"center",display:"flex",flexDirection:"column",gap:3,justifyContent:"center"},c[14]=s):s=c[14],c[15]!==_?(o=(0,m.jsx)(n7.l.Body,{sx:s,children:_}),c[15]=_,c[16]=o):o=c[16],c[17]!==b||c[18]!==o?(l=(0,m.jsx)(n7.l,{position:i,onClose:mC,renderHeader:mS,sx:b,children:o}),c[17]=b,c[18]=o,c[19]=l):l=c[19],l):null}function mS(){return null}function mC(){}try{mb.displayName||(mb.displayName="FullScreenDragOverlay")}catch{}try{mb.displayName||(mb.displayName="FullScreenDragOverlay")}catch{}try{mb.displayName||(mb.displayName="FullScreenDragOverlay")}catch{}var mj=n(6020);let mw={warningIcon:"ReferencesTable-module__warningIcon--aAwMb",referenceTitle:"ReferencesTable-module__referenceTitle--RAQOR",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--tHoXM",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--p7dJl"};function mN(e){let t,n,r,a,i,s,o,l,c,d,u=(0,h.c)(22),{resources:p,onDeleteResource:f,onUpdateResource:g,sizePercentage:y}=e;if(u[0]!==p)n=Object.values(p.reduce((e,t)=>{let n=mT(t);return{...e,[n]:t}},{})),u[0]=p,u[1]=n;else n=u[1];t=n;let[x,b]=(0,_.useState)(!1),[S,C]=(0,_.useState)(null),j=(0,_.useRef)(null);u[2]!==x?(r={id:"id",header:"Name",rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:n,fileUrl:r}=(0,nv.q5)(e);return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cY,{attachment:e,className:"fgColor-muted"}),(0,m.jsxs)(nZ.B,{gap:"none",children:[(0,m.jsx)("div",{children:e.fileExists?(0,m.jsx)(dS.A,{title:n,className:mw.referenceTitle,children:(0,m.jsx)(nW.A,{rel:"noopener",target:"_blank",href:r,className:mw.referenceTitleLink,children:n})}):(0,m.jsx)(dS.A,{title:n,className:mw.referenceTitle,children:n})}),(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:t,className:(0,v.$)(mw.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cY,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:e.name,maxWidth:300,className:mw.referenceTitle,children:e.name})})]});case"repository":return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cY,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:e.nwo,maxWidth:300,className:mw.referenceTitle,children:e.nwo})})]});case"uploaded_text_file":return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cY,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:e.name,maxWidth:300,className:mw.referenceTitle,children:(0,m.jsx)(nW.A,{className:mw.referenceTitleLink,href:e.url,...ej.W.spacesV3UI?{download:e.name}:{rel:"noopener noreferrer",target:"_blank"},children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{children:(0,m.jsx)(cY,{attachment:e,className:"fgColor-success"})}),(0,m.jsxs)(nZ.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:e.title||"",className:mw.referenceTitle,children:(0,m.jsxs)(nW.A,{rel:"noopener",target:"_blank",href:e.url,className:mw.referenceTitleLink,children:[e.title," ",(0,m.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,m.jsx)("div",{children:(0,m.jsx)(dS.A,{title:e.nwo||"",className:(0,v.$)(mw.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{className:"fgColor-muted",children:(0,m.jsx)(cY,{attachment:e,className:"fgColor-muted"})}),(0,m.jsx)(nW.A,{as:"button",className:mw.referenceTitleLink,ref:j,onClick:t=>{t.preventDefault(),C(e),b(!0)},"aria-haspopup":"dialog","aria-expanded":x,children:(0,m.jsx)(dS.A,{title:e.name,maxWidth:300,className:(0,v.$)(mw.referenceTitle),children:e.name})})]});default:return null}}},u[2]=x,u[3]=r):r=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(a={id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:mE},u[4]=a):a=u[4],u[5]!==f||u[6]!==g||u[7]!==y?(i={id:"actions",header:mI,maxWidth:"auto",align:"end",renderCell:e=>{let t="github_file"===e.type&&!e.fileExists;return(0,m.jsxs)(m.Fragment,{children:[t&&(0,m.jsx)(tE.K,{className:mw.warningIcon,icon:O.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,m.jsx)(mR,{row:e,onEdit:g,onDelete:f,sizePercentage:y})]})}},u[5]=f,u[6]=g,u[7]=y,u[8]=i):i=u[8],u[9]!==r||u[10]!==i?(s=[r,a,i],u[9]=r,u[10]=i,u[11]=s):s=u[11];let w=s;u[12]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{C(null),b(!1)},u[12]=o):o=u[12];let N=o;return u[13]!==w||u[14]!==t?(l=(0,m.jsx)(oB.X.Container,{children:(0,m.jsx)(oU.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:t,columns:w})}),u[13]=w,u[14]=t,u[15]=l):l=u[15],u[16]!==S||u[17]!==x?(c=x&&S&&"media_content"===S.type&&(0,m.jsx)(n7.l,{onClose:N,position:{narrow:"fullscreen"},returnFocusRef:j,title:S.name,children:(0,m.jsx)(cX,{attachment:S})}),u[16]=S,u[17]=x,u[18]=c):c=u[18],u[19]!==c||u[20]!==l?(d=(0,m.jsxs)(m.Fragment,{children:[l,c]}),u[19]=c,u[20]=l,u[21]=d):d=u[21],d}function mI(){return(0,m.jsx)(mj.s,{children:"Actions"})}function mE(e){return"repository"!==e.type?(0,m.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Copilot works best when working with fewer files. You can edit to chose individual files.",className:mw.warningIcon,icon:O.AlertIcon})}let mR=e=>{let t,n,r,a,i,s,o,l,c,d,u,p,f,g=(0,h.c)(36),{row:y,onDelete:x,onEdit:v,sizePercentage:b}=e,[S,C]=(0,_.useState)(null),j="";switch(y.type){case"github_pull_request":case"github_issue":j=y.title;break;case"github_file":j=y.filePath;break;case"repository":j=y.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":j=y.name}let w=`Attachment actions: ${j}`;g[0]!==w?(t=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{"aria-label":w,title:"Attachment actions",icon:O.KebabHorizontalIcon,variant:"invisible"})}),g[0]=w,g[1]=t):t=g[1],g[2]!==y?(n="free_text"===y.type&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tR.l.Item,{"aria-label":`Edit attachment: ${y.id}`,onSelect:()=>C(y),children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.PencilIcon,{})}),"Edit"]})}),g[2]=y,g[3]=n):n=g[3];let N=`Delete attachment: ${y.id}`;return g[4]!==x||g[5]!==y?(r=()=>x(y),g[4]=x,g[5]=y,g[6]=r):r=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),g[7]=a):a=g[7],g[8]!==N||g[9]!==r?(i=(0,m.jsxs)(tR.l.Item,{"aria-label":N,variant:"danger",onSelect:r,children:[a,"Delete"]}),g[8]=N,g[9]=r,g[10]=i):i=g[10],g[11]!==n||g[12]!==i?(s=(0,m.jsx)(tI.W.Overlay,{align:"end",children:(0,m.jsxs)(tR.l,{children:[n,i]})}),g[11]=n,g[12]=i,g[13]=s):s=g[13],g[14]!==t||g[15]!==s?(o=(0,m.jsx)("div",{className:"d-md-none",children:(0,m.jsxs)(tI.W,{children:[t,s]})}),g[14]=t,g[15]=s,g[16]=o):o=g[16],g[17]!==y?(l="free_text"===y.type&&(0,m.jsx)(tE.K,{onClick:()=>C(y),variant:"invisible","aria-label":"Edit",icon:O.PencilIcon}),g[17]=y,g[18]=l):l=g[18],g[19]!==y.type?(c="repository"===y.type&&(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Choose specific files",onClick:mk,icon:O.PencilIcon}),g[19]=y.type,g[20]=c):c=g[20],g[21]!==x||g[22]!==y?(d=(0,m.jsx)(tE.K,{onClick:()=>x(y),variant:"invisible","aria-label":"Delete",icon:O.TrashIcon}),g[21]=x,g[22]=y,g[23]=d):d=g[23],g[24]!==l||g[25]!==c||g[26]!==d?(u=(0,m.jsxs)("div",{className:"d-none d-md-block",children:[l,c,d]}),g[24]=l,g[25]=c,g[26]=d,g[27]=u):u=g[27],g[28]!==S||g[29]!==v||g[30]!==b?(p=S&&(0,m.jsx)(mp,{sizePercentage:b,resource:S,onSave:v,onClose:()=>C(null)}),g[28]=S,g[29]=v,g[30]=b,g[31]=p):p=g[31],g[32]!==u||g[33]!==p||g[34]!==o?(f=(0,m.jsxs)(m.Fragment,{children:[o,u,p]}),g[32]=u,g[33]=p,g[34]=o,g[35]=f):f=g[35],f},mT=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}`;case"github_issue":case"github_pull_request":return e.url;default:return e.id}};try{mN.displayName||(mN.displayName="ReferencesTable")}catch{}try{mR.displayName||(mR.displayName="RowActions")}catch{}function mk(){return alert("This feature is not implemented yet.")}let mA={page:"SpacesForm-module__page--xJLgE",header:"SpacesForm-module__header--sFJmP",headerTitleContainer:"SpacesForm-module__headerTitleContainer--QmU9Z",headerTitleDivider:"SpacesForm-module__headerTitleDivider--I6mxX",headerTitle:"SpacesForm-module__headerTitle--DT30e",referencesSizeProgressBar:"SpacesForm-module__referencesSizeProgressBar--nkA5V",referencesSizeText:"SpacesForm-module__referencesSizeText--lCv_W",contextHeader:"SpacesForm-module__contextHeader--fy6kM",attachmentsHeading:"SpacesForm-module__attachmentsHeading--jKNBX",form:"SpacesForm-module__form--WHZ7T",optionalLabel:"SpacesForm-module__optionalLabel--N9XDo",iconPreviewContainer:"SpacesForm-module__iconPreviewContainer--_iifR",iconPreviewTitle:"SpacesForm-module__iconPreviewTitle--X8BEQ",iconPreviewDescription:"SpacesForm-module__iconPreviewDescription--Oo7eF",iconAvatarContainer:"SpacesForm-module__iconAvatarContainer--lyzCt",textAreaWrapper:"SpacesForm-module__textAreaWrapper--zDXUW"};function mD({onSelect:e}){let[t,n]=(0,_.useState)([]),[r,a]=(0,_.useState)(!1),[i,s]=(0,_.useState)(void 0),o=(0,_.useCallback)(t=>{s(t),e(t)},[e]),l=(0,_.useCallback)(()=>{n([]),a(!0)},[]);return(0,_.useEffect)(()=>{(async()=>{try{let e=await (0,F.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),r=t?.owners;if(!e.ok||!r)return void l();n(r),r[0]&&o(r[0])}catch{l()}})()},[l,o]),(0,m.jsxs)(og.A,{children:[(0,m.jsx)(og.A.Label,{children:"Owner"}),(0,m.jsxs)(tI.W,{children:[(()=>{let e=i?.name||"Choose an owner",t=i?(0,m.jsx)(aa.r,{src:i.avatarUrl},i.avatarUrl):void 0;return(0,m.jsx)(tI.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,m.jsx)(tI.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(tR.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,m.jsxs)(tR.l,{selectionVariant:"single",children:[t&&t.map(e=>{let{name:t,avatarUrl:n,displayName:r}=e;return(0,m.jsxs)(tR.l.Item,{selected:t===i?.name,onSelect:()=>o(e),children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(aa.r,{src:n})}),t,(0,m.jsx)(tR.l.Description,{children:r})]},t)}),!t.length&&!r&&(0,m.jsx)(tR.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),r&&(0,m.jsx)(tR.l.Item,{disabled:!0,sx:{color:"danger.fg"},children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,m.jsx)(og.A.Caption,{children:"Where we will store your space. Once created the space is not transferable."})]})}try{mD.displayName||(mD.displayName="SpacesOwnerDropdown")}catch{}let mP="auburn";function mL({copilotSpace:e,onCancel:t}){let n,r,[a,i]=(0,_.useState)(!1),s=(0,of.S)(),{processFiles:o}=u2({onResourcesAdded:e=>{N(t=>[...t,...e])},onError:q,onUploadingChange:i}),l=async()=>{U?await s({title:"Unsaved changes",content:"You have unsaved changes. Are you sure you want to leave?",cancelButtonContent:"Keep editing",confirmButtonContent:"Discard changes",confirmButtonType:"danger"})&&t():t()};(0,lr.N)(()=>{let e=document.querySelector("header.AppHeader");e&&(e.style.display="none");let t=document.querySelector(".with-global-sidebar .application-main");return t&&(t.style.marginLeft="0"),()=>{e&&(e.style.display=""),t&&(t.style.marginLeft="")}},[]);let c=(0,sT.Z)(),{upsertCopilotSpace:d,isPending:u}=dj(e),[p,f]=(0,_.useState)(e?.iconColor??mP),{copilotSpacesConfig:{maxGeneralInstructionsLength:g,maxDescriptionLength:y}}=(0,W.X)(),[x,v]=(0,_.useState)(e?.name??""),[b,S]=(0,_.useState)(e?.description??""),[C,j]=(0,_.useState)(e?.generalInstructions??""),[w,N]=(0,_.useState)(e?.resources??[]),[I,E]=(0,_.useState)(null),R=I?.type==="Organization"||e?.ownerIsOrg?I?.name||e?.owner:void 0,[T,k]=(0,_.useState)({}),A=w.filter(e=>!e.markedForDestroy),D=(0,_.useRef)(null),P=!!e,L=(0,_.useMemo)(()=>A.reduce((e,t)=>e+(t.sizePercentage||0),0),[A]),M=(0,_.useId)(),F=L>100,B=(0,_.useMemo)(()=>({name:e?.name.trim()||"",description:(e?.description||"").trim(),generalInstructions:(e?.generalInstructions||"").trim(),owner:e?.owner||"",iconColor:e?.iconColor||mP,resources:e?.resources||[]}),[e]),U=(0,_.useMemo)(()=>x.trim()!==B.name||b.trim()!==B.description||C.trim()!==B.generalInstructions||p!==B.iconColor||w.some(e=>{if(e.markedForDestroy||!e.databaseId)return!0;if("free_text"===e.type){let t=B.resources.find(t=>t.databaseId===e.databaseId);return!t||e.text.trim()!==t.text.trim()||e.name.trim()!==t.name.trim()}}),[B,x,b,C,p,w]),$=(0,h.c)(3);$[0]!==U?(n=()=>{let e=e=>{U&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},r=[U],$[0]=U,$[1]=n,$[2]=r):(n=$[1],r=$[2]),(0,_.useEffect)(n,r);let V=async()=>{if(!u)try{let e=await d({name:x,description:b,generalInstructions:C,ownerId:I?.id,ownerType:I?.type,resources:w,iconColor:p,iconType:"SpacesIcon"});k({});let t=(0,nv.Cb)(e);return c(t)}catch(e){k(e??{})}};function q(e){k(t=>{let n={...t};for(let e of Object.keys(n))e.startsWith("resources.upload.")&&delete n[e];for(let[t,r]of e.entries())n[`resources.upload.${t+1}`]=r;return n})}let G=Object.entries(T).filter(([e])=>e.startsWith("resources.upload.")).map(([,e])=>e),z=(0,_.useCallback)(e=>{let t={...T};for(let n of e)t[n]&&delete t[n];k(t)},[T]),H=(0,_.useCallback)(e=>E(e),[]),Q=(0,_.useCallback)((e,t)=>{o(e,{source:"drag-and-drop"}),t||q([])},[o]),K=ej.W.spacesImagesEnabled&&ej.W.dotcomChatFileUpload,J=ej.W.customCopilotsFileUploads;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:mA.header,children:[(0,m.jsxs)("div",{className:mA.headerTitleContainer,children:[(0,m.jsx)(tE.K,{icon:O.XIcon,"aria-label":"Close",variant:"invisible",onClick:l,disabled:a}),(0,m.jsx)("div",{className:mA.headerTitleDivider,"aria-hidden":"true"}),(0,m.jsx)("h1",{className:mA.headerTitle,id:"page-title",children:P?"Edit space":"New space"})]}),(0,m.jsxs)(nZ.B,{align:"center",direction:"horizontal",gap:"condensed",children:[U&&e&&(0,m.jsxs)("div",{className:"fgColor-attention text-small mr-2",children:[(0,m.jsx)(O.DotFillIcon,{size:14}),(0,m.jsx)("span",{children:" Unsaved changes"})]}),(0,m.jsx)(eM.Q,{onClick:l,disabled:a,children:"Cancel"}),(0,m.jsx)(eM.Q,{type:"submit",variant:"primary",form:M,loading:u,disabled:a,children:"Save"})]})]}),(0,m.jsx)("div",{className:mA.page,children:(0,m.jsxs)("form",{id:M,className:mA.form,onSubmit:e=>{e?.preventDefault(),V()},children:[T.base&&(0,m.jsx)(nh.l,{title:"Failed to save this space",description:T.base,variant:"critical",className:"mb-2"}),(0,m.jsxs)(og.A,{children:[(0,m.jsx)(og.A.Label,{children:"Name"}),(0,m.jsx)(oy.A,{autoFocus:!0,block:!0,name:"name",value:x,onChange:e=>{v(e.target.value),z(["name","slug"])}}),T.name?(0,m.jsx)(og.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Name ",T.name]})}):T.slug?(0,m.jsx)(og.A.Validation,{variant:"error",children:(0,m.jsx)("span",{children:nv.j0})}):null,(0,m.jsx)(og.A.Caption,{children:"Memorable name that helps you find your space."})]}),(0,m.jsxs)("div",{className:mA.iconPreviewContainer,children:[(0,m.jsx)("div",{className:mA.iconAvatarContainer,children:(0,m.jsx)(di,{size:24,color:p})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:mA.iconPreviewTitle,children:"Icon"}),(0,m.jsx)("div",{className:mA.iconPreviewDescription,children:"Pick a color to make your space more recognizable."}),(0,m.jsx)(m_,{value:p,onChange:f})]})]}),!P&&(0,m.jsx)(mD,{onSelect:H}),(0,m.jsxs)(og.A,{children:[(0,m.jsxs)(og.A.Label,{required:!1,requiredIndicator:!0,children:["Description ",(0,m.jsx)("span",{className:mA.optionalLabel,children:"(optional)"})]}),(0,m.jsx)(d0.Ay,{block:!0,name:"description",value:b,rows:3,resize:"vertical",className:mA.textAreaWrapper,onChange:e=>{S(e.target.value),z(["description"])}}),T.description?(0,m.jsx)(og.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Description ",T.description]})}):(0,m.jsx)(mM,{text:b,promptCharLimit:y}),(0,m.jsx)(og.A.Caption,{children:"Displays beneath the title on your spaces overview page without impacting responses."})]}),(0,m.jsxs)(og.A,{id:"instructions",children:[(0,m.jsxs)(og.A.Label,{required:!1,requiredIndicator:!0,children:["Instructions ",(0,m.jsx)("span",{className:mA.optionalLabel,children:"(optional)"})]}),(0,m.jsx)(d0.Ay,{block:!0,name:"instructions",value:C,resize:"vertical",className:mA.textAreaWrapper,onChange:e=>{j(e.target.value),z(["general_instructions"])}}),T.general_instructions?(0,m.jsx)(og.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Instructions ",T.general_instructions]})}):(0,m.jsx)(mM,{text:C,promptCharLimit:g}),(0,m.jsx)(og.A.Caption,{children:"Changes how Copilot responds on specific questions or tasks."})]}),(0,m.jsxs)("div",{id:"attachments",children:[(0,m.jsxs)("div",{className:mA.contextHeader,children:[(0,m.jsxs)("div",{className:mA.attachmentsHeading,children:["Attachments ",(0,m.jsx)("span",{className:mA.optionalLabel,children:"(optional)"})]}),(0,m.jsxs)(nZ.B,{direction:"horizontal",align:"center",gap:"none",children:[L>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d6.z,{inline:!0,barSize:"small",progress:L,className:mA.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-L))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:mA.referencesSizeText,children:[L<1?"<1":Math.round(L),"%"]})]}),(0,m.jsx)(mg,{sizePercentage:L,findFileWorkerPath:"",owner:R,onResourcesAdded:e=>{N(t=>{let n=new Map(t.map(e=>[e.id,e]));for(let t of e)n.set(t.id,t);return Array.from(n.values())})},resourcesToSave:w,onError:q,onUploadingChange:e=>{e&&q([]),i(e)},children:(0,m.jsx)(eM.Q,{size:"small",leadingVisual:O.PlusIcon,ref:D,"aria-label":"Add attachment",title:"Add attachment",disabled:a,children:"Add"})})]})]}),F&&(0,m.jsx)(s3,{}),T["resources.repository"]&&(0,m.jsx)(s4,{}),G.length>0&&(0,m.jsx)(s5,{errorMessages:G,onDismiss:()=>q([]),className:"mb-3"}),0===A.length?(0,m.jsx)("div",{children:(0,m.jsxs)(nG.E,{border:!0,spacious:!0,children:[(0,m.jsx)(nG.E.Visual,{children:(0,m.jsx)(O.PaperclipIcon,{size:24})}),(0,m.jsx)(nG.E.Description,{children:"Add text, code files, or GitHub data to set a permanent context"})]})}):(0,m.jsx)(mN,{sizePercentage:L,resources:A,onDeleteResource:function(e){e.databaseId?N(t=>t.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t)):N(t=>t.filter(t=>t.id!==e.id))},onUpdateResource:function(e){N(w.map(t=>t.id===e.id?e:t))}})]})]})}),(J||K)&&(0,m.jsx)(mb,{onFilesDrop:Q,isUploading:a})]})}function mM(e){let t,n,r,a,i=(0,h.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(n=o.toLocaleString(),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=r):r=i[6];let c=r;return i[7]!==c||i[8]!==l?(a=(0,m.jsx)(m.Fragment,{children:l?(0,m.jsx)(og.A.Validation,{variant:"error",children:c}):(0,m.jsx)(og.A.Caption,{children:c})}),i[7]=c,i[8]=l,i[9]=a):a=i[9],a}try{mL.displayName||(mL.displayName="SpacesForm")}catch{}try{mM.displayName||(mM.displayName="CharacterCount")}catch{}function mO(){let e,t,n,r,a=(0,h.c)(14),i=(0,sT.Z)(),s=(0,nv.iI)(),{isPending:o,data:l,error:c}=(0,n_.Ao)(s);a[0]!==l||a[1]!==i?(e=function(){i((0,nv.Cb)(l))},a[0]=l,a[1]=i,a[2]=e):e=a[2];let d=e;if(a[3]!==l||a[4]!==i?(t=()=>{l&&!l.editable&&i((0,nv.Cb)(l))},n=[l,i],a[3]=l,a[4]=i,a[5]=t,a[6]=n):(t=a[5],n=a[6]),(0,_.useEffect)(t,n),c instanceof n_.i9){let e;return a[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cH,{}),a[7]=e):e=a[7],e}if(c instanceof n_.OW){let e;return a[8]!==c.protectedOrganizations?(e=(0,m.jsx)(cH,{protectedOrganizations:c.protectedOrganizations}),a[8]=c.protectedOrganizations,a[9]=e):e=a[9],e}if(o){let e;return a[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(de,{}),a[10]=e):e=a[10],e}return a[11]!==l||a[12]!==d?(r=l?.editable?(0,m.jsx)(mL,{copilotSpace:l,onCancel:d}):(0,m.jsx)(m.Fragment,{}),a[11]=l,a[12]=d,a[13]=r):r=a[13],r}try{mO.displayName||(mO.displayName="SpacesEditPage")}catch{}var mF=n(5420);let mB={metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg"};function mU(e){let t,n,r,a,i,s,o,l,c,d,u,p,f=(0,h.c)(36),{copilotSpace:g,onDelete:y,onClick:x}=e,v=g.ownerIsOrg?O.OrganizationIcon:O.PersonIcon,_="org_public"===g.visibility?O.PeopleIcon:O.LockIcon;f[0]!==g.visibility?(t=cG(g.visibility),f[0]=g.visibility,f[1]=t):t=f[1];let b=t,S=!ej.W.spacesPermissionsTabEnabled||g.adminable||g.editable,C=g.owner?`${g.owner}/${g.id}`:g.id;f[2]!==g?(n=(0,nv.Cb)(g),f[2]=g,f[3]=n):n=f[3];let j=g.iconColor;return f[4]!==j?(r=(0,m.jsx)(tM.Icon,{icon:cF,color:j}),f[4]=j,f[5]=r):r=f[5],f[6]!==g.name?(a=(0,m.jsx)(tM.Heading,{children:g.name}),f[6]=g.name,f[7]=a):a=f[7],f[8]!==g.description?(i=(0,m.jsx)(tM.Description,{children:g.description}),f[8]=g.description,f[9]=i):i=f[9],f[10]!==g||f[11]!==y||f[12]!==S?(s=S&&(0,m.jsx)(tM.Menu,{children:(0,m.jsx)(dJ,{copilot:g,onDelete:y})}),f[10]=g,f[11]=y,f[12]=S,f[13]=s):s=f[13],f[14]!==v?(o=(0,m.jsx)(v,{}),f[14]=v,f[15]=o):o=f[15],f[16]!==g.owner||f[17]!==o?(l=(0,m.jsxs)("div",{className:mB.metadataItem,children:[o,g.owner]}),f[16]=g.owner,f[17]=o,f[18]=l):l=f[18],f[19]!==_?(c=(0,m.jsx)(_,{}),f[19]=_,f[20]=c):c=f[20],f[21]!==c||f[22]!==b?(d=(0,m.jsxs)("div",{className:mB.metadataItem,children:[c,b]}),f[21]=c,f[22]=b,f[23]=d):d=f[23],f[24]!==l||f[25]!==d?(u=(0,m.jsx)(tM.Metadata,{children:(0,m.jsxs)("div",{className:mB.metadata,children:[l,d]})}),f[24]=l,f[25]=d,f[26]=u):u=f[26],f[27]!==x||f[28]!==u||f[29]!==C||f[30]!==n||f[31]!==r||f[32]!==a||f[33]!==i||f[34]!==s?(p=(0,m.jsxs)(tM,{href:n,onClick:x,children:[r,a,i,s,u]},C),f[27]=x,f[28]=u,f[29]=C,f[30]=n,f[31]=r,f[32]=a,f[33]=i,f[34]=s,f[35]=p):p=f[35],p}try{(l=function(e){let t,n,r,a,i=(0,h.c)(5),{onClick:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(tM.Icon,{icon:O.PlusIcon}),n=(0,m.jsx)(tM.Heading,{children:"Create a new space"}),r=(0,m.jsx)(tM.Description,{children:"Add attachments, repositories, and more."}),i[0]=t,i[1]=n,i[2]=r):(t=i[0],n=i[1],r=i[2]),i[3]!==s?(a=(0,m.jsxs)(tM,{onClick:s,children:[t,n,r]}),i[3]=s,i[4]=a):a=i[4],a}).displayName||(l.displayName="NewSpacesCard")}catch{}try{mU.displayName||(mU.displayName="SpacesCard")}catch{}let m$={banner:"SpacesListPage-module__banner--OV17m",underlineNav:"SpacesListPage-module__underlineNav--vpeNw",listContainer:"SpacesListPage-module__listContainer--il2mD"},mV=["personal","org","starred"];function mq(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,v,b,S,C,j,w,N,I,E,R=(0,h.c)(91),{copilotSpaces:T}=e,k=(0,z.Pk)(),A=(0,ed.Zp)(),{ssoOrganizations:D}=k,{copilotSpacesConfig:P}=(0,W.X)(),{userHasOrgs:L}=P,[M]=(0,sT.o)();if(R[0]!==M||R[1]!==L){let e=M.get("tab");"org"!==(t=mV.includes(e)?e:"personal")||L||(t="personal"),R[0]=M,R[1]=L,R[2]=t}else t=R[2];R[3]!==D?(n=D.map(mK),R[3]=D,R[4]=n):n=R[4];let F=n,[B,U]=(0,_.useState)(null),$=void 0===T;R[5]!==T?(r=T?.filter(mQ).length??0,R[5]=T,R[6]=r):r=R[6];let V=r;R[7]!==T?(a=T?.filter(mH).length??0,R[7]=T,R[8]=a):a=R[8];let q=a;R[9]!==T?(i=T?.filter(mz).length??0,R[9]=T,R[10]=i):i=R[10];let G=i;R[11]!==A?(s=()=>{A(eC.QT)},R[11]=A,R[12]=s):s=R[12];let Q=s,{mutateAsync:K}=(0,n_.$7)();R[13]!==K?(o=e=>async()=>{try{await K(e),U(null)}catch(e){U(e instanceof Error?e:Error(String(e)))}},R[13]=K,R[14]=o):o=R[14];let J=o;if(R[15]!==t||R[16]!==F||R[17]!==T||R[18]!==B||R[19]!==J||R[20]!==Q||R[21]!==$||R[22]!==q||R[23]!==V||R[24]!==D.length||R[25]!==G||R[26]!==L){let e,n,r,a,i,s,o,h=T?.filter(e=>"personal"===t?!e.ownerIsOrg:"org"===t?e.ownerIsOrg:"starred"!==t||e.starred),_=T?.length===0&&!$,j=T&&T.length>0&&h?.length===0&&!$;R[40]!==t?(e=()=>"personal"===t?"personal":"org"===t?"organization":"starred"===t?"starred":"",R[40]=t,R[41]=e):e=R[41];let w=e;u=nw.t,R[42]===Symbol.for("react.memo_cache_sentinel")?(x=(0,m.jsx)(nH,{regionName:"Spaces"}),R[42]=x):x=R[42],R[43]!==Q?(v=(0,m.jsx)(d4,{onCreateSpace:Q}),R[43]=Q,R[44]=v):v=R[44],R[45]!==B?(b=B&&(0,m.jsxs)(db.A,{variant:"danger",children:[(0,m.jsx)(O.AlertIcon,{}),"There was a problem deleting your space."]}),R[45]=B,R[46]=b):b=R[46],d=tb.Container,R[47]!==F||R[48]!==D.length?(n=D.length>0&&(0,m.jsx)("div",{className:m$.banner,children:(0,m.jsx)(H.x,{protectedOrgs:F,redirectURI:mW,useFullWidthStyle:!0})}),R[47]=F,R[48]=D.length,R[49]=n):n=R[49],R[50]!==n?(g=(0,m.jsx)(tb.Banner,{children:n}),R[50]=n,R[51]=g):g=R[51],R[52]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsxs)(tb.Header,{children:[(0,m.jsx)(tb.Icon,{icon:(0,m.jsx)(cF,{size:32})}),(0,m.jsx)(tb.Title,{children:"Set context once. Chat again and again"}),(0,m.jsx)(tb.Description,{children:"Create and share a custom Copilot experience using a collection of GitHub repositories, files, and other content."})]}),R[52]=y):y=R[52],p=m$.listContainer,R[53]===Symbol.for("react.memo_cache_sentinel")?(r={search:"?tab=personal"},R[53]=r):r=R[53];let N="personal"===t?"page":void 0;R[54]!==V||R[55]!==N?(a=(0,m.jsx)(mF.O.Item,{as:eo.N,to:r,"aria-current":N,icon:O.SmileyIcon,counter:V,children:"Yours"}),R[54]=V,R[55]=N,R[56]=a):a=R[56],R[57]!==t||R[58]!==q||R[59]!==L?(i=L&&(0,m.jsx)(mF.O.Item,{as:eo.N,to:{search:"?tab=org"},"aria-current":"org"===t?"page":void 0,icon:O.OrganizationIcon,counter:q,children:"Organizations"}),R[57]=t,R[58]=q,R[59]=L,R[60]=i):i=R[60],R[61]===Symbol.for("react.memo_cache_sentinel")?(s={search:"?tab=starred"},R[61]=s):s=R[61];let I="starred"===t?"page":void 0;R[62]!==G||R[63]!==I?(o=(0,m.jsx)(mF.O.Item,{as:eo.N,to:s,"aria-current":I,icon:O.StarIcon,counter:G,children:"Starred"}),R[62]=G,R[63]=I,R[64]=o):o=R[64],R[65]!==a||R[66]!==i||R[67]!==o?(f=(0,m.jsx)("div",{className:m$.underlineNav,children:(0,m.jsxs)(mF.O,{"aria-label":"Spaces",children:[a,i,o]})}),R[65]=a,R[66]=i,R[67]=o,R[68]=f):f=R[68],c=tb.Section,l=tb.Section.Grid,S=$,C=_?(0,m.jsxs)(tb.Section.Grid.Empty,{children:[(0,m.jsx)("p",{children:"Spaces you create will appear here."}),(0,m.jsx)(eM.Q,{onClick:Q,children:"New space"})]}):j?(0,m.jsxs)(tb.Section.Grid.Empty,{children:["starred"===w()?(0,m.jsx)(O.StarIcon,{size:24}):(0,m.jsx)(O.SearchIcon,{size:24}),(0,m.jsxs)("p",{children:["No ",w()," spaces found."]})]}):h?.map?.(e=>(0,m.jsx)(mU,{copilotSpace:e,onDelete:J(e),onClick:mG},e.owner?`${e.owner}/${e.id}`:e.id)),R[15]=t,R[16]=F,R[17]=T,R[18]=B,R[19]=J,R[20]=Q,R[21]=$,R[22]=q,R[23]=V,R[24]=D.length,R[25]=G,R[26]=L,R[27]=l,R[28]=c,R[29]=d,R[30]=u,R[31]=p,R[32]=f,R[33]=g,R[34]=y,R[35]=x,R[36]=v,R[37]=b,R[38]=S,R[39]=C}else l=R[27],c=R[28],d=R[29],u=R[30],p=R[31],f=R[32],g=R[33],y=R[34],x=R[35],v=R[36],b=R[37],S=R[38],C=R[39];return R[69]!==l||R[70]!==S||R[71]!==C?(j=(0,m.jsx)(l,{loading:S,children:C}),R[69]=l,R[70]=S,R[71]=C,R[72]=j):j=R[72],R[73]!==c||R[74]!==j?(w=(0,m.jsx)(c,{children:j}),R[73]=c,R[74]=j,R[75]=w):w=R[75],R[76]!==p||R[77]!==f||R[78]!==w?(N=(0,m.jsxs)("div",{className:p,children:[f,w]}),R[76]=p,R[77]=f,R[78]=w,R[79]=N):N=R[79],R[80]!==d||R[81]!==g||R[82]!==y||R[83]!==N?(I=(0,m.jsxs)(d,{children:[g,y,N]}),R[80]=d,R[81]=g,R[82]=y,R[83]=N,R[84]=I):I=R[84],R[85]!==u||R[86]!==x||R[87]!==v||R[88]!==b||R[89]!==I?(E=(0,m.jsxs)(u,{fallback:x,children:[v,b,I]}),R[85]=u,R[86]=x,R[87]=v,R[88]=b,R[89]=I,R[90]=E):E=R[90],E}function mW(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function mG(){(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})}function mz(e){return e.starred}function mH(e){return e.ownerIsOrg}function mQ(e){return!e.ownerIsOrg}function mK(e){return e.login}try{mq.displayName||(mq.displayName="SpacesListPage")}catch{}function mJ(){let e,t,n=(0,h.c)(4),r=(0,sT.Z)();n[0]!==r?(e=function(){r(eC.VR)},n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(0,m.jsx)(mL,{onCancel:a}),n[2]=a,n[3]=t):t=n[3],t}try{mJ.displayName||(mJ.displayName="SpacesNewPage")}catch{}let mX={container:"InlineEdit-module__container--LSCGU",displayButton:"InlineEdit-module__displayButton--aJore",text:"InlineEdit-module__text--daHG8",editIcon:"InlineEdit-module__editIcon--p137S",input:"InlineEdit-module__input--iA2Yi",confirmButton:"InlineEdit-module__confirmButton--FBHwk"};function mY(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g=(0,h.c)(43),{defaultValue:y,onConfirm:x,confirmButtonLabel:b,className:S,size:C}=e,j=void 0===b?"Save":b,[w,N]=(0,_.useState)(!1),[I,E]=(0,_.useState)(y),R=(0,_.useRef)(null);g[0]!==y?(t=()=>{E(y)},n=[y],g[0]=y,g[1]=t,g[2]=n):(t=g[1],n=g[2]),(0,_.useEffect)(t,n),g[3]!==w?(r=()=>{if(w&&R.current){R.current.focus();let e=R.current.value.length;R.current.setSelectionRange(e,e)}},a=[w],g[3]=w,g[4]=r,g[5]=a):(r=g[4],a=g[5]),(0,_.useEffect)(r,a),g[6]!==y?(i=()=>{E(y),N(!0)},g[6]=y,g[7]=i):i=g[7];let T=i;g[8]!==y||g[9]!==x||g[10]!==I?(s=()=>{let e=I.trim();e&&e!==y&&x(e),N(!1)},g[8]=y,g[9]=x,g[10]=I,g[11]=s):s=g[11];let k=s;g[12]!==y?(o=()=>{N(!1),E(y)},g[12]=y,g[13]=o):o=g[13];let A=o;g[14]!==A||g[15]!==k?(l=e=>{"Enter"===e.key?(e.preventDefault(),k()):"Escape"===e.key&&(e.preventDefault(),A())},g[14]=A,g[15]=k,g[16]=l):l=g[16];let D=l,P=`${void 0===C?14:C}px`;g[17]!==P?(c={fontSize:P,lineHeight:1.5},g[17]=P,g[18]=c):c=g[18];let L=c;if(w){let e,t,n,r,a;return g[19]!==S?(e=(0,v.$)(mX.container,S),g[19]=S,g[20]=e):e=g[20],g[21]===Symbol.for("react.memo_cache_sentinel")?(t=e=>E(e.target.value),g[21]=t):t=g[21],g[22]!==D||g[23]!==L||g[24]!==I?(n=(0,m.jsx)("input",{ref:R,type:"text",value:I,onChange:t,onKeyDown:D,className:mX.input,style:L}),g[22]=D,g[23]=L,g[24]=I,g[25]=n):n=g[25],g[26]!==j||g[27]!==k?(r=(0,m.jsx)(tE.K,{size:"medium",icon:O.CheckIcon,"aria-label":j,onClick:k,className:mX.confirmButton}),g[26]=j,g[27]=k,g[28]=r):r=g[28],g[29]!==e||g[30]!==n||g[31]!==r?(a=(0,m.jsxs)("div",{className:e,children:[n,r]}),g[29]=e,g[30]=n,g[31]=r,g[32]=a):a=g[32],a}return g[33]!==S?(d=(0,v.$)(mX.container,mX.displayButton,S),g[33]=S,g[34]=d):d=g[34],g[35]!==y?(u=(0,m.jsx)("span",{className:mX.text,children:y}),g[35]=y,g[36]=u):u=g[36],g[37]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(O.PencilIcon,{className:mX.editIcon,size:16}),g[37]=p):p=g[37],g[38]!==T||g[39]!==L||g[40]!==d||g[41]!==u?(f=(0,m.jsxs)("button",{className:d,onClick:T,style:L,children:[u,p]}),g[38]=T,g[39]=L,g[40]=d,g[41]=u,g[42]=f):f=g[42],f}try{mY.displayName||(mY.displayName="InlineEdit")}catch{}let mZ=e=>{let t,n,r,a,i,s,o,l=(0,h.c)(15),c=(0,c7.jE)(),[d,u]=(0,_.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;u(!0);let n=(0,nv.fn)(e),r={custom_copilot:{resources_attributes:t.map(m0)}},a=await (0,F.lS)(n,{method:"PUT",body:r}),i=await a.json();if(!a.ok&&404!==a.status)throw Error("Unable to delete resources.");return i}},l[0]=e,l[1]=t):t=l[1];let m=(0,rn.n)(t);return l[2]!==m?({mutateAsync:n,isPending:r,...a}=m,l[2]=m,l[3]=n,l[4]=r,l[5]=a):(n=l[3],r=l[4],a=l[5]),l[6]!==e||l[7]!==r||l[8]!==c||l[9]!==d?(i=()=>{e&&d&&!r&&(u(!1),c.invalidateQueries({queryKey:(0,c6.dp)(e)}))},s=[d,r,e,c],l[6]=e,l[7]=r,l[8]=c,l[9]=d,l[10]=i,l[11]=s):(i=l[10],s=l[11]),(0,_.useEffect)(i,s),l[12]!==n||l[13]!==a?(o={deleteCopilotSpaceResources:n,...a},l[12]=n,l[13]=a,l[14]=o):o=l[14],o};function m0(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:dC(e)}}function m1({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:r}){let{upsertCopilotSpace:a,isPending:i}=dj(e),[s,o]=(0,_.useState)(e.generalInstructions??""),[l,c]=(0,_.useState)(null);async function d(){try{let e=await a({generalInstructions:s});n?.(e),t()}catch(e){e instanceof Error?c(e.message):c("Failed to save instructions")}}function u(){o(e.generalInstructions??""),t()}return(0,m.jsx)(n7.l,{width:"xlarge",height:"large",title:"Instructions",onClose:u,returnFocusRef:r,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:d1.instructionsContainer,children:[l&&(0,m.jsx)(nh.l,{variant:"critical",title:l,className:"mb-2"}),(0,m.jsxs)(og.A,{className:d1.grow,children:[(0,m.jsx)(og.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,m.jsx)(d0.Ay,{block:!0,value:s,onChange:e=>o(e.target.value),placeholder:"Set up instructions for Copilot in this space",resize:"none",className:d1.grow}),(0,m.jsx)(m2,{text:s,promptCharLimit:4e3})]})]}),renderFooter:()=>(0,m.jsxs)("div",{className:d1.footerContainer,children:[(0,m.jsx)(eM.Q,{variant:"default",onClick:u,children:"Cancel"}),(0,m.jsx)(eM.Q,{loading:i,loadingAnnouncement:"Saving instructions",variant:"primary",onClick:()=>{d()},children:"Save"})]})})}function m2(e){let t,n,r,a,i=(0,h.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(n=o.toLocaleString(),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(r=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=r):r=i[6];let c=r;return i[7]!==c||i[8]!==l?(a=l?(0,m.jsx)(og.A.Validation,{variant:"error",children:c}):(0,m.jsx)(og.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=a):a=i[9],a}try{m1.displayName||(m1.displayName="InstructionsDialog")}catch{}try{m2.displayName||(m2.displayName="CharacterCount")}catch{}let m3={header:"SpacesConversation-module__header--yYw2C",main:"SpacesConversation-module__main--rHPYg",spaceTitle:"SpacesConversation-module__spaceTitle--rnry2",spaceDescription:"SpacesConversation-module__spaceDescription--yTlFM",chatInput:"SpacesConversation-module__chatInput--juHnz",instructions:"SpacesConversation-module__instructions--YEbs0",instructionsHeader:"SpacesConversation-module__instructionsHeader--JURtJ",instructionsIcon:"SpacesConversation-module__instructionsIcon--M9GHq",instructionsTitle:"SpacesConversation-module__instructionsTitle--C3f26",instructionsContent:"SpacesConversation-module__instructionsContent--pQ5qq",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--BMxEo",content:"SpacesConversation-module__content--PbVzu",tabContainer:"SpacesConversation-module__tabContainer--dIRV0",underlineNav:"SpacesConversation-module__underlineNav--mhAGr",attachButton:"SpacesConversation-module__attachButton--mbw_3",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--CfL1a",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--cG4jw",tabEmptyText:"SpacesConversation-module__tabEmptyText--ITZUD",tabContent:"SpacesConversation-module__tabContent--xIi_S",conversationsList:"SpacesConversation-module__conversationsList--Ht70O",conversationItem:"SpacesConversation-module__conversationItem--NUP87",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--lR7DS",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--hsYf2",conversationName:"SpacesConversation-module__conversationName--i4vaf",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--bNAHX"};function m4({customCopilotId:e,selectedThreadID:t,textAreaRef:n}){let{currentTopic:r,messages:a,streamingMessage:i,ambientError:s,threads:o}=(0,z.Pk)(),l=(0,g.b)(),[c,d]=(0,ed.ok)(),u=sk(),h=c.get("tab")||"attachments",[p,y]=(0,_.useState)(!1),[x,v]=(0,_.useState)(null),b=(0,_.useRef)(null),[S,C]=(0,_.useState)(null),[j,w]=(0,_.useState)([]),[N,I]=(0,_.useState)(null),[E,R]=(0,_.useState)(null),[T,k]=(0,_.useState)(!1),[A,D]=(0,_.useState)([]),P=sE((0,_.useRef)(r),a.length),{isPending:M,data:F,error:B}=(0,n_.Ao)(e),{upsertCopilotSpace:U,error:$}=dj(S||void 0),{deleteCopilotSpaceResources:V,error:q}=mZ(S||void 0),{processFiles:G}=u2({onResourcesAdded:e=>void ea(e),onError:D,onUploadingChange:k}),{copilotSpacesConfig:{maxResourceCount:H}}=(0,W.X)(),Q=$||B||E||q,K=(0,_.useRef)(!1),J=j.filter(e=>!e.markedForDestroy).length,X=(0,_.useMemo)(()=>{if(!S)return[];cW(o);let t=new Map(Array.from(o.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return l.sortThreads(t).slice(0,10)},[o,e,l,S]),Y=(0,_.useMemo)(()=>S?S.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[S]);(0,_.useEffect)(()=>{F&&(C(F),w(e=>F.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:F})),l.clearCurrentReferences(["image"])},[F,l]),(0,_.useEffect)(()=>()=>{K.current||(l.clearCurrentReferences(),K.current=!1)},[l,e]);let Z=(0,_.useCallback)(async e=>{K.current=!0,await P(e)},[P]),ee=(0,_.useCallback)(e=>{d({tab:e},{replace:!0})},[d]),et=(0,_.useCallback)(e=>{l.deleteThread(e)},[l]);async function en(e){if(w(t=>{let n=[...t];return e.databaseId?n.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t):n.filter(t=>t.id!==e.id)}),S)try{await V([e]),R(null)}catch{w(t=>(t.push(e),t))}}async function er(e){let t=[];if(w(n=>t=n.map(t=>t.id===e.id?e:t)),S)try{await U({...S,resources:t}),R(null)}catch{w(S.resources)}}let ea=(0,_.useCallback)(async e=>{let t=[];w(n=>{let r=new Map(n.map(e=>[e.id,e]));for(let t of e)r.set(t.id,t);return t=Array.from(r.values())});try{await U({...S,resources:t}),R(null)}catch{S&&w(S.resources)}},[S,U]),ei=(0,_.useCallback)(()=>{R(`You can select a maximum of ${H} sources`)},[H]),es=(0,_.useCallback)((e,t)=>{G(e,{source:"drag-and-drop"}),t||D([])},[G]),eo=(0,_.useCallback)(async e=>{if(S){I(e);try{let t=await U({name:e});C(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),I(null),R(null)}catch{C(S),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:S}),I(null)}}},[S,U,l]);if(B instanceof n_.i9)return(0,m.jsx)(cH,{});if(M||!S)return(0,m.jsx)(lU,{});let el=S.ownerIsOrg?S.owner:void 0,ec=N??S.name;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d4,{}),(0,m.jsx)(nw.t,{fallback:(0,m.jsx)(nH,{regionName:"This space"}),children:(0,m.jsxs)(L.Container,{width:"small",children:[(0,m.jsxs)("div",{className:m3.header,children:[(0,m.jsx)("div",{className:m3.main,children:(0,m.jsx)("h1",{className:m3.spaceTitle,children:(0,m.jsx)(mY,{defaultValue:ec,onConfirm:eo,size:24})})}),S.description&&(0,m.jsx)("p",{className:m3.spaceDescription,children:S.description})]}),(0,m.jsxs)("div",{className:m3.chatInput,children:[s&&(0,m.jsx)(sA.P,{ambientError:s}),(0,m.jsx)(f.V,{textAreaRef:n,onSubmit:Z,isStreaming:!!i,size:"large",showModelPicker:!0,onNewThreadSelected:u},t)]}),(0,m.jsxs)("button",{ref:b,className:m3.instructions,onClick:()=>y(!0),"aria-haspopup":"dialog","aria-expanded":p,children:[(0,m.jsxs)("div",{className:m3.instructionsHeader,children:[(0,m.jsx)(O.SlidersIcon,{size:16,className:m3.instructionsIcon}),(0,m.jsx)("h2",{className:m3.instructionsTitle,children:"Instructions"})]}),S.generalInstructions?(0,m.jsx)("p",{className:m3.instructionsContent,children:S.generalInstructions}):(0,m.jsx)("p",{className:m3.instructionsEmptyState,children:"Set up instructions for Copilot in this space"})]}),Q&&(0,m.jsx)(nh.l,{title:E?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof Q?Q:"object"==typeof Q&&null!==Q&&"base"in Q?String(Q.base):Q instanceof Error?Q.message:"An error occurred"}),A.length>0&&(0,m.jsx)(s5,{errorMessages:A,onDismiss:()=>D([])}),(0,m.jsxs)("div",{className:m3.content,children:[(0,m.jsxs)("div",{className:m3.tabContainer,children:[(0,m.jsx)("div",{className:m3.underlineNav,children:(0,m.jsxs)(mF.O,{"aria-label":"Space content",children:[(0,m.jsx)(mF.O.Item,{"aria-current":"attachments"===h?"page":void 0,onClick:()=>ee("attachments"),counter:J,children:"Sources"}),(0,m.jsx)(mF.O.Item,{"aria-current":"conversations"===h?"page":void 0,onClick:()=>ee("conversations"),counter:X.length,children:"Conversations"})]})}),S.editable&&(0,m.jsx)("div",{className:m3.attachButton,children:J>=H?(0,m.jsx)(eM.Q,{leadingVisual:O.PlusIcon,onClick:ei,children:"Add sources"}):(0,m.jsx)(mg,{sizePercentage:Y,findFileWorkerPath:"",owner:el,onResourcesAdded:ea,resourcesToSave:j,resourceCounts:{currentResourceCount:J,maxResourceCount:H},onError:D,onUploadingChange:e=>{e&&D([]),k(e)},children:(0,m.jsx)(eM.Q,{leadingVisual:O.PlusIcon,children:"Add sources"})})})]}),(0,m.jsx)("div",{className:m3.tabContent,children:(()=>{if("attachments"===h){let e=j.filter(e=>!e.markedForDestroy);return e.length>0?(0,m.jsx)(mN,{resources:e,sizePercentage:Y,onDeleteResource:en,onUpdateResource:er}):(0,m.jsxs)("div",{className:m3.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:m3.tabEmptyTitle,children:"Welcome"}),(0,m.jsx)("p",{className:m3.tabEmptyText,children:S?.editable?"Add sources to your space once and access them in every chat. Start adding your first source.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===h)return X.length>0?(0,m.jsx)("ul",{role:"menu",className:m3.conversationsList,children:X.map(e=>(0,m.jsx)(m5,{conversation:e,activeMenuConversationId:x,setActiveMenuConversationId:v,onDelete:et},e.id))}):(0,m.jsxs)("div",{className:m3.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:m3.tabEmptyTitle,children:"No conversations yet"}),(0,m.jsx)("p",{className:m3.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),p&&(0,m.jsx)(m1,{copilotSpace:S,onClose:()=>y(!1),returnFocusRef:b,onSaved:e=>{C(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(ej.W.customCopilotsFileUploads||ej.W.spacesImagesEnabled&&ej.W.dotcomChatFileUpload)&&(0,m.jsx)(mb,{onFilesDrop:es,isUploading:T})]})}function m5(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,_=(0,h.c)(38),{conversation:b,activeMenuConversationId:S,setActiveMenuConversationId:C,onDelete:j}=e,w=(0,sT.Z)();_[0]!==b?(t=(0,eC.CB)(b),_[0]=b,_[1]=t):t=_[1];let N=t,I=`${eC.Jz}/c/${b.id}`;_[2]!==w||_[3]!==I?(n=()=>w(I),r=e=>{"Enter"===e.key&&w(I)},_[2]=w,_[3]=I,_[4]=n,_[5]=r):(n=_[4],r=_[5]);let E=null!==S&&m3.conversationItemMenuOpen;_[6]!==E?(a=(0,v.$)(m3.conversationItem,E),_[6]=E,_[7]=a):a=_[7],_[8]!==N?(i=(0,m.jsx)("div",{className:m3.conversationName,children:N}),_[8]=N,_[9]=i):i=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(O.ClockIcon,{}),_[10]=s):s=_[10],_[11]!==b.updatedAt?(o=new Date(b.updatedAt),_[11]=b.updatedAt,_[12]=o):o=_[12],_[13]!==o?(l=(0,m.jsxs)("div",{className:m3.conversationTimestamp,children:[s," ",(0,m.jsx)(ai.A,{format:"relative",prefix:"",date:o})]}),_[13]=o,_[14]=l):l=_[14],_[15]!==i||_[16]!==l?(c=(0,m.jsxs)("div",{className:m3.conversationItemLeftColumn,children:[i,l]}),_[15]=i,_[16]=l,_[17]=c):c=_[17];let R=S===b.id;return _[18]!==b.id||_[19]!==C?(d=e=>{C(e?b.id:null)},_[18]=b.id,_[19]=C,_[20]=d):d=_[20],_[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{variant:"invisible","aria-label":"Conversation options",icon:O.KebabHorizontalIcon,onClick:m7})}),_[21]=u):u=_[21],_[22]!==b||_[23]!==j?(p=()=>j(b),_[22]=b,_[23]=j,_[24]=p):p=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.TrashIcon,{})}),_[25]=f):f=_[25],_[26]!==p?(g=(0,m.jsx)(tI.W.Overlay,{onClick:m6,align:"end",children:(0,m.jsx)(tR.l,{children:(0,m.jsxs)(tR.l.Item,{variant:"danger",onSelect:p,children:[f,"Delete"]})})}),_[26]=p,_[27]=g):g=_[27],_[28]!==R||_[29]!==d||_[30]!==g?(y=(0,m.jsxs)(tI.W,{open:R,onOpenChange:d,children:[u,g]}),_[28]=R,_[29]=d,_[30]=g,_[31]=y):y=_[31],_[32]!==c||_[33]!==y||_[34]!==n||_[35]!==r||_[36]!==a?(x=(0,m.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:r,className:a,children:[c,y]}),_[32]=c,_[33]=y,_[34]=n,_[35]=r,_[36]=a,_[37]=x):x=_[37],x}function m6(e){return e.stopPropagation()}function m7(e){e.stopPropagation()}try{m4.displayName||(m4.displayName="SpacesConversation")}catch{}try{m5.displayName||(m5.displayName="ConversationItem")}catch{}let m8=()=>{let e,t,n,r,a=(0,h.c)(8),i=(0,c7.jE)();a[0]!==i?(e={onSuccess:async()=>i.invalidateQueries({queryKey:c6.O6}),mutationFn:m9},a[0]=i,a[1]=e):e=a[1];let s=(0,rn.n)(e);return a[2]!==s?({mutateAsync:t,...n}=s,a[2]=s,a[3]=t,a[4]=n):(t=a[3],n=a[4]),a[5]!==t||a[6]!==n?(r={createDefaultCopilotSpace:t,...n},a[5]=t,a[6]=n,a[7]=r):r=a[7],r};async function m9(e){let t={copilot_space:{}};t.copilot_space={owner_id:e.owner.id,owner_type:e.owner.type};let n=await (0,F.lS)("/copilot/spaces/default",{method:"POST",body:t}),r=await n.json();if(!n.ok)throw r.errorMessages;return r}function he(e){let t,n,r,a,i,s,o,l=(0,h.c)(26),{primary:c}=e,d=void 0!==c&&c,u=(0,sT.Z)(),{createDefaultCopilotSpace:p,isPending:f}=m8(),{data:g,isLoading:y,isError:x}=(0,rr.I)({queryKey:["copilot-owners"],queryFn:async()=>{let e=await (0,F.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),n=t?.owners;if(!e.ok||!n)throw Error("Failed to fetch owners");return n}});l[0]!==g?(t=void 0===g?[]:g,l[0]=g,l[1]=t):t=l[1];let v=t;l[2]!==p||l[3]!==f||l[4]!==u?(n=async e=>{if(!f&&e)try{let t=await p({owner:e}),n=(0,nv.Cb)(t);return u(n)}catch{throw Error("Failed to create space")}},l[2]=p,l[3]=f,l[4]=u,l[5]=n):n=l[5];let _=n;l[6]!==_?(r=(e,t)=>{t&&((0,e1.BI)("copilot-spaces.click",{target:"CREATE_SPACE",isDefault:e,owner:t.displayName}),_(t))},l[6]=_,l[7]=r):r=l[7];let b=r;if(x){let e,t=d?"primary":"default";return l[8]!==t?(e=(0,m.jsx)(eM.Q,{variant:t,disabled:!0,children:"Create space"}),l[8]=t,l[9]=e):e=l[9],e}let S=d?"primary":"default",C=f||y;return l[10]!==b||l[11]!==v[0]?(a=()=>b(!0,v[0]),l[10]=b,l[11]=v[0],l[12]=a):a=l[12],l[13]!==S||l[14]!==C||l[15]!==a?(i=(0,m.jsx)(eM.Q,{variant:S,loading:C,onClick:a,children:"Create space"}),l[13]=S,l[14]=C,l[15]=a,l[16]=i):i=l[16],l[17]!==b||l[18]!==y||l[19]!==f||l[20]!==v||l[21]!==d?(s=!f&&!y&&(0,m.jsxs)(tI.W,{children:[(0,m.jsx)(tI.W.Button,{"aria-label":"Select an owner",icon:O.TriangleDownIcon,variant:d?"primary":"default"}),(0,m.jsx)(tI.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,m.jsx)(tR.l,{children:(0,m.jsxs)(tR.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:[(0,m.jsx)(tR.l.GroupHeading,{children:"Select owner"}),(0,m.jsx)(tR.l,{selectionVariant:"single",children:v.map(e=>{let{name:t,avatarUrl:n,displayName:r}=e;return(0,m.jsxs)(tR.l.Item,{onSelect:()=>b(!1,e),children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(aa.r,{src:n})}),t,(0,m.jsx)(tR.l.Description,{children:r})]},t)})})]})})})]}),l[17]=b,l[18]=y,l[19]=f,l[20]=v,l[21]=d,l[22]=s):s=l[22],l[23]!==s||l[24]!==i?(o=(0,m.jsxs)(oT.A,{children:[i,s]}),l[23]=s,l[24]=i,l[25]=o):o=l[25],o}try{he.displayName||(he.displayName="CreateSpaceButton")}catch{}let ht={banner:"SpacesView-module__banner--fwXon",button:"SpacesView-module__button--TkcJp",counter:"SpacesView-module__counter--vNRTG",disabledButton:"SpacesView-module__disabledButton--c3cFi",description:"SpacesView-module__description--jvOb1",filterButtons:"SpacesView-module__filterButtons--wdtfW",metadata:"SpacesView-module__metadata--juj8j",metadataItem:"SpacesView-module__metadataItem--zJqzM"};function hn(e){let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(32),{copilotSpace:f,onDelete:g,onClick:y}=e,x=f.ownerIsOrg?O.OrganizationIcon:O.PersonIcon,v="org_public"===f.visibility?O.PeopleIcon:O.LockIcon;p[0]!==f.visibility?(t=cG(f.visibility),p[0]=f.visibility,p[1]=t):t=p[1];let _=t,b=!ej.W.spacesPermissionsTabEnabled||f.adminable||f.editable;return p[2]!==f?(n=(0,nv.Cb)(f),p[2]=f,p[3]=n):n=p[3],p[4]!==f.name?(r=(0,m.jsx)(M.qJ.Item.Title,{children:f.name}),p[4]=f.name,p[5]=r):r=p[5],p[6]!==f.description?(a=(0,m.jsx)(M.qJ.Item.Description,{children:(0,m.jsx)("div",{className:ht.description,children:f.description})}),p[6]=f.description,p[7]=a):a=p[7],p[8]!==x?(i=(0,m.jsx)(x,{size:16}),p[8]=x,p[9]=i):i=p[9],p[10]!==f.owner||p[11]!==i?(s=(0,m.jsxs)("span",{className:ht.metadataItem,children:[i,f.owner]}),p[10]=f.owner,p[11]=i,p[12]=s):s=p[12],p[13]!==v?(o=(0,m.jsx)(v,{size:16}),p[13]=v,p[14]=o):o=p[14],p[15]!==o||p[16]!==_?(l=(0,m.jsxs)("span",{className:ht.metadataItem,children:[o,_]}),p[15]=o,p[16]=_,p[17]=l):l=p[17],p[18]!==s||p[19]!==l?(c=(0,m.jsx)(M.qJ.Item.Metadata,{children:(0,m.jsxs)("div",{className:ht.metadata,children:[s,l]})}),p[18]=s,p[19]=l,p[20]=c):c=p[20],p[21]!==f||p[22]!==g||p[23]!==b?(d=b&&(0,m.jsx)(M.qJ.Item.Actions,{children:(0,m.jsx)(dJ,{copilot:f,onDelete:g})}),p[21]=f,p[22]=g,p[23]=b,p[24]=d):d=p[24],p[25]!==y||p[26]!==d||p[27]!==n||p[28]!==r||p[29]!==a||p[30]!==c?(u=(0,m.jsxs)(M.qJ.Item,{href:n,onClick:y,children:[r,a,c,d]}),p[25]=y,p[26]=d,p[27]=n,p[28]=r,p[29]=a,p[30]=c,p[31]=u):u=p[31],u}function hr(e){let t,n,r,a,i,s,o,l,c,d,u,p=(0,h.c)(50),{spaces:f,starredSpaces:g,isLoading:y,onDelete:x,onSpaceClick:v}=e,[b,S]=(0,_.useState)("personal"),C=g&&g.length>0,{copilotSpacesConfig:j}=(0,W.X)(),{userHasOrgs:w}=j;if(p[0]!==C?(t=()=>{C&&S("starred")},n=[C],p[0]=C,p[1]=t,p[2]=n):(t=p[1],n=p[2]),(0,_.useEffect)(t,n),p[3]!==b||p[4]!==C||p[5]!==y||p[6]!==x||p[7]!==v||p[8]!==f||p[9]!==w){let e,t,n,d,u,h,g=f?.filter(e=>"starred"===b?e.starred:"personal"===b?!e.ownerIsOrg:"org"!==b||e.ownerIsOrg),_=f?.length===0&&!y,j=f&&f.length>0&&g?.length===0&&!y;p[17]!==f?(e=f?.filter(hs).length??0,p[17]=f,p[18]=e):e=p[18];let N=e;p[19]!==f?(t=f?.filter(hi).length??0,p[19]=f,p[20]=t):t=p[20];let I=t;p[21]!==f?(n=f?.filter(ha).length??0,p[21]=f,p[22]=n):n=p[22];let E=n;a=M.qJ,p[23]!==b||p[24]!==C||p[25]!==E?(d=C&&(0,m.jsxs)("button",{onClick:()=>S("starred"),role:"tab","aria-selected":"starred"===b,"aria-controls":"spaces-list",id:"starred-tab",className:ht.button,children:["Starred ",(0,m.jsx)("span",{className:ht.counter,children:E})]}),p[23]=b,p[24]=C,p[25]=E,p[26]=d):d=p[26],p[27]!==b||p[28]!==C||p[29]!==N||p[30]!==w?(u=w||C?(0,m.jsxs)("button",{onClick:()=>S("personal"),role:"tab","aria-selected":"personal"===b,"aria-controls":"spaces-list",id:"personal-tab",className:ht.button,children:["Yours ",(0,m.jsx)("span",{className:ht.counter,children:N})]}):(0,m.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:ht.disabledButton,children:["Yours ",(0,m.jsx)("span",{className:ht.counter,children:N})]}),p[27]=b,p[28]=C,p[29]=N,p[30]=w,p[31]=u):u=p[31],p[32]!==b||p[33]!==I||p[34]!==w?(h=w&&(0,m.jsxs)("button",{onClick:()=>S("org"),role:"tab","aria-selected":"org"===b,"aria-controls":"spaces-list",id:"org-tab",className:ht.button,children:["Organizations ",(0,m.jsx)("span",{className:ht.counter,children:I})]}),p[32]=b,p[33]=I,p[34]=w,p[35]=h):h=p[35],p[36]!==d||p[37]!==u||p[38]!==h?(c=(0,m.jsx)(M.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:ht.filterButtons,children:[d,u,h]})}),p[36]=d,p[37]=u,p[38]=h,p[39]=c):c=p[39],r=M.qJ.List,i=y,s="spaces-list",o=`${b}-tab`,l=_?(0,m.jsxs)(M.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Set up once. Chat again and again."}),(0,m.jsx)(he,{})]}):j?(0,m.jsxs)(M.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Organize discussions with your team."}),(0,m.jsx)(he,{})]}):g?.map(e=>(0,m.jsx)(hn,{copilotSpace:e,onDelete:()=>x(e),onClick:v},e.owner?`${e.owner}/${e.id}`:e.id)),p[3]=b,p[4]=C,p[5]=y,p[6]=x,p[7]=v,p[8]=f,p[9]=w,p[10]=r,p[11]=a,p[12]=i,p[13]=s,p[14]=o,p[15]=l,p[16]=c}else r=p[10],a=p[11],i=p[12],s=p[13],o=p[14],l=p[15],c=p[16];return p[40]!==r||p[41]!==i||p[42]!==s||p[43]!==o||p[44]!==l?(d=(0,m.jsx)(r,{loading:i,id:s,"aria-labelledby":o,children:l}),p[40]=r,p[41]=i,p[42]=s,p[43]=o,p[44]=l,p[45]=d):d=p[45],p[46]!==a||p[47]!==c||p[48]!==d?(u=(0,m.jsxs)(a,{children:[c,d]}),p[46]=a,p[47]=c,p[48]=d,p[49]=u):u=p[49],u}function ha(e){return e.starred}function hi(e){return e.ownerIsOrg}function hs(e){return!e.ownerIsOrg}function ho(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y=(0,h.c)(31),{copilotSpaces:x}=e,v=(0,z.Pk)(),b=(0,ed.Zp)(),{ssoOrganizations:S}=v;y[0]!==S?(t=S.map(hu),y[0]=S,y[1]=t):t=y[1];let C=t,[j,w]=(0,_.useState)(null),N=void 0===x;y[2]!==x?(n=x?.filter(hd),y[2]=x,y[3]=n):n=y[3];let I=n;y[4]!==b?(r=()=>{b(eC.QT)},y[4]=b,y[5]=r):r=y[5];let E=r,{mutateAsync:R}=(0,n_.$7)();y[6]!==R?(a=async e=>{try{await R(e),w(null)}catch(e){w(e instanceof Error?e:Error(String(e)))}},y[6]=R,y[7]=a):a=y[7];let T=a;return y[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(nH,{regionName:"Spaces"}),y[8]=i):i=y[8],y[9]!==E?(s=(0,m.jsx)(d4,{onCreateSpace:E}),y[9]=E,y[10]=s):s=y[10],y[11]!==j?(o=j&&(0,m.jsxs)(db.A,{variant:"danger",children:[(0,m.jsx)(O.AlertIcon,{}),"There was a problem deleting your space."]}),y[11]=j,y[12]=o):o=y[12],y[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(L.Title,{children:"Spaces"}),c=(0,m.jsx)(L.Description,{children:"A persistent space that remembers your code, files, and preferences across conversations."}),y[13]=l,y[14]=c):(l=y[13],c=y[14]),y[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(L.Header,{children:[l,c,(0,m.jsx)(L.Actions,{children:(0,m.jsx)(he,{primary:!0})})]}),y[15]=d):d=y[15],y[16]!==C||y[17]!==S.length?(u=S.length>0&&(0,m.jsx)("div",{className:ht.banner,children:(0,m.jsx)(H.x,{protectedOrgs:C,redirectURI:hl})}),y[16]=C,y[17]=S.length,y[18]=u):u=y[18],y[19]!==x||y[20]!==T||y[21]!==N||y[22]!==I?(p=(0,m.jsx)(L.Section,{children:(0,m.jsx)(hr,{spaces:x,starredSpaces:I,isLoading:N,onDelete:T,onSpaceClick:hc})}),y[19]=x,y[20]=T,y[21]=N,y[22]=I,y[23]=p):p=y[23],y[24]!==u||y[25]!==p?(f=(0,m.jsxs)(L.Container,{width:"small",children:[d,u,p]}),y[24]=u,y[25]=p,y[26]=f):f=y[26],y[27]!==f||y[28]!==s||y[29]!==o?(g=(0,m.jsxs)(nw.t,{fallback:i,children:[s,o,f]}),y[27]=f,y[28]=s,y[29]=o,y[30]=g):g=y[30],g}function hl(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function hc(){(0,e1.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function hd(e){return e.starred}function hu(e){return e.login}try{hn.displayName||(hn.displayName="SpacesListItem")}catch{}try{hr.displayName||(hr.displayName="SpacesList")}catch{}try{ho.displayName||(ho.displayName="SpacesView")}catch{}function hm(){let e,t,n,r,a,i,s,o,l,c,d,u,p,f,g,y=(0,h.c)(45),x=(0,z.Pk)(),{customCopilots:b}=x,{reloadQuota:S}=(0,ny.xR)(),C=(0,_.useRef)(null),j=ne(),w=ej.W.navigableRefs?j:C,N=(0,nd.tZ)(),I=(0,eS.nu)((0,z.A3)("activePlugin")),E=(0,ed.zy)(),R=(0,n_.BV)(),T=(0,nv.y_)(),k=R&&T;y[0]!==R||y[1]!==E?(e=R&&(0,nv.zY)(E),y[0]=R,y[1]=E,y[2]=e):e=y[2];let A=e;y[3]!==R||y[4]!==E?(t=R&&(0,nv.E1)(E),y[3]=R,y[4]=E,y[5]=t):t=y[5];let D=t,P=(0,nv.iI)(),L=ej.W.spacesV3UI;(0,n_.e9)(R),y[6]!==S||y[7]!==w?(n=()=>{window.setTimeout(()=>{w.current?.focus()},1),S("new_thread_focus")},y[6]=S,y[7]=w,y[8]=n):n=y[8];let M=n,O=(0,_.useRef)(null);y[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>!!O.current&&O.current.clientWidth<=1024,y[9]=r):r=y[9];let[F,B]=(0,_.useState)(r);y[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>O.current?O.current.clientWidth>1024&&(nx.J.getImmersiveSidebarCollapsedState()??!0):nx.J.getImmersiveSidebarCollapsedState()??!0,y[10]=a):a=y[10];let[U,$]=(0,_.useState)(a),[V,q]=(0,_.useState)(!1);y[11]!==F||y[12]!==U||y[13]!==V?(i=()=>{if(F)q(!V);else{let e=!U;$(e),nx.J.setImmersiveSidebarCollapsedState(e)}},y[11]=F,y[12]=U,y[13]=V,y[14]=i):i=y[14];let W=i;y[15]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{if(!O.current)return;let e=()=>{let e=O.current?.clientWidth;void 0!==e&&(e<=1024?B(!0):(B(!1),q(!1)))},t=new ResizeObserver(()=>{e()});return t.observe(O.current),e(),()=>{t.disconnect()}},y[15]=s):s=y[15],y[16]!==V?(o=[V],y[16]=V,y[17]=o):o=y[17],(0,_.useEffect)(s,o);let G=!F&&U,H=!!F&&V,Q=(0,_.useRef)(null);y[18]===Symbol.for("react.memo_cache_sentinel")?(l=()=>!!Q.current&&Q.current.clientWidth<=1280,y[18]=l):l=y[18];let[K,J]=(0,_.useState)(l);y[19]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{if(!Q.current)return;let e=()=>{let e=Q.current?.clientWidth;void 0!==e&&e>0&&J(e<=1280)},t=new ResizeObserver(e);return t.observe(Q.current),e(),()=>t.disconnect()},c=[],y[19]=c,y[20]=d):(c=y[19],d=y[20]),(0,_.useEffect)(d,c),nC();let X=!I&&K&&sJ.fullscreenPreviewPane,Y=I?.fullscreenPreviewArea&&sJ.fullscreenPluginPane;return y[21]!==X||y[22]!==Y?(u=(0,v.$)(sJ.container,X,Y),y[21]=X,y[22]=Y,y[23]=u):u=y[23],y[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),y[24]=p):p=y[24],y[25]!==I||y[26]!==P||y[27]!==b||y[28]!==G||y[29]!==H||y[30]!==M||y[31]!==W||y[32]!==A||y[33]!==D||y[34]!==K||y[35]!==F||y[36]!==k||y[37]!==E||y[38]!==N||y[39]!==x.selectedThreadID||y[40]!==w?(f=I?.PageComponent&&I?.matchPage?.(E)?(0,m.jsx)("div",{className:sJ.main,children:(0,m.jsx)(c_,{plugin:I})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:sJ.left,ref:O,hidden:K&&N,children:[A||D?null:(0,m.jsx)(cV,{isVisible:H,isPinned:G,isFloating:F,onNewThread:M,onToggle:W}),(0,m.jsx)("div",{className:sJ.main,children:k?L?(0,m.jsx)(ho,{copilotSpaces:b}):(0,m.jsx)(mq,{copilotSpaces:b}):L&&P&&(A||D)?(0,m.jsx)(m4,{customCopilotId:P,selectedThreadID:x.selectedThreadID,textAreaRef:w}):A?(0,m.jsx)(mJ,{}):D?(0,m.jsx)(mO,{}):I?.ViewComponent&&I?.matchView?.(E)?(0,m.jsx)(cb,{plugin:I}):P?L?(0,m.jsx)(m4,{customCopilotId:P,selectedThreadID:x.selectedThreadID,textAreaRef:w}):(0,m.jsx)(d5,{customCopilotId:P,selectedThreadID:x.selectedThreadID,textAreaRef:w}):(0,m.jsx)(cv,{isMobile:K,textAreaRef:w},x.selectedThreadID)})]}),(0,m.jsx)("div",{className:(0,v.$)(sJ.previewPane,N&&sJ.active),children:(0,m.jsx)("div",{className:(0,v.$)(sJ.viewer),children:(0,m.jsx)(sb,{returnFocusRef:w})})})]}),y[25]=I,y[26]=P,y[27]=b,y[28]=G,y[29]=H,y[30]=M,y[31]=W,y[32]=A,y[33]=D,y[34]=K,y[35]=F,y[36]=k,y[37]=E,y[38]=N,y[39]=x.selectedThreadID,y[40]=w,y[41]=f):f=y[41],y[42]!==u||y[43]!==f?(g=(0,m.jsxs)("div",{className:u,"data-testid":"chat-layout","data-hpc":!0,ref:Q,children:[p,f]}),y[42]=u,y[43]=f,y[44]=g):g=y[44],g}try{hm.displayName||(hm.displayName="Layout")}catch{}let hh={container:"LayoutV2-module__container--u8OYT",left:"LayoutV2-module__left--_7QRj",main:"LayoutV2-module__main--YG0Do",previewPane:"LayoutV2-module__previewPane--hqRiN",active:"LayoutV2-module__active--VfdNL",viewer:"LayoutV2-module__viewer--Z6so3",fullscreenPreviewPane:"LayoutV2-module__fullscreenPreviewPane--On6q_",fullscreenPluginPane:"LayoutV2-module__fullscreenPluginPane--_nKWb"},hp={container:"ConversationListV2-module__container--Vu0vx",condensed:"ConversationListV2-module__condensed--ev4pN",empty:"ConversationListV2-module__empty--iSmAz",list:"ConversationListV2-module__list--ew9jA",section:"ConversationListV2-module__section--gq2VW",title:"ConversationListV2-module__title--bQnk9",item:"ConversationListV2-module__item--ElFJH",link:"ConversationListV2-module__link--wqINf",text:"ConversationListV2-module__text--nq0Vl",context:"ConversationListV2-module__context--gNppp"};function hf({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:r}){let a=(0,g.b)(),{threads:i}=(0,z.Pk)(),s=(0,_.useMemo)(()=>((function(e){let t=cI();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():cE())}})(i),a.sortThreads(i).map(e=>({id:e.id,text:(0,eC.CB)(e),href:`${eC.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[i,a]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let r=new Date(t);r.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===n.toDateString()?s.push(c):c.date>r?o.push(c):c.date>a&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(s),l=0===s.length,c=(0,_.useId)();return(0,m.jsx)("nav",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:(0,v.$)(hp.container,r&&hp.condensed),children:l&&("loading"===t||"pending"===t)?(0,m.jsx)(cj.r,{lines:5}):l?(0,m.jsx)(hx,{}):(0,m.jsxs)("div",{className:hp.section,children:[(0,m.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(o).map(([t,r])=>r.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{id:`${c}_${t}`,className:hp.title,children:t}),(0,m.jsx)("ul",{className:hp.list,children:r.map(t=>(0,m.jsx)(hg,{item:t,selectedItemId:e??void 0,onSelect:n,threads:i},t.id))})]},t))]})})}function hg(e){let t,n,r,a=(0,h.c)(17),{item:i,selectedItemId:s,onSelect:o,threads:l}=e,c=i.id===s,[d,u]=(0,_.useState)(null),[p,f,g]=(0,op.B)(!1);a[0]!==s||a[1]!==l?(t=l.get(s),a[0]=s,a[1]=l,a[2]=t):t=a[2];let y=t,x=!!y?.customCopilotID,v=(0,_.useRef)(null);a[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,oh.flushSync)(()=>u(null)),v.current?.focus()},a[3]=n):n=a[3];let b=n;return a[4]!==d||a[5]!==x||a[6]!==i.href||a[7]!==i.id||a[8]!==i.text||a[9]!==p||a[10]!==o||a[11]!==c||a[12]!==s||a[13]!==f||a[14]!==g||a[15]!==l?(r=i.href&&(0,m.jsxs)("li",{className:hp.item,children:[(0,m.jsx)(ed.N_,{className:hp.link,to:i.href,"aria-current":c?"page":void 0,onClick:()=>{o(),(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:i.id,mode:"immersive"})},children:(0,m.jsx)("span",{className:hp.text,children:i.text})}),(0,m.jsx)("span",{className:hp.context,children:(0,m.jsxs)(tI.W,{anchorRef:v,children:[(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsx)(tE.K,{loading:p,icon:O.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:hy})}),(0,m.jsx)(tI.W.Overlay,{children:(0,m.jsx)(tR.l,{children:(0,m.jsx)(oj,{onOpenDialog:u,isShared:!!l.get(i.id)?.sharedID,showShare:!x})})})]})}),(0,m.jsx)(ow,{visibleDialog:d,onClose:b,threadName:i.text,threadId:i.id,selectedThreadId:s,onStartLoading:f,onFinishLoading:g})]},i.id),a[4]=d,a[5]=x,a[6]=i.href,a[7]=i.id,a[8]=i.text,a[9]=p,a[10]=o,a[11]=c,a[12]=s,a[13]=f,a[14]=g,a[15]=l,a[16]=r):r=a[16],r}function hy(){return(0,e1.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function hx(){let e,t,n=(0,h.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cC.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:hp.empty,children:[e,(0,m.jsx)(ob.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]}),n[1]=t):t=n[1],t}try{hf.displayName||(hf.displayName="ConversationList")}catch{}try{hg.displayName||(hg.displayName="ConversationListEntry")}catch{}try{hx.displayName||(hx.displayName="EmptyState")}catch{}let hv={list:"ServiceListV2-module__list--FRkxp",section:"ServiceListV2-module__section--qdeZR",item:"ServiceListV2-module__item--WngUU",link:"ServiceListV2-module__link--WKTaA",content:"ServiceListV2-module__content--WAlNe",textWrapper:"ServiceListV2-module__textWrapper--Jdl8P",text:"ServiceListV2-module__text--mt_4E",label:"ServiceListV2-module__label--mJ2Gn",condensed:"ServiceListV2-module__condensed--WOkOy"};function h_(e){let t,n,r,a,i,s,o,l,c,d,u=(0,h.c)(29),{"aria-current":p,href:f,icon:g,onLinkClick:y,id:x,displayName:_,condensed:b,label:S}=e;u[0]!==x||u[1]!==y?(t=e=>{y?.(e,x)},u[0]=x,u[1]=y,u[2]=t):t=u[2];let C=t;u[3]!==p||u[4]!==C?(n={"aria-current":p,className:hv.link,onClick:C},u[3]=p,u[4]=C,u[5]=n):n=u[5];let j=n,w=b&&hv.condensed;u[6]!==w?(r=(0,v.$)(hv.item,w),u[6]=w,u[7]=r):r=u[7],u[8]!==g?(a=(0,m.jsx)(tj.I,{size:16,icon:g}),u[8]=g,u[9]=a):a=u[9];let N=b&&hv.condensed;return u[10]!==N?(i=(0,v.$)(hv.content,N),u[10]=N,u[11]=i):i=u[11],u[12]!==_?(s=(0,m.jsx)("div",{className:hv.textWrapper,children:(0,m.jsx)("div",{className:hv.text,children:_})}),u[12]=_,u[13]=s):s=u[13],u[14]!==S?(o=(0,m.jsx)("div",{className:hv.label,children:S}),u[14]=S,u[15]=o):o=u[15],u[16]!==i||u[17]!==s||u[18]!==o?(l=(0,m.jsxs)("div",{className:i,children:[s,o]}),u[16]=i,u[17]=s,u[18]=o,u[19]=l):l=u[19],u[20]!==j||u[21]!==_||u[22]!==f||u[23]!==l||u[24]!==a?(c=(0,m.jsxs)(ed.N_,{to:f,...j,"aria-label":_,children:[a,l]}),u[20]=j,u[21]=_,u[22]=f,u[23]=l,u[24]=a,u[25]=c):c=u[25],u[26]!==c||u[27]!==r?(d=(0,m.jsx)("li",{className:hv.section,children:(0,m.jsx)("div",{className:r,children:c})}),u[26]=c,u[27]=r,u[28]=d):d=u[28],d}function hb({toggleFloatingSidebar:e,isSidebarCondensed:t}){let n=(0,z.Pk)(),{activePlugin:r,selectedThreadID:a}=n,i=(0,eS.qw)(),s=(0,g.b)(),o=sk(),l=(0,n_.BV)(),c=(0,nv.mM)(),d=!a&&!r&&!c,u=async t=>{t.metaKey||t.ctrlKey||(e(),await o({clearTopic:!0,includeThreads:!1}),(0,e1.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},h=(0,_.useCallback)(()=>{e(),s.selectPlugin(null)},[e,s]),p=(0,_.useCallback)((t,n)=>{t.metaKey||t.ctrlKey||(e(),s.selectPlugin(n))},[e,s]),f=(0,_.useMemo)(()=>[...l?[{type:"spaces",component:(0,m.jsx)(h_,{"aria-current":c?"page":void 0,displayName:"Spaces",href:eC.VR,icon:O.PackageIcon,condensed:t,id:"spaces",onLinkClick:h,label:(0,m.jsx)(ey.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...i.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,m.jsx)(h_,{"aria-current":r===e.id?"page":void 0,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:t=>p(t,e.id),label:n.label},`${e.id}-${n.id}`),displayName:n.displayName})):e.NavigationComponent?[{type:"plugin",component:(0,m.jsx)(e.NavigationComponent,{chatState:n,onLinkClick:p},e.id),displayName:e.displayName}]:[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[l,c,t,h,i,r,p,n]);return(0,m.jsxs)("ul",{className:hv.list,children:[(0,m.jsx)(h_,{"aria-current":d?"page":void 0,displayName:"New chat",href:eC.Jz,icon:eI.KJ,condensed:t,id:"home",onLinkClick:u}),f.map(e=>e.component)]})}try{h_.displayName||(h_.displayName="ServiceListItem")}catch{}try{hb.displayName||(hb.displayName="ServiceList")}catch{}let hS={container:"SidebarV2-module__container--jFUXr",toggleSidebarVertical:"SidebarV2-module__toggleSidebarVertical--hXG0e",iconLineTop:"SidebarV2-module__iconLineTop--ilMFS",iconLineBottom:"SidebarV2-module__iconLineBottom--Qktnu",header:"SidebarV2-module__header--S1J_j",sidebar:"SidebarV2-module__sidebar--ynJin",footer:"SidebarV2-module__footer--IZB3_",quicklinks:"SidebarV2-module__quicklinks--HDJr9",blankslateContainer:"SidebarV2-module__blankslateContainer--lhxBZ",toggleSidebarFloating:"SidebarV2-module__toggleSidebarFloating--UeQLw",condensed:"SidebarV2-module__condensed--Fy0Qx",floating:"SidebarV2-module__floating--XePXt",showWhenExpanded:"SidebarV2-module__showWhenExpanded--oQpI4",visible:"SidebarV2-module__visible--Y9MDw",githubLink:"SidebarV2-module__githubLink--ztTu2"},hC={userButton:"UserMenu-module__userButton--EYs8P",userAvatar:"UserMenu-module__userAvatar--Fnl7r",userContent:"UserMenu-module__userContent--bnuz8",condensed:"UserMenu-module__condensed--_bszc",menuItem:"UserMenu-module__menuItem--umjO4",userDetails:"UserMenu-module__userDetails--Y3muD",username:"UserMenu-module__username--LrpDI",description:"UserMenu-module__description--JwYEd"};function hj(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,g,y,x,b,S,C,j,w,N,I,E,R=(0,h.c)(51),{isCondensed:T}=e,k=void 0!==T&&T,A=(0,_.useRef)(null),D=(0,_.useRef)(null),[P,L]=(0,_.useState)(!1),[M,F]=(0,_.useState)(!1),{currentUserLogin:B,plan:U}=(0,z.Pk)(),$=(0,nv.mM)(),V=k?"user":void 0,q=`/${B}.png`;R[0]!==q?(t=(0,m.jsx)("div",{className:hC.userAvatar,children:(0,m.jsx)(aa.r,{src:q,size:32})}),R[0]=q,R[1]=t):t=R[1];let W=k&&hC.condensed;R[2]!==W?(n=(0,v.$)(hC.userContent,W),R[2]=W,R[3]=n):n=R[3],R[4]!==B||R[5]!==n?(r=(0,m.jsx)("div",{className:n,children:B}),R[4]=B,R[5]=n,R[6]=r):r=R[6],R[7]!==V||R[8]!==t||R[9]!==r?(a=(0,m.jsx)(tI.W.Anchor,{children:(0,m.jsxs)("button",{className:hC.userButton,"aria-label":V,children:[t,r]})}),R[7]=V,R[8]=t,R[9]=r,R[10]=a):a=R[10];let G=`/${B}`,H=`/${B}.png`;return R[11]!==H?(i=(0,m.jsx)("div",{className:hC.userAvatar,children:(0,m.jsx)(aa.r,{src:H,size:32})}),R[11]=H,R[12]=i):i=R[12],R[13]!==B?(s=(0,m.jsx)("div",{className:hC.username,children:B}),R[13]=B,R[14]=s):s=R[14],R[15]!==U?(o=function(e){switch(e){case rp.UH.IndividualFree:return"Free";case rp.UH.IndividualPro:return"Pro";case rp.UH.IndividualProPlus:return"Pro+";case rp.UH.Business:return"Business";case rp.UH.Enterprise:return"Enterprise";default:return"Free"}}(U),R[15]=U,R[16]=o):o=R[16],R[17]!==o?(l=(0,m.jsxs)("span",{className:hC.description,children:["Copilot ",o]}),R[17]=o,R[18]=l):l=R[18],R[19]!==s||R[20]!==l?(c=(0,m.jsxs)("div",{className:hC.userDetails,children:[s,l]}),R[19]=s,R[20]=l,R[21]=c):c=R[21],R[22]!==i||R[23]!==c?(d=(0,m.jsxs)("div",{className:hC.menuItem,children:[i,c]}),R[22]=i,R[23]=c,R[24]=d):d=R[24],R[25]!==d||R[26]!==G?(u=(0,m.jsx)(tR.l.LinkItem,{href:G,children:d}),R[25]=d,R[26]=G,R[27]=u):u=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(p=(0,m.jsx)(tR.l.Divider,{}),R[28]=p):p=R[28],R[29]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{F(!0),(0,e1.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},R[29]=f):f=R[29],R[30]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(tR.l.Item,{onSelect:f,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.NoteIcon,{})}),"Personal instructions"]}),R[30]=g):g=R[30],R[31]!==$?(y=!$&&(0,m.jsxs)(tR.l.Item,{onSelect:()=>{L(!0),(0,e1.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.ListUnorderedIcon,{})}),"Manage shared conversations"]}),R[31]=$,R[32]=y):y=R[32],R[33]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{D.current?.openDialog(),(0,e1.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},R[33]=x):x=R[33],R[34]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsxs)(tR.l.Item,{onSelect:x,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.CommentIcon,{})}),"Give feedback"]}),R[34]=b):b=R[34],R[35]===Symbol.for("react.memo_cache_sentinel")?(S=(0,m.jsxs)(tR.l.LinkItem,{href:"/settings/copilot",onClick:hw,children:[(0,m.jsx)(tR.l.LeadingVisual,{children:(0,m.jsx)(O.GearIcon,{})}),"Settings"]}),R[35]=S):S=R[35],R[36]!==u||R[37]!==y?(C=(0,m.jsx)(tI.W.Overlay,{width:"small",align:"end",children:(0,m.jsxs)(tR.l,{children:[u,p,g,y,b,S]})}),R[36]=u,R[37]=y,R[38]=C):C=R[38],R[39]!==C||R[40]!==a?(j=(0,m.jsxs)(tI.W,{anchorRef:A,children:[a,C]}),R[39]=C,R[40]=a,R[41]=j):j=R[41],R[42]===Symbol.for("react.memo_cache_sentinel")?(w=(0,m.jsx)(tN.l,{ref:D,mode:"immersive",returnFocusRef:A}),R[42]=w):w=R[42],R[43]!==P?(N=P&&(0,m.jsx)(oq,{closeDialog:()=>{L(!1)},returnFocusRef:A}),R[43]=P,R[44]=N):N=R[44],R[45]!==M?(I=M&&(0,m.jsx)(od.Y,{onDismiss:()=>F(!1),returnFocusRef:A}),R[45]=M,R[46]=I):I=R[46],R[47]!==j||R[48]!==N||R[49]!==I?(E=(0,m.jsxs)(m.Fragment,{children:[j,w,N,I]}),R[47]=j,R[48]=N,R[49]=I,R[50]=E):E=R[50],E}function hw(){return(0,e1.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{hj.displayName||(hj.displayName="UserMenu")}catch{}function hN(e){let t,n,r,a,i,s,o,l,c,d,u,p,f,y,x,b,S,C,j,w,N,I,E,R,T=(0,h.c)(77),{isVisible:k,isExpanded:A,isFloating:D,isCondensed:P,sidebarRef:L,onToggle:M}=e,F=void 0!==P&&P,B=(0,z.Pk)(),{threads:U,selectedThreadID:$}=B,V=D?k:A,q=(0,g.b)(),W=(0,_.useRef)(!1),G=sj(),{closePreviewPane:H}=(0,nd.xx)(),Q=(0,n_.BV)(),K=ej.W.immersiveServiceNavigation||Q;T[0]!==q||T[1]!==U.size?(t=()=>{0!==U.size||W.current||(W.current=!0,q.fetchThreads())},T[0]=q,T[1]=U.size,T[2]=t):t=T[2],T[3]!==q||T[4]!==B||T[5]!==U?(n=[U,q,B],T[3]=q,T[4]=B,T[5]=U,T[6]=n):n=T[6],(0,_.useEffect)(t,n),T[7]!==D||T[8]!==k||T[9]!==M?(r=()=>{D&&k&&M()},T[7]=D,T[8]=k,T[9]=M,T[10]=r):r=T[10];let J=r;T[11]!==H||T[12]!==F||T[13]!==J?(a=()=>{if(F)return void H();J(),H()},T[11]=H,T[12]=F,T[13]=J,T[14]=a):a=T[14];let X=a;T[15]!==F||T[16]!==A||T[17]!==M?(i=e=>{!e.target.closest('a, button, [role="button"], [role="link"], [role="menuitem"]')&&(F?M():A&&M())},T[15]=F,T[16]=A,T[17]=M,T[18]=i):i=T[18];let Y=i,Z=(0,_.useRef)(null),ee=L||Z,et=(0,_.useId)();T[19]!==V||T[20]!==M?(s=()=>{M(),(0,e1.BI)("dotcom_chat.activate",{target:V?"SIDEBAR_COLLAPSE":"SIDEBAR_EXPAND",mode:"immersive"})},T[19]=V,T[20]=M,T[21]=s):s=T[21];let en=s;T[22]!==D||T[23]!==k?(o=()=>{if(D)return k?(0,m.jsx)(O.XIcon,{}):(0,m.jsx)(O.ThreeBarsIcon,{})},T[22]=D,T[23]=k,T[24]=o):o=T[24];let er=o,ea=`${et}-copilot-navigation`;T[25]!==F||T[26]!==D||T[27]!==k?(l=(0,v.$)(hS.container,{[hS.visible]:k,[hS.floating]:D,[hS.condensed]:F}),T[25]=F,T[26]=D,T[27]=k,T[28]=l):l=T[28];let ei=`${et}-copilot-navigation`;T[29]!==ei?(c=(0,m.jsx)("h2",{id:ei,className:"sr-only",children:"Copilot navigation"}),T[29]=ei,T[30]=c):c=T[30],T[31]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("div",{className:hS.showWhenExpanded,children:(0,m.jsx)("a",{href:"/",target:"_self",className:hS.githubLink,"aria-label":"GitHub homepage",children:(0,m.jsx)(O.MarkGithubIcon,{size:32})})}),T[31]=d):d=T[31];let es=V?"Close sidebar":"Open sidebar";T[32]!==er?(u=er(),T[32]=er,T[33]=u):u=T[33],T[34]!==en||T[35]!==es||T[36]!==u?(p=(0,m.jsx)("button",{className:hS.toggleSidebarFloating,"aria-label":es,onClick:en,children:u}),T[34]=en,T[35]=es,T[36]=u,T[37]=p):p=T[37],T[38]!==c||T[39]!==p?(f=(0,m.jsxs)("div",{className:hS.header,children:[c,d,p]}),T[38]=c,T[39]=p,T[40]=f):f=T[40],T[41]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsx)(hI,{}),T[41]=y):y=T[41];let eo=`${et}-quick-links`,el=`${et}-quick-links`;T[42]!==el?(x=(0,m.jsx)("h3",{id:el,className:"sr-only",children:"Quick links"}),T[42]=el,T[43]=x):x=T[43],T[44]!==X||T[45]!==F||T[46]!==K?(b=K&&(0,m.jsx)(hb,{toggleFloatingSidebar:X,isSidebarCondensed:F}),T[44]=X,T[45]=F,T[46]=K,T[47]=b):b=T[47],T[48]!==eo||T[49]!==x||T[50]!==b?(S=(0,m.jsxs)("nav",{"aria-labelledby":eo,className:hS.quicklinks,children:[x,b]}),T[48]=eo,T[49]=x,T[50]=b,T[51]=S):S=T[51];let ec=G?null:$;T[52]!==X||T[53]!==F||T[54]!==B.threadsLoading.state||T[55]!==ec?(C=(0,m.jsx)(hf,{selectedItemID:ec,loadingState:B.threadsLoading.state,onConversationSelect:X,isSidebarCondensed:F}),T[52]=X,T[53]=F,T[54]=B.threadsLoading.state,T[55]=ec,T[56]=C):C=T[56],T[57]!==S||T[58]!==C?(j=(0,m.jsxs)(nw.t,{fallback:y,children:[S,C]}),T[57]=S,T[58]=C,T[59]=j):j=T[59],T[60]!==F?(w=(0,m.jsx)("div",{className:hS.footer,children:(0,m.jsx)(hj,{isCondensed:F})}),T[60]=F,T[61]=w):w=T[61],T[62]!==j||T[63]!==w?(N=(0,m.jsxs)("div",{className:hS.sidebar,children:[j,w]}),T[62]=j,T[63]=w,T[64]=N):N=T[64];let ed=V?"Close sidebar":"Open sidebar";return T[65]===Symbol.for("react.memo_cache_sentinel")?(I=(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",children:[(0,m.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:hS.iconLineTop}),(0,m.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:hS.iconLineBottom})]}),T[65]=I):I=T[65],T[66]!==en||T[67]!==ed?(E=(0,m.jsx)("button",{className:hS.toggleSidebarVertical,"aria-label":ed,onClick:en,children:I}),T[66]=en,T[67]=ed,T[68]=E):E=T[68],T[69]!==ee||T[70]!==Y||T[71]!==l||T[72]!==f||T[73]!==N||T[74]!==E||T[75]!==ea?(R=(0,m.jsxs)("aside",{"aria-labelledby":ea,ref:ee,className:l,onClick:Y,children:[f,N,E]}),T[69]=ee,T[70]=Y,T[71]=l,T[72]=f,T[73]=N,T[74]=E,T[75]=ea,T[76]=R):R=T[76],R}function hI(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:hS.blankslateContainer,children:(0,m.jsx)(nH,{regionName:"The conversations menu"})}),t[0]=e):e=t[0],e}try{hN.displayName||(hN.displayName="Sidebar")}catch{}try{hI.displayName||(hI.displayName="SidebarContentsFallback")}catch{}function hE(){let e,t,n,r,a,i,s,o,l=(0,h.c)(33),c=(0,z.Pk)(),{customCopilots:d}=c,u=(0,_.useRef)(null),p=ne(),f=ej.W.navigableRefs?p:u,g=(0,nd.tZ)(),y=(0,eS.nu)((0,z.A3)("activePlugin")),x=(0,ed.zy)(),b=(0,n_.BV)(),S=(0,nv.y_)(),C=b&&S;l[0]!==b||l[1]!==x?(e=b&&(0,nv.zY)(x),l[0]=b,l[1]=x,l[2]=e):e=l[2];let j=e;l[3]!==b||l[4]!==x?(t=b&&(0,nv.E1)(x),l[3]=b,l[4]=x,l[5]=t):t=l[5];let w=t,N=(0,nv.iI)(),I=ej.W.spacesV3UI;(0,n_.e9)(b);let{isFloating:E,isExpanded:R,isVisible:T,sidebarRef:k,containerRef:A,toggleSidebar:D}=function(){let e,t,n,r,a,i,s,o=(0,h.c)(17),[l,c]=(0,_.useState)(window.innerWidth<=768);o[0]===Symbol.for("react.memo_cache_sentinel")?(e=nx.J.getImmersiveSidebarCollapsedState()??!0,o[0]=e):e=o[0];let[d,u]=(0,_.useState)(e),[m,p]=(0,_.useState)(!1),f=(0,_.useRef)(null),g=(0,_.useRef)(null);o[1]!==d||o[2]!==l||o[3]!==m?(t=()=>{if(l)p(!m);else{let e=!d;u(e),nx.J.setImmersiveSidebarCollapsedState(e)}},o[1]=d,o[2]=l,o[3]=m,o[4]=t):t=o[4];let y=t;return o[5]!==l?(n=()=>{if(!g.current)return;let e=()=>{let e=g.current?.clientWidth;if(void 0===e)return;let t=e<=768;c(t),t&&!l&&p(!1)},t=new ResizeObserver(e);return t.observe(g.current),e(),()=>{t.disconnect()}},r=[l],o[5]=l,o[6]=n,o[7]=r):(n=o[6],r=o[7]),(0,_.useEffect)(n,r),o[8]!==l||o[9]!==m?(a=()=>{if(l&&m&&f.current){let e=e=>{f.current&&!f.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},i=[l,m],o[8]=l,o[9]=m,o[10]=a,o[11]=i):(a=o[10],i=o[11]),(0,_.useEffect)(a,i),o[12]!==d||o[13]!==l||o[14]!==m||o[15]!==y?(s={isFloating:l,isExpanded:d,isVisible:m,sidebarRef:f,containerRef:g,toggleSidebar:y},o[12]=d,o[13]=l,o[14]=m,o[15]=y,o[16]=s):s=o[16],s}(),P=(0,_.useRef)(null),[L,M]=(0,_.useState)(hR);l[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{if(!P.current)return;let e=()=>{let e=P.current?.clientWidth;void 0!==e&&e>0&&M(e<=1152)},t=new ResizeObserver(e);return t.observe(P.current),e(),()=>t.disconnect()},r=[],l[6]=n,l[7]=r):(n=l[6],r=l[7]),(0,_.useEffect)(n,r),nC();let O=!y&&L&&hh.fullscreenPreviewPane,F=y?.fullscreenPreviewArea&&hh.fullscreenPluginPane;return l[8]!==O||l[9]!==F?(a=(0,v.$)(hh.container,O,F),l[8]=O,l[9]=F,l[10]=a):a=l[10],l[11]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),l[11]=i):i=l[11],l[12]!==y||l[13]!==A||l[14]!==N||l[15]!==d||l[16]!==j||l[17]!==w||l[18]!==R||l[19]!==E||l[20]!==L||l[21]!==C||l[22]!==T||l[23]!==x||l[24]!==g||l[25]!==k||l[26]!==c.selectedThreadID||l[27]!==f||l[28]!==D?(s=y?.PageComponent&&y?.matchPage?.(x)?(0,m.jsx)("div",{className:hh.main,children:(0,m.jsx)(c_,{plugin:y})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:hh.left,ref:A,hidden:L&&g,children:[j||w?null:(0,m.jsx)(hN,{isVisible:T,isExpanded:R,isFloating:E,isCondensed:!E&&!R,sidebarRef:k,onToggle:D}),(0,m.jsx)("div",{className:hh.main,children:C?I?(0,m.jsx)(ho,{copilotSpaces:d}):(0,m.jsx)(mq,{copilotSpaces:d}):I&&N&&(j||w)?(0,m.jsx)(m4,{customCopilotId:N,selectedThreadID:c.selectedThreadID,textAreaRef:f}):j?(0,m.jsx)(mJ,{}):w?(0,m.jsx)(mO,{}):y?.ViewComponent&&y?.matchView?.(x)?(0,m.jsx)(cb,{plugin:y}):N?I?(0,m.jsx)(m4,{customCopilotId:N,selectedThreadID:c.selectedThreadID,textAreaRef:f}):(0,m.jsx)(d5,{customCopilotId:N,selectedThreadID:c.selectedThreadID,textAreaRef:f}):(0,m.jsx)(cv,{isMobile:L,textAreaRef:f},c.selectedThreadID)})]}),(0,m.jsx)("div",{className:(0,v.$)(hh.previewPane,g&&hh.active),children:(0,m.jsx)("div",{className:(0,v.$)(hh.viewer),children:(0,m.jsx)(sb,{returnFocusRef:f})})})]}),l[12]=y,l[13]=A,l[14]=N,l[15]=d,l[16]=j,l[17]=w,l[18]=R,l[19]=E,l[20]=L,l[21]=C,l[22]=T,l[23]=x,l[24]=g,l[25]=k,l[26]=c.selectedThreadID,l[27]=f,l[28]=D,l[29]=s):s=l[29],l[30]!==a||l[31]!==s?(o=(0,m.jsxs)("div",{className:a,"data-testid":"chat-layout","data-hpc":!0,ref:P,children:[i,s]}),l[30]=a,l[31]=s,l[32]=o):o=l[32],o}function hR(){return window.innerWidth<=1152}try{hE.displayName||(hE.displayName="Layout")}catch{}function hT(e){let t=(0,ed.zy)(),n=eu.fV.pathname;return(!n||ej.W.newThreadNavigate)&&(n=t.pathname),(0,_.useMemo)(()=>{let t=e.find(e=>e.routes?.some(e=>e.test(n)));return t?t.id:null},[n,e])}var hk=n(98013);let hA=(0,nt.E7)();function hD(){let e,t=(0,h.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nc.RelayEnvironmentProvider,{environment:hA,children:(0,m.jsx)(hP,{})}),t[0]=e):e=t[0],e}function hP(){let e=(0,h.c)(2),t=(0,W.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(hL,{children:(0,m.jsx)(hO,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nf,{}),e[1]=t):t=e[1],t}}function hL(e){let t,n,r,a,i,s,o=(0,h.c)(41),{children:l}=e,c=(0,W.X)(),d=sI(),u=c.requestedTopic;if((0,eC.P)(u)){let e,n;o[0]!==u?(e=(0,eC.UU)(u),o[0]=u,o[1]=e):e=o[1],o[2]!==e?(n={refs:[e],topic:void 0},o[2]=e,o[3]=n):n=o[3],t=n}else if(c.reference){let e,n;o[4]!==c.reference?(e=[c.reference],o[4]=c.reference,o[5]=e):e=o[5],o[6]!==u||o[7]!==e?(n={refs:e,topic:u},o[6]=u,o[7]=e,o[8]=n):n=o[8],t=n}else{let e,n;o[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[9]=e):e=o[9],o[10]!==u?(n={refs:e,topic:u},o[10]=u,o[11]=n):n=o[11],t=n}let{refs:p,topic:f}=t;if(o[12]!==c.agentsEnabled||o[13]!==c.apiURL||o[14]!==c.graphqlApiUrl||o[15]!==c.loopsClientUrl||o[16]!==c.previewUrl||o[17]!==c.realIp||o[18]!==c.ssoOrganizations){if(r=[],ej.W.loopsPlugin){let e;o[20]!==c.apiURL||o[21]!==c.graphqlApiUrl||o[22]!==c.loopsClientUrl||o[23]!==c.previewUrl||o[24]!==c.realIp||o[25]!==c.ssoOrganizations?(e=new LoopsPlugin(c.apiURL,c.graphqlApiUrl,c.loopsClientUrl,c.ssoOrganizations.map(hM),c.previewUrl,c.realIp),o[20]=c.apiURL,o[21]=c.graphqlApiUrl,o[22]=c.loopsClientUrl,o[23]=c.previewUrl,o[24]=c.realIp,o[25]=c.ssoOrganizations,o[26]=e):e=o[26],r.push(e)}if(ej.W.workbenchPlugin){let e;o[27]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,o[27]=e):e=o[27],r.push(e)}if(c.agentsEnabled){let e;o[28]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,o[28]=e):e=o[28],r.push(e)}o[12]=c.agentsEnabled,o[13]=c.apiURL,o[14]=c.graphqlApiUrl,o[15]=c.loopsClientUrl,o[16]=c.previewUrl,o[17]=c.realIp,o[18]=c.ssoOrganizations,o[19]=r}else r=o[19];let g=hT(n=r),y=ej.W.navigableRefs?t6:_.Fragment;return o[29]!==l?(a=(0,m.jsx)(nd.BH,{children:l}),o[29]=l,o[30]=a):a=o[30],o[31]!==c||o[32]!==g||o[33]!==p||o[34]!==a||o[35]!==d||o[36]!==f?(i=(0,m.jsx)(z.Mj,{workerPath:c.searchWorkerFilePath,threadId:d,pluginId:g,refs:p,mode:"immersive",topic:f,ssoOrganizations:c.ssoOrganizations,copilotUpsellBannerDismissed:c.copilotUpsellBannerDismissed,copilotChatPayload:c,children:a}),o[31]=c,o[32]=g,o[33]=p,o[34]=a,o[35]=d,o[36]=f,o[37]=i):i=o[37],o[38]!==n||o[39]!==i?(s=(0,m.jsx)(y,{children:(0,m.jsx)(nn.LB,{children:(0,m.jsx)(eS.Hb,{plugins:n,children:i})})}),o[38]=n,o[39]=i,o[40]=s):s=o[40],s}function hM(e){return e.id}function hO(){let e,t,n=(0,h.c)(2);!function(){let e,t,n=(0,h.c)(7),r=sI(),a=(0,_.useRef)(!0),i=(0,_.useRef)(null),s=(0,g.b)(),{threads:o,selectedThreadID:l}=(0,z.Pk)(),c=sj(),{selectedThreadID:d,sharedThreadChannel:u}=(0,z.Pk)(),m=(0,g.b)();(0,hk.x)(u,()=>{m.fetchSharedThreadMessages(d)}),n[0]!==c||n[1]!==s||n[2]!==l||n[3]!==r||n[4]!==o?(e=()=>{if(a.current){a.current=!1,i.current=r,c?s.fetchSharedThreadMessages(l):s.fetchMessages(l);return}if(i.current!==r){if(i.current=r,r===l)return;let e=r&&o?.get(r);s.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[s,r,o,l,c],n[0]=c,n[1]=s,n[2]=l,n[3]=r,n[4]=o,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,_.useEffect)(e,t)}(),function(){let e,t,n=(0,h.c)(8),{selectedThreadID:r}=(0,z.Pk)(),a=(0,eS.nu)((0,z.A3)("activePlugin")),i=(0,lx.M)((0,ed.Zp)());n[0]!==i||n[1]!==a?.skipSyncRouteToThread||n[2]!==r?(e=()=>{if(!r||a?.skipSyncRouteToThread)return;let e=`${eC.Jz}/c/${r}`,t=`${eC.Jz}/share/${r}`,n=window.location.pathname;n.startsWith(e)||n.startsWith(t)||i.current(e)},n[0]=i,n[1]=a?.skipSyncRouteToThread,n[2]=r,n[3]=e):e=n[3];let s=a?.skipSyncRouteToThread;n[4]!==i||n[5]!==r||n[6]!==s?(t=[i,s,r],n[4]=i,n[5]=r,n[6]=s,n[7]=t):t=n[7],(0,_.useEffect)(e,t)}();let r=(0,h.c)(3),a=(0,g.b)();if(r[0]!==a?(e=()=>{let e=()=>{window.location.href.includes("/r/")?(a.showTopicPicker(!1),a.selectThread(null)):window.location.href.includes("/c/")||(a.showTopicPicker(!0),a.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},t=[a],r[0]=a,r[1]=e,r[2]=t):(e=r[1],t=r[2]),(0,_.useEffect)(e,t),!function(){let e,t,n=(0,h.c)(6),r=hT((0,eS.qw)()),a=sI(),{activePlugin:i}=(0,z.bP)("activePlugin"),s=(0,g.b)();n[0]!==i||n[1]!==s||n[2]!==r||n[3]!==a?(e=()=>{a||(i??null)!==r&&s.selectPlugin(r)},t=[i,s,r,a],n[0]=i,n[1]=s,n[2]=r,n[3]=a,n[4]=e,n[5]=t):(e=n[4],t=n[5]),(0,_.useEffect)(e,t)}(),ej.W.immersiveAppShell){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(hE,{}),n[0]=e):e=n[0],e}{let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(hm,{}),n[1]=e):e=n[1],e}}try{hD.displayName||(hD.displayName="CopilotImmersive")}catch{}try{hP.displayName||(hP.displayName="CopilotImmersiveNoRelay")}catch{}try{hL.displayName||(hL.displayName="CopilotImmersiveProviders")}catch{}try{hO.displayName||(hO.displayName="Immersive")}catch{}(0,u.o)("copilot-immersive-v1",()=>({App:p,routes:[(0,d.a)({path:"/copilot",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/c/:threadID",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/d/:docsetName",Component:hD}),(0,d.a)({path:"/copilot/r/:owner/:repository",Component:hD}),(0,d.a)({path:"/copilot/share/:threadID",Component:hD}),(0,d.a)({path:"/copilot/loop/share",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/l/:loopID",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/workbench",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spark",Component:hD,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spaces",Component:hD}),(0,d.a)({path:"/copilot/spaces/:spaceID",Component:hD}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:hD}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:hD}),(0,d.a)({path:"/copilot/spaces/:spaceID/edit",Component:hD}),(0,d.a)({path:"/copilot/spaces/new",Component:hD}),(0,d.a)({path:"/copilot/agents",Component:hD})]}))},99156:(e,t,n)=>{n.d(t,{Io:()=>r});let r=[{id:"dummy-1",dummy:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",inputType:{type:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",inputType:{type:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",inputType:{type:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",inputType:{type:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",inputType:{type:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",inputType:{type:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",inputType:{type:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",inputType:{type:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",inputType:{type:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",inputType:{type:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]}]},57915:(e,t,n)=>{n.d(t,{h:()=>c});var r=n(21728),a=n(97665),i=n(94747),s=n(23634),o=n(20126),l=n(58709);function c(){let e,t,n,c=(0,r.c)(7),d=(0,a.jE)(),u=(0,s.UR)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,i.n)(n)}},29417:(e,t,n)=>{n.d(t,{m:()=>d});var r=n(21728),a=n(97665),i=n(94747),s=n(44263),o=n(23634),l=n(58709),c=n(20126);function d(){let e,t,n,d,u,m=(0,r.c)(13),h=(0,a.jE)(),p=(0,o.UR)();m[0]!==p?(e=async e=>{let{loopID:t,updateFn:n}=e;return await p.updateLoop(t,n)},m[0]=p,m[1]=e):e=m[1],m[2]!==h?(t=(e,t)=>{let{loopID:n}=t;e.success&&(h.invalidateQueries({queryKey:[l.M,n,"draft"]}),h.invalidateQueries({queryKey:[c.n,"draft"]}))},m[2]=h,m[3]=t):t=m[3],m[4]!==e||m[5]!==t?(n={mutationFn:e,onSuccess:t},m[4]=e,m[5]=t,m[6]=n):n=m[6];let f=(0,i.n)(n),g=(0,s.d)(f.mutate,500);m[7]!==g||m[8]!==h?(d=async(e,t)=>{let{loopID:n,updateFn:r}=e;await h.cancelQueries({queryKey:[l.M,n,"draft"]});let a=r(h.getQueryData([l.M,n,"draft"])??null);return h.setQueryData([l.M,n,"draft"],a),g({loopID:n,updateFn:r}),t?.onSuccess?.(),a},m[7]=g,m[8]=h,m[9]=d):d=m[9];let y=d;return m[10]!==y||m[11]!==f?(u={...f,mutate:y},m[10]=y,m[11]=f,m[12]=u):u=m[12],u}},20126:(e,t,n)=>{n.d(t,{C:()=>o,n:()=>s});var r=n(21728),a=n(97286),i=n(23634);let s="all-loops";function o(e){let t,n,o,l=(0,r.c)(8),c=void 0===e?"latest":e,d=(0,i.UR)();return l[0]!==c?(t=[s,c],l[0]=c,l[1]=t):t=l[1],l[2]!==d||l[3]!==c?(n=async()=>await d.getAllLoops(c),l[2]=d,l[3]=c,l[4]=n):n=l[4],l[5]!==t||l[6]!==n?(o={queryKey:t,queryFn:n,refetchOnMount:!0},l[5]=t,l[6]=n,l[7]=o):o=l[7],(0,a.I)(o)}},58709:(e,t,n)=>{n.d(t,{M:()=>l,_:()=>c});var r=n(21728),a=n(97286),i=n(85647),s=n(23634),o=n(99156);let l="loop";function c(e,t){let n,c,d,u,m=(0,r.c)(14),h=void 0===e?"draft":e,{loopID:p}=(0,i.g)(),f=(0,s.UR)();m[0]!==p||m[1]!==h?(n=[l,p,h],m[0]=p,m[1]=h,m[2]=n):n=m[2],m[3]!==p||m[4]!==f||m[5]!==h?(c=async()=>{if(!p)return null;let e=o.Io.find(e=>e.id===p)??null;return e||await f.getLoop(p,h)},m[3]=p,m[4]=f,m[5]=h,m[6]=c):c=m[6];let g=!!p;return m[7]!==t?(d=t&&{select:t},m[7]=t,m[8]=d):d=m[8],m[9]!==n||m[10]!==c||m[11]!==g||m[12]!==d?(u={queryKey:n,queryFn:c,enabled:g,...d,staleTime:3e5},m[9]=n,m[10]=c,m[11]=g,m[12]=d,m[13]=u):u=m[13],(0,a.I)(u)}},74837:(e,t,n)=>{function r(e,t){return e?{...e,nodes:[...e.nodes||[],t],updatedAt:Date.now()}:e}function a(e,t,n){if(!e)return e;let a=e.nodes.findIndex(e=>e.id===t);if(-1===a)return r(e,{id:t,type:"text",title:"",description:"",content:"",...n});{let t=e.nodes[a];return{...e,nodes:[...e.nodes.slice(0,a),{...t,...n},...e.nodes.slice(a+1)],updatedAt:Date.now()}}}n.d(t,{k:()=>l});var i=n(58709),s=n(40178),o=n(29417);function l(){let{data:e}=(0,i._)(),{mutate:t,isPending:n}=(0,o.m)(),l=(0,s.F5)(),c=(e,n)=>{e&&t({loopID:e.id,updateFn:()=>e},{onSuccess:n})};return{addNode:t=>{if(e)c(r(e,t),()=>l({type:"FOCUS_NODE",nodeId:t.id}))},removeNode:t=>{if(e)c(e?{...e,nodes:e.nodes.filter(e=>e.id!==t),updatedAt:Date.now()}:e,()=>l({type:"FOCUS_NODE",nodeId:null}))},updateNode:(t,n)=>{e&&c(a(e,t,n))},updateNodeContent:(t,n)=>{e&&c(e?a(e,t,{content:n}):e)},updateLoop:e=>{c(e)},isPending:n}}},71128:(e,t,n)=>{n.d(t,{C:()=>d});var r=n(38621);function a(e){return e.content}var i=n(23630),s=n(84993),o=n(4947),l=n(750);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PromptNodeHandler=class PromptNodeHandler{async execute(e,t){let n=await (0,i.Vq)(e),r="";for await(let a of t.chatClient.getChatCompletion(n,e.model,t.signal))r+=a,t.onPartialResult?.(r);return r}constructor(){c(this,"type","prompt"),c(this,"metadata",{contentFields:["content"],icon:()=>r.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n=await t.graphQLClient.getGraphQLResponse(e.content,t.signal);return n?.data??null}constructor(){c(this,"type","github-graphql"),c(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>r.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return a(e)}constructor(){c(this,"type","code"),c(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>r.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",featureFlag:"copilot_pipes_react_nodes",outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return a(e)}constructor(){c(this,"type","visualize"),c(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>r.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes"})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){if("date"===e.inputType.type&&(0,l.nS)(e.content)){let t=(0,l.Qf)(e.content);if(t)return(0,l.O2)(t)}return a(e)}constructor(){c(this,"type","text"),c(this,"metadata",{type:"text",contentFields:["content"],icon:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"icon"):r.TypographyIcon,description:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"description"):"Input for nodes",label:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"name"):"Input",color:"blue"})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return a(e)}constructor(){c(this,"type","loop"),c(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>r.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",outputLabel:"Pipeline output",isExecutable:!0})}};let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){this.handlers.set(e.type,e)}async executeNode(e,t){let n=this.handlers.get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}getMetadata(e){let t=this.handlers.get(e);return t?.metadata}getAllMetadata(){return Array.from(this.handlers.values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from(this.handlers.keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handlers",new Map),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let d=new NodeHandlerRegistry},72419:(e,t,n)=>{n.d(t,{r:()=>PipesService});var r=n(19390),a=n(71128),i=n(66346),s=n(23630);let o=(e,t)=>{let n={...e},r=n.content;return"string"==typeof r&&(n.content=function(e,t,n=!1){let r=(0,s.ZP)();return e.replace(r,(e,r,a,s)=>{let o=t[r];if(void 0===o)return(0,i.vV)(`Node with ID "${r}" not found in node map`),e;let l=o;if(a)if(o&&"object"==typeof o&&!Array.isArray(o)){let e=function(e,t){if(!t||!e)return null;let n=t.split("."),r=e;for(let e of n){if(null==r||"object"!=typeof r||null===r)return null;r=r[e]}return r}(o,a);if(null!==e)l=e;else throw Error(`Path "${a}" on node with ID "${r}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${r}"`);return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(r,t,a.C.requiresCodeEvaluation(e.type))),n};function l(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function c(e,t){var n=l(e,t,"get");return n.get?n.get.call(e):n.value}function d(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function u(e,t,n){var r=l(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var m=new WeakMap,h=new WeakMap,p=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t){let n={graphQLClient:c(this,h),chatClient:c(this,p),signal:e,onPartialResult:t};return a.C.executeNode(c(this,m),n)}constructor(e,t,n){d(this,m,{writable:!0,value:void 0}),d(this,h,{writable:!0,value:void 0}),d(this,p,{writable:!0,value:void 0}),u(this,m,e),u(this,h,t),u(this,p,n)}};function f(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function g(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function y(e,t){var n=g(e,t,"get");return n.get?n.get.call(e):n.value}function x(e,t,n){f(e,t),t.set(e,n)}function v(e,t,n){var r=g(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}function _(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n}function b(e,t){f(e,t),t.add(e)}var S=new WeakMap,C=new WeakMap,j=new WeakMap,w=new WeakMap,N=new WeakMap,I=new WeakMap,E=new WeakMap,R=new WeakSet,T=new WeakSet,k=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,r.FT)(y(this,j));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>_(this,T,D).call(this,n,e,t)))}stop(e){y(this,E).abort(),e(y(this,w))}constructor(e,t,n,a){b(this,R),b(this,T),b(this,k),x(this,S,{writable:!0,value:void 0}),x(this,C,{writable:!0,value:void 0}),x(this,j,{writable:!0,value:void 0}),x(this,w,{writable:!0,value:void 0}),x(this,N,{writable:!0,value:void 0}),x(this,I,{writable:!0,value:void 0}),x(this,E,{writable:!0,value:void 0}),v(this,S,n),v(this,C,a),v(this,j,e),v(this,w,t),v(this,N,(0,r.H0)(e)),v(this,I,new Map),v(this,E,new AbortController)}};function A(){return y(this,E).signal.aborted}async function D(e,t,n){let r=y(this,I).get(e.id);if(r)return r;let a=_(this,k,P).call(this,e,t,n);return y(this,I).set(e.id,a),a}async function P(e,t,n){if(_(this,R,A).call(this))return null;let r=await n(y(this,j).id,y(this,w)),a=r?.nodes[e.id]?.value;if(a)return a;let i=[...new Set(y(this,N).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>y(this,j).nodes.find(t=>t.id===e)).filter(e=>!!e),s=await Promise.all(i.map(async e=>[e.id,await _(this,T,D).call(this,e,t,n)]));if(s.some(([e,t])=>null===t)||_(this,R,A).call(this))return null;let l=Object.fromEntries(s);try{let n=o(e,l),r=new NodeRunner(n,y(this,S),y(this,C));t({type:"SET_RUNNING",nodeID:e.id});let a=await r.run(y(this,E).signal,n=>{_(this,R,A).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})});return _(this,R,A).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:a}),a}catch(n){var c;return _(this,R,A).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(c=n)instanceof Error?c.message:"string"==typeof c?c:"object"==typeof c?JSON.stringify(c):""}),null}}var L=n(21694),M=n(11354);function O(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function F(e,t){var n=O(e,t,"get");return n.get?n.get.call(e):n.value}function B(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function U(e,t,n){var r=O(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var $=new WeakMap,V=new WeakMap,q=new WeakMap,W=new WeakMap,G=new WeakMap;let PipesService=class PipesService{async getGraphQLResponse(e){return F(this,q).getGraphQLResponse(e)}async getLoop(e,t="draft"){return F(this,V).getLoop(e,t)}async getAllLoops(e="latest"){return(await F(this,V).getAllLoops(e)).sort((e,t)=>t.updatedAt-e.updatedAt)}async createLoop(e){return F(this,V).createLoop(e)}async updateLoop(e,t){return F(this,V).updateLoop(e,t)}async deleteLoop(e){return(0,M._T)(e),F(this,V).deleteLoop(e)}async saveLoop(e){return F(this,V).saveLoop(e)}async revertLoop(e){return F(this,V).revertLoop(e)}async getExecution(e,t){return F(this,V).getExecution(e,t)}async createExecution(e,t){return F(this,V).createExecution(e,t)}async updateExecution(e,t,n){return F(this,V).updateExecution(e,t,n)}isExecutionRunning(e){return!!F(this,G).get(e)}async runPipeline(e,t,n,r){if((0,L.J)(e).length>0)return;let a=new LoopRunner(e,t,F(this,q),F(this,W));F(this,G).set(t,a);try{return await a.run(n,r)}finally{F(this,G).delete(t)}}stopPipeline(e,t){let n=F(this,G).get(e);n&&(n.stop(t),F(this,G).delete(e))}constructor(e,t,n,r){B(this,$,{writable:!0,value:void 0}),B(this,V,{writable:!0,value:void 0}),B(this,q,{writable:!0,value:void 0}),B(this,W,{writable:!0,value:void 0}),B(this,G,{writable:!0,value:new Map}),U(this,$,e),U(this,V,t),U(this,q,n),U(this,W,r)}}},21694:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(72260);n(4947);var a=n(19390);function i(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:r.h.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:r.h.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:r.h.MissingProperty,involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.inputType;if("object"!=typeof n||!n)return t.push({error:"inputType is required for text nodes",errorType:r.h.MissingProperty,involvedNodes:[e.id]}),t;switch(n.type){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:r.h.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:r.h.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:r.h.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:r.h.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:r.h.InvalidSelectValue,involvedNodes:[e.id]});break;case"file":["pdf","video","image","audio","document","code","other"].includes(n.fileType)||t.push({error:`Invalid file type ${n.fileType}`,errorType:r.h.InvalidFileType,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:r.h.EmptyInputValue,involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=(0,a.H0)(e);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),i=e.nodes.find(e=>e.id===a.to);n&&i||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,errorType:r.h.NonexistentNode,involvedNodes:[a.to]})}let i=function(e){let t=new Set,n=new Set,r=[],a=i=>{if(n.has(i)){let e=r.indexOf(i);return r.slice(e)}if(t.has(i))return null;for(let s of(t.add(i),n.add(i),r.push(i),e.edges))if(s.from===i){let e=a(s.to);if(e)return e}return n.delete(i),r.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(n);if(i&&i.length>0){let e=[...i,i[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:r.h.CycleDetected,involvedNodes:i})}let s=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],r=new Set,a=(t,n)=>{for(let i of(r.add(t),n.add(t),e.edges))i.from!==t||r.has(i.to)||a(i.to,n),i.to!==t||r.has(i.from)||a(i.from,n)};for(let e of t)if(!r.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let i=n.reduce((e,t)=>t.size>e.size?t:e,new Set),s=[];for(let e of t)i.has(e.id)||s.push(e.id);return s}(n);return s.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${s.join(", ")}`,errorType:r.h.DisconnectedNode,involvedNodes:s}),t}n(71128)},72260:(e,t,n)=>{n.d(t,{h:()=>r});let r={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue"}},4947:(e,t,n)=>{n.d(t,{J:()=>i,j:()=>a});var r=n(38621);let a={range:{name:"Range",description:"A numeric value within a specified range",icon:r.NumberIcon},text:{name:"Text",description:"Free form text input",icon:r.TypographyIcon},boolean:{name:"Boolean",description:"True or false value",icon:r.CheckIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:r.ListUnorderedIcon},date:{name:"Date",description:"Date or macro",icon:r.CalendarIcon},file:{name:"File",description:"Upload and reference a file",icon:r.FileIcon}};function i(e,t){return(a[e.inputType.type]??a.text)[t]}},29637:(e,t,n)=>{n.d(t,{I:()=>s,O:()=>i});var r=n(19390),a=n(97586);function i(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime()},a=(0,r.cZ)(t,[]);return{messageId:e.id,pipeline:a}}}}function s(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=i(n);if(e)return e}}},48148:(e,t,n)=>{function r(e,t){let n=function(e){let t=0;for(let n=0;n<e.length;n++)t=(31*t+e.charCodeAt(n))%0x3b9aca07;return t}(e)%t.length;return t[n]}n.d(t,{S:()=>r,u:()=>a});let a=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"]},66346:(e,t,n)=>{function r(...e){}function a(...e){}n.d(t,{FF:()=>r,vV:()=>a})},97586:(e,t,n)=>{n.d(t,{Os:()=>o,QK:()=>l,S$:()=>a,bW:()=>d,km:()=>s,lN:()=>u,lh:()=>i,qe:()=>c});var r=n(22069);let a="loops",i="loops",s="loop",o="Loops",l=`${r.Jz}/loops`,c=/\/copilot\/loops/,d=/\/copilot\/l\/([a-zA-Z0-9-]+)/,u=/\/copilot\/loop\/share/},750:(e,t,n)=>{function r(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function i(e){return r(e)||a(e)}function s(e){return e.startsWith("@")&&!r(e)?null:r(e)?function(e){if(!r(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,i,s]=n;if(!a||!i||!s)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(i,10),l="+"===a,c=new Date(t);switch(s){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${s}`}}return{date:c}}(e).date:a(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>o,Qf:()=>s,Yj:()=>i,nS:()=>r})},11354:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var r=n(85351),a=n(66346);let i=(0,r.A)("localStorage"),s="copilot-loops-thread-";function o(e){try{let t=`${s}${e}`;return i.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let n=`${s}${e}`;i.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${s}${e}`;i.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},84993:(e,t,n)=>{function r(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function i(e){return"text"===e.type}n.d(t,{Tm:()=>r,ir:()=>i,jq:()=>a})},19390:(e,t,n)=>{n.d(t,{FT:()=>h,Gx:()=>u,H0:()=>l,Hx:()=>f,V1:()=>p,cZ:()=>m});var r=n(84993),a=n(66346),i=n(23630),s=n(4947),o=n(71128);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let n of e.nodes){if(!n?.id)continue;let e=d(n.id);t.nodes.set(e,n)}for(let n of e.nodes)for(let e of c(n)){let r=d(e);n?.id&&r&&t.edges.push({from:r,to:n.id})}let n=function(e){let t={},n=new Set,r=(i,s=0)=>{try{if(n.has(i))throw Error(`Potential cycle detected at node ${i}`);if(n.add(i),s>100)return(0,a.FF)(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=d(e);return r(t,s+1)});t[i]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===i).map(e=>e.to);0===n.length?t[i]=-1:t[i]=1}return t[i]}finally{n.delete(i)}};for(let[n]of e.nodes)if(!t[n])try{r(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let s=[];for(let[n,r]of Object.entries(t)){let t=e.nodes.get(n);t&&(s[r]||(s[r]=[]),s[r].push(t))}return s.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,i.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return e.match(/^[^|.]+/)?.[0]??e}let u=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.inputType=function(e){if((0,r.ir)(e))return s.j[e.inputType.type]?e.inputType:{type:"text"}}(e)||{type:"text"}),"string"!=typeof n.content&&(n.content=""),(0,r.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,r.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},m=(e,t)=>({...e,nodes:(e.nodes||[]).map(e=>u(e,t)).filter(e=>null!==e)});function h(e){let t=l(e);return e.nodes.filter(e=>g(e,t))}function p(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,r]of e.nodes)t.nodes.set(n,r);let n=[...e.nodes].filter(([,t])=>g(t,e));if(n.length>0){let e="virtual-output";for(let[,r]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:r.id,to:e})}return t}function f(e){return"virtual-output"===e}function g(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},87804:(e,t,n)=>{n.d(t,{j:()=>i});var r=n(72419),a=n(97586);function i(e){return e.id===a.S$&&"service"in e&&e.service instanceof r.r}},23630:(e,t,n)=>{n.d(t,{DO:()=>s,Vq:()=>i,ZP:()=>r});let r=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function i(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function s(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(s).join(`
`):String(e)}},68714:(e,t,n)=>{n.d(t,{$7:()=>d,Ao:()=>h,BV:()=>f,OW:()=>CopilotSpaceSSOError,Tx:()=>p,e9:()=>u,i9:()=>CopilotSpaceNotFoundError,jS:()=>m});var r=n(97665),a=n(94747),i=n(97286),s=n(29255),o=n(47397),l=n(96540),c=n(34901);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function d(){let e=(0,r.jE)();return(0,a.n)({mutationFn:async e=>{let t=await (0,s.ee)(e);if(!t.ok)throw Error(String(t.error));return{status:t.status,ok:!0,payload:t.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:s.O6})}})}function u(e){let t=(0,o.b)(),{data:n}=m(e);(0,l.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function m(e){return(0,i.I)({queryKey:s.O6,queryFn:s.CT,enabled:e,staleTime:3e5})}function h(e){return(0,i.I)({queryKey:(0,s.dp)(e),queryFn:async()=>{let t=await (0,s.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function p(e,t){return(0,i.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,s.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function f(){return(0,c.A3)("customCopilotsEnabled")}},88334:(e,t,n)=>{n.d(t,{I:()=>s});var r=n(34901),a=n(55206),i=n(68714);function s(){let{threads:e}=(0,r.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,a.O)(e)).filter(e=>null!==e),n=(0,i.jS)(!0),{data:s}=n;if(void 0===s)return n;let o=new Set,l=[...t.map(e=>s.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!o.has(t)&&(o.add(t),!0)}),...[...s].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!o.has(t)})].slice(0,5);return{...n,data:l}}},24001:(e,t,n)=>{n.d(t,{C:()=>s});var r=n(7777),a=n(80597),i=n(96540);function s(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:s}=(0,r.O)(),o=!!s||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{o||n({id:e.id,owner:e.owner})},[n,o]),d=(0,i.useCallback)(()=>{o||n(void 0)},[n,o]);return{activeCopilotSpaceId:l,readOnly:o,handleSpaceSelect:c,clearSpaceSelection:d}}},29255:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>o,dp:()=>l,ee:()=>u});var r=n(22069),a=n(6901),i=n(60039);let s="/github-copilot/chat",o=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${s}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${s}/custom_copilots/${t}/${n}`,o=await (0,i.lS)(a);if(!o.ok)return{status:o.status,ok:!1,error:r.nN[o.status]||r.DW};let l=await o.json();return{status:o.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},98831:(e,t,n)=>{function r(){return{favicon:document.querySelector('.js-site-favicon[type="image/svg+xml"]'),faviconFallback:document.querySelector('.js-site-favicon[type="image/png"]')}}function a(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=l();e=e.substr(0,e.lastIndexOf(".")),t.href=e=`${e}${a}.svg`;let i=t.href.substr(0,t.href.lastIndexOf("."));n.href=`${i}.png`}function i(){let{favicon:e,faviconFallback:t}=r();if(!e||!t)return;let n=l(),a=e.href.indexOf("-dark.svg"),i=e.href.substr(0,-1!==a?a:e.href.lastIndexOf("."));e.href=`${i}${n}.svg`,t.href=`${i}${n}.png`}function s(e){let{favicon:t,faviconFallback:n}=r();if(!t||!n)return;let a=t.getAttribute("data-base-href"),i="default"===e?"":`-${e}`,s=l();a&&(t.href=`${a}${i}${s}.svg`,n.href=`${a}${i}${s}.png`)}function o(){s("default")}function l(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"-dark":""}n.d(t,{Ow:()=>a,gd:()=>o,iD:()=>s,uQ:()=>i})},20451:(e,t,n)=>{n.d(t,{Ee:()=>o,b4:()=>l,Ts:()=>s});let r=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"response",void 0),this.response=t,this.name="ResponseError"}};var a=n(1739),i=n(26559);async function s(e,t,n){let s=new Request(t,n);(0,i.tV)(s.headers);let o=await self.fetch(s);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return!function(e,t,n=!1){let a=t.headers.get("content-type")||"";if(!n&&!a.startsWith("text/html"))throw new r(`expected response with text/html, but was ${a}`,t);if(n&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new r(`expected response with text/html or application/json, but was ${a}`,t);let i=t.headers.get("x-html-safe");if(i){if(!e.includes(i))throw new r("response X-HTML-Safe nonce did not match",t)}else throw new r("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),o),(0,a.B)(e,await o.text())}function o(e,t,n=1e3,r=[200],a=[202]){return async function n(s){let o=new Request(e,t);(0,i.tV)(o.headers);let l=await self.fetch(o);if(a.includes(l.status))return await new Promise(e=>setTimeout(e,s)),n(1.5*s);if(r.includes(l.status))return l;if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);throw Error(`Unexpected ${l.status} response status from poll endpoint`)}(n)}async function l(e,t,n){let{wait:r=500,acceptedStatusCodes:a=[200],max:s=3,attempt:o=0}=n||{},c=async()=>new Promise((n,l)=>{setTimeout(async()=>{try{let r=new Request(e,t);(0,i.tV)(r.headers);let l=await self.fetch(r);if(a.includes(l.status)||o+1===s)return n(l);n("retry")}catch(e){l(e)}},r*o)}),d=await c();return"retry"!==d?d:l(e,t,{wait:r,acceptedStatusCodes:a,max:s,attempt:o+1})}},61407:(e,t,n)=>{n.d(t,{t:()=>a});var r=n(79607);let a=({items:e,filter:t,key:n,secondaryKey:a})=>{let i=e.map(e=>[(0,r.dt)(t,n(e)),e]);return a&&(i=i.map(([e,n])=>[Math.max(e,(0,r.dt)(t,a(n))),n])),i.filter(([e])=>e>r.IP).sort(([e,t],[r,a])=>r===e?n(t).localeCompare(n(a)):r-e).map(([,e])=>e)}},79607:(e,t,n)=>{n.d(t,{Dx:()=>s,IP:()=>i,M4:()=>a,dt:()=>o});var r=n(91385);let a=1/0,i=-1/0,s=1,o=(e,t,n=s)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return a;if(0===l.length||0===o.length)return i;let c=(0,r.fN)(o,l);return c===1/0&&o!==l?i:l.startsWith(o)||l.endsWith(o)?c+n:c}},74547:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>s,dV:()=>o,h$:()=>d,jK:()=>c});let r=null,a=!1;function i(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);r=e,function(){if(a)return;a=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{r&&(r(e.contextRegion),r=null)},{once:!0})}()}function s(e){i(t=>t.pushCrumb(e))}function o(){i(e=>e.popCrumb())}function l(e){i(t=>t.replaceCrumbs(e))}function c(e){i(t=>t.renameCurrentCrumb(e))}function d(e){i(t=>t.replaceCurrentCrumb(e))}},10688:(e,t,n)=>{n.d(t,{H:()=>i});var r=n(3785),a=n(61681);async function i(e,t,n){let i=await (0,a.q$)(e);if(401===i.status){let e=n.getQueryData(t);if(!e)throw new a.ol;return e}let s=await (0,a.hp)(i);return(0,r.Av)(s),(0,a.R)(i),s}},38146:(e,t,n)=>{n.d(t,{gX:()=>nd,S4:()=>r_,OC:()=>b,Uz:()=>rw});var r,a=n(74848),i=n(21728);function s(e){if(null==e)throw Error("Failed to load page data.")}var o=n(70179),l=n(38621),c=n(63867),d=n(34164),u=n(96540),m=n(33049),h=n(60826),p=n(79369),f=n(81830),g=n(10688),y=n(97665),x=n(97286);function v(){let e,t=(0,i.c)(2),{basePageDataUrl:n}=(0,f.Yu)(),r=`basePageDataURL:${n}`;return t[0]!==r?(e=[h.u.mergeBox,r],t[0]=r,t[1]=e):e=t[1],e}let _=(0,u.createContext)({mergeMethod:m.q$.MERGE,setMergeMethod:()=>{}});function b({children:e,defaultMergeMethod:t}){let[n,r]=(0,u.useState)(t),i=v(),s=(0,y.jE)();(0,u.useEffect)(()=>{s.invalidateQueries({queryKey:i})},[n]);let o=(0,u.useMemo)(()=>({mergeMethod:n,setMergeMethod:r}),[n]);return(0,a.jsx)(_.Provider,{value:o,children:e})}function S(){return(0,u.useContext)(_)}try{_.displayName||(_.displayName="MergeMethodContext")}catch{}try{b.displayName||(b.displayName="MergeMethodContextProvider")}catch{}function C(e){let t=e&&e.conditions.find(e=>m.nw.includes(e.type));if(t&&"conflicts"in t&&"isConflictResolvableInWeb"in t)return t}function j(e){return e?.conditions.filter(e=>m.iG.includes(e.type)&&"FAILED"===e.result)??[]}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let BaseSectionStatus=class BaseSectionStatus{get shouldRender(){return!1}get shouldConsiderStatus(){return this.shouldRender}get sectionStatus(){return"UNKNOWN"}get mergeBoxStatus(){return"UNKNOWN"}constructor(e,t,n){w(this,"pullRequest",void 0),w(this,"mergeRequirements",void 0),w(this,"statusChecks",void 0),this.pullRequest=e,this.mergeRequirements=t,this.statusChecks=n}};function N(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function I(e,t){var n=N(e,t,"get");return n.get?n.get.call(e):n.value}function E(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}let R=["MERGE_QUEUE","REQUIRED_STATUS_CHECKS"],T=["PULL_REQUEST_REPO_STATE","PULL_REQUEST_STATE"],k=["USER_CANNOT_PUSH"];var A=new WeakMap,D=new WeakMap,P=new WeakMap,L=new WeakMap;let BlockedSectionStatus=class BlockedSectionStatus extends BaseSectionStatus{get shouldRender(){return this.mergeRequirements?.state==="UNMERGEABLE"&&!this.pullRequest.isDraft&&0!==this.failingConditionsAndRules.length&&this.pullRequest.viewerCanUpdate}get sectionStatus(){return this.mergeRequirements?.state==="UNMERGEABLE"?"FAILED":"PASSED"}get mergeBoxStatus(){return this.sectionStatus}get failingConditionsAndRules(){return I(this,A)||function(e,t,n){var r=N(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,A,[...I(this,P),...I(this,D),...I(this,L)]),I(this,A)}constructor(...e){super(...e),E(this,D,{get:M,set:void 0}),E(this,P,{get:O,set:void 0}),E(this,L,{get:F,set:void 0}),E(this,A,{writable:!0,value:void 0})}};function M(){return j(this.mergeRequirements).flatMap(e=>"ruleRollups"in e?e.ruleRollups:[]).filter(e=>e?.result==="FAILED"&&!R.includes(e.ruleType))}function O(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.jw.includes(e.type)&&"FAILED"===e.result)??[]).filter(e=>!T.includes(e.type))}function F(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.TW.includes(e.type)&&"FAILED"===e.result)??[]).flatMap(e=>"failedSubConditions"in e?e.failedSubConditions:[]).filter(e=>!k.includes(e.displayName))}let B={AwaitingReview:"AwaitingReview",ChangesRequested:"ChangesRequested",ChecksFailing:"ChecksFailing",ChecksPending:"ChecksPending",DraftReadyForReview:"DraftReadyForReview",DraftNotReadyForReview:"DraftNotReadyForReview",InMergeQueue:"InMergeQueue",MergeConflicts:"MergeConflicts",Mergeable:"Mergeable",NonactionableFailure:"NonactionableFailure",NonRequiredChecksUnsuccessful:"NonRequiredChecksUnsuccessful",UnableToMerge:"UnableToMerge",Unknown:"Unknown",Merged:"Merged",Closed:"Closed"};function U(e){return(e?.conditions.filter(e=>"FAILED"===e.result)??[]).map(e=>e.type)}function $(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":return!0;case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"SUCCESS":case"COMPLETED":case"NEUTRAL":case"REQUESTED":case"SKIPPED":case"_UNKNOWN_VALUE":return!1}}(e.state))}function V(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"_UNKNOWN_VALUE":case"CANCELLED":case"STALE":case"TIMED_OUT":return!0;case"SUCCESS":case"COMPLETED":case"EXPECTED":case"IN_PROGRESS":case"NEUTRAL":case"PENDING":case"QUEUED":case"REQUESTED":case"SKIPPED":case"WAITING":return!1}}(e.state))}function q(e){return void 0!==e&&e?.statusChecks.length!==0&&(!V(e)||!$(e))}function W(e,t){return e?.state!=="UNMERGEABLE"&&!!t?.statusChecks.some(e=>!e.isRequired&&!function(e){switch(e){case"NEUTRAL":case"SUCCESS":case"SKIPPED":return!0;case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"COMPLETED":case"REQUESTED":case"_UNKNOWN_VALUE":return!1}}(e.state))||t?.statusRollup.combinedState==="PENDING_APPROVAL"}function G(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type),n=t?.ruleRollups?.find(e=>"PULL_REQUEST"===e.ruleType);if(!n||"FAILED"!==n.result)return[];let r=n.metadata;return r&&"failureReasons"in r&&r.failureReasons.map(e=>e.toUpperCase())||[]}function z(e){return U(e).includes("PULL_REQUEST_MERGE_CONFLICT_STATE")}let ChecksSectionStatus=class ChecksSectionStatus extends BaseSectionStatus{get shouldRender(){let e=this.statusChecks?.statusRollup;return(e?.summary.length??0)>0||e?.combinedState==="PENDING_APPROVAL"}get sectionStatus(){let e=C(this.mergeRequirements);return"DIRTY"===this.pullRequest.mergeStateStatus&&e?.result==="FAILED"?"PENDING_CONFLICTS":this.statusChecks?.statusRollup.combinedState??"UNKNOWN"}get mergeBoxStatus(){if("PENDING_APPROVAL"===this.sectionStatus)return"PENDING_USER_ACTION";let e=V(this.statusChecks),t=$(this.statusChecks),n=q(this.statusChecks),r=W(this.mergeRequirements,this.statusChecks);return t||"PENDING"===this.sectionStatus||"PENDING_CONFLICTS"===this.sectionStatus?"PENDING":e?"FAILED":r?"NEUTRAL":n?"PASSED":"NEUTRAL"}};let ClosedOrMergedStateSectionStatus=class ClosedOrMergedStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"!==this.pullRequest.state}get sectionStatus(){return"OPEN"!==this.pullRequest.state?this.pullRequest.state:"UNKNOWN"}get mergeBoxStatus(){return"MERGED"===this.sectionStatus?"MERGED":"NEUTRAL"}};function H(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Q(e,t){var n=H(e,t,"get");return n.get?n.get.call(e):n.value}function K(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}var J=new WeakMap,X=new WeakMap,Y=new WeakMap;let ConflictsSectionStatus=class ConflictsSectionStatus extends BaseSectionStatus{get shouldRender(){return("BLOCKED"!==this.pullRequest.mergeStateStatus||!!this.pullRequest.viewerCanUpdateBranch)&&!!this.conflictsCondition}get sectionStatus(){return this.conflictsCondition?Q(this,Y).call(this,this.pullRequest.advisoryWorkspace,this.pullRequest.mergeStateStatus,this.conflictsCondition,Q(this,X)):"PENDING"}get mergeBoxStatus(){switch(this.sectionStatus){case"NO_CONFLICTS":case"HAS_ADVISORY_WORKSPACE":return"PASSED";case"HAS_CONFLICTS":case"HAS_REBASE_CONFLICTS":case"OUT_OF_DATE":return"NEUTRAL";default:return"PENDING"}}get conflictsCondition(){return Q(this,J)||function(e,t,n){var r=H(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}}(this,J,C(this.mergeRequirements)),Q(this,J)}constructor(...e){super(...e),K(this,X,{get:Z,set:void 0}),K(this,J,{writable:!0,value:void 0}),K(this,Y,{writable:!0,value:(e,t,n,r)=>{if("BEHIND"===t)return"OUT_OF_DATE";if("UNKNOWN"===t)return"PENDING";if("FAILED"===n.result&&0===r.length)return"HAS_REBASE_CONFLICTS";if(!e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"NO_CONFLICTS";if(e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"HAS_ADVISORY_WORKSPACE";else if("DIRTY"===t&&"FAILED"===n.result)return"HAS_CONFLICTS";else if("BLOCKED"===t)return"OUT_OF_DATE";else return"PENDING"}})}};function Z(){return this.conflictsCondition?.conflicts??[]}let DraftStateSectionStatus=class DraftStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"===this.pullRequest.state&&this.pullRequest.isDraft}get sectionStatus(){return"IS_DRAFT"}get mergeBoxStatus(){return"NEUTRAL"}};let MergeQueueSectionStatus=class MergeQueueSectionStatus extends BaseSectionStatus{get shouldRender(){return this.pullRequest.isInMergeQueue}get sectionStatus(){return"QUEUED"}get mergeBoxStatus(){return this.sectionStatus}};var ee=n(75367),et=n(34614),en=n(92265),er=n(84217);let ea={wrapper:"MergeBoxSectionHeader-module__wrapper--f99Ts",wrapperCanExpand:"MergeBoxSectionHeader-module__wrapperCanExpand--Hv6nF",button:"MergeBoxSectionHeader-module__button--RGF7G",MergeBoxSectionHeading:"MergeBoxSectionHeader-module__MergeBoxSectionHeading--gS3rL"},ei=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"":"rotate(180deg)";return s[0]!==c?(t={transition:"transform 0.15s ease-in-out",transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronUpIcon,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{ei.displayName||(ei.displayName="ExpandableSectionIcon")}catch{}let es=e=>{let t,n,r,s,o,l,c,u,m,h,p=(0,i.c)(31),{title:f,subtitle:g,headerId:y,icon:x,expandableProps:v,children:_,rightSideContent:b}=e;if(v&&b)throw Error("MergeBoxSectionHeader: rightSideContent is not supported when expandableProps exist");p[0]!==v?(t=v||{},p[0]=v,p[1]=t):t=p[1];let{isExpanded:S,ariaLabel:C,onToggle:j}=t,w=v&&ea.wrapperCanExpand,N=!v&&"flex-column flex-sm-row flex-items-center flex-sm-items-start flex-justify-between";return p[2]!==w||p[3]!==N?(n=(0,d.$)(ea.wrapper,w,N),p[2]=w,p[3]=N,p[4]=n):n=p[4],p[5]!==x?(r=x&&(0,a.jsx)("div",{className:"mr-2 flex-shrink-0",children:x}),p[5]=x,p[6]=r):r=p[6],p[7]!==y||p[8]!==f?(s=(0,a.jsx)(er.A,{as:"h3",id:y,className:ea.MergeBoxSectionHeading,children:f}),p[7]=y,p[8]=f,p[9]=s):s=p[9],p[10]!==g?(o=(0,a.jsx)("p",{className:"fgColor-muted mb-0 ",children:g}),p[10]=g,p[11]=o):o=p[11],p[12]!==_||p[13]!==s||p[14]!==o?(l=(0,a.jsxs)("div",{className:"flex-1",children:[s,o,_]}),p[12]=_,p[13]=s,p[14]=o,p[15]=l):l=p[15],p[16]!==b||p[17]!==l?(c=(0,a.jsxs)("div",{className:"d-flex flex-1 flex-column flex-sm-row gap-2",children:[l,b]}),p[16]=b,p[17]=l,p[18]=c):c=p[18],p[19]!==r||p[20]!==c?(u=(0,a.jsxs)("div",{className:"d-flex width-full",children:[r,c]}),p[19]=r,p[20]=c,p[21]=u):u=p[21],p[22]!==C||p[23]!==v||p[24]!==S||p[25]!==j?(m=v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{"aria-label":C,type:"button",className:ea.button,onClick:j,"aria-expanded":S}),(0,a.jsx)("div",{className:"fgColor-muted pr-2 pt-2",children:(0,a.jsx)(ei,{isExpanded:!!S})})]}),p[22]=C,p[23]=v,p[24]=S,p[25]=j,p[26]=m):m=p[26],p[27]!==u||p[28]!==m||p[29]!==n?(h=(0,a.jsxs)("div",{className:n,children:[u,m]}),p[27]=u,p[28]=m,p[29]=n,p[30]=h):h=p[30],h};try{es.displayName||(es.displayName="MergeBoxSectionHeader")}catch{}let eo={reviewAuthor:"ReviewerSection-module__reviewAuthor--V23_y",reviewAuthorAnchor:"ReviewerSection-module__reviewAuthorAnchor--Awxgk",leadingVisual:"ReviewerSection-module__leadingVisual--ZIlsf",reviewedIcon:"ReviewerSection-module__reviewedIcon--WwqSG",reviewerGroupsContainer:"ReviewerSection-module__reviewerGroupsContainer--KWMla",reviewText:"ReviewerSection-module__reviewText--HpC35",reviewerActionBar:"ReviewerSection-module__reviewerActionBar--nNpie",subtitleLink:"ReviewerSection-module__subtitleLink--GB5Q9"},el={expandableContent:"MergeBoxExpandable-module__expandableContent--F8GC8",expandableWrapper:"MergeBoxExpandable-module__expandableWrapper--WmDqF",isExpanded:"MergeBoxExpandable-module__isExpanded--Le972"},ec=e=>{let t,n,r,s,o,l=(0,i.c)(13),{isExpanded:c,children:u}=e,m=void 0!==c&&c,h=m&&el.isExpanded;l[0]!==h?(t=(0,d.$)(el.expandableWrapper,h),l[0]=h,l[1]=t):t=l[1];let p=m?"visible":"hidden";l[2]!==p?(n={visibility:p},l[2]=p,l[3]=n):n=l[3];let f=m&&el.isExpanded;l[4]!==f?(r=(0,d.$)(el.expandableContent,f),l[4]=f,l[5]=r):r=l[5];let g=m&&u;return l[6]!==r||l[7]!==g?(s=(0,a.jsx)("div",{className:r,children:g}),l[6]=r,l[7]=g,l[8]=s):s=l[8],l[9]!==t||l[10]!==n||l[11]!==s?(o=(0,a.jsx)("div",{className:t,style:n,children:s}),l[9]=t,l[10]=n,l[11]=s,l[12]=o):o=l[12],o};try{ec.displayName||(ec.displayName="MergeBoxExpandable")}catch{}var ed=n(84905),eu=n(55847);let em={groupHeadingButton:"ReviewGroupExpander-module__groupHeadingButton--a8Q02",expandableWrapper:"ReviewGroupExpander-module__expandableWrapper--bKxYR",expandableListView:"ReviewGroupExpander-module__expandableListView--ROcj8",isExpanded:"ReviewGroupExpander-module__isExpanded--s8PqF"};var eh=n(23812);let ep=e=>{let t,n,r,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"rotate(90deg)":"";return s[0]!==c?(t={transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.ChevronRightIcon,{size:12}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=r):r=s[4],r};try{ep.displayName||(ep.displayName="ExpandableGroupIcon")}catch{}let ef={[m.Qv.Approvals]:(0,a.jsx)(l.CheckIcon,{className:"fgColor-success",size:16}),[m.Qv.RequestedChanges]:(0,a.jsx)(l.FileDiffIcon,{className:"fgColor-danger",size:16}),[m.Qv.PendingReviewRequest]:(0,a.jsx)(l.PersonIcon,{size:16})};function eg(e){let t,n,r,s,o,l,c,m,h=(0,i.c)(29),{children:p,count:f,pullRequestId:g,reviewGroup:y}=e,{sendAnalyticsEvent:x}=(0,ee.s)(),[v,_]=(0,eh.Fo)(`${g}:reviewersGroup:${y}Expanded`,!1),b=(0,u.useId)(),S=ef[y],C=`${f} ${f>1?y:y.substring(0,y.length-1)}`,j=v?`Collapse ${C} group`:`Expand ${C} group`;h[0]!==v?(t=()=>(0,a.jsx)(ep,{isExpanded:v}),h[0]=v,h[1]=t):t=h[1],h[2]!==v||h[3]!==y||h[4]!==x||h[5]!==_?(n=()=>{x(v?"reviewers_group.collapse":"reviewers_group.expand","MERGEBOX_REVIEWERS_GROUP_TOGGLE_BUTTON",{group:y}),_(!v)},h[2]=v,h[3]=y,h[4]=x,h[5]=_,h[6]=n):n=h[6],h[7]!==C?(r=(0,a.jsx)("span",{className:"ml-1",children:C}),h[7]=C,h[8]=r):r=h[8],h[9]!==b||h[10]!==v||h[11]!==S||h[12]!==j||h[13]!==t||h[14]!==n||h[15]!==r?(s=(0,a.jsxs)(eu.Q,{"aria-controls":b,"aria-expanded":v,"aria-label":j,className:em.groupHeadingButton,variant:"invisible",size:"small",trailingVisual:t,onClick:n,children:[S," ",r]}),h[9]=b,h[10]=v,h[11]=S,h[12]=j,h[13]=t,h[14]=n,h[15]=r,h[16]=s):s=h[16];let w=v&&em.isExpanded;h[17]!==w?(o=(0,d.$)(em.expandableWrapper,w),h[17]=w,h[18]=o):o=h[18];let N=v&&p;return h[19]!==N?(l=(0,a.jsx)("div",{className:em.expandableListView,children:N}),h[19]=N,h[20]=l):l=h[20],h[21]!==b||h[22]!==C||h[23]!==o||h[24]!==l?(c=(0,a.jsx)("div",{className:o,id:b,"aria-label":C,role:"group",children:l}),h[21]=b,h[22]=C,h[23]=o,h[24]=l,h[25]=c):c=h[25],h[26]!==c||h[27]!==s?(m=(0,a.jsxs)(a.Fragment,{children:[s,c]}),h[26]=c,h[27]=s,h[28]=m):m=h[28],m}try{eg.displayName||(eg.displayName="ReviewGroupExpander")}catch{}var ey=n(78168),ex=n(81584),ev=n(67307),e_=n(39459);let eb={listItem:"SectionListItem-module__listItem--Wifrh"};var eS=n(15385),eC=n(6869),ej=n(73451),ew=n(19647),eN=n(9852),eI=n(94747),eE=n(61681),eR=n(87854),eT=n(53110);function ek({reviewer:e,reviewStatusText:t,hovercardUrl:n,reviewId:r,viewerCanDismissReviews:s,viewerCanReRequestReviews:o=!1}){let c=(0,u.useRef)(null),m=(0,u.useRef)(null),[f,g]=(0,u.useState)(!1),[x,_]=(0,u.useState)(null),[b,S]=(0,u.useState)(""),C=b.trim().length<1,[j,w]=(0,u.useState)(!1),N=[s?{key:"dismiss-review",render:()=>(0,a.jsx)(eS.l.Item,{onSelect:()=>{g(!0)},children:"Dismiss review"})}:null,o?{key:"re-request-review",render:()=>(0,a.jsx)(eS.l.Item,{onSelect:()=>R({reviewerLogin:e.login}),children:"Re-request review"})}:null].filter(e=>!!e),I=!!r&&N.length>0,E=async()=>{_(null),g(!1),w(!1),m.current?.focus()},{mutate:R}=function(e){let t,n,r,a,s,o=(0,i.c)(13);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l}=t,c=v(),d=(0,p.e)(h.u.reRequestReviewFromUser),u=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eE.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eE.hp)(t);return(0,eE.R)(t,n),n},o[2]=d,o[3]=n):n=o[3],o[4]!==c||o[5]!==u?(r=()=>u.invalidateQueries({queryKey:c},{cancelRefetch:!1}),o[4]=c,o[5]=u,o[6]=r):r=o[6],o[7]!==l?(a=e=>{l?.(e)},o[7]=l,o[8]=a):a=o[8],o[9]!==n||o[10]!==r||o[11]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[9]=n,o[10]=r,o[11]=a,o[12]=s):s=o[12],(0,eI.n)(s)}({onError:()=>{}}),{mutate:T,isPending:k}=function(){let e,t,n,r=(0,i.c)(8),a=(0,p.e)(h.u.dismissReview),s=v(),o=(0,y.jE)();return r[0]!==a?(e=async e=>{let t=await (0,eE.q$)(a,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eE.hp)(t);return(0,eE.R)(t,n),n},r[0]=a,r[1]=e):e=r[1],r[2]!==s||r[3]!==o?(t=()=>o.invalidateQueries({queryKey:s},{cancelRefetch:!1}),r[2]=s,r[3]=o,r[4]=t):t=r[4],r[5]!==e||r[6]!==t?(n={mutationFn:e,onSuccess:t},r[5]=e,r[6]=t,r[7]=n):n=r[7],(0,eI.n)(n)}(),A=(0,u.useCallback)(()=>{k||(C&&w(!0),r&&!C&&T({reviewId:r,message:b},{onSuccess:()=>{E()},onError:e=>{_(e.message)}}))},[T,b,C,k,r]);if((0,u.useEffect)(()=>{function e(e){e.metaKey&&"Enter"===e.key&&f&&(e.preventDefault(),A())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f,A]),!e)return null;let D=`${e.login} ${t.charAt(0).toLowerCase()+t.slice(1)}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ey.c,{className:eb.listItem,"aria-label":D,title:(0,a.jsx)(ex.ao,{href:e.url,value:e.login,containerClassName:"d-flex flex-items-center pt-0",headingClassName:eo.reviewAuthor,anchorClassName:eo.reviewAuthorAnchor,leadingBadge:(0,a.jsx)(ev.e,{className:(0,d.$)(eo.leadingVisual,"mt-1"),children:(0,a.jsx)(e_.r,{alt:`${e.login}'s avatar image`,size:20,src:e.avatarUrl,"data-hovercard-url":n,className:"flex-shrink-0 ml-2"})}),children:(0,a.jsx)("span",{className:eo.reviewText,children:t})}),secondaryActions:I?(0,a.jsx)(eR.L,{anchorRef:m,label:"review options",staticMenuActions:N,className:eo.reviewerActionBar}):void 0}),f&&(0,a.jsxs)(eN.l,{title:"Dismiss review",onClose:E,role:"dialog",initialFocusRef:c,returnFocusRef:m,footerButtons:[{buttonType:"default",content:"Cancel",onClick:E},{buttonType:"danger",loading:k,loadingAnnouncement:"Dismissing review",content:"Dismiss review",onClick:A}],children:[x&&(0,a.jsxs)(eC.A,{className:"mb-2",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),x]}),(0,a.jsxs)(ej.A,{required:!0,className:"mb-2",children:[(0,a.jsx)(ej.A.Label,{children:(0,a.jsxs)("h4",{className:"f5",children:["Reason for dismissing ",e.login,"'s review"]})}),(0,a.jsx)(ew.Ay,{ref:c,onChange:e=>{w(!1),S(e.target.value)},value:b,className:"width-full height-full"}),C&&j&&(0,a.jsx)(ej.A.Validation,{variant:"error",children:"Please provide a reason for dismissing the review"}),(0,a.jsx)(ej.A.Caption,{children:"This reason will appear in the timeline so other users will know why the review was dismissed."})]})]})]})}try{ek.displayName||(ek.displayName="ReviewListItem")}catch{}var eA=n(96235);let eD=e=>{if(0===e.length)return"";{if(1===e.length)return e[0];if(2===e.length)return e.join(" and ");let t=e.pop();return`${e.join(", ")}, and ${t}`}},eP=(e,t,n)=>{let r="";switch(e){case"APPROVED":r+="Approved these changes";break;case"CHANGES_REQUESTED":r+="Requested changes";break;case"COMMENTED":r+="Commented"}return n&&(r+=" with read-only permissions"),"APPROVED"===e&&t.length>0&&(r+=` for ${eD(t)}`),r};function eL(e){let t,n,r,s=(0,i.c)(13),{review:o,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}=e,{author:d}=o;if(!d)return null;let u=o.id,m=!o.authorCanPushToRepository;return s[0]!==o.onBehalfOf||s[1]!==o.state||s[2]!==m?(t=eP(o.state,o.onBehalfOf,m),s[0]=o.onBehalfOf,s[1]=o.state,s[2]=m,s[3]=t):t=s[3],s[4]!==d.login?(n=(0,eA.dCN)({owner:d.login}),s[4]=d.login,s[5]=n):n=s[5],s[6]!==d||s[7]!==o.id||s[8]!==t||s[9]!==n||s[10]!==l||s[11]!==c?(r=(0,a.jsx)(ek,{reviewer:d,reviewId:u,reviewStatusText:t,hovercardUrl:n,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}),s[6]=d,s[7]=o.id,s[8]=t,s[9]=n,s[10]=l,s[11]=c,s[12]=r):r=s[12],r}try{eL.displayName||(eL.displayName="OpinionatedReviewRow")}catch{}function eM(e){let t,n,r,s=(0,i.c)(15),{opinionatedReviews:o,pullRequestId:l,reviewGroup:c,viewerCanDismissReviews:d,viewerCanReRequestReviews:u}=e;if(0===o.length)return null;let m=o.length,h=`list of ${c}`;if(s[0]!==o||s[1]!==d||s[2]!==u){let e;s[4]!==d||s[5]!==u?(e=e=>(0,a.jsx)(eL,{review:e,viewerCanDismissReviews:d,viewerCanReRequestReviews:u},`opinionated-review-from-${e?.author?.name}`),s[4]=d,s[5]=u,s[6]=e):e=s[6],t=o.map(e),s[0]=o,s[1]=d,s[2]=u,s[3]=t}else t=s[3];return s[7]!==h||s[8]!==t?(n=(0,a.jsx)(ed.u,{title:h,titleHeaderTag:"h3",children:t}),s[7]=h,s[8]=t,s[9]=n):n=s[9],s[10]!==o.length||s[11]!==l||s[12]!==c||s[13]!==n?(r=(0,a.jsx)(eg,{count:m,reviewGroup:c,pullRequestId:l,children:n}),s[10]=o.length,s[11]=l,s[12]=c,s[13]=n,s[14]=r):r=s[14],r}try{eM.displayName||(eM.displayName="OpinionatedReviewsGroup")}catch{}function eO(e){let t,n,r=(0,i.c)(9),{reviewRequest:s}=e,{reviewer:o}=s;if(!o)return null;if("TEAM"===o.type){let e;if(r[0]!==o.login||r[1]!==o.name){let t=o.login.split("/")[0]??"";e=(0,eA.Pmq)({owner:t,team:o.name}),r[0]=o.login,r[1]=o.name,r[2]=e}else e=r[2];t=e}else{let e;r[3]!==o.login?(e=(0,eA.dCN)({owner:o.login}),r[3]=o.login,r[4]=e):e=r[4],t=e}let l="was requested for review";return s.isCodeOwner&&(l="was requested for review as a codeowner"),r[5]!==t||r[6]!==o||r[7]!==l?(n=(0,a.jsx)(ek,{reviewer:o,reviewStatusText:l,hovercardUrl:t}),r[5]=t,r[6]=o,r[7]=l,r[8]=n):n=r[8],n}try{eO.displayName||(eO.displayName="RequestedReviewRow")}catch{}function eF(e){let t,n,r,s=(0,i.c)(10),{pendingRequestedReviews:o,pullRequestId:l,reviewGroup:c}=e;if(0===o.length)return null;let d=o.length,u=`list of ${c}`;return s[0]!==o?(t=o.map(eB),s[0]=o,s[1]=t):t=s[1],s[2]!==u||s[3]!==t?(n=(0,a.jsx)(ed.u,{title:u,titleHeaderTag:"h3",children:t}),s[2]=u,s[3]=t,s[4]=n):n=s[4],s[5]!==o.length||s[6]!==l||s[7]!==c||s[8]!==n?(r=(0,a.jsx)(eg,{count:d,reviewGroup:c,pullRequestId:l,children:n}),s[5]=o.length,s[6]=l,s[7]=c,s[8]=n,s[9]=r):r=s[9],r}function eB(e){return(0,a.jsx)(eO,{reviewRequest:e},`requested-review-from-${e?.reviewer?.name}`)}try{eF.displayName||(eF.displayName="PendingRequestedReviewsGroup")}catch{}let eU={APPROVED:"APPROVED",CHANGES_REQUESTED:"CHANGES_REQUESTED",REVIEW_REQUIRED:"REVIEW_REQUIRED",REVIEWED:"REVIEWED",REVIEW_REQUESTED:"REVIEW_REQUESTED"},e$=(e,t)=>{if(t.includes("MORE_REVIEWS_REQUIRED"))if(1===e)return"At least 1 approving review is required";else if(0===e&&t.includes("LAST_PUSH_APPROVAL_REQUIRED"))return"An approval on the most recent push is required";else return`At least ${e} approving reviews are required`;return t.includes("CODE_OWNER_REVIEW_REQUIRED")?"Code owner review required":t.includes("SOC2_APPROVAL_PROCESS_REQUIRED")?"A review from a compliance team is required":""};function eV(e){let t,n,r,s,o,l,c,h,p,f,g,y,x,v,_,b,S,C,j,w,N,I,E,R,T,k,A=(0,i.c)(75),{consolidatedFailureReasons:D,helpUrl:P,latestOpinionatedReviews:L,numReviewsRequired:M,pendingRequestedReviews:O,pullRequestId:F,reviewsState:B,viewerCanDismissReviews:U,viewerCanReRequestReviews:$}=e,V=[...L,...O].length>0,[q,W]=(0,u.useState)(V),{sendAnalyticsEvent:G}=(0,ee.s)(),z=(0,u.useId)();A[0]!==L?(t=function(e){let t=[],n=[];for(let r of e)"APPROVED"===r.state&&t.push(r),"CHANGES_REQUESTED"===r.state&&n.push(r);return{approvedReviews:t,requestedChangesReviews:n}}(L),A[0]=L,A[1]=t):t=A[1];let{approvedReviews:H,requestedChangesReviews:Q}=t,K=`${P}/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/requesting-a-pull-request-review`;A[2]!==K||A[3]!==D||A[4]!==L||A[5]!==M?(n=e=>{switch(e){case eU.REVIEW_REQUIRED:return`${e$(M,D)} by reviewers with write access.`;case eU.REVIEW_REQUESTED:return(0,a.jsxs)(a.Fragment,{children:["Review has been requested on this pull request. It is not required to merge."," ",(0,a.jsx)(et.A,{inline:!0,href:K,className:(0,d.$)(eo.subtitleLink,"position-relative"),children:"Learn more about requesting a pull request review."})]});default:return`${function(e){let t=e.filter(e=>e&&"CHANGES_REQUESTED"===e.state&&e.authorCanPushToRepository).length,n=e.filter(e=>e&&"APPROVED"===e.state&&e.authorCanPushToRepository).length;return 0===t&&0===n?"No applicable reviews submitted":[t>0?`${t} change${1===t?"":"s"} requested`:void 0,n>0?`${n} approving review${1===n?"":"s"}`:void 0].filter(Boolean).join(", ")}(L)} by reviewers with write access.`}},A[2]=K,A[3]=D,A[4]=L,A[5]=M,A[6]=n):n=A[6];let J=n;A[7]!==J?(r=J(eU.APPROVED),A[7]=J,A[8]=r):r=A[8],A[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(en.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eH,size:32}),A[9]=s):s=A[9],A[10]!==r?(o={heading:"Changes approved",subtitle:r,icon:s},A[10]=r,A[11]=o):o=A[11],A[12]!==J?(l=J(eU.CHANGES_REQUESTED),A[12]=J,A[13]=l):l=A[13],A[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(en.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:ez,size:32}),A[14]=c):c=A[14],A[15]!==l?(h={heading:"Changes requested",subtitle:l,icon:c},A[15]=l,A[16]=h):h=A[16],A[17]!==J?(p=J(eU.REVIEW_REQUIRED),A[17]=J,A[18]=p):p=A[18],A[19]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(en.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:eG,size:32}),A[19]=f):f=A[19],A[20]!==p?(g={heading:"Review required",subtitle:p,icon:f},A[20]=p,A[21]=g):g=A[21],A[22]!==J?(y=J(eU.REVIEWED),A[22]=J,A[23]=y):y=A[23],A[24]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(en.A,{className:(0,d.$)(eo.reviewedIcon,"fgColor-onEmphasis"),icon:eW,size:32}),A[24]=x):x=A[24],A[25]!==y?(v={heading:"Changes reviewed",subtitle:y,icon:x},A[25]=y,A[26]=v):v=A[26],A[27]!==J?(_=J(eU.REVIEW_REQUESTED),A[27]=J,A[28]=_):_=A[28],A[29]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(en.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eq,size:32}),A[29]=b):b=A[29],A[30]!==_?(S={heading:"Review requested",subtitle:_,icon:b},A[30]=_,A[31]=S):S=A[31],A[32]!==g||A[33]!==v||A[34]!==S||A[35]!==o||A[36]!==h?(C={APPROVED:o,CHANGES_REQUESTED:h,REVIEW_REQUIRED:g,REVIEWED:v,REVIEW_REQUESTED:S},A[32]=g,A[33]=v,A[34]=S,A[35]=o,A[36]=h,A[37]=C):C=A[37];let X=C,Y=X[B],Z=X[B],er=X[B];return A[38]!==X||A[39]!==q||A[40]!==B||A[41]!==G||A[42]!==V?(j=V?{ariaLabel:X[B].heading,isExpanded:q,onToggle:()=>{G(q?"reviewers_section.collapse":"reviewers_section.expand","MERGEBOX_REVIEWERS_SECTION_TOGGLE_BUTTON"),W(!q)}}:void 0,A[38]=X,A[39]=q,A[40]=B,A[41]=G,A[42]=V,A[43]=j):j=A[43],A[44]!==z||A[45]!==Y.heading||A[46]!==Z.subtitle||A[47]!==er.icon||A[48]!==j?(w=(0,a.jsx)(es,{headerId:z,title:Y.heading,subtitle:Z.subtitle,icon:er.icon,expandableProps:j}),A[44]=z,A[45]=Y.heading,A[46]=Z.subtitle,A[47]=er.icon,A[48]=j,A[49]=w):w=A[49],A[50]!==H||A[51]!==F||A[52]!==U||A[53]!==$?(N=(0,a.jsx)(eM,{viewerCanDismissReviews:U,reviewGroup:m.Qv.Approvals,opinionatedReviews:H,pullRequestId:F,viewerCanReRequestReviews:$}),A[50]=H,A[51]=F,A[52]=U,A[53]=$,A[54]=N):N=A[54],A[55]!==F||A[56]!==Q||A[57]!==U||A[58]!==$?(I=(0,a.jsx)(eM,{viewerCanDismissReviews:U,reviewGroup:m.Qv.RequestedChanges,opinionatedReviews:Q,pullRequestId:F,viewerCanReRequestReviews:$}),A[55]=F,A[56]=Q,A[57]=U,A[58]=$,A[59]=I):I=A[59],A[60]!==O||A[61]!==F||A[62]!==U?(E=(0,a.jsx)(eF,{reviewGroup:m.Qv.PendingReviewRequest,viewerCanDismissReviews:U,pendingRequestedReviews:O,pullRequestId:F}),A[60]=O,A[61]=F,A[62]=U,A[63]=E):E=A[63],A[64]!==N||A[65]!==I||A[66]!==E?(R=(0,a.jsxs)("div",{className:eo.reviewerGroupsContainer,children:[N,I,E]}),A[64]=N,A[65]=I,A[66]=E,A[67]=R):R=A[67],A[68]!==q||A[69]!==R?(T=(0,a.jsx)(ec,{isExpanded:q,children:R}),A[68]=q,A[69]=R,A[70]=T):T=A[70],A[71]!==z||A[72]!==w||A[73]!==T?(k=(0,a.jsxs)("section",{"aria-label":"Reviews","aria-describedby":z,className:"border-bottom color-border-subtle",children:[w,T]}),A[71]=z,A[72]=w,A[73]=T,A[74]=k):k=A[74],k}function eq(){return(0,a.jsx)(l.CheckIcon,{size:16})}function eW(){return(0,a.jsx)(l.CodeReviewIcon,{size:16})}function eG(){return(0,a.jsx)(l.XIcon,{size:16})}function ez(){return(0,a.jsx)(l.FileDiffIcon,{size:16})}function eH(){return(0,a.jsx)(l.CheckIcon,{size:16})}try{eV.displayName||(eV.displayName="ReviewerSection")}catch{}function eQ(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function eK(e,t){var n=eQ(e,t,"get");return n.get?n.get.call(e):n.value}function eJ(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function eX(e,t,n){var r=eQ(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var eY=new WeakMap,eZ=new WeakMap,e0=new WeakMap,e1=new WeakMap,e2=new WeakMap,e3=new WeakMap;let ReviewerSectionStatus=class ReviewerSectionStatus extends BaseSectionStatus{get shouldRender(){return"DIRTY"!==this.pullRequest.mergeStateStatus&&"UNKNOWN"!==this.pullRequest.mergeStateStatus&&(eK(this,e2).length>0||eK(this,e3).length>0||this.consolidatedFailureReasons.length>0)}get sectionStatus(){return e9(this.numReviewsRequired,eK(this,e1),eK(this,e2),this.consolidatedFailureReasons,eK(this,e3))}get mergeBoxStatus(){switch(this.sectionStatus){case eU.APPROVED:case eU.REVIEW_REQUESTED:case eU.REVIEWED:return"PASSED";case eU.CHANGES_REQUESTED:return"FAILED";case eU.REVIEW_REQUIRED:default:return"NEUTRAL"}}get numReviewsRequired(){let e=eK(this,e0)?.flatMap(e=>e.requiredReviewers||[])||[];return e.length?Math.max(...e):0}get consolidatedFailureReasons(){return eK(this,eZ)||eX(this,eZ,[...new Set(eK(this,e0)?.flatMap(e=>e.failureReasons||[])||[])].filter(e8)),eK(this,eZ)}constructor(...e){super(...e),eJ(this,e0,{get:e4,set:void 0}),eJ(this,e1,{get:e5,set:void 0}),eJ(this,e2,{get:e6,set:void 0}),eJ(this,e3,{get:e7,set:void 0}),eJ(this,eY,{writable:!0,value:void 0}),eJ(this,eZ,{writable:!0,value:void 0})}};function e4(){return eK(this,eY)||eX(this,eY,function(e){let t=e&&e.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);return(t?.ruleRollups?.filter(e=>"PULL_REQUEST"===e.ruleType).map(e=>e.metadata)??[]).filter(e=>null!==e).filter(e=>"requiredReviewers"in e&&"requiresCodeowners"in e&&"failureReasons"in e).map(e=>{let t=e.failureReasons.map(e=>e.toUpperCase());return{requiredReviewers:e.requiredReviewers,requiresCodeowners:e.requiresCodeowners,failureReasons:t}})??[]}(this.mergeRequirements)),eK(this,eY)}function e5(){return(eK(this,e0)?.filter(e=>e.requiresCodeowners)||[]).length>0}function e6(){return this.pullRequest.latestOpinionatedReviews}function e7(){return this.pullRequest.pendingReviewRequests}let e8=e=>"CODE_OWNER_REVIEW_REQUIRED"===e||"SOC2_APPROVAL_PROCESS_REQUIRED"===e||"CHANGES_REQUESTED"===e||"MORE_REVIEWS_REQUIRED"===e||"LAST_PUSH_APPROVAL_REQUIRED"===e,e9=(e,t,n,r,a)=>0===r.length&&n.length>0&&(e>0||t)?eU.APPROVED:r.includes("CODE_OWNER_REVIEW_REQUIRED")||r.includes("SOC2_APPROVAL_PROCESS_REQUIRED")||r.includes("MORE_REVIEWS_REQUIRED")||r.includes("LAST_PUSH_APPROVAL_REQUIRED")?eU.REVIEW_REQUIRED:r.includes("CHANGES_REQUESTED")?eU.CHANGES_REQUESTED:0===e&&a.length>0&&0===n.length?eU.REVIEW_REQUESTED:eU.REVIEWED;function te(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function tt(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function tn(e,t){var n=tt(e,t,"get");return n.get?n.get.call(e):n.value}function tr(e,t,n){te(e,t),t.set(e,n)}function ta(e,t,n){var r=tt(e,t,"set");if(r.set)r.set.call(e,n);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=n}return n}var ti=new WeakMap,ts=new WeakMap,to=new WeakMap,tl=new WeakMap,tc=new WeakSet;let MergeBoxStatusCalculator=class MergeBoxStatusCalculator{get overallStatus(){if("MERGED"===tn(this,ti).state)return"MERGED";if("CLOSED"===tn(this,ti).state)return"NEUTRAL";if(tn(this,ti).isInMergeQueue)return"QUEUED";if(tn(this,ti).isDraft)return"NEUTRAL";let e=Object.values(this.sections??[]).filter(e=>e.shouldConsiderStatus),t=e.some(e=>"FAILED"===e.mergeBoxStatus),n=e.every(e=>"PASSED"===e.mergeBoxStatus);return t&&tn(this,ti).viewerCanUpdate?"SOME_FAILED":n?"ALL_PASSED":"NEUTRAL"}get sections(){return tn(this,tl)}constructor(e,t,n){!function(e,t){te(e,t),t.add(e)}(this,tc),tr(this,ti,{writable:!0,value:void 0}),tr(this,ts,{writable:!0,value:void 0}),tr(this,to,{writable:!0,value:void 0}),tr(this,tl,{writable:!0,value:void 0}),ta(this,ti,e),ta(this,ts,t),ta(this,to,n),ta(this,tl,(function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n})(this,tc,td).call(this))}};function td(){return{BlockedSection:new BlockedSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),ClosedOrMergedStateMergeBox:new ClosedOrMergedStateSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),ChecksSection:new ChecksSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),ConflictsSection:new ConflictsSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),DraftStateSection:new DraftStateSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),MergeQueueSection:new MergeQueueSectionStatus(tn(this,ti),tn(this,ts),tn(this,to)),ReviewerSection:new ReviewerSectionStatus(tn(this,ti),tn(this,ts),tn(this,to))}}var tu=n(70170),tm=n(98013),th=n(64899);function tp(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function tf(){return!document.hidden}function tg(){return!0}let ty=()=>(0,u.useSyncExternalStore)(tp,tf,tg);var tx=n(65510);function tv(e){let t,n=(0,i.c)(3),{pullRequestHeadSha:r}=e,{basePageDataUrl:a}=(0,f.Yu)(),s=`headSha:${r}`,o=`basePageDataURL:${a}`;return n[0]!==s||n[1]!==o?(t=[h.u.statusChecks,s,o],n[0]=s,n[1]=o,n[2]=t):t=n[2],t}function t_(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=tv(t),c=(0,y.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,g.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,tx.U)(r)}var tb=n(47019),tS=n(2676),tC=n(95776);let tj={branchName:"ClosedOrMergedStateMergeBox-module__branchName--jGiSv"};var tw=n(52811);function tN(e){let t,n,r,s,o,c,m,f,g,x,_,b,S,C,j=(0,i.c)(62),{state:w,isCrossRepo:N,headRefName:I,headRepository:E,baseRepository:R,viewerCanDeleteHeadRef:T,viewerCanRestoreHeadRef:k,deprovisionableCodespaces:A}=e,[D,P]=(0,tb.A)(),L=(0,u.useRef)(null),[M,O]=(0,tb.A)(!1),F=A?A.count:0,B=k&&A&&F>0,U=F>1?"codespaces":"codespace";j[0]!==P?(t={onError:e=>{P(e)}},j[0]=P,j[1]=t):t=j[1];let{mutate:$,isPending:V}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.deleteHeadRef),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>{let e=new CustomEvent("head-ref-deleted");return document.dispatchEvent(e),d.invalidateQueries({queryKey:c},{cancelRefetch:!1})},s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(t);j[2]!==$||j[3]!==P?(n=()=>{P(void 0),$(void 0)},j[2]=$,j[3]=P,j[4]=n):n=j[4];let q=n;j[5]!==P||j[6]!==O?(r={onError:e=>{O(!1),P(e),L.current?.focus()}},j[5]=P,j[6]=O,j[7]=r):r=j[7];let{mutate:W,isPending:G}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.cleanupCodespaces),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(r);j[8]!==U||j[9]!==W||j[10]!==P||j[11]!==O?(s=()=>{P(void 0),W(void 0,{onSuccess:()=>{O(!1),setTimeout(()=>(0,tw.i)(`Deleting ${U}.`),1e3)}})},j[8]=U,j[9]=W,j[10]=P,j[11]=O,j[12]=s):s=j[12];let z=s;j[13]!==P||j[14]!==O?(o=()=>{P(void 0),O(!0)},j[13]=P,j[14]=O,j[15]=o):o=j[15];let H=o;j[16]!==I||j[17]!==E?(c=()=>E&&E.name?(0,eA.WJ9)({owner:E.ownerLogin,repo:E.name,branch:I}):"",j[16]=I,j[17]=E,j[18]=c):c=j[18];let Q=c;j[19]!==B||j[20]!==w?(m=()=>B?"Branch successfully deleted":"MERGED"===w?"Pull request successfully merged and closed":"Closed with unmerged commits",j[19]=B,j[20]=w,j[21]=m):m=j[21];let K=m;j[22]!==V||j[23]!==q?(f=(0,a.jsx)(eu.Q,{loading:V,loadingAnnouncement:"Deleting branch",onClick:q,children:"Delete branch"}),j[22]=V,j[23]=q,j[24]=f):f=j[24];let J=f;j[25]!==U||j[26]!==H?(g=(0,a.jsxs)(eu.Q,{ref:L,onClick:H,children:["Delete ",U]}),j[25]=U,j[26]=H,j[27]=g):g=j[27];let X=g;j[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("span",{id:"js-pull-restorable",className:"d-none"}),j[28]=x):x=j[28];let Y=x,Z=`${E?.url}/settings`;j[29]!==J||j[30]!==X||j[31]!==B||j[32]!==T?(_=()=>T?J:B?X:Y,j[29]=J,j[30]=X,j[31]=B,j[32]=T,j[33]=_):_=j[33];let ee=_;j[34]!==R?.name||j[35]!==R?.ownerLogin||j[36]!==F||j[37]!==U||j[38]!==A||j[39]!==Q||j[40]!==I||j[41]!==N||j[42]!==Z||j[43]!==B||j[44]!==w||j[45]!==T?(b=()=>{if("MERGED"===w)if(T)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the"," ",(0,a.jsx)(tS.A,{className:(0,d.$)(tj.branchName,"d-inline wb-break-all"),href:Q(),children:I})," ","branch can be safely deleted.",N&&(0,a.jsxs)(a.Fragment,{children:[" ","If you wish, you can also delete this fork of"," ",(0,a.jsx)("strong",{children:`${R?.ownerLogin}/${R?.name}`})," in the"," ",(0,a.jsx)(et.A,{href:Z,inline:!0,children:"settings"}),"."]})]});else if(B)return(0,a.jsxs)(a.Fragment,{children:["You're all set \u2014 the ",F," ",U," for head branch can be safely deleted. You can also manage your codespaces in"," ",(0,a.jsx)(et.A,{inline:!0,href:A.repositoryCodespacePath||"",children:"settings."})," "]});else return(0,a.jsx)(a.Fragment,{children:"You're all set \u2014 the branch has been merged."});return T?(0,a.jsxs)(a.Fragment,{children:["This pull request is closed, but the ",(0,a.jsx)(tS.A,{href:Q(),children:I})," ","branch has unmerged commits."]}):(0,a.jsx)(a.Fragment,{children:"This pull request is closed."})},j[34]=R?.name,j[35]=R?.ownerLogin,j[36]=F,j[37]=U,j[38]=A,j[39]=Q,j[40]=I,j[41]=N,j[42]=Z,j[43]=B,j[44]=w,j[45]=T,j[46]=b):b=j[46];let en=b;j[47]!==F||j[48]!==U||j[49]!==G||j[50]!==V||j[51]!==D||j[52]!==ee||j[53]!==z||j[54]!==K||j[55]!==M||j[56]!==P||j[57]!==O||j[58]!==en?(S=()=>{if(!D)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tC.A,{"aria-labelledby":"delete-codespaces-dialog-title",isOpen:M,returnFocusRef:L,onDismiss:()=>O(!1),children:[(0,a.jsx)(tC.A.Header,{id:"delete-codespaces-dialog-title",children:"Delete Codespace?"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("span",{children:["Are you sure you want to delete ",F," ",U," for the head branch?"]}),(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[(0,a.jsx)(eu.Q,{className:"mr-1",inactive:G,onClick:()=>{G||(O(!1),L.current?.focus())},children:"Cancel"}),(0,a.jsx)(eu.Q,{className:"mr-1",variant:"danger",loading:G,loadingAnnouncement:`Deleting ${U}.`,onClick:z,children:`Delete ${U}`})]})]})]}),(0,a.jsx)(es,{title:K(),subtitle:en(),rightSideContent:ee()})]});{let e=404!==D.cause;return(0,a.jsx)(es,{title:"Some codespaces could not be deleted."===D.message?`Couldn't delete ${U} `:"Couldn't update branch",subtitle:D.message,rightSideContent:e?(0,a.jsx)(eu.Q,{disabled:V,leadingVisual:l.SyncIcon,onClick:()=>P(void 0),children:"Try again"}):void 0})}},j[47]=F,j[48]=U,j[49]=G,j[50]=V,j[51]=D,j[52]=ee,j[53]=z,j[54]=K,j[55]=M,j[56]=P,j[57]=O,j[58]=en,j[59]=S):S=j[59];let er=S;return j[60]!==er?(C=er(),j[60]=er,j[61]=C):C=j[61],C}try{tN.displayName||(tN.displayName="ClosedOrMergedStateMergeBox")}catch{}var tI=n(75177);let tE={mergeabilityIcon:"MergeabilityIcon-module__mergeabilityIcon--GOu7M"};function tR(e){let t,n,r,s,o=(0,i.c)(9),{icon:l,ariaLabel:c,iconBackgroundColor:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)("d-flex flex-justify-center flex-items-center mr-2 rounded-2 height-2 width-2 position-absolute",tE.mergeabilityIcon),o[0]=t):t=o[0],o[1]!==u?(n={backgroundColor:u},o[1]=u,o[2]=n):n=o[2],o[3]!==c||o[4]!==l?(r=(0,a.jsx)(eT.A,{className:"fgColor-onEmphasis",icon:l,size:24,"aria-label":c}),o[3]=c,o[4]=l,o[5]=r):r=o[5],o[6]!==n||o[7]!==r?(s=(0,a.jsx)(tI.A,{className:t,sx:n,children:r}),o[6]=n,o[7]=r,o[8]=s):s=o[8],s}try{tR.displayName||(tR.displayName="MergeabilityIcon")}catch{}let tT={mergeboxLoading:"MergeBox-module__mergeboxLoading--welQH",mergePartialContainer:"MergeBox-module__mergePartialContainer--N4i3Z",mergeBoxAdjustBorders:"MergeBox-module__mergeBoxAdjustBorders--G2Hf8"};var tk=n(93116);let tA={boundaryContainer:"MergeBoxErrorState-module__boundaryContainer--W5nVZ"};function tD(e){let t,n,r,s,o,c=(0,i.c)(7),{hideIcon:d}=e;return c[0]!==d?(t=!d&&(0,a.jsx)(tR,{icon:l.GitMergeIcon,ariaLabel:"Merge status cannot be loaded",iconBackgroundColor:"neutral.emphasis"}),c[0]=d,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(tk.E.Visual,{children:(0,a.jsx)(l.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),c[2]=n):n=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tk.E.Heading,{children:(0,a.jsx)("strong",{children:"Merge status cannot be loaded"})}),c[3]=r):r=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(tk.E,{border:!0,children:[n,r,(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsxs)(tk.E.Description,{children:["Try reloading the page, or if the problem persists"," ",(0,a.jsxs)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:[(0,a.jsx)("u",{children:"contact support"}),"."]})]})}),(0,a.jsx)(tk.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status "})]}),c[4]=s):s=c[4],c[5]!==t?(o=(0,a.jsxs)("div",{className:`position-relative ${tA.boundaryContainer}`,children:[t,s]}),c[5]=t,c[6]=o):o=c[6],o}try{tD.displayName||(tD.displayName="MergeBoxErrorState")}catch{}function tP(e){let t,n=(0,i.c)(3),{bgColor:r,color:s}=e,o=void 0===r?"neutral.emphasis":r,l=void 0===s?"fg.onEmphasis":s;return n[0]!==o||n[1]!==l?(t=(0,a.jsx)(en.A,{icon:tL,size:32,sx:{bg:o,color:l}}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}function tL(){return(0,a.jsx)(l.AlertFillIcon,{size:16})}try{tP.displayName||(tP.displayName="AlertIcon")}catch{}var tM=n(45968);let tO={BlockedSectionMessage:"BlockedSection-module__BlockedSectionMessage--fXzjI"};function tF(e){let t,n,r,s=(0,i.c)(5),{failingConditionsAndRules:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(tP,{bgColor:"danger.emphasis"}),s[0]=t):t=s[0],s[1]!==o?(n=o.map(tB),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(r=(0,a.jsx)("section",{"aria-label":"Merging is blocked",className:"border-bottom borderColor-muted",children:(0,a.jsx)(es,{title:"Merging is blocked",icon:t,children:(0,a.jsx)("ul",{className:"list-style-none",children:n})})}),s[3]=n,s[4]=r):r=s[4],r}function tB(e){return e&&"message"in e&&(0,a.jsxs)("li",{className:tO.BlockedSectionMessage,children:[(0,a.jsx)(tM.JR,{html:e.message||""})," ",(0,a.jsx)(tU,{ruleName:e.displayName})]},e.displayName)}function tU(e){let t=(0,i.c)(1),{ruleName:n}=e;if("UNVERIFIED_EMAIL"===n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:["You will be able to merge this pull request after you"," ",(0,a.jsx)(et.A,{href:"/settings/emails",inline:!0,children:"verify your email address"}),"."]}),t[0]=e):e=t[0],e}return null}try{tF.displayName||(tF.displayName="BlockedSection")}catch{}try{tU.displayName||(tU.displayName="AdditionalMessaging")}catch{}let t$={ACTION_REQUIRED:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},CANCELLED:{icon:l.StopIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},COMPLETED:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},ERROR:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},EXPECTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},IN_PROGRESS:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},NEUTRAL:{icon:l.SquareFillIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},PENDING:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},QUEUED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},REQUESTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",backgroundColor:"none",isPending:!1,isSuccess:!1},SKIPPED:{icon:l.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STALE:{icon:l.MoonIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STARTUP_FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},SUCCESS:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},TIMED_OUT:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},WAITING:{icon:l.ClockIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},_UNKNOWN_VALUE:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1}},tV={FAILURE:"failing",NEUTRAL:"neutral",TIMED_OUT:"timed out",CANCELLED:"cancelled",STALE:"stale",PENDING:"pending",IN_PROGRESS:"in progress",REQUESTED:"requested",QUEUED:"queued",SKIPPED:"skipped",EXPECTED:"expected",SUCCESS:"successful",ALL:"all"};Object.keys(t$);let tq=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function tW(e,t){return tq.compare(e.displayName,t.displayName)}function tG(e,t,n,r){if(r?.statusChecksGrouping==="ungrouped")return{ALL:e};let a={};for(let e of Object.keys(t))a[e]=[];return e.reduce((e,r)=>{let a=n(r),i=Object.keys(t).find(e=>t[e].includes(a));if(i){let t=e[i];t&&t.push(r)}return e},a)}function tz(e,t,n){if(n?.statusChecksGrouping==="ungrouped")return{ALL:e.reduce((e,t)=>e+t.count,0)};let r=tG(e,t,e=>e.state,n),a=e=>e?.reduce((e,t)=>e+t.count,0)??0;return Object.fromEntries(Object.keys(r).map(e=>[e,a(r[e])]))}function tH(e){let t={};for(let n of e)t[n.state]=n.count;return{statusCheckCounts:JSON.stringify(t)}}var tQ=n(98831);let tK={PASSED:"success",PENDING:"pending",PENDING_APPROVAL:"pending",PENDING_FAILED:"failure",PENDING_CONFLICTS:"pending",SOME_FAILED:"failure",FAILED:"failure"};function tJ(){(0,tQ.gd)()}function tX(){return(0,tQ.iD)("merge-queue"),tY}function tY(){(0,tQ.gd)()}var tZ=n(60183),t0=n(10569),t1=n(87330);let t2={status_checks_grouping_preference:["grouped_by_status","ungrouped"]},t3={checksGroupHeadingButton:"ExpandedChecks-module__checksGroupHeadingButton--mccqk",checksContainer:"ExpandedChecks-module__checksContainer--R2xmH",containPaint:"ExpandedChecks-module__containPaint--ePsGx",expandableWrapper:"ExpandedChecks-module__expandableWrapper--mgDmj",expandableListView:"ExpandedChecks-module__expandableListView--yxB_y",isExpanded:"ExpandedChecks-module__isExpanded--w2Qyq",groupHeader:"ExpandedChecks-module__groupHeader--btvfK",totalChecksCountText:"ExpandedChecks-module__totalChecksCountText--TkhKY",checkSettingsButton:"ExpandedChecks-module__checkSettingsButton--U3pNI"},t4={ErrorFlash:"ChecksGroup-module__ErrorFlash--kQoM4",ErrorOcticon:"ChecksGroup-module__ErrorOcticon--LFfTW"};function t5(e){let t,n,r,s,o,c,m=(0,i.c)(30),{children:f,count:g,groupStatus:x,isToggleVisible:_,analyticsMetadata:b,showSettingsIcon:S,setUserPreferences:C,pullRequestId:j,userPreferences:w}=e;m[0]!==g||m[1]!==w?.statusChecksGrouping?(t=function(e){return w?.statusChecksGrouping==="ungrouped"?g>1?`${g} checks`:`${g} check`:`${g} ${e} check${g>1?"s":""}`},m[0]=g,m[1]=w?.statusChecksGrouping,m[2]=t):t=m[2];let N=t,[I,E]=(0,eh.Fo)(`${j}:checksGroup:${x}Expanded`,!0),{sendAnalyticsEvent:R}=(0,ee.s)(),T=tV[x],k=(0,u.useId)(),A=I||!_,D=N(T),P=!_||I,[L,M]=(0,tb.A)(null);m[3]!==M?(n={onError:e=>{M(e.message)}},m[3]=M,m[4]=n):n=m[4];let{mutate:O}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.updateMergeBoxUserPreference),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{if(!e.preferenceName||!e.preference)throw Error("Preference name and value must be provided.");if(!(e.preferenceName in t2))throw Error("Invalid preference name.");if(!t2[e.preferenceName].includes(e.preference))throw Error("Invalid preference value.");let t=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eE.hp)(t);return(0,eE.R)(t,n),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(n);return m[5]!==b||m[6]!==k||m[7]!==x||m[8]!==D||m[9]!==I||m[10]!==R||m[11]!==E||m[12]!==C||m[13]!==_||m[14]!==S||m[15]!==O||m[16]!==w?(r=_&&(0,a.jsxs)("div",{className:t3.groupHeader,children:[w?.statusChecksGrouping==="ungrouped"?(0,a.jsxs)("span",{className:(0,d.$)(t3.totalChecksCountText,"pl-2 text-semibold f6"),children:[" ",D," "]}):(0,a.jsx)(eu.Q,{"aria-controls":k,"aria-expanded":I,"aria-label":I?`Collapse ${D} group`:`Expand ${D} group`,className:t3.checksGroupHeadingButton,variant:"invisible",size:"small",trailingVisual:()=>(0,a.jsx)(ep,{isExpanded:I}),onClick:()=>{R(I?"checks_group.collapse":"checks_group.expand","MERGEBOX_CHECKS_GROUP_TOGGLE_BUTTON",{...b,group:x}),E(!I)},children:D}),S&&C&&(0,a.jsxs)(t0.W,{children:[(0,a.jsx)(t0.W.Anchor,{children:(0,a.jsx)(t1.K,{icon:l.GearIcon,variant:"invisible","aria-label":"Checks settings",className:t3.checkSettingsButton})}),(0,a.jsx)(t0.W.Overlay,{width:"auto",children:(0,a.jsxs)(eS.l,{selectionVariant:"single",children:[(0,a.jsx)(eS.l.Item,{onSelect:()=>{w?.statusChecksGrouping!=="grouped_by_status"&&(O({preferenceName:"status_checks_grouping_preference",preference:"grouped_by_status"}),C({...w,statusChecksGrouping:"grouped_by_status"}))},selected:w?.statusChecksGrouping==="grouped_by_status",children:"Group by status"}),(0,a.jsx)(eS.l.Item,{onSelect:()=>{w?.statusChecksGrouping!=="ungrouped"&&(O({preferenceName:"status_checks_grouping_preference",preference:"ungrouped"}),C({...w,statusChecksGrouping:"ungrouped"}))},selected:w?.statusChecksGrouping==="ungrouped",children:"No grouping"})]})})]})]}),m[5]=b,m[6]=k,m[7]=x,m[8]=D,m[9]=I,m[10]=R,m[11]=E,m[12]=C,m[13]=_,m[14]=S,m[15]=O,m[16]=w,m[17]=r):r=m[17],m[18]!==L?(s=L&&(0,a.jsxs)(eC.A,{variant:"danger",className:t4.ErrorFlash,children:[(0,a.jsx)(eT.A,{icon:l.StopIcon,className:t4.ErrorOcticon}),L]}),m[18]=L,m[19]=s):s=m[19],m[20]!==f||m[21]!==k||m[22]!==T||m[23]!==P||m[24]!==A?(o=P&&(0,a.jsx)("div",{className:(0,d.$)(t3.expandableWrapper,A&&t3.isExpanded),id:k,"aria-label":`${T} checks`,role:"group",children:(0,a.jsx)("div",{className:t3.expandableListView,children:(0,a.jsx)(ed.u,{title:`${T} checks`,titleHeaderTag:"h3",strictFocusZone:!1,children:f})})}),m[20]=f,m[21]=k,m[22]=T,m[23]=P,m[24]=A,m[25]=o):o=m[25],m[26]!==r||m[27]!==s||m[28]!==o?(c=(0,a.jsxs)("div",{children:[r,s,o]}),m[26]=r,m[27]=s,m[28]=o,m[29]=c):c=m[29],c}try{t5.displayName||(t5.displayName="ChecksGroup")}catch{}var t6=n(89169),t7=n(47139),t8=n(47523),t9=n(42265),ne=n(52369);let nt={spinnerWrapper:"StatusCheckRow-module__spinnerWrapper--uyV8b",spinnerInner:"StatusCheckRow-module__spinnerInner--SqRyc",staticSpinner:"StatusCheckRow-module__staticSpinner--uR3cb",checksSpinnerWrapper:"StatusCheckRow-module__checksSpinnerWrapper--PBuMk",title:"StatusCheckRow-module__title--uUOvA",titleHeader:"StatusCheckRow-module__titleHeader--Nmb60",titleDescription:"StatusCheckRow-module__titleDescription--Y44Vb",leadingVisual:"StatusCheckRow-module__leadingVisual--RPl_6",requiredLabel:"StatusCheckRow-module__requiredLabel--PvnoD"};var nn=n(29943),nr=n(99377);let na={statusCheckActionBar:"StatusCheckRowActionBar-module__statusCheckActionBar--rAKDB"};var ni=n(33449);function ns(e){let t,n,r,s=(0,i.c)(5),{failureContext:o}=e;s[0]!==o.jobId?(t=()=>(0,nn.qR)({id:"copilot-explain-error-action",intent:nr.wh.actionsAgent,content:(0,ni.oo)(o.jobId),references:[]}),s[0]=o.jobId,s[1]=t):t=s[1];let c=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eS.l.LeadingVisual,{children:(0,a.jsx)(l.CopilotIcon,{})}),s[2]=n):n=s[2],s[3]!==c?(r=(0,a.jsxs)(eS.l.Item,{onSelect:c,children:["Explain error",n]}),s[3]=c,s[4]=r):r=s[4],r}function no(e){let t,n,r,s=(0,i.c)(6),{targetUrl:o}=e,{sendAnalyticsEvent:c}=(0,ee.s)();s[0]!==c?(t=()=>{c("status_check_row_action_bar.view_details_click","VIEW_DETAILS_MENU_ITEM")},s[0]=c,s[1]=t):t=s[1];let d=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eS.l.LeadingVisual,{children:(0,a.jsx)(l.ArrowRightIcon,{})}),s[2]=n):n=s[2],s[3]!==d||s[4]!==o?(r=(0,a.jsxs)(eS.l.LinkItem,{href:o,onClick:d,children:["View details",n]}),s[3]=d,s[4]=o,s[5]=r):r=s[5],r}function nl(e){let t,n=(0,i.c)(7),{copilotCheckRunFailureContext:r,targetUrl:s}=e;if(n[0]!==r||n[1]!==s){let e=[];if(null!=r){let t;n[3]!==r?(t={key:"copilot-explain-error",render:()=>(0,a.jsx)(ns,{failureContext:r})},n[3]=r,n[4]=t):t=n[4],e.push(t)}if(s){let t;n[5]!==s?(t={key:"view-details",render:()=>(0,a.jsx)(no,{targetUrl:s})},n[5]=s,n[6]=t):t=n[6],e.push(t)}t=(0,a.jsx)(eR.L,{label:"actions",staticMenuActions:e,className:na.statusCheckActionBar}),n[0]=r,n[1]=s,n[2]=t}else t=n[2];return t}try{ns.displayName||(ns.displayName="CopilotExplainErrorMenuItem")}catch{}try{no.displayName||(no.displayName="ViewDetailsMenuItem")}catch{}try{nl.displayName||(nl.displayName="StatusCheckRowActionBar")}catch{}function nc(e){let t,n,r=(0,i.c)(5),{iconColor:s,icon:o}=e;return r[0]!==s?(t={color:s},r[0]=s,r[1]=t):t=r[1],r[2]!==o||r[3]!==t?(n=(0,a.jsx)(eT.A,{icon:o,sx:t}),r[2]=o,r[3]=t,r[4]=n):n=r[4],n}function nd(e){let t,n,r,s=(0,i.c)(5),{animated:o}=e,d=void 0===o||o;return s[0]!==d?(t=d?(0,a.jsx)(c.A,{size:"small"}):(0,a.jsx)(l.CircleIcon,{size:"small",className:nt.staticSpinner}),s[0]=d,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{className:nt.spinnerWrapper,children:(0,a.jsx)("div",{className:nt.spinnerInner})}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsxs)("div",{className:nt.checksSpinnerWrapper,children:[t,n]}),s[3]=t,s[4]=r):r=s[4],r}let nu=(0,u.memo)(function(e){let t,n,r,s,o,l,c,m,h,p,f,g,y,x,v,_,b=(0,i.c)(47),{additionalContext:S,avatarUrl:C,copilotCheckRunFailureContext:j,description:w,displayName:N,state:I,stateChangedAt:E,targetUrl:R,isRequired:T,reserveSpaceForRequiredBadge:k,reserveSpaceForActionBar:A,shouldAnimate:D}=e,P=void 0===D||D,L=t$[I],M=`${N} ${S?S.charAt(0).toLowerCase()+S.slice(1):""}`,O=k&&!A,[F,B]=(0,u.useState)(!1),U=(0,u.useRef)(null),$=(0,u.useRef)(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=new ResizeObserver(()=>{if(U.current&&$.current){let e=$.current.offsetWidth;B(U.current.offsetWidth+31>e)}});return $.current&&e.observe($.current),()=>{e.disconnect()}},b[0]=t):t=b[0],b[1]!==N?(n=[N],b[1]=N,b[2]=n):n=b[2],(0,u.useEffect)(t,n),b[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("div",{}),b[3]=r):r=b[3],b[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,d.$)(eb.listItem),b[4]=s):s=b[4],b[5]!==j||b[6]!==A||b[7]!==R?(o=A?(0,a.jsx)(nl,{copilotCheckRunFailureContext:j,targetUrl:R}):(0,a.jsx)(a.Fragment,{}),b[5]=j,b[6]=A,b[7]=R,b[8]=o):o=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,d.$)(nt.leadingVisual,"mt-2"),b[9]=l):l=b[9],b[10]!==P||b[11]!==I||b[12]!==L?(c="IN_PROGRESS"===I?(0,a.jsx)(nd,{animated:P}):(0,a.jsx)(nc,{icon:L.icon,iconColor:L.iconColor}),b[10]=P,b[11]=I,b[12]=L,b[13]=c):c=b[13],b[14]!==C||b[15]!==N?(m=C?(0,a.jsx)(e_.r,{alt:N,size:20,square:!0,src:C,className:"flex-shrink-0 ml-2 mr-2"}):(0,a.jsx)(t8.N,{size:20,square:!0,className:"flex-shrink-0 ml-2 mr-2"}),b[14]=C,b[15]=N,b[16]=m):m=b[16],b[17]!==c||b[18]!==m?(h=(0,a.jsx)(t9.B,{children:(0,a.jsxs)(ev.e,{className:l,children:[c,m]})}),b[17]=c,b[18]=m,b[19]=h):h=b[19];let V=N??"",q=R??void 0,W=F?`${N} ${S} ${w}`:void 0;b[20]!==W?(p={title:W},b[20]=W,b[21]=p):p=b[21];let G=("IN_PROGRESS"===I||"QUEUED"===I)&&"text-italic";b[22]!==G?(f=(0,d.$)(nt.titleDescription,G),b[22]=G,b[23]=f):f=b[23],b[24]!==S||b[25]!==I||b[26]!==E?(g=function({state:e,stateChangedAt:t,additionalContext:n}){switch(e){case"IN_PROGRESS":return(0,a.jsxs)("span",{children:["Started ",(0,a.jsx)(t6.A,{datetime:t})]});case"SKIPPED":return(0,a.jsxs)("span",{children:["Skipped ",(0,a.jsx)(t6.A,{datetime:t})]});case"QUEUED":return(0,a.jsx)("span",{children:"Queued"});default:return(0,a.jsx)("span",{children:n})}}({state:I,stateChangedAt:E,additionalContext:S}),b[24]=S,b[25]=I,b[26]=E,b[27]=g):g=b[27];let z=w&&`\u{2014} ${w}`;return b[28]!==f||b[29]!==g||b[30]!==z?(y=(0,a.jsxs)("span",{className:f,children:[g," ",z]}),b[28]=f,b[29]=g,b[30]=z,b[31]=y):y=b[31],b[32]!==V||b[33]!==q||b[34]!==p||b[35]!==y?(x=(0,a.jsx)(ex.ao,{containerClassName:nt.title,headingClassName:nt.titleHeader,value:V,href:q,linkProps:p,headingRef:U,headerContainerRef:$,children:y}),b[32]=V,b[33]=q,b[34]=p,b[35]=y,b[36]=x):x=b[36],b[37]!==T||b[38]!==O||b[39]!==k?(v=k?(0,a.jsx)(ne.V,{children:T&&(0,a.jsx)("div",{className:(0,d.$)(nt.requiredLabel,"flex-shrink-0 fgColor-default",O&&"pr-3"),children:(0,a.jsx)(t7.A,{children:"Required"})})}):(0,a.jsx)("div",{className:"px-5"}),b[37]=T,b[38]=O,b[39]=k,b[40]=v):v=b[40],b[41]!==M||b[42]!==h||b[43]!==x||b[44]!==v||b[45]!==o?(_=(0,a.jsxs)(ey.c,{title:r,"aria-label":M,className:s,secondaryActions:o,children:[h,x,v]}),b[41]=M,b[42]=h,b[43]=x,b[44]=v,b[45]=o,b[46]=_):_=b[46],_});try{nc.displayName||(nc.displayName="StatusIcon")}catch{}try{nd.displayName||(nd.displayName="CheckSpinner")}catch{}try{nu.displayName||(nu.displayName="StatusCheckRow")}catch{}let nm={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["ACTION_REQUIRED","EXPECTED","PENDING","QUEUED","REQUESTED","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],SKIPPED:["SKIPPED"],NEUTRAL:["NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]};function nh({pullRequestId:e,statusChecks:t,statusRollupSummary:n,mergeBoxUserPreferences:r}){let[i,s]=(0,u.useState)(r||null),o=(0,u.useMemo)(()=>t.sort(tW),[t]),l=tz(n,nm,i),c=tG(o,nm,e=>e.state,i),m=(0,tZ.u)("mergebox_smarter_checks_keys"),h=(0,tZ.u)("mergebox_paint_containment"),p=t.some(e=>e.isRequired),f=t.some(e=>e.copilotCheckRunFailureContext||!!e.targetUrl),g=Object.entries(l).reduce((e,[,t])=>t>0?e+1:e,0),y=t.length>0&&t.every(e=>e.state===t[0]?.state),x=g>1||i?.statusChecksGrouping==="ungrouped"&&!y;return(0,a.jsx)("div",{className:(0,d.$)(t3.checksContainer,{[t3.containPaint]:h}),children:Object.entries(l).filter(([,e])=>e>0).map(([t,r],o)=>{let l=r<50;return(0,a.jsx)(t5,{count:r,groupStatus:t,isToggleVisible:x,pullRequestId:e,analyticsMetadata:tH(n),setUserPreferences:s,userPreferences:i,showSettingsIcon:i&&0===o,children:c[t]?.map(e=>{if(!e)return null;let t=m?`${e.displayName}-${e.state}-${e.targetUrl}-${e.stateChangedAt}`:crypto.randomUUID();return(0,a.jsx)(nu,{...e,shouldAnimate:l,reserveSpaceForActionBar:f,reserveSpaceForRequiredBadge:p},t)})},t)})})}try{nh.displayName||(nh.displayName="ExpandedChecksList")}catch{}let np={iconWrapper:"StatusCheckStatesIcon-module__iconWrapper--QKoB5",icon:"StatusCheckStatesIcon-module__icon--WxAzZ","icon-animate":"StatusCheckStatesIcon-module__icon-animate--cC7m6"},nf={PASSING:(0,a.jsx)(en.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32}),FAILING:(0,a.jsx)(en.A,{icon:()=>(0,a.jsx)(l.XIcon,{size:16}),className:"bgColor-danger-emphasis fgColor-onEmphasis",size:32})},ng={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["_UNKNOWN_VALUE","EXPECTED","QUEUED","PENDING","WAITING","REQUESTED","ACTION_REQUIRED","IN_PROGRESS"],SKIPPED:["SKIPPED","NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]},ny={length:1e3,delay:0},nx={FAILURE:"var(--fgColor-danger)",SUCCESS:"var(--fgColor-success)",PENDING:"var(--fgColor-attention)",SKIPPED:"var(--fgColor-neutral)"},nv=2*Math.PI*44,n_={gapPercent:5,strokeWidth:12,size:32,circleSize:100,circumference:nv,percentToDegree:3.6,percentToPx:nv/100},nb=(e,t)=>{if(0===e)return e;let n=0;for(let e=0;e<t.length;e++){let r=t[e];r&&(n+=r+n_.gapPercent)}return n};function nS({statusRollupSummary:e}){let[t,n]=(0,u.useState)(!1),r=(0,u.useRef)(void 0),i=(0,u.useMemo)(()=>(function(e){let t,n=tz(e,ng),r=[{name:"SUCCESS",count:n.SUCCESS??0},{name:"SKIPPED",count:n.SKIPPED??0},{name:"PENDING",count:n.PENDING??0},{name:"FAILURE",count:n.FAILURE??0}].flatMap(e=>e?[e]:[]).filter(e=>!!e.count&&e.count>0),a=r.reduce((e,t)=>e+t.count,0),i=[],s=r.length??0,o=r.filter(({count:e})=>e/a*100<6).map(e=>e.name),l=(t=0,3===o.length?t=15/(s-3):2===o.length?t=10/(s-2):1===o.length&&(t=5/(s-1)),t);return r.map((e,t)=>{var n,r;let c;if(n=e.name,!Object.keys(ng).includes(n))return null;let d=e.count;if(!d)return null;let u=(r=e.name,c=d/a*100,(s>1&&(c-=n_.gapPercent),o.includes(r))?c+5:c-l),m={name:e.name,percentage:u,dashArray:`${Math.max(u*n_.percentToPx,0)} ${n_.circumference}`,transform:function(e,t,n,r){let a=0;((0!==n||n!==r-1)&&r>1||2===r)&&(a=2.5);let i=nb(e,t);return`rotate(${-90+(i+a)*n_.percentToDegree}deg)`}(u,i,t,s),stroke:nx[e.name]};return i.push(u),m}).flatMap(e=>e?[e]:[])})(e),[e]),s=1===e.length&&e[0]?.state==="SUCCESS",o=1===e.length&&e[0]?.state==="FAILURE",l=!s&&!o||t;return(0,u.useMemo)(()=>{void 0!==r.current&&e.length>0&&n(!0),r.current=e},[e]),(0,a.jsxs)("div",{className:np.iconWrapper,children:[s&&(0,a.jsx)("div",{className:(0,d.$)(np.icon,t&&np["icon-animate"]),children:nf.PASSING}),o&&(0,a.jsx)("div",{className:(0,d.$)(np.icon,t&&np["icon-animate"]),children:nf.FAILING}),l&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${n_.circleSize} ${n_.circleSize}`,shapeRendering:"crispEdges",width:n_.size,height:n_.size,style:{userSelect:"none",zoom:"reset"},fill:"none","aria-hidden":"true",children:i.map(e=>(0,a.jsx)("circle",{cx:n_.circleSize/2,cy:n_.circleSize/2,r:44,style:{strokeLinecap:"round",strokeLinejoin:"round",strokeDashoffset:0,strokeWidth:n_.strokeWidth,transition:`all ${ny.length}ms ease ${ny.delay}ms`,transformOrigin:"50% 50%",shapeRendering:"geometricPrecision",strokeDasharray:e.dashArray,transform:e.transform,stroke:e.stroke}},e.name))})]})}try{nS.displayName||(nS.displayName="StatusCheckStatesIcon")}catch{}let nC={FAILURE:["ERROR","FAILURE","STARTUP_FAILURE"],TIMED_OUT:["TIMED_OUT"],CANCELLED:["CANCELLED"],SUCCESS:["SUCCESS"],STALE:["STALE"],PENDING:["ACTION_REQUIRED","PENDING","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],QUEUED:["QUEUED"],NEUTRAL:["NEUTRAL"],SKIPPED:["SKIPPED"],EXPECTED:["EXPECTED"],REQUESTED:["REQUESTED"]};function nj(e){let t,n,r,s,o,c,d,u,m=(0,i.c)(27),{checkSectionAriaId:f,pendingWorkflowApprovalRollup:g,statusRollup:x,statusChecks:v,pullRequestHeadSha:_,pullRequestId:b,focusPrimaryMergeButton:S,mergeBoxUserPreferences:C}=e;m[0]!==_?(t={pullRequestHeadSha:_},m[0]=_,m[1]=t):t=m[1];let{isPending:j,mutate:w}=function(e){let t,n,r,a,s=(0,i.c)(10),{pullRequestHeadSha:o}=e,l=(0,p.e)(h.u.runActionRequiredWorkflows);s[0]!==o?(t={pullRequestHeadSha:o},s[0]=o,s[1]=t):t=s[1];let c=tv(t),d=(0,y.jE)();return s[2]!==l?(n=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==c?(r=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[4]=d,s[5]=c,s[6]=r):r=s[6],s[7]!==n||s[8]!==r?(a={mutationFn:n,onSuccess:r},s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eI.n)(a)}(t),N=()=>{R(null),w(void 0,{onSuccess:()=>{setTimeout(nw,1e3),S()},onError:e=>R(e.message)})},[I,E]=(0,tb.A)(null),R=E,{workflowsRequiringApprovalCount:T,hasExpiredWorkflowRuns:k,approvalRequiredMessage:A,helpLink:D,viewerCanApproveWorkflowRuns:P}=g,L=`${T} workflow${1===T?"":"s"} awaiting approval`;m[2]!==A||m[3]!==k||m[4]!==D?(n=k?"Unable to re-run one or more workflows because they were created over a month ago.":(0,a.jsxs)(a.Fragment,{children:[A," ",(0,a.jsx)(et.A,{inline:!0,href:D,children:"Learn more about approving workflows."})]}),m[2]=A,m[3]=k,m[4]=D,m[5]=n):n=m[5];let M=n;return m[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(tP,{bgColor:"attention.emphasis",color:"fg.onEmphasis"}),m[6]=r):r=m[6],m[7]!==N||m[8]!==j||m[9]!==P?(s=P?(0,a.jsx)(eu.Q,{loading:j,loadingAnnouncement:"Re-running workflows",onClick:N,children:"Approve workflows to run"}):void 0,m[7]=N,m[8]=j,m[9]=P,m[10]=s):s=m[10],m[11]!==f||m[12]!==M||m[13]!==s||m[14]!==L?(o=(0,a.jsx)(es,{headerId:f,title:L,subtitle:M,icon:r,rightSideContent:s}),m[11]=f,m[12]=M,m[13]=s,m[14]=L,m[15]=o):o=m[15],m[16]!==I?(c=I&&(0,a.jsxs)(eC.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),I]}),m[16]=I,m[17]=c):c=m[17],m[18]!==C||m[19]!==b||m[20]!==v||m[21]!==x.summary?(d=x.summary.length>0&&(0,a.jsx)(ec,{isExpanded:!0,children:(0,a.jsx)(nh,{pullRequestId:b,statusChecks:v,statusRollupSummary:x.summary,mergeBoxUserPreferences:C})}),m[18]=C,m[19]=b,m[20]=v,m[21]=x.summary,m[22]=d):d=m[22],m[23]!==o||m[24]!==c||m[25]!==d?(u=(0,a.jsxs)(a.Fragment,{children:[o,c,d]}),m[23]=o,m[24]=c,m[25]=d,m[26]=u):u=m[26],u}function nw(){return(0,tw.i)("Successfully approved and re-requested workflows.")}let nN={PASSED:"All checks have passed",PENDING:"Some checks haven't completed yet",PENDING_APPROVAL:"Some checks are waiting for approval",PENDING_FAILED:"Some checks were not successful",SOME_FAILED:"Some checks were not successful",FAILED:"All checks have failed",PENDING_CONFLICTS:"Checks awaiting conflict resolution",UNKNOWN:"Checks status is unknown"};function nI(e){let t,n,r,s,o,l=(0,i.c)(18),{pullRequestId:c,pullRequestHeadSha:d,focusPrimaryMergeButton:m,sectionStatus:h,shouldRender:p,mergeBoxUserPreferences:f}=e;l[0]!==d?(t={pullRequestHeadSha:d},l[0]=d,l[1]=t):t=l[1];let{data:g}=t_(t),{aliveChannels:y,statusRollup:x,statusChecks:v}=g,_="PASSED"===x.combinedState,[b,S]=(0,eh.Fo)(`${c}:checksExpanded`,!_),{sendAnalyticsEvent:C}=(0,ee.s)(),j=(0,u.useId)();!function(e,t){let n,r,a,s,o,l=(0,i.c)(10);l[0]!==t?(n={pullRequestHeadSha:t},l[0]=t,l[1]=n):n=l[1];let{refetch:c}=t_(n),d=(0,th.A)(),u=ty()?2e3:1e4;l[2]!==d||l[3]!==c?(a=()=>{d()&&c()},l[2]=d,l[3]=c,l[4]=a):a=l[4],l[5]!==a||l[6]!==u?(s=(0,tu.n)(a,u),l[5]=a,l[6]=u,l[7]=s):s=l[7],r=s,l[8]!==r?(o=e=>{window.setTimeout(r,e.wait||0)},l[8]=r,l[9]=o):o=l[9];let m=o;(0,tm.x)(e,m)}(y.commitHeadShaChannel,d);let w=(0,i.c)(4);w[0]!==x.combinedState||w[1]!==x.summary.length?(s=()=>{if(0===x.summary.length)(0,tQ.gd)();else{let e=tK[x.combinedState];(0,tQ.iD)(e)}return tJ},o=[x.combinedState,x.summary.length],w[0]=x.combinedState,w[1]=x.summary.length,w[2]=s,w[3]=o):(s=w[2],o=w[3]),(0,u.useEffect)(s,o);let N=x.pendingWorkflowApprovalRollup;return p?(l[2]!==j||l[3]!==b||l[4]!==m||l[5]!==f||l[6]!==d||l[7]!==c||l[8]!==h||l[9]!==C||l[10]!==S||l[11]!==v||l[12]!==x||l[13]!==N?(n="PENDING_APPROVAL"===x.combinedState&&N?(0,a.jsx)(nj,{checkSectionAriaId:j,pendingWorkflowApprovalRollup:N,statusRollup:x,statusChecks:v,pullRequestHeadSha:d,pullRequestId:c,focusPrimaryMergeButton:m,mergeBoxUserPreferences:f}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(es,{headerId:j,title:nN[h],subtitle:function(e){if(0===e.length)return"No checks available.";let t=tz(e,nC),n=Object.keys(t).reduce((e,n)=>{let r=t[n];return r?e+r:e},0),r=Object.keys(tV).map(e=>{let n=t[e]??0,r=tV[e];return n>0?`${n} ${r}`:void 0}).filter(Boolean).join(", ");return`${r} ${n>1?"checks":"check"}`}(x.summary),icon:(0,a.jsx)(nS,{statusRollupSummary:x.summary}),expandableProps:{ariaLabel:b?"Collapse checks":"Expand checks",isExpanded:b,onToggle:()=>{C(b?"checks_section.collapse":"checks_section.expand","MERGEBOX_CHECKS_SECTION_TOGGLE_BUTTON",tH(x.summary)),S(!b)}}}),(0,a.jsx)(ec,{isExpanded:b,children:(0,a.jsx)(nh,{statusChecks:v,statusRollupSummary:x.summary,pullRequestId:c,mergeBoxUserPreferences:f})})]}),l[2]=j,l[3]=b,l[4]=m,l[5]=f,l[6]=d,l[7]=c,l[8]=h,l[9]=C,l[10]=S,l[11]=v,l[12]=x,l[13]=N,l[14]=n):n=l[14],l[15]!==j||l[16]!==n?(r=(0,a.jsx)("section",{"aria-label":"Checks","aria-describedby":j,className:"border-bottom color-border-subtle",children:n}),l[15]=j,l[16]=n,l[17]=r):r=l[17],r):null}try{nj.displayName||(nj.displayName="PendingApprovalChecksSection")}catch{}try{nI.displayName||(nI.displayName="ChecksSection")}catch{}function nE(){let e,t,n,r,s=(0,i.c)(6),{basePageDataUrl:o}=(0,f.Yu)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(et.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),s[0]=e):e=s[0];let c=`${o}/checks`;return s[1]!==c?(t=(0,a.jsxs)(a.Fragment,{children:["Try again or if the problem persists"," ",e," ","or"," ",(0,a.jsx)(et.A,{href:c,inline:!0,children:"view the Checks tab."})]}),s[1]=c,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l.AlertIcon,{className:"mx-1",size:24}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsx)("section",{"aria-label":"Checks",className:"border-bottom borderColor-muted",children:(0,a.jsx)(es,{title:"Checks cannot be loaded right now",subtitle:t,icon:n})}),s[4]=t,s[5]=r):r=s[5],r}try{nE.displayName||(nE.displayName="ChecksSectionFetchFailure")}catch{}var nR=n(42522),nT=n(10871);let nk={selectable:"ConflictsSection-module__selectable--fbVZh",ConflictsSectionLoadingSpinner:"ConflictsSection-module__ConflictsSectionLoadingSpinner--yBIsS",ConflictsSectionStatusSpinner:"ConflictsSection-module__ConflictsSectionStatusSpinner--bH9aw"},nA={SpinnerContainer:"CenteredLoadingSpinner-module__SpinnerContainer--TrrSA"};function nD(e){let t,n,r,s=(0,i.c)(5),{className:o}=e;return s[0]!==o?(t=(0,d.$)(nA.SpinnerContainer,o),s[0]=o,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(c.A,{}),s[2]=n):n=s[2],s[3]!==t?(r=(0,a.jsx)("div",{className:t,children:n}),s[3]=t,s[4]=r):r=s[4],r}try{nD.displayName||(nD.displayName="CenteredLoadingSpinner")}catch{}var nP=n(13233),nL=n(91321);function nM(e){let t,n,r,s,o,c,d=(0,i.c)(29),{className:m,children:h,actionList:p,inactive:f,inactiveTooltipText:g,inactiveTooltipDirection:y,loading:x,loadingAnnouncement:v,secondaryButtonActive:_,secondaryButtonAriaLabel:b,onPrimaryButtonClick:S,shouldFocusPrimaryButton:C,onFocusPrimaryButton:j,isPrimary:w,hideSecondaryButton:N}=e,I=void 0===y?"ne":y,E=void 0!==N&&N,R=(0,u.useRef)(null);d[0]!==j||d[1]!==C?(t=()=>{C&&(R.current?.focus(),j?.())},n=[C,j],d[0]=j,d[1]=C,d[2]=t,d[3]=n):(t=d[2],n=d[3]),(0,u.useEffect)(t,n);let T=void 0!==w&&w?"primary":"default",[k,A]=(0,u.useState)(!1),D=f&&!_;d[4]!==f||d[5]!==x?(r=void 0!==x?{}:{inactive:f,"aria-disabled":f},d[4]=f,d[5]=x,d[6]=r):r=d[6];let P=r,L=f?nP.l:S;d[7]!==T||d[8]!==h||d[9]!==P||d[10]!==x||d[11]!==v||d[12]!==L?(s=(0,a.jsx)(eu.Q,{className:"flex-1",variant:T,ref:R,loading:x,loadingAnnouncement:v,onClick:L,...P,children:h}),d[7]=T,d[8]=h,d[9]=P,d[10]=x,d[11]=v,d[12]=L,d[13]=s):s=d[13],d[14]!==p||d[15]!==T||d[16]!==E||d[17]!==k||d[18]!==b||d[19]!==D?(o=!E&&(0,a.jsxs)(t0.W,{open:k,onOpenChange:D?nP.l:e=>A(e),children:[(0,a.jsx)(t0.W.Anchor,{children:(0,a.jsx)(t1.K,{className:"flex-0",variant:T,"aria-label":b,"aria-disabled":D,inactive:D,icon:l.TriangleDownIcon})}),(0,a.jsx)(t0.W.Overlay,{align:"end",sx:{width:"320px"},children:p})]}),d[14]=p,d[15]=T,d[16]=E,d[17]=k,d[18]=b,d[19]=D,d[20]=o):o=d[20],d[21]!==m||d[22]!==s||d[23]!==o?(c=(0,a.jsxs)(nL.A,{className:m,children:[s,o]}),d[21]=m,d[22]=s,d[23]=o,d[24]=c):c=d[24];let M=c;if(f&&g){let e;return d[25]!==M||d[26]!==I||d[27]!==g?(e=(0,a.jsx)(nR.m,{text:g,direction:I,children:M}),d[25]=M,d[26]=I,d[27]=g,d[28]=e):e=d[28],e}return M}try{nM.displayName||(nM.displayName="ButtonWithDropdown")}catch{}var nO=n(20451);function nF(e){let t,n,r=(0,i.c)(8),{description:s,onSelect:o,selected:l,text:c,inactiveText:d}=e;return r[0]!==s?(t=(0,a.jsx)(eS.l.Description,{variant:"block",children:s}),r[0]=s,r[1]=t):t=r[1],r[2]!==d||r[3]!==o||r[4]!==l||r[5]!==t||r[6]!==c?(n=(0,a.jsxs)(eS.l.Item,{selected:l,onSelect:o,inactiveText:d,children:[c,t]}),r[2]=d,r[3]=o,r[4]=l,r[5]=t,r[6]=c,r[7]=n):n=r[7],n}function nB(e){let t,n=(0,i.c)(5),{conflictsWebEditorPath:r,conflictsState:s,webEditorConflictResolution:o}=e;if("HAS_CONFLICTS"!==s||!o)return null;if(!o.viewerCanResolve){let e,t,r=o.viewerCannotResolve?.message||"";return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(eu.Q,{inactive:!0,children:"Resolve conflicts"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,a.jsx)(nR.m,{direction:"nw",text:r,children:e}),n[1]=r,n[2]=t):t=n[2],t}return n[3]!==r?(t=(0,a.jsx)(nT.z,{href:r,children:"Resolve conflicts"}),n[3]=r,n[4]=t):t=n[4],t}function nU(e){let t=(0,i.c)(3),{conflictsWebEditorPath:n,webEditorConflictResolution:r}=e;switch(r?.viewerCannotResolve?.reason){case"INSUFFICIENT_ACCESS":return null;case"TOO_COMPLEX":case"HEAD_BRANCH_PROTECTED":case"ADMIN_DISABLED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"Use the command line to resolve conflicts before continuing."}),t[0]=e):e=t[0],e}default:{let e;return t[1]!==n?(e=(0,a.jsxs)("span",{children:["Use the"," ",(0,a.jsx)(et.A,{inline:!0,href:n,children:"web editor"})," ","or the command line to resolve conflicts before continuing."]}),t[1]=n,t[2]=e):e=t[2],e}}}function n$(e){let t,n=(0,i.c)(3),{advisoryWorkspacePath:r,advisoryWorkspaceId:s}=e,o=r||"";return n[0]!==s||n[1]!==o?(t=(0,a.jsxs)("span",{children:["Merging must be performed from the"," ",(0,a.jsx)(et.A,{inline:!0,href:o,children:s})," ","advisory."]}),n[0]=s,n[1]=o,n[2]=t):t=n[2],t}let nV={NO_CONFLICTS:{heading:"No conflicts with base branch",subtitle:()=>"Merging can be performed automatically.",icon:(0,a.jsx)(en.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})},PENDING:{heading:"Checking for the ability to merge automatically...",subtitle:()=>"Hang in there while we check the branch's status.",icon:(0,a.jsx)(nD,{className:nk.ConflictsSectionLoadingSpinner})},OUT_OF_DATE:{heading:"This branch is out-of-date with the base branch",subtitle:({baseRefName:e,viewerLogin:t})=>`Merge the latest changes from ${e} into this branch. This merge commit will be associated with ${t}.`,icon:(0,a.jsx)(tP,{})},HAS_CONFLICTS:{heading:"This branch has conflicts that must be resolved",subtitle:({conflictsWebEditorPath:e,conflictsCondition:t})=>(0,a.jsx)(nU,{conflictsWebEditorPath:e,webEditorConflictResolution:t?.webEditorConflictResolution}),icon:(0,a.jsx)(tP,{})},HAS_REBASE_CONFLICTS:{heading:"This branch cannot be rebased due to conflicts",subtitle:()=>"",icon:(0,a.jsx)(tP,{})},HAS_ADVISORY_WORKSPACE:{heading:"No conflicts with base branch",subtitle:({advisoryWorkspaceId:e,advisoryWorkspacePath:t})=>(0,a.jsx)(n$,{advisoryWorkspaceId:e,advisoryWorkspacePath:t}),icon:(0,a.jsx)(en.A,{icon:()=>(0,a.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})}};function nq(e){let t,n,r,s,o,d,m,f,g,x,_,b,S,C,j,w,N,I,E,R,T,k,A,D,P,L=(0,i.c)(92),{baseRefName:M,headRefOid:O,resourcePath:F,viewerCanUpdateBranch:B,viewerUpdateMethods:U,viewerLogin:$,conflictsCondition:V,conflictsState:q,canUserPushToBase:W,advisoryWorkspace:G}=e;L[0]!==U?(t=U?.find(nJ)?.name||"MERGE",L[0]=U,L[1]=t):t=L[1];let z=t,[H,Q]=(0,u.useState)(z),[K,J]=(0,tb.A)(!1),[X,Y]=(0,tb.A)(null),{sendAnalyticsEvent:Z}=(0,ee.s)(),et=(0,u.useId)(),en=v(),er=(0,y.jE)();L[2]!==en||L[3]!==er||L[4]!==J?(n=async()=>{await er.refetchQueries({queryKey:en},{cancelRefetch:!1}),J(!1)},L[2]=en,L[3]=er,L[4]=J,L[5]=n):n=L[5];let ea=n;L[6]!==Y||L[7]!==J?(r=e=>{J(!1),Y(e.message)},L[6]=Y,L[7]=J,L[8]=r):r=L[8];let ei=r;L[9]!==ei||L[10]!==ea?(s={onSuccess:ea,onError:ei},L[9]=ei,L[10]=ea,L[11]=s):s=L[11];let{mutate:eo}=function(e){let t,n,r,a,s=(0,i.c)(10),{onSuccess:o,onError:l}=e,c=(0,p.e)(h.u.updatePullRequestBranch);return s[0]!==c?(t=async e=>{let{updateMethod:t,expectedHeadOid:n}=e;return(0,eE.q$)(c,{method:"POST",headers:{Accept:"application/json"},body:{updateMethod:t,expectedHeadOid:n}})},s[0]=c,s[1]=t):t=s[1],s[2]!==o?(n=async e=>{let t=await (0,eE.hp)(e);e.ok||(0,eE.R)(e,t);let n=await (await (0,nO.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message);o()},s[2]=o,s[3]=n):n=s[3],s[4]!==l?(r=e=>{l(e)},s[4]=l,s[5]=r):r=s[5],s[6]!==t||s[7]!==n||s[8]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[6]=t,s[7]=n,s[8]=r,s[9]=a):a=s[9],(0,eI.n)(a)}(s);L[12]!==O||L[13]!==K||L[14]!==H||L[15]!==Z||L[16]!==Y||L[17]!==J||L[18]!==eo?(o=()=>{K||(J(!0),Y(null),eo({updateMethod:H,expectedHeadOid:O}),Z("conflicts_section.update_branch","MERGEBOX_CONFLICTS_SECTION_UPDATE_BRANCH_BUTTON"))},L[12]=O,L[13]=K,L[14]=H,L[15]=Z,L[16]=Y,L[17]=J,L[18]=eo,L[19]=o):o=L[19];let el=o,ec=`${F}/conflicts`;L[20]!==V.conflicts?(d=V.conflicts??[],L[20]=V.conflicts,L[21]=d):d=L[21];let ed=d;L[22]!==H?(m=function(){return"MERGE"===H?"Update branch":"Rebase branch"},L[22]=H,L[23]=m):m=L[23];let eu=m;L[24]!==H?(f=function(){return"MERGE"===H?"Updating branch":"Rebasing branch"},L[24]=H,L[25]=f):f=L[25];let em=f,eh=("OUT_OF_DATE"===q||"NO_CONFLICTS"===q||"PENDING"===q)&&B,ep="HAS_CONFLICTS"===q&&(V.webEditorConflictResolution?.viewerCanResolve||V.webEditorConflictResolution?.viewerCannotResolve?.reason!=="INSUFFICIENT_ACCESS"),ef=G?.advisoryWorkspaceId,eg=G?.advisoryWorkspacePath;L[26]!==U?(g=U?.filter(nK),L[26]=U,L[27]=g):g=L[27];let ey=g;L[28]!==U?(x=U?.find(nQ),L[28]=U,L[29]=x):x=L[29];let ex=x;L[30]!==U?(_=U?.find(nH),L[30]=U,L[31]=_):_=L[31];let ev=_;L[32]!==U?(b=U?.find(nz),L[32]=U,L[33]=b):b=L[33];let e_=b;L[34]!==U?(S=U?.find(nG)?.failureReason,L[34]=U,L[35]=S):S=L[35];let eb=S;L[36]!==z||L[37]!==eb||L[38]!==e_||L[39]!==H||L[40]!==Z||L[41]!==ex||L[42]!==ev||L[43]!==U?(C=function(){return U?(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[ex&&(0,a.jsx)(nF,{description:"The merge commit will be associated with your account.",selected:"MERGE"===z,text:"Update with merge commit",onSelect:()=>{Z("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("MERGE")}}),ev&&(0,a.jsx)(nF,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===z,text:"Update with rebase",onSelect:()=>{Z("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}}),e_&&(0,a.jsx)(nF,{inactiveText:eb||"This branch cannot be rebased at this time.",selected:"REBASE"===z,text:"Update with rebase",onSelect:()=>{Z("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}})]}):(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[(0,a.jsx)(nF,{description:"The merge commit will be associated with your account.",selected:"MERGE"===H,text:"Update with merge commit",onSelect:()=>{Z("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("MERGE")}}),(0,a.jsx)(nF,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===H,text:"Update with rebase",onSelect:()=>{Z("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}})]})},L[36]=z,L[37]=eb,L[38]=e_,L[39]=H,L[40]=Z,L[41]=ex,L[42]=ev,L[43]=U,L[44]=C):C=L[44];let ej=C,ew=nV[q],eN=nV[q];return L[45]!==K?(j=K&&(0,a.jsx)(c.A,{size:"small",className:nk.ConflictsSectionStatusSpinner}),L[45]=K,L[46]=j):j=L[46],L[47]!==eN.heading||L[48]!==j?(w=(0,a.jsxs)(a.Fragment,{children:[eN.heading,j]}),L[47]=eN.heading,L[48]=j,L[49]=w):w=L[49],L[50]!==ef||L[51]!==eg||L[52]!==M||L[53]!==W||L[54]!==V||L[55]!==q||L[56]!==ec||L[57]!==$?(N=W?nV[q].subtitle({baseRefName:M,viewerLogin:$,conflictsWebEditorPath:ec,conflictsCondition:V,advisoryWorkspaceId:ef,advisoryWorkspacePath:eg}):"Changes can be cleanly merged.",L[50]=ef,L[51]=eg,L[52]=M,L[53]=W,L[54]=V,L[55]=q,L[56]=ec,L[57]=$,L[58]=N):N=L[58],L[59]!==el||L[60]!==K||L[61]!==eh||L[62]!==ey?.length||L[63]!==em||L[64]!==eu||L[65]!==ej?(I=eh&&(0,a.jsx)(nM,{hideSecondaryButton:ey?.length===1,loading:K,loadingAnnouncement:em(),secondaryButtonAriaLabel:"Update branch options",actionList:ej(),onPrimaryButtonClick:el,children:eu()}),L[59]=el,L[60]=K,L[61]=eh,L[62]=ey?.length,L[63]=em,L[64]=eu,L[65]=ej,L[66]=I):I=L[66],L[67]!==V.webEditorConflictResolution||L[68]!==q||L[69]!==ec?(E=(0,a.jsx)(nB,{conflictsWebEditorPath:ec,conflictsState:q,webEditorConflictResolution:V.webEditorConflictResolution}),L[67]=V.webEditorConflictResolution,L[68]=q,L[69]=ec,L[70]=E):E=L[70],L[71]!==I||L[72]!==E?(R=(0,a.jsxs)(a.Fragment,{children:[I,E]}),L[71]=I,L[72]=E,L[73]=R):R=L[73],L[74]!==ed||L[75]!==ep?(T=ep&&(0,a.jsx)("div",{className:"ml-n3",children:(0,a.jsx)(eS.l,{className:"py-0 overflow-hidden",children:ed.map(nW)})}),L[74]=ed,L[75]=ep,L[76]=T):T=L[76],L[77]!==et||L[78]!==ew.icon||L[79]!==w||L[80]!==N||L[81]!==R||L[82]!==T?(k=(0,a.jsx)(es,{headerId:et,icon:ew.icon,title:w,subtitle:N,rightSideContent:R,children:T}),L[77]=et,L[78]=ew.icon,L[79]=w,L[80]=N,L[81]=R,L[82]=T,L[83]=k):k=L[83],L[84]!==X?(A=X&&(0,a.jsxs)(eC.A,{className:"m-3",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),X]}),L[84]=X,L[85]=A):A=L[85],L[86]!==k||L[87]!==A?(D=(0,a.jsxs)("div",{className:"d-flex flex-column width-full overflow-hidden",children:[k,A]}),L[86]=k,L[87]=A,L[88]=D):D=L[88],L[89]!==et||L[90]!==D?(P=(0,a.jsx)("section",{"aria-label":"Conflicts",className:"border-bottom borderColor-muted","aria-describedby":et,children:D}),L[89]=et,L[90]=D,L[91]=P):P=L[91],P}function nW(e){return(0,a.jsxs)(eS.l.Item,{children:[(0,a.jsx)(eS.l.LeadingVisual,{className:"fgColor-muted",children:(0,a.jsx)(l.FileIcon,{})}),(0,a.jsx)("span",{className:`input-monospace f6 ${nk.selectable}`,children:e})]},e)}function nG(e){return"REBASE"===e.name}function nz(e){return"REBASE"===e.name&&"UNAVAILABLE"===e.allowableStatus}function nH(e){return"REBASE"===e.name&&"ALLOWED"===e.allowableStatus}function nQ(e){return"MERGE"===e.name&&"ALLOWED"===e.allowableStatus}function nK(e){return"ALLOWED"===e.allowableStatus||"UNAVAILABLE"===e.allowableStatus}function nJ(e){return!0===e.isDefault}try{nF.displayName||(nF.displayName="UpdateBranchOption")}catch{}try{nB.displayName||(nB.displayName="ResolveConflictsButton")}catch{}try{nU.displayName||(nU.displayName="ConflictResolutionSubtitle")}catch{}try{n$.displayName||(n$.displayName="AdvisoryWorkspaceSubtitle")}catch{}try{nq.displayName||(nq.displayName="ConflictsSection")}catch{}let nX={DraftStateCircleIcon:"DraftStateSection-module__DraftStateCircleIcon--bX_1M",DraftStateFlashMessage:"DraftStateSection-module__DraftStateFlashMessage--wiIFr",DraftStateIcon:"DraftStateSection-module__DraftStateIcon--lJaLS"};function nY(e){let t,n,r,s,o,c,d,m,f=(0,i.c)(24),{viewerCanUpdate:g,helpUrl:x}=e,[_,b]=(0,tb.A)(null);f[0]!==b?(t={onError:e=>{b(e.message)}},f[0]=b,f[1]=t):t=f[1];let{mutate:S,isPending:C}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.markReadyForReview),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(t),{sendAnalyticsEvent:j}=(0,ee.s)(),w=(0,u.useId)();f[2]!==C||f[3]!==S||f[4]!==j?(n=function(){C||(S(),j("draft_state_section.mark_ready_for_review","MERGEBOX_DRAFT_STATE_SECTION_MARK_READY_FOR_REVIEW_BUTTON"))},f[2]=C,f[3]=S,f[4]=j,f[5]=n):n=f[5];let N=n,I=`${x}/get-started/learning-about-github/access-permissions-on-github`;return f[6]!==I||f[7]!==g?(r=g?"Draft pull requests cannot be merged.":(0,a.jsxs)("span",{children:["Only those with ",(0,a.jsx)("a",{href:I,children:"write access"})," to this repository can mark a draft pull request as ready for review."]}),f[6]=I,f[7]=g,f[8]=r):r=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(en.A,{size:32,icon:nZ,className:nX.DraftStateCircleIcon}),f[9]=s):s=f[9],f[10]!==N||f[11]!==C||f[12]!==g?(o=g?(0,a.jsx)(eu.Q,{onClick:N,loading:C,loadingAnnouncement:"Marking ready for review",children:"Ready for review"}):void 0,f[10]=N,f[11]=C,f[12]=g,f[13]=o):o=f[13],f[14]!==_?(c=_&&(0,a.jsxs)(eC.A,{variant:"danger",className:nX.DraftStateFlashMessage,children:[(0,a.jsx)(eT.A,{icon:l.StopIcon,className:nX.DraftStateIcon}),_]}),f[14]=_,f[15]=c):c=f[15],f[16]!==w||f[17]!==r||f[18]!==o||f[19]!==c?(d=(0,a.jsx)(es,{headerId:w,title:"This pull request is still a work in progress",subtitle:r,icon:s,rightSideContent:o,children:c}),f[16]=w,f[17]=r,f[18]=o,f[19]=c,f[20]=d):d=f[20],f[21]!==w||f[22]!==d?(m=(0,a.jsx)("section",{"aria-label":"Draft state","aria-describedby":w,className:"border-bottom color-border-subtle",children:d}),f[21]=w,f[22]=d,f[23]=m):m=f[23],m}function nZ(){return(0,a.jsx)(l.GitPullRequestDraftIcon,{size:16})}try{nY.displayName||(nY.displayName="DraftStateSection")}catch{}let n0={MergeQueueSectionText:"MergeQueueSection-module__MergeQueueSectionText--Vgwij"};function n1(e){let t,n,r,s,o,c,d,m,f,g,x,_,b,S,C,j,w,N,I=(0,i.c)(52),{mergeQueue:E,mergeQueueEntry:R,viewerCanAddAndRemoveFromMergeQueue:T,focusPrimaryMergeButton:k}=e,A=R?.position,D=E?.url,P=(0,u.useRef)(null),[L,M]=(0,tb.A)(!1),[O,F]=(0,tb.A)(null),B=(0,i.c)(1);B[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],B[0]=N):N=B[0],(0,u.useEffect)(tX,N);let{sendAnalyticsEvent:U}=(0,ee.s)();I[0]!==F||I[1]!==M?(t={onError:e=>{M(!1),F(e.message),P.current?.focus(),setTimeout(n3,1e3)}},I[0]=F,I[1]=M,I[2]=t):t=I[2];let{mutate:$,isPending:V}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.dequeuePullRequest),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(t);I[3]!==k||I[4]!==V||I[5]!==$||I[6]!==U||I[7]!==F||I[8]!==M?(n=()=>{V||(F(null),U("merge_queue_section.dequeue_pull_request","MERGEBOX_MERGE_QUEUE_SECTION_REMOVE_FROM_QUEUE_BUTTON"),$(void 0,{onSuccess:()=>{M(!1),setTimeout(n2,1e3),k()}}))},I[3]=k,I[4]=V,I[5]=$,I[6]=U,I[7]=F,I[8]=M,I[9]=n):n=I[9];let q=n;I[10]!==F||I[11]!==M?(r=()=>{F(null),M(!0)},I[10]=F,I[11]=M,I[12]=r):r=I[12];let W=r;I[13]!==M?(s=()=>M(!1),I[13]=M,I[14]=s):s=I[14],I[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(tC.A.Header,{id:"remove-from-queue-dialog-title",children:"Remove from the queue?"}),I[15]=o):o=I[15],I[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("span",{children:"Removing this pull request from the queue could impact other pull requests in the queue. Are you sure?"}),I[16]=c):c=I[16],I[17]!==V||I[18]!==M?(d=()=>{V||(M(!1),P.current?.focus())},I[17]=V,I[18]=M,I[19]=d):d=I[19],I[20]!==V||I[21]!==d?(m=(0,a.jsx)(eu.Q,{className:"mr-1",inactive:V,onClick:d,children:"Cancel"}),I[20]=V,I[21]=d,I[22]=m):m=I[22],I[23]!==q||I[24]!==V?(f=(0,a.jsx)(eu.Q,{variant:"danger",loading:V,loadingAnnouncement:"Removing from the queue",onClick:q,children:"Remove from the queue"}),I[23]=q,I[24]=V,I[25]=f):f=I[25],I[26]!==m||I[27]!==f?(g=(0,a.jsxs)("div",{className:"p-3",children:[c,(0,a.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[m,f]})]}),I[26]=m,I[27]=f,I[28]=g):g=I[28],I[29]!==L||I[30]!==g||I[31]!==s?(x=(0,a.jsxs)(tC.A,{"aria-labelledby":"remove-from-queue-dialog-title",isOpen:L,returnFocusRef:P,onDismiss:s,children:[o,g]}),I[29]=L,I[30]=g,I[31]=s,I[32]=x):x=I[32],I[33]!==O?(_=O&&(0,a.jsxs)(eC.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),O]}),I[33]=O,I[34]=_):_=I[34],I[35]!==W||I[36]!==R?.isLocked||I[37]!==T?(b=T&&!R?.isLocked&&(0,a.jsx)(eu.Q,{ref:P,onClick:W,children:"Remove from queue"}),I[35]=W,I[36]=R?.isLocked,I[37]=T,I[38]=b):b=I[38],I[39]!==b?(S=(0,a.jsx)(a.Fragment,{children:b}),I[39]=b,I[40]=S):S=I[40];let G=R?.isLocked;return I[41]!==A||I[42]!==D||I[43]!==G?(C=(0,a.jsx)(n4,{position:A,resourcePath:D,entryIsLocked:G}),I[41]=A,I[42]=D,I[43]=G,I[44]=C):C=I[44],I[45]!==S||I[46]!==C?(j=(0,a.jsx)(es,{title:"Queued to merge...",rightSideContent:S,children:C}),I[45]=S,I[46]=C,I[47]=j):j=I[47],I[48]!==x||I[49]!==_||I[50]!==j?(w=(0,a.jsxs)(a.Fragment,{children:[x,_,j]}),I[48]=x,I[49]=_,I[50]=j,I[51]=w):w=I[51],w}function n2(){return(0,tw.i)("The pull request was successfully removed from the queue.")}function n3(){return(0,tw.i)("Failed to remove pull request from the merge queue")}function n4(e){let t,n,r,s,o=(0,i.c)(8),{position:l,resourcePath:c,entryIsLocked:d}=e;if(!l||!c){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{}),o[0]=e):e=o[0],e}let u=l-1;return t=d?"This pull request is locked for deployment by the":0===u?"This pull request is next up in the":1===u?`There is ${u} pull request ahead of this one in the`:`There are ${u} pull requests ahead of this one in the`,o[1]!==t?(n=(0,a.jsx)("span",{className:n0.MergeQueueSectionText,children:t}),o[1]=t,o[2]=n):n=o[2],o[3]!==c?(r=(0,a.jsx)(et.A,{inline:!0,href:c,children:"merge queue"}),o[3]=c,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(s=(0,a.jsxs)(a.Fragment,{children:[n," ",r,"."]}),o[5]=n,o[6]=r,o[7]=s):s=o[7],s}try{n1.displayName||(n1.displayName="MergeQueueSection")}catch{}try{n4.displayName||(n4.displayName="MergeQueuePositionText")}catch{}function n5({mergeMethod:e,confirming:t,isBypassMerge:n=!1,inProgress:r=!1,isAutoMergeAllowed:a=!1}){if(r)return a?"Confirming...":"Merging...";let i=t?"Confirm auto-merge":"Enable auto-merge",s=t?"Confirm bypass rules and merge":"Bypass rules and merge";switch(e){case m.q$.MERGE:if(a)return i;if(n)return s;if(t)return"Confirm merge";else return"Merge pull request";case m.q$.SQUASH:if(a)return`${i} (squash)`;if(n)return`${s} (squash)`;if(t)return"Confirm squash and merge";else return"Squash and merge";case m.q$.REBASE:if(a)return`${i} (rebase)`;if(n)return`${s} (rebase)`;if(t)return"Confirm rebase and merge";else return"Rebase and merge"}}function n6({mergeMethod:e,confirming:t,inProgress:n}){if(n)return"Adding to merge queue...";switch(e){case m.lD.GROUP:return t?"Confirm merge when ready":"Merge when ready";case m.lD.SOLO:return t?"Confirm queue and force solo merge":"Queue and force solo merge"}}var n7=n(9591),n8=n(2922),n9=n(95726);let MergeError=class MergeError extends Error{constructor(e,t=[],n){super(e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"ruleErrors",void 0),this.name="MergeError",this.ruleErrors=t,this.cause=n}};function re(e){let t,n,r,a,s,o=(0,i.c)(14);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l,onSuccess:c}=t,d=(0,p.e)(h.u.enableAutoMerge),u=v(),m=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eE.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eE.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eE.R)(t,n,r),n},o[2]=d,o[3]=n):n=o[3],o[4]!==u||o[5]!==c||o[6]!==m?(r=()=>(c?.(),m.refetchQueries({queryKey:u},{cancelRefetch:!1})),o[4]=u,o[5]=c,o[6]=m,o[7]=r):r=o[7],o[8]!==l?(a=e=>{l?.(e)},o[8]=l,o[9]=a):a=o[9],o[10]!==n||o[11]!==r||o[12]!==a?(s={mutationFn:n,onSuccess:r,onError:a},o[10]=n,o[11]=r,o[12]=a,o[13]=s):s=o[13],(0,eI.n)(s)}var rt=n(71678);function rn(e){let t,n=(0,i.c)(3),{children:r,className:s}=e,o=`d-flex flex-items-start flex-sm-items-center flex-column flex-sm-row gap-2 ${s}`;return n[0]!==r||n[1]!==o?(t=(0,a.jsx)("div",{className:o,children:r}),n[0]=r,n[1]=o,n[2]=t):t=n[2],t}rn.Slot=function({children:e}){var t;let n=u.Children.only(e);return u.isValidElement(n)&&(n=(t=n).type===nM||t.type===eu.Q?(0,u.cloneElement)(t,{className:`flex-self-stretch flex-shrink-0 ${t.props.className}`}):t),n};try{rn.displayName||(rn.displayName="MergeSectionActions")}catch{}try{(r=MergeSectionsActionsSlot).displayName||(r.displayName="MergeSectionsActionsSlot")}catch{}let rr={ConfirmMergeContainer:"ConfirmMerge-module__ConfirmMergeContainer--g9ubs",ConfirmMergeText:"ConfirmMerge-module__ConfirmMergeText--kxshz"};function ra(e){let t,n,r,s=(0,i.c)(5),{errorMessage:o}=e;return(s[0]!==o?(t=()=>{o&&o.length>0&&(0,tw.i)(o)},n=[o],s[0]=o,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,u.useEffect)(t,n),o)?(s[3]!==o?(r=(0,a.jsx)(n9.l,{className:"mt-3","aria-label":"Merge error warning banner",variant:"warning",title:"Merge error",hideTitle:!0,description:o}),s[3]=o,s[4]=r):r=s[4],r):null}function ri(e){let t,n,r,s,o,l,c,d,f,g,x,_,b,S,C,j,w,N,I=(0,i.c)(67),{defaultCommitAuthorEmail:E,commitMessageBody:R,commitMessageHeadline:T,defaultBranchName:k,handleConfirmingMergeInfo:A,isBypassMerge:D,onCancel:P,selectedMergeMethod:L,isAutoMergeAllowed:M,possibleCommitAuthorEmails:O}=e,F=void 0!==M&&M,B=(0,u.useRef)(null),U=(0,u.useRef)(null);I[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{B.current?.focus(),U.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},n=[],I[0]=t,I[1]=n):(t=I[0],n=I[1]),(0,u.useEffect)(t,n);let[$,V]=(0,u.useState)(T||""),[q,W]=(0,u.useState)(R||""),{sendAnalyticsEvent:G}=(0,ee.s)(),[z,H]=(0,tb.A)("");I[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],I[2]=r):r=I[2];let[Q,K]=(0,tb.A)(r),J=O.length>0,X=L===m.q$.REBASE?"":E||"",[Y,Z]=(0,u.useState)(X);I[3]!==H||I[4]!==K?(s={onError:e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))}},I[3]=H,I[4]=K,I[5]=s):s=I[5];let{mutate:et,isPending:en}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.merge),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{let t=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eE.hp)(t),r=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eE.R)(t,n,r),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>o(e),s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(s);I[6]!==H||I[7]!==K?(o=e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),H(e.message))},I[6]=H,I[7]=K,I[8]=o):o=I[8],I[9]!==A?(l=()=>{A(!1)},I[9]=A,I[10]=l):l=I[10],I[11]!==o||I[12]!==l?(c={onError:o,onSuccess:l},I[11]=o,I[12]=l,I[13]=c):c=I[13];let{mutate:er,isPending:ea}=re(c),ei=en||ea;I[14]!==Y||I[15]!==q||I[16]!==$||I[17]!==er||I[18]!==F||I[19]!==D||I[20]!==ei||I[21]!==et||I[22]!==L||I[23]!==G||I[24]!==J||I[25]!==H?(d=()=>{ei||(H(""),F?(er({...J?{authorEmail:Y}:{},commitMessage:q,commitTitle:$,mergeMethod:L}),G("direct_merge_section.confirm_auto_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON")):(et({...J?{authorEmail:Y}:{},bypassBranchProtections:D,commitMessage:q,commitTitle:$,mergeMethod:L}),G("direct_merge_section.confirm_direct_merge","MERGEBOX_DIRECT_MERGE_CONFIRMATION_BUTTON")))},I[14]=Y,I[15]=q,I[16]=$,I[17]=er,I[18]=F,I[19]=D,I[20]=ei,I[21]=et,I[22]=L,I[23]=G,I[24]=J,I[25]=H,I[26]=d):d=I[26];let es=d;I[27]!==Q?(f=Q.length>0&&(0,a.jsx)(rt.r,{prefix:"",helpUrl:"",errorMessageNotUsingPrefix:"Repository rule violations found",hideRuleErrorsTitle:!0,ruleErrors:Q}),I[27]=Q,I[28]=f):f=I[28],I[29]!==J||I[30]!==q||I[31]!==$||I[32]!==X||I[33]!==es||I[34]!==O||I[35]!==L?(g=L!==m.q$.REBASE&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ej.A,{children:[(0,a.jsx)(ej.A.Label,{children:"Commit message"}),(0,a.jsx)(n7.A,{ref:B,block:!0,defaultValue:$,onChange:e=>V(e.currentTarget.value)})]}),(0,a.jsxs)(ej.A,{className:"mt-3 width-full",children:[(0,a.jsx)(ej.A.Label,{children:"Extended description"}),(0,a.jsx)(ew.Ay,{block:!0,placeholder:"Add an optional extended description\u2026",defaultValue:q,onChange:e=>W(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),es())}})]}),J?(0,a.jsx)("div",{className:rr.ConfirmMergeContainer,children:(0,a.jsxs)(ej.A,{children:[(0,a.jsx)(ej.A.Label,{children:"Commit email"}),(0,a.jsx)(n8.A,{defaultValue:X,onChange:e=>Z(e.target.value),"aria-label":"Select commit author email",children:O.map(rs)})]})}):(0,a.jsx)("div",{className:rr.ConfirmMergeContainer,children:(0,a.jsxs)("span",{className:rr.ConfirmMergeText,children:["This commit will be authored by ",X,"."]})})]}),I[29]=J,I[30]=q,I[31]=$,I[32]=X,I[33]=es,I[34]=O,I[35]=L,I[36]=g):g=I[36],I[37]!==k||I[38]!==L?(x=L===m.q$.REBASE&&(0,a.jsxs)("span",{className:rr.ConfirmMergeText,children:["This will rebase your changes and merge them into ",k,"."]}),I[37]=k,I[38]=L,I[39]=x):x=I[39],I[40]!==F||I[41]!==D||I[42]!==L?(_=n5({mergeMethod:L,confirming:!0,isBypassMerge:D,inProgress:!0,isAutoMergeAllowed:F}),I[40]=F,I[41]=D,I[42]=L,I[43]=_):_=I[43];let eo=D?"danger":F?"default":"primary";return I[44]!==F||I[45]!==D||I[46]!==L?(b=n5({mergeMethod:L,confirming:!0,isBypassMerge:D,inProgress:!1,isAutoMergeAllowed:F}),I[44]=F,I[45]=D,I[46]=L,I[47]=b):b=I[47],I[48]!==es||I[49]!==ei||I[50]!==_||I[51]!==eo||I[52]!==b?(S=(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(eu.Q,{ref:U,loading:ei,loadingAnnouncement:_,variant:eo,onClick:es,children:b})}),I[48]=es,I[49]=ei,I[50]=_,I[51]=eo,I[52]=b,I[53]=S):S=I[53],I[54]!==P?(C=(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(eu.Q,{onClick:P,children:"Cancel"})}),I[54]=P,I[55]=C):C=I[55],I[56]!==S||I[57]!==C?(j=(0,a.jsxs)(rn,{className:"mt-3",children:[S,C]}),I[56]=S,I[57]=C,I[58]=j):j=I[58],I[59]!==z?(w=(0,a.jsx)(ra,{errorMessage:z}),I[59]=z,I[60]=w):w=I[60],I[61]!==f||I[62]!==g||I[63]!==x||I[64]!==j||I[65]!==w?(N=(0,a.jsxs)("div",{children:[f,g,x,j,w]}),I[61]=f,I[62]=g,I[63]=x,I[64]=j,I[65]=w,I[66]=N):N=I[66],N}function rs(e){return(0,a.jsx)(n8.A.Option,{value:e,children:e},e)}try{ra.displayName||(ra.displayName="MergeErrorMessage")}catch{}try{ri.displayName||(ri.displayName="ConfirmMerge")}catch{}function ro(e){let t,n,r=(0,i.c)(7),{onSelect:s,primaryText:o,secondaryText:l,selected:c}=e;return r[0]!==l?(t=(0,a.jsx)(eS.l.Description,{variant:"block",children:l}),r[0]=l,r[1]=t):t=r[1],r[2]!==s||r[3]!==o||r[4]!==c||r[5]!==t?(n=(0,a.jsxs)(eS.l.Item,{selected:c,onSelect:s,children:[o,t]}),r[2]=s,r[3]=o,r[4]=c,r[5]=t,r[6]=n):n=r[6],n}try{ro.displayName||(ro.displayName="MergeDropdownOption")}catch{}let rl=(0,u.lazy)(()=>Promise.all([n.e("primer-react"),n.e("ui_packages_mergebox_components_sections_merge-section_command-line-instructions_CommandLineI-e41d4a")]).then(n.bind(n,88351)));function rc(e){let t,n,r,o,l,c,d,h,p,f,g,y,x,v,_,b,C,j,w,N=(0,i.c)(82),{baseRefName:I,canUserPushToBase:E,defaultCommitAuthorEmail:R,commitMessageBody:T,commitMessageHeadline:k,conflictsCondition:A,handleConfirmingMergeInfo:D,headRepository:P,helpUrl:L,isAdminBypassToggleChecked:M,isAdminBypassToggleVisible:O,isAutoMergeAllowed:F,isConfirmingMergeInfo:U,isCrossRepo:$,mergeable:V,numberOfCommits:q,mergeBoxRollupStatus:W,setShouldFocusPrimaryMergeButton:G,shouldFocusPrimaryMergeButton:z,status:H,viewerMergeActions:Q,possibleCommitAuthorEmails:K}=e,J=void 0!==F&&F,{mergeMethod:X,setMergeMethod:Y}=S(),{sendAnalyticsEvent:Z}=(0,ee.s)(),[en,er]=(0,tb.A)(!1),ea=(0,u.useRef)(null);if(!A)return null;if(N[0]!==Q){let e=Q.find(rd);s(e),n=(t=function({mergeMethods:e}){return e.reduce((e,t)=>((t?.allowableStatus==="ALLOWED"||t?.allowableStatus==="ALLOWED_WITH_BYPASS")&&e.push(t.name),e),[])}({mergeMethods:e.mergeMethods})).includes(m.q$.MERGE),r=t.includes(m.q$.SQUASH),o=t.includes(m.q$.REBASE),N[0]=Q,N[1]=t,N[2]=n,N[3]=r,N[4]=o}else t=N[1],n=N[2],r=N[3],o=N[4];let ei=o,es=O&&M,eo=H===B.ChecksPending?"pending":"failing",el=`Merging is blocked due to ${eo} merge requirements`;N[5]!==D||N[6]!==J||N[7]!==Z?(l=()=>{D(!0),Z(J?"direct_merge_section.auto_merge_click":"direct_merge_section.direct_merge_click",J?"MERGEBOX_AUTO_MERGE_SECTION_MERGE_BUTTON":"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_BUTTON")},N[5]=D,N[6]=J,N[7]=Z,N[8]=l):l=N[8];let ec=l;N[9]!==D||N[10]!==J||N[11]!==Z||N[12]!==G?(c=()=>{D(!1),G(!0),Z(J?"direct_merge_section.cancel_auto_merge":"direct_merge_section.cancel_direct_merge",J?"MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON":"MERGEBOX_DIRECT_MERGE_CANCEL_CONFIRMATION_BUTTON")},N[9]=D,N[10]=J,N[11]=Z,N[12]=G,N[13]=c):c=N[13];let ed=c;N[14]!==Z||N[15]!==er?(d=()=>{er(!0),Z("direct_merge_section.view_command_line_instructions","MERGEBOX_DIRECT_MERGE_SECTION_VIEW_COMMAND_LINE_INSTRUCTIONS_BUTTON")},N[14]=Z,N[15]=er,N[16]=d):d=N[16];let eu=d;N[17]!==Z||N[18]!==Y?(h=(e,t)=>{Y(e),Z(t,"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_METHOD_MENU_ITEM")},N[17]=Z,N[18]=Y,N[19]=h):h=N[19];let em=h;if(U){let e,t=R||"",n=T||"",r=k||"";return N[20]!==I||N[21]!==ed||N[22]!==D||N[23]!==M||N[24]!==J||N[25]!==X||N[26]!==K||N[27]!==t||N[28]!==n||N[29]!==r?(e=(0,a.jsx)(ri,{defaultCommitAuthorEmail:t,commitMessageBody:n,commitMessageHeadline:r,defaultBranchName:I,handleConfirmingMergeInfo:D,isBypassMerge:M,selectedMergeMethod:X,onCancel:ed,isAutoMergeAllowed:J,possibleCommitAuthorEmails:K}),N[20]=I,N[21]=ed,N[22]=D,N[23]=M,N[24]=J,N[25]=X,N[26]=K,N[27]=t,N[28]=n,N[29]=r,N[30]=e):e=N[30],e}N[31]!==I||N[32]!==A||N[33]!==P||N[34]!==en||N[35]!==$||N[36]!==er?(p=en&&ea&&(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(rl,{baseRefName:I,conflictsCondition:A,headRepository:P,isCrossRepo:$,returnFocusRef:ea,onClose:()=>er(!1)})}),N[31]=I,N[32]=A,N[33]=P,N[34]=en,N[35]=$,N[36]=er,N[37]=p):p=N[37];let eh=1===t.length,ep=!J&&!V&&!es,ef=V&&"ALL_PASSED"===W;return N[38]!==n||N[39]!==X||N[40]!==em?(f=n&&(0,a.jsx)(ro,{primaryText:"Create a merge commit",secondaryText:"All commits from this branch will be added to the base branch via a merge commit.",selected:X===m.q$.MERGE,onSelect:()=>em(m.q$.MERGE,"direct_merge_section.select_create_a_merge_commit")}),N[38]=n,N[39]=X,N[40]=em,N[41]=f):f=N[41],N[42]!==r||N[43]!==X||N[44]!==q||N[45]!==em?(g=r&&(0,a.jsx)(ro,{primaryText:"Squash and merge",secondaryText:1===q?"The 1 commit from this branch will be added to the base branch.":`The ${q} commits from this branch will be combined into one commit in the base branch.`,selected:X===m.q$.SQUASH,onSelect:()=>em(m.q$.SQUASH,"direct_merge_section.select_squash_and_merge")}),N[42]=r,N[43]=X,N[44]=q,N[45]=em,N[46]=g):g=N[46],N[47]!==ei||N[48]!==X||N[49]!==q||N[50]!==em?(y=ei&&(0,a.jsx)(ro,{primaryText:"Rebase and merge",secondaryText:`The ${q} commit${1!==q?"s":""} from this branch will be rebased and added to the base branch.`,selected:X===m.q$.REBASE,onSelect:()=>em(m.q$.REBASE,"direct_merge_section.select_rebase_and_merge")}),N[47]=ei,N[48]=X,N[49]=q,N[50]=em,N[51]=y):y=N[51],N[52]!==f||N[53]!==g||N[54]!==y?(x=(0,a.jsxs)(eS.l,{selectionVariant:"single",showDividers:!0,children:[f,g,y]}),N[52]=f,N[53]=g,N[54]=y,N[55]=x):x=N[55],N[56]!==G?(v=()=>G(!1),N[56]=G,N[57]=v):v=N[57],N[58]!==J||N[59]!==es||N[60]!==X?(_=n5({mergeMethod:X,confirming:!1,isBypassMerge:es,isAutoMergeAllowed:J}),N[58]=J,N[59]=es,N[60]=X,N[61]=_):_=N[61],N[62]!==ec||N[63]!==el||N[64]!==z||N[65]!==ef||N[66]!==x||N[67]!==v||N[68]!==_||N[69]!==eh||N[70]!==ep?(b=(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(nM,{hideSecondaryButton:eh,inactive:ep,inactiveTooltipText:el,inactiveTooltipDirection:"se",isPrimary:ef,secondaryButtonActive:!0,secondaryButtonAriaLabel:"Select merge method",shouldFocusPrimaryButton:z,actionList:x,onFocusPrimaryButton:v,onPrimaryButtonClick:ec,children:_})}),N[62]=ec,N[63]=el,N[64]=z,N[65]=ef,N[66]=x,N[67]=v,N[68]=_,N[69]=eh,N[70]=ep,N[71]=b):b=N[71],N[72]!==E||N[73]!==eu||N[74]!==L?(C=(0,a.jsx)(rn.Slot,{children:(0,a.jsx)("span",{className:"f6 fgColor-muted",children:E?(0,a.jsxs)(a.Fragment,{children:["You can also merge this with the command line."," ",(0,a.jsx)(et.A,{as:"button",ref:ea,inline:!0,onClick:eu,children:"View command line instructions."})]}):(0,a.jsxs)(a.Fragment,{children:["Only those with"," ",(0,a.jsx)(et.A,{href:`${L}/en/get-started/learning-about-github/access-permissions-on-github`,inline:!0,children:"write access"})," ","to this repository can merge pull requests."]})})}),N[72]=E,N[73]=eu,N[74]=L,N[75]=C):C=N[75],N[76]!==b||N[77]!==C?(j=(0,a.jsxs)(rn,{children:[b,C]}),N[76]=b,N[77]=C,N[78]=j):j=N[78],N[79]!==j||N[80]!==p?(w=(0,a.jsxs)(a.Fragment,{children:[p,j]}),N[79]=j,N[80]=p,N[81]=w):w=N[81],w}function rd(e){return e.name===m.tw.DIRECT_MERGE}try{rl.displayName||(rl.displayName="CommandLineInstructionsDialog")}catch{}try{rc.displayName||(rc.displayName="DirectMergeActionsSection")}catch{}var ru=n(65607);function rm(e){let t,n,r,s=(0,i.c)(6),{checked:o,onToggleChecked:l}=e;return s[0]!==o||s[1]!==l?(t=(0,a.jsx)(ru.A,{onChange:l,checked:o}),s[0]=o,s[1]=l,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(ej.A.Label,{children:(0,a.jsx)("span",{className:"fgColor-danger",children:" Merge without waiting for requirements to be met (bypass rules) "})}),s[3]=n):n=s[3],s[4]!==t?(r=(0,a.jsxs)(ej.A,{children:[t,n]}),s[4]=t,s[5]=r):r=s[5],r}try{rm.displayName||(rm.displayName="BypassMergeRequirementsToggle")}catch{}function rh(e,t,n){return"MERGEABLE_IF_STATUSES_PASS"===e&&"BEHIND"!==n&&t!==B.ChecksPending&&t!==B.ChecksFailing&&t!==B.UnableToMerge||"MERGEABLE"===e}function rp(e){let t,n,r,s,o,c,d,h,p,f,g=(0,i.c)(44),{autoMergeRequest:y,baseRefName:x,handleConfirmingMergeInfo:v,isDraft:_,isInMergeQueue:b,mergeQueue:S,mergeRequirementsState:C,mergeStateStatus:j,mergeBoxRollupStatus:w,status:N,viewerCanAddAndRemoveFromMergeQueue:I,viewerCanAddToMergeQueueSolo:E,shouldFocusPrimaryMergeButton:R,setShouldFocusPrimaryMergeButton:T}=e,k=S?.url,[A,D]=(0,u.useState)(m.lD.GROUP),[P,L]=(0,u.useState)(!1),[M,O]=(0,tb.A)(),{sendAnalyticsEvent:F}=(0,ee.s)();g[0]!==O?(t={onError:e=>{O(e.message)}},g[0]=O,g[1]=t):t=g[1];let{mutate:B,isPending:U}=re(t);g[2]!==v||g[3]!==F?(n=()=>{L(!0),v(!0),F("auto_merge_section.merge_click","MERGEBOX_AUTO_MERGE_BUTTON")},g[2]=v,g[3]=F,g[4]=n):n=g[4];let $=n;g[5]!==B||g[6]!==v||g[7]!==U||g[8]!==A||g[9]!==F||g[10]!==O?(r=()=>{U||(O(void 0),B({mergeMethod:A===m.lD.SOLO?"SOLO":"GROUP"}),v(!1),F("auto_merge_section.confirm_direct_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON"))},g[5]=B,g[6]=v,g[7]=U,g[8]=A,g[9]=F,g[10]=O,g[11]=r):r=g[11];let V=r;g[12]!==F?(s=(e,t)=>{D(e),F(t,"MERGEBOX_MERGE_QUEUE_SECTION_MERGE_METHOD_MENU_ITEM")},g[12]=F,g[13]=s):s=g[13];let q=s;g[14]!==C||g[15]!==j||g[16]!==N?(o=rh(C,N,j),g[14]=C,g[15]=j,g[16]=N,g[17]=o):o=g[17];let W=o,G=!I||"UNKNOWN"===j||_||b||!!y,z=(0,u.useRef)(null);return g[18]!==P?(c=()=>{P&&z?.current&&z?.current.focus()},d=[P],g[18]=P,g[19]=c,g[20]=d):(c=g[19],d=g[20]),(0,u.useEffect)(c,d),g[21]!==M?(h=M&&(0,a.jsxs)(eC.A,{className:"mb-3",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),M]}),g[21]=M,g[22]=h):h=g[22],g[23]!==V||g[24]!==x||g[25]!==$||g[26]!==v||g[27]!==W||g[28]!==U||g[29]!==w||g[30]!==k||g[31]!==C||g[32]!==G||g[33]!==A||g[34]!==F||g[35]!==T||g[36]!==R||g[37]!==P||g[38]!==q||g[39]!==E?(p=P?(0,a.jsxs)(rn,{children:[(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(eu.Q,{ref:z,variant:"primary",loading:U,loadingAnnouncement:n6({mergeMethod:A,confirming:!0,inProgress:!0}),onClick:V,children:n6({mergeMethod:A,confirming:!0,inProgress:!1})})}),(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(eu.Q,{onClick:()=>{v(!1),L(!1),F("auto_merge_section.cancel_auto_merge","MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON")},children:"Cancel"})})]}):(0,a.jsxs)(rn,{children:[(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(nM,{inactive:G,inactiveTooltipText:"UNKNOWN"===C?"Checking for the ability to merge automatically":"Merging is blocked due to failing merge requirements",inactiveTooltipDirection:"se",hideSecondaryButton:!E,secondaryButtonAriaLabel:"Select merge queue method",isPrimary:W&&"ALL_PASSED"===w,shouldFocusPrimaryButton:R,onFocusPrimaryButton:()=>T(!1),actionList:(0,a.jsx)(eS.l,{selectionVariant:"single",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ro,{primaryText:"Queue and merge in a group",secondaryText:`This pull request will be automatically grouped with other pull requests and merged into ${x}.`,selected:A===m.lD.GROUP,onSelect:()=>q(m.lD.GROUP,"merqe_queue_section.select_queue_and_merge_in_a_group")}),(0,a.jsx)(ro,{primaryText:"Queue and force solo merge",secondaryText:`This pull request will be merged into ${x} by itself.`,selected:A===m.lD.SOLO,onSelect:()=>q(m.lD.SOLO,"merqe_queue_section.select_queue_and_force_solo_merge")})]})}),onPrimaryButtonClick:$,children:n6({mergeMethod:A,confirming:!1,inProgress:U})})}),(0,a.jsx)(rn.Slot,{children:(0,a.jsxs)("span",{className:"f6 fgColor-muted pl-2",children:["This repository uses the"," ",(0,a.jsx)(et.A,{href:k,inline:!0,children:"merge queue"})," ","for all merges into the ",x," branch."]})})]}),g[23]=V,g[24]=x,g[25]=$,g[26]=v,g[27]=W,g[28]=U,g[29]=w,g[30]=k,g[31]=C,g[32]=G,g[33]=A,g[34]=F,g[35]=T,g[36]=R,g[37]=P,g[38]=q,g[39]=E,g[40]=p):p=g[40],g[41]!==h||g[42]!==p?(f=(0,a.jsxs)(a.Fragment,{children:[h,p]}),g[41]=h,g[42]=p,g[43]=f):f=g[43],f}function rf(e){let t,n,r,s,o,c,d,u,m,f=(0,i.c)(25),{autoMergeRequest:g,viewerCanDisableAutoMerge:x,isMergeQueueEnabled:_,handleConfirmingMergeInfo:b}=e,{sendAnalyticsEvent:S}=(0,ee.s)(),[C,j]=(0,tb.A)();f[0]!==j?(t={onError:e=>{j(e.message)}},f[0]=j,f[1]=t):t=f[1];let{mutate:w,isPending:N}=function(e){let t,n,r,a,s=(0,i.c)(11),{onError:o}=e,l=(0,p.e)(h.u.disableAutoMerge),c=v(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eE.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eE.hp)(e);return(0,eE.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.refetchQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(r=e=>{o(e)},s[5]=o,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a={mutationFn:t,onSuccess:n,onError:r},s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],(0,eI.n)(a)}(t);f[2]!==w||f[3]!==b||f[4]!==N||f[5]!==S||f[6]!==j?(n=()=>{N||(j(void 0),b(!1),w(),S("auto_merge_section.disable_auto_merge","MERGEBOX_AUTO_MERGE_DISABLE_BUTTON"))},f[2]=w,f[3]=b,f[4]=N,f[5]=S,f[6]=j,f[7]=n):n=f[7];let I=n,E=g?.mergeMethod.toLowerCase()??"merge",R=_?"be added to the merge queue":`${E} automatically`;f[8]!==C?(r=C&&(0,a.jsxs)(eC.A,{className:"mx-3 my-2",variant:"danger",children:[(0,a.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),C]}),f[8]=C,f[9]=r):r=f[9];let T=!x;return f[10]!==I||f[11]!==N||f[12]!==T?(s=(0,a.jsx)(rn.Slot,{children:(0,a.jsx)(eu.Q,{disabled:T,onClick:I,loading:N,loadingAnnouncement:"Disabling auto-merge",children:"Disable auto-merge"})}),f[10]=I,f[11]=N,f[12]=T,f[13]=s):s=f[13],f[14]!==R?(o=(0,a.jsx)("span",{className:"text-semibold",children:R}),f[14]=R,f[15]=o):o=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(et.A,{inline:!0,href:"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request",children:"Learn more about automatically merging a pull request."}),f[16]=c):c=f[16],f[17]!==o?(d=(0,a.jsx)(rn.Slot,{children:(0,a.jsxs)("div",{className:"flex-1",children:["This pull request will ",o," when all requirements are met."," ",c]})}),f[17]=o,f[18]=d):d=f[18],f[19]!==s||f[20]!==d?(u=(0,a.jsxs)(rn,{children:[s,d]}),f[19]=s,f[20]=d,f[21]=u):u=f[21],f[22]!==r||f[23]!==u?(m=(0,a.jsxs)(a.Fragment,{children:[r,u]}),f[22]=r,f[23]=u,f[24]=m):m=f[24],m}function rg(e){let t,n,r,s,o,l,c,m,h,p,f,g,y,x,v,_,b,S,C,j=(0,i.c)(68);j[0]!==e?({advisoryWorkspace:t,autoMergeRequest:n,handleConfirmingMergeInfo:r,id:s,isConfirmingMergeInfo:o,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:p,viewerCanAddToMergeQueueSolo:f,viewerCanDisableAutoMerge:y,viewerCanEnableAutoMerge:x,viewerCanAdminBypassMergeRequirements:g,...h}=e,j[0]=e,j[1]=t,j[2]=n,j[3]=r,j[4]=s,j[5]=o,j[6]=l,j[7]=c,j[8]=m,j[9]=h,j[10]=p,j[11]=f,j[12]=g,j[13]=y,j[14]=x):(t=j[1],n=j[2],r=j[3],s=j[4],o=j[5],l=j[6],c=j[7],m=j[8],h=j[9],p=j[10],f=j[11],g=j[12],y=j[13],x=j[14]);let[w,N]=(0,u.useState)(!1),I=h.viewerMergeActions,E=I.find(rx),R=I.find(ry);j[15]!==m||j[16]!==h.mergeRequirementsState||j[17]!==h.status?(v=rh(h.mergeRequirementsState,h.status,m),j[15]=m,j[16]=h.mergeRequirementsState,j[17]=h.status,j[18]=v):v=j[18];let T=v,k=E?.allowableStatus==="ALLOWED",A=R?.allowableStatus==="ALLOWED",D=!!n,P=g&&!D&&(!!k||!T),L=x&&!T;if(t)return null;if(D){let e;j[19]!==n||j[20]!==r||j[21]!==k||j[22]!==y?(e=(0,a.jsx)(rf,{autoMergeRequest:n,isMergeQueueEnabled:k,viewerCanDisableAutoMerge:y,handleConfirmingMergeInfo:r}),j[19]=n,j[20]=r,j[21]=k,j[22]=y,j[23]=e):e=j[23],_=e}else if(k||A)if(k&&P&&w){let e;j[28]!==r||j[29]!==o||j[30]!==T||j[31]!==h||j[32]!==P?(e=(0,a.jsx)(rc,{mergeable:T,handleConfirmingMergeInfo:r,isAdminBypassToggleVisible:P,isAdminBypassToggleChecked:!0,isConfirmingMergeInfo:o,...h}),j[28]=r,j[29]=o,j[30]=T,j[31]=h,j[32]=P,j[33]=e):e=j[33],_=e}else if(k){let e;j[34]!==n||j[35]!==r||j[36]!==s||j[37]!==l||j[38]!==c||j[39]!==m||j[40]!==h||j[41]!==p||j[42]!==f?(e=(0,a.jsx)(rp,{autoMergeRequest:n,pullRequestId:s,handleConfirmingMergeInfo:r,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:p,viewerCanAddToMergeQueueSolo:f,...h}),j[34]=n,j[35]=r,j[36]=s,j[37]=l,j[38]=c,j[39]=m,j[40]=h,j[41]=p,j[42]=f,j[43]=e):e=j[43],_=e}else if(x&&!w){let e;j[44]!==r||j[45]!==o||j[46]!==T||j[47]!==h||j[48]!==P||j[49]!==L?(e=(0,a.jsx)(rc,{handleConfirmingMergeInfo:r,mergeable:T,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:P,isAutoMergeAllowed:L,isConfirmingMergeInfo:o,...h}),j[44]=r,j[45]=o,j[46]=T,j[47]=h,j[48]=P,j[49]=L,j[50]=e):e=j[50],_=e}else{let e;j[51]!==r||j[52]!==w||j[53]!==o||j[54]!==T||j[55]!==h||j[56]!==P?(e=(0,a.jsx)(rc,{handleConfirmingMergeInfo:r,isAdminBypassToggleChecked:w,isAdminBypassToggleVisible:P,isConfirmingMergeInfo:o,mergeable:T,...h}),j[51]=r,j[52]=w,j[53]=o,j[54]=T,j[55]=h,j[56]=P,j[57]=e):e=j[57],_=e}else{let e;j[24]!==r||j[25]!==o||j[26]!==h?(e=(0,a.jsx)(rc,{mergeable:!1,handleConfirmingMergeInfo:r,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:!1,isConfirmingMergeInfo:o,...h}),j[24]=r,j[25]=o,j[26]=h,j[27]=e):e=j[27],_=e}let M=o?"rounded-2":"rounded-bottom-2";return j[58]!==M?(b=(0,d.$)("p-3 bgColor-muted borderColor-muted",M),j[58]=M,j[59]=b):b=j[59],j[60]!==w||j[61]!==o||j[62]!==P?(S=P&&!o&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(rm,{checked:w,onToggleChecked:()=>N(!w)})}),j[60]=w,j[61]=o,j[62]=P,j[63]=S):S=j[63],j[64]!==_||j[65]!==b||j[66]!==S?(C=(0,a.jsxs)("div",{className:b,children:[S,_]}),j[64]=_,j[65]=b,j[66]=S,j[67]=C):C=j[67],C}function ry(e){return e.name===m.tw.DIRECT_MERGE}function rx(e){let{name:t}=e;return t===m.tw.MERGE_QUEUE}try{rp.displayName||(rp.displayName="AddToMergeQueueSection")}catch{}try{rf.displayName||(rf.displayName="DisableAutoMerge")}catch{}try{rg.displayName||(rg.displayName="MergeSection")}catch{}function rv(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:tT.mergeboxLoading,children:(0,a.jsx)(c.A,{})}),t[0]=e):e=t[0],e}let r_=(0,u.memo)(function(e){let t,n,r,s,l,c=(0,i.c)(11);c[0]!==e?({hideIcon:n,...t}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let d=void 0!==n&&n;return c[3]!==d?(r=(0,a.jsx)(tD,{hideIcon:d}),c[3]=d,c[4]=r):r=c[4],c[5]!==d||c[6]!==t?(s=(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(rb,{hideIcon:d,...t})}),c[5]=d,c[6]=t,c[7]=s):s=c[7],c[8]!==r||c[9]!==s?(l=(0,a.jsx)(o.t,{critical:!0,fallback:r,children:s}),c[8]=r,c[9]=s,c[10]=l):l=c[10],l});function rb(e){let t,n,r,s,o,l,c,d,m,f,_=(0,i.c)(20);_[0]!==e?({viewerLogin:r,channels:t,...n}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=r):(t=_[1],n=_[2],r=_[3]);let{mergeMethod:b}=S();_[4]!==b?(s={mergeMethod:b,bypassRequirements:!1},_[4]=b,_[5]=s):s=_[5];let{data:C,refetch:j,isLoading:w,error:N}=function(e){let t,n,r=(0,i.c)(7),{mergeMethod:a,bypassRequirements:s}=e,o=new URLSearchParams;o.append("merge_method",a),o.append("bypass_requirements",(void 0!==s&&s).toString());let l=`${(0,p.e)(h.u.mergeBox)}?${o.toString()}`,c=v(),d=(0,y.jE)();return r[0]!==l||r[1]!==d||r[2]!==c?(t=async()=>(0,g.H)(l,c,d),r[0]=l,r[1]=d,r[2]=c,r[3]=t):t=r[3],r[4]!==c||r[5]!==t?(n={queryKey:c,queryFn:t,staleTime:1/0},r[4]=c,r[5]=t,r[6]=n):n=r[6],(0,x.I)(n)}(s);e:{if(C?.pullRequest.mergeBoxAliveChannels){o=C?.pullRequest.mergeBoxAliveChannels;break e}o=t}let I=o;_[6]!==j?(l=()=>{(0,u.startTransition)(()=>{j({cancelRefetch:!1})})},_[6]=j,_[7]=l):l=_[7];let E=l;if(_[8]!==I||_[9]!==E?(c={refetchQuery:E,channels:I},_[8]=I,_[9]=E,_[10]=c):c=_[10],!function({channels:e,refetchQuery:t}){let n=(0,u.useMemo)(()=>Object.values(e).filter(e=>null!==e),[e]),r=(0,th.A)(),[a,i]=(0,u.useState)(!1),s=ty(),o=(0,u.useMemo)(()=>(0,tu.n)(()=>{r()&&t()},2e3),[t,r]),l=(0,u.useMemo)(()=>e=>{s?window.setTimeout(()=>o(),e.wait||0):i(!0)},[s,o]);for(let e of((0,u.useEffect)(()=>{r()&&s&&a&&(i(!1),t())},[s,a,i,r,t]),n))(0,tm.x)(e,l)}(c),w){let e;return _[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(rv,{}),_[11]=e):e=_[11],e}if(N)throw N;if(!C)return null;_[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(rv,{}),m=(0,a.jsx)("h2",{className:"sr-only",children:"Merge info"}),_[12]=d,_[13]=m):(d=_[12],m=_[13]);let R=C.pullRequest.numberOfCommits||0;return _[14]!==C.mergeRequirements||_[15]!==C.pullRequest||_[16]!==n||_[17]!==R||_[18]!==r?(f=(0,a.jsxs)(u.Suspense,{fallback:d,children:[m,(0,a.jsx)(rS,{mergeRequirements:C.mergeRequirements,numberOfCommits:R,pullRequest:C.pullRequest,viewerLogin:r,...n})]}),_[14]=C.mergeRequirements,_[15]=C.pullRequest,_[16]=n,_[17]=R,_[18]=r,_[19]=f):f=_[19],f}function rS(e){let t,n,r,c,m,f,v,_,b,S,w,N,I,E,R,T,k,A,D,P,L,M=(0,i.c)(90),{helpUrl:O,hideIcon:F,mergeRequirements:H,numberOfCommits:Q,pullRequest:K,viewerLogin:J}=e;s(K.viewerMergeActions.find(rj));let[X,Y]=(0,u.useState)(!1),Z=!X,[ee,et]=(0,u.useState)(!1),{isInMergeQueue:en,state:er,viewerCanDeleteHeadRef:ea,viewerCanRestoreHeadRef:ei}=K,es=void 0!==F&&F||("CLOSED"===er||"MERGED"===er)&&!ea&&!ei;M[0]!==K.headRefOid?(t={pullRequestHeadSha:K.headRefOid},M[0]=K.headRefOid,M[1]=t):t=M[1];let eo=function(e){let t,n,r,a=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,p.e)(h.u.statusChecks);a[0]!==s?(t={pullRequestHeadSha:s},a[0]=s,a[1]=t):t=a[1];let l=tv(t),c=(0,y.jE)();return a[2]!==o||a[3]!==c||a[4]!==l?(n=async()=>(0,g.H)(o,l,c),a[2]=o,a[3]=c,a[4]=l,a[5]=n):n=a[5],a[6]!==l||a[7]!==n?(r={queryKey:l,throwOnError:!1,queryFn:n,staleTime:1e4},a[6]=l,a[7]=n,a[8]=r):r=a[8],(0,x.I)(r)}(t).data;if(M[2]!==H||M[3]!==K||M[4]!==Z||M[5]!==eo){w=function({pullRequest:e,mergeRequirements:t,statusChecksData:n}){if("MERGED"===e.state)return B.Merged;if("CLOSED"===e.state)return B.Closed;if(function(e){let t=U(e);return t.includes("PULL_REQUEST_REPO_STATE")||t.includes("PULL_REQUEST_USER_STATE")}(t))return B.NonactionableFailure;if(e.isInMergeQueue)return B.InMergeQueue;if(e.isDraft&&!V(n))return B.DraftReadyForReview;if(e.isDraft)return B.DraftNotReadyForReview;if(V(n))return B.ChecksFailing;if($(n))return B.ChecksPending;if(W(t,n))return B.NonRequiredChecksUnsuccessful;if(t?.state==="MERGEABLE"||t?.state==="MERGEABLE_IF_STATUSES_PASS"&&q(n))return B.Mergeable;if((function(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);if(!t)return[];let n=t?.ruleRollups?.filter(e=>"FAILED"===e.result);return n?n.map(e=>e.ruleType):[]})(t).includes("PULL_REQUEST")&&!G(t).includes("CHANGES_REQUESTED"))return B.AwaitingReview;if(G(t).includes("CHANGES_REQUESTED"))return B.ChangesRequested;else if(t?.state==="UNKNOWN"&&!z(t))return B.Unknown;else if(z(t))return B.MergeConflicts;else return B.UnableToMerge}({pullRequest:K,mergeRequirements:H,statusChecksData:eo});let e=new MergeBoxStatusCalculator(K,H,eo);v=e.overallStatus,n=e.sections.BlockedSection,r=e.sections.ChecksSection,c=e.sections.ClosedOrMergedStateMergeBox,m=e.sections.ConflictsSection,f=e.sections.DraftStateSection,_=e.sections.MergeQueueSection,S=e.sections.ReviewerSection,b=function(e){switch(e){case B.Mergeable:return{icon:l.CheckCircleFillIcon,iconColor:"success.emphasis",title:"Merge pull request"};case B.DraftReadyForReview:case B.DraftNotReadyForReview:return{icon:l.GitPullRequestDraftIcon,iconColor:"neutral.emphasis",title:"Draft"};case B.InMergeQueue:return{icon:l.GitMergeQueueIcon,iconColor:"attention.emphasis",title:"Queued"};case B.ChecksPending:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Checks pending"};case B.ChecksFailing:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Checks failing"};case B.NonRequiredChecksUnsuccessful:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Non-required checks unsuccessful"};case B.AwaitingReview:return{icon:l.DotFillIcon,iconColor:"danger.emphasis",title:"Awaiting reviews"};case B.ChangesRequested:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Changes requested"};case B.MergeConflicts:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Merge conflicts"};case B.Unknown:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Unknown"};case B.Merged:return{icon:l.GitMergeIcon,iconColor:"done.emphasis",title:"Merged"};case B.Closed:return{icon:l.GitPullRequestClosedIcon,iconColor:"neutral.emphasis",title:"Closed"};default:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Unable to merge"}}}(w),N=function(e,t){let n;switch(e){case"ALL_PASSED":n={iconColor:"success.emphasis",borderColor:"borderColor-success-emphasis"};break;case"MERGED":n={iconColor:"done.emphasis",borderColor:"borderColor-done-emphasis"};break;case"QUEUED":n={iconColor:"attention.emphasis",borderColor:"borderColor-attention-emphasis"};break;default:n={iconColor:"neutral.emphasis",borderColor:"borderColor-default"}}return t&&(n.borderColor="borderColor-default"),n}(v,!Z),M[2]=H,M[3]=K,M[4]=Z,M[5]=eo,M[6]=n,M[7]=r,M[8]=c,M[9]=m,M[10]=f,M[11]=v,M[12]=_,M[13]=b,M[14]=S,M[15]=w,M[16]=N}else n=M[6],r=M[7],c=M[8],m=M[9],f=M[10],v=M[11],_=M[12],b=M[13],S=M[14],w=M[15],N=M[16];let el=N,ec=H?.conditions.find(rC),ed=ec?.result==="PASSED";M[17]!==H?(I=function(e){let t=j(e);if(t.length<1)return!1;let n=t[0]?.ruleRollups.find(e=>"AUTHORIZATION"===e.ruleType);return n?.result==="FAILED"}(H),M[17]=H,M[18]=I):I=M[18];let eu=I;M[19]!==H?(E=C(H),M[19]=H,M[20]=E):E=M[20];let em=E,eh=en?l.GitMergeQueueIcon:l.GitMergeIcon;M[21]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{et(!0)},M[21]=R):R=M[21];let ep=R,ef=!ed||eu,eg=K.mergeBoxUserPreferences;M[22]===Symbol.for("react.memo_cache_sentinel")?(T=(0,d.$)(tT.mergePartialContainer,"position-relative partial-pull-merging-analytics-js"),M[22]=T):T=M[22],M[23]!==eh||M[24]!==el.iconColor||M[25]!==b||M[26]!==es?(k=!es&&(0,a.jsx)("div",{className:"d-none d-lg-block","data-testid":"mergeability-icon-wrapper",children:(0,a.jsx)(tR,{icon:eh,ariaLabel:b.title,iconBackgroundColor:el.iconColor})}),M[23]=eh,M[24]=el.iconColor,M[25]=b,M[26]=es,M[27]=k):k=M[27];let ey=ef?tT.mergeBoxAdjustBorders:"",ex=`border rounded-2 ${el.borderColor}`;return M[28]!==ex||M[29]!==ey?(A=(0,d.$)(ey,ex),M[28]=ex,M[29]=ey,M[30]=A):A=M[30],M[31]!==n||M[32]!==ed||M[33]!==r||M[34]!==c.shouldRender||M[35]!==em||M[36]!==m||M[37]!==f||M[38]!==O||M[39]!==X||M[40]!==v||M[41]!==eg||M[42]!==_||M[43]!==H||M[44]!==Q||M[45]!==K.advisoryWorkspace||M[46]!==K.autoMergeRequest||M[47]!==K.baseRefName||M[48]!==K.baseRepository||M[49]!==K.deprovisionableCodespaces||M[50]!==K.headRefName||M[51]!==K.headRefOid||M[52]!==K.headRepository||M[53]!==K.id||M[54]!==K.isCrossRepo||M[55]!==K.isDraft||M[56]!==K.isInMergeQueue||M[57]!==K.latestOpinionatedReviews||M[58]!==K.mergeQueue||M[59]!==K.mergeQueueEntry||M[60]!==K.mergeStateStatus||M[61]!==K.pendingReviewRequests||M[62]!==K.resourcePath||M[63]!==K.state||M[64]!==K.viewerCanAddAndRemoveFromMergeQueue||M[65]!==K.viewerCanAddToMergeQueueSolo||M[66]!==K.viewerCanAdminBypassMergeRequirements||M[67]!==K.viewerCanDeleteHeadRef||M[68]!==K.viewerCanDisableAutoMerge||M[69]!==K.viewerCanDismissReviews||M[70]!==K.viewerCanEnableAutoMerge||M[71]!==K.viewerCanReRequestReviews||M[72]!==K.viewerCanRestoreHeadRef||M[73]!==K.viewerCanUpdate||M[74]!==K.viewerCanUpdateBranch||M[75]!==K.viewerMergeActions||M[76]!==K.viewerUpdateMethods||M[77]!==S||M[78]!==ee||M[79]!==ef||M[80]!==Z||M[81]!==w||M[82]!==J?(D=c.shouldRender||!H?(0,a.jsx)(tN,{isCrossRepo:K.isCrossRepo,state:K.state,headRefName:K.headRefName,headRepository:K.headRepository,baseRepository:K.baseRepository,viewerCanDeleteHeadRef:K.viewerCanDeleteHeadRef,viewerCanRestoreHeadRef:K.viewerCanRestoreHeadRef,deprovisionableCodespaces:K.deprovisionableCodespaces}):_.shouldRender?(0,a.jsx)(n1,{viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,mergeQueueEntry:K.mergeQueueEntry,mergeQueue:K.mergeQueue,focusPrimaryMergeButton:ep}):(0,a.jsxs)(a.Fragment,{children:[Z&&(0,a.jsxs)(a.Fragment,{children:[S.shouldRender&&(0,a.jsx)(eV,{consolidatedFailureReasons:S.consolidatedFailureReasons,helpUrl:O,latestOpinionatedReviews:K.latestOpinionatedReviews,numReviewsRequired:S.numReviewsRequired,pendingRequestedReviews:K.pendingReviewRequests,pullRequestId:K.id,reviewsState:S.sectionStatus,viewerCanDismissReviews:K.viewerCanDismissReviews,viewerCanReRequestReviews:K.viewerCanReRequestReviews}),(0,a.jsx)(o.t,{fallback:(0,a.jsx)(nE,{}),children:(0,a.jsx)(nI,{pullRequestId:K.id,pullRequestHeadSha:K.headRefOid,focusPrimaryMergeButton:ep,sectionStatus:r.sectionStatus,shouldRender:r.shouldRender,mergeBoxUserPreferences:eg})}),m.shouldRender&&m.conflictsCondition&&(0,a.jsx)(nq,{advisoryWorkspace:K.advisoryWorkspace,baseRefName:K.baseRefName,headRefOid:K.headRefOid,conflictsCondition:m.conflictsCondition,conflictsState:m.sectionStatus,mergeStateStatus:K.mergeStateStatus,resourcePath:K.resourcePath,canUserPushToBase:ed,viewerCanUpdateBranch:K.viewerCanUpdateBranch,viewerLogin:J,viewerUpdateMethods:K.viewerUpdateMethods}),n.shouldRender&&(0,a.jsx)(tF,{failingConditionsAndRules:n.failingConditionsAndRules}),f.shouldRender&&(0,a.jsx)(nY,{viewerCanUpdate:K.viewerCanUpdate,helpUrl:O})]}),ef?null:(0,a.jsx)(rg,{advisoryWorkspace:K.advisoryWorkspace,autoMergeRequest:K.autoMergeRequest,baseRefName:K.baseRefName,numberOfCommits:Q,conflictsCondition:em,headRepository:K.headRepository,helpUrl:O,id:K.id,isConfirmingMergeInfo:X,isCrossRepo:K.isCrossRepo,isDraft:K.isDraft,isInMergeQueue:K.isInMergeQueue,mergeQueue:K.mergeQueue,canUserPushToBase:ed,defaultCommitAuthorEmail:H.defaultCommitAuthorEmail,commitMessageBody:H.commitMessageBody,commitMessageHeadline:H.commitMessageHeadline,mergeRequirementsState:H.state,mergeStateStatus:K.mergeStateStatus,mergeBoxRollupStatus:v,viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,viewerCanAdminBypassMergeRequirements:K.viewerCanAdminBypassMergeRequirements,viewerCanAddToMergeQueueSolo:K.viewerCanAddToMergeQueueSolo,viewerCanDisableAutoMerge:K.viewerCanDisableAutoMerge,viewerMergeActions:K.viewerMergeActions,viewerCanEnableAutoMerge:K.viewerCanEnableAutoMerge,shouldFocusPrimaryMergeButton:ee,setShouldFocusPrimaryMergeButton:et,status:w,possibleCommitAuthorEmails:H.possibleCommitAuthorEmails,handleConfirmingMergeInfo:Y})]}),M[31]=n,M[32]=ed,M[33]=r,M[34]=c.shouldRender,M[35]=em,M[36]=m,M[37]=f,M[38]=O,M[39]=X,M[40]=v,M[41]=eg,M[42]=_,M[43]=H,M[44]=Q,M[45]=K.advisoryWorkspace,M[46]=K.autoMergeRequest,M[47]=K.baseRefName,M[48]=K.baseRepository,M[49]=K.deprovisionableCodespaces,M[50]=K.headRefName,M[51]=K.headRefOid,M[52]=K.headRepository,M[53]=K.id,M[54]=K.isCrossRepo,M[55]=K.isDraft,M[56]=K.isInMergeQueue,M[57]=K.latestOpinionatedReviews,M[58]=K.mergeQueue,M[59]=K.mergeQueueEntry,M[60]=K.mergeStateStatus,M[61]=K.pendingReviewRequests,M[62]=K.resourcePath,M[63]=K.state,M[64]=K.viewerCanAddAndRemoveFromMergeQueue,M[65]=K.viewerCanAddToMergeQueueSolo,M[66]=K.viewerCanAdminBypassMergeRequirements,M[67]=K.viewerCanDeleteHeadRef,M[68]=K.viewerCanDisableAutoMerge,M[69]=K.viewerCanDismissReviews,M[70]=K.viewerCanEnableAutoMerge,M[71]=K.viewerCanReRequestReviews,M[72]=K.viewerCanRestoreHeadRef,M[73]=K.viewerCanUpdate,M[74]=K.viewerCanUpdateBranch,M[75]=K.viewerMergeActions,M[76]=K.viewerUpdateMethods,M[77]=S,M[78]=ee,M[79]=ef,M[80]=Z,M[81]=w,M[82]=J,M[83]=D):D=M[83],M[84]!==A||M[85]!==D?(P=(0,a.jsx)("div",{className:A,children:D}),M[84]=A,M[85]=D,M[86]=P):P=M[86],M[87]!==P||M[88]!==k?(L=(0,a.jsxs)("div",{className:T,children:[k,P]}),M[87]=P,M[88]=k,M[89]=L):L=M[89],L}function rC(e){return"PULL_REQUEST_USER_STATE"===e.type}function rj(e){return e.name===m.tw.DIRECT_MERGE}try{rv.displayName||(rv.displayName="MergeBoxLoading")}catch{}try{r_.displayName||(r_.displayName="MergeBoxWithSuspense")}catch{}try{rb.displayName||(rb.displayName="MergeBoxWrapper")}catch{}try{rS.displayName||(rS.displayName="MergeBox")}catch{}function rw(e){return Object.values(m.q$).includes(e)}},33049:(e,t,n)=>{n.d(t,{Qv:()=>s,TW:()=>l,iG:()=>o,jw:()=>d,lD:()=>i,nw:()=>c,q$:()=>a,tw:()=>r});let r={DIRECT_MERGE:"DIRECT_MERGE",AUTO_MERGE:"AUTO_MERGE",MERGE_QUEUE:"MERGE_QUEUE"},a={MERGE:"MERGE",SQUASH:"SQUASH",REBASE:"REBASE"},i={GROUP:"GROUP",SOLO:"SOLO"},s={Approvals:"approvals",RequestedChanges:"requested changes",PendingReviewRequest:"pending reviews"},o=["PULL_REQUEST_RULES"],l=["PULL_REQUEST_USER_STATE"],c=["PULL_REQUEST_MERGE_CONFLICT_STATE"],d=["PULL_REQUEST_STATE","PULL_REQUEST_MERGE_METHOD","PULL_REQUEST_REPO_STATE","UNKNOWN"]},1739:(e,t,n)=>{n.d(t,{B:()=>r});function r(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},79369:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(3785),a=n(81830);function i(e,t){let{basePageDataUrl:n}=(0,a.Yu)(),i=`${n}/page_data/${e}`;return t&&(i+=`?${t}`),(0,r.RD)(i)}},60826:(e,t,n)=>{n.d(t,{u:()=>r});let r={codeButton:"code_button",codeowners:"codeowners",commits:"commits",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_entry_lines",abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",enableAutoMerge:"enable_auto_merge",dismissReview:"dismiss_review",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitReview:"submit_review",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference",hideComment:"hide_comment",unhideComment:"unhide_comment",submitSuggestedChanges:"apply_suggestions"}},61681:(e,t,n)=>{n.d(t,{R:()=>i,hp:()=>a,ol:()=>AuthSessionExpiredError,q$:()=>s});var r=n(60039);let FetchRequestError=class FetchRequestError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="FetchRequestError",this.cause=e}};let ServerUnavailableError=class ServerUnavailableError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="ServerUnavailableError",this.cause=e}};let JSONParseFetchError=class JSONParseFetchError extends Error{constructor(e){super("Unable to read response from the server. Please try again later."),this.name="JSONParseFetchError",this.cause=e}};let AuthSessionExpiredError=class AuthSessionExpiredError extends Error{constructor(){super("Unable to perform this operation. Please try again later."),this.name="AuthSessionExpiredError"}};async function a(e){try{return await e.json()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw new JSONParseFetchError(e)}}function i(e,t,n){if(!e.ok){if(e.status>=500)throw new ServerUnavailableError(e.status);if(n)throw n;if(t)throw Error(t?.error||"Unknown error occurred",{cause:e.status});throw Error(`HTTP ${e.status}`)}}async function s(e,t){try{return await (0,r.Sr)(e,t)}catch(e){throw new FetchRequestError(e)}}},11251:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96540);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},18337:(e,t,n)=>{n.d(t,{j:()=>s,p:()=>i});var r=n(74848),a=n(21728);function i(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}function s(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}try{i.displayName||(i.displayName="AgentsIcon16")}catch{}try{s.displayName||(s.displayName="AgentsIcon32")}catch{}},74433:(e,t,n)=>{n.d(t,{C:()=>l});var r=n(74848),a=n(21728),i=n(95726),s=n(60039),o=n(96540);function l(e){let t,n=(0,a.c)(1),{enabled:l}=e,[c,d]=(0,o.useState)(l);return c?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),primaryAction:(0,r.jsx)(i.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),onDismiss:async()=>{d(!1),await (0,s.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),n[0]=t):t=n[0],t):null}try{l.displayName||(l.displayName="PremiumRequestsBanner")}catch{}},76325:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var r=n(74848),a=n(24774),i=n(96540),s=n(6585),o=n(5853),l=n(9299),c=n(45230),d=n(54528),u=n(15874);let m=(0,n(57909).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],h=[(0,c.b6)(),(0,u.WD)(),(0,a.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,a.vX)({position:"absolute"}),(0,d.$P)({top:!0}),a.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),a.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var p=n(43720);let f={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},g=[{tag:[p._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[p._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[p._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[p._A.string,p._A.url,p._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[p._A.constant(p._A.name),p._A.propertyName,p._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[p._A.atom,p._A.number,p._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[p._A.function(p._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:p._A.definition(p._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:p._A.meta,color:"inherit"},{tag:p._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:p._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],y=[{tag:p._A.link,textDecoration:"underline"},{tag:p._A.emphasis,fontStyle:"italic"},{tag:p._A.strong,fontWeight:"bold"},{tag:p._A.strikethrough,textDecoration:"line-through"}],x=[...g,...y],v=[...g,...y];function _(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?v:x,...e];return[a.Lz.theme(f),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let b=e=>{let t=[s.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(a.Lz.lineWrapping),t};var S=n(13281);let C=(e,t)=>{let{state:n,placeholder:r,replacementText:a}=e.detail;"uploading"===n?(0,S.w0)(t)?(0,S.tJ)(t,r):(0,S.TC)(t,a):("uploaded"===n||"failed"===n)&&(0,S.TB)(t,r,a)},j=(e,t)=>{let{left:n,top:r}=e.detail,a=t.posAtCoords({x:n,y:r});a&&t.dispatch({selection:{anchor:a,head:a}})},w=new WeakMap;function N(e,t){if((0,S.w0)(e)){let n=(0,S.Lo)(e.state);(0,S.tJ)(e,`${t}${n}${t}`)}else{let n=(0,S.BE)(e);(0,S.TC)(e,t.repeat(2)),(0,S.f9)(e,n.anchor+t.length)}return!0}function I(e,t){let n=(0,S.BE)(e),r=e.state.doc.lineAt(n.from),a=(0,S.Lo)(e.state),i=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(a){let n=(a.endsWith(`
`)?a.slice(0,-2):a).split(`
`).map((t,n)=>{let a=r.number+n;return{text:e.state.doc.line(a).text,lineNumber:a}}),s=n.every(e=>i.test(e.text));for(let r=0;r<n.length;r++){let a=n[r];if(s){let t=a.text.match(i);t&&(0,S.YH)(e,a?.lineNumber,t[0])}else{let n=`${"ol"===t?`${r+1}.`:t} `;(0,S.Md)(e,a?.lineNumber,n)}}}else{let a=r.text.match(i);if(a)(0,S.YH)(e,r.number,a[0]);else{let a=`${"ol"===t?"1.":t} `;(0,S.Md)(e,r.number,a),r.text||(0,S.f9)(e,n.anchor+a.length)}}return!0}let E=[{key:"Mod-i",run:e=>N(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>N(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>N(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,S.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,S.tJ)(e,n);let r=(0,S.I6)(e,n).value.from;(0,S.td)(e,r+t.length+3,r+t.length+6)}else{let t=(0,S.BE)(e);(0,S.TC)(e,"[](url)"),(0,S.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>I(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>I(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>I(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(w.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(w.set(e,!0),!1)}];function R(e){let t=a.NZ.line({attributes:{dir:"auto"}}),n=new s.vB;for(let{from:r,to:a}of e.visibleRanges)for(let i=r;i<=a;){let r=e.state.doc.lineAt(i);n.add(r.from,r.from,t),i=r.to+1}return n.finish()}let T=a.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=R(e.view))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"decorations",void 0),this.decorations=R(e)}},{decorations:e=>e.decorations}),k=[a.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){w.get(t)||function(e,t){let n=(0,S.Lo)(e.state),r=t.clipboardData;if(n&&r){let a=r.getData("text/plain");if(!/^https?:\/\//i.test(a))return;a&&(t.preventDefault(),(0,S.tJ)(e,`[${n}](${a})`))}}(t,e),w.set(t,!1)}}),a.w4.of(E),T];var A=n(47404),D=n(5225),P=n(35984),L=n(26559);let M=(0,D.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json",...(0,L.kt)()}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})}),O=s.Pe.define({map:({from:e,to:t,severity:n},r)=>({from:r.mapPos(e),to:r.mapPos(t),severity:n})}),F=s.sU.define({create:()=>a.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(O)&&("error"===n.value.severity?e=e.update({add:[B.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[U.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[$.range(n.value.from,n.value.to)]})));return e},provide:e=>a.Lz.decorations.from(e)}),B=a.NZ.mark({class:"CodeMirror-lint-mark-error"}),U=a.NZ.mark({class:"CodeMirror-lint-mark-warning"}),$=a.NZ.mark({class:"CodeMirror-lint-mark-info"}),V=(e,t)=>{let{from:n,to:r,severity:a}=e.detail,i=(0,S.TU)(t,{line:n.lineNumber,ch:n.character}),s=(0,S.TU)(t,{line:r.lineNumber,ch:r.character});t.dispatch({effects:[O.of({from:i,to:s,severity:a})]})},q={ruby:[{tag:p._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:p._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:p._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:p._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:p._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:p._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:p._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:p._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:p._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:p._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:p._A.name,color:"var(--color-prettylights-syntax-entity)"}]},W=Object.keys(q);var G=n(44246);let z={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},H=[],Q=[],K=(0,i.forwardRef)((e,t)=>{let{value:n="",extensions:c=H,keyBindings:d=Q,height:u="85vh",width:m="100%",focusNextRenderRef:p,containerClassName:f,...g}=e,y=(0,i.useRef)(null),x=function({extensions:e=[],fileName:t="",onChange:n,spacing:r,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:p="Enter file contents here",ariaLabelledBy:f,value:g,width:y="",height:x="",minHeight:v="",hideHelpUntilFocus:S,hideHelp:w,onCreateEditor:N,onDestroyEditor:I}){let E=(0,i.useRef)(void 0),R=(0,i.useMemo)(()=>new s.xx,[]),T=(0,i.useMemo)(()=>new s.xx,[]),D=(0,i.useMemo)(()=>new s.xx,[]),L=(0,i.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),O=(0,i.useMemo)(()=>a.Lz.updateListener.of(L),[L]),B=(0,i.useMemo)(()=>a.Lz.theme({"&":{height:x,minHeight:v,width:y}}),[x,v,y]),U=(0,i.useMemo)(()=>{let t=[...h,O,B,(0,a.qf)(p),...b(r),[a.Lz.domEventHandlers({"secret-detected:lint":V}),F],R.of([]),T.of([]),D.of([_()]),[a.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",f)}})],a.Lz.contentAttributes.of({"aria-labelledby":`${f} focus-trap-help-panel`}),a.Lz.editorAttributes.of({class:S?"hide-help-until-focus":""}),a.Lz.editorAttributes.of({class:w?"hide-help":""})];return(u&&(t.push((0,a.A)()),t.push([a.Lz.domEventHandlers({"upload:editor:change":C,"upload:editor:cursor":j})])),c&&t.push(a.Lz.editorAttributes.of({"data-hpc":"true"})),d)?t.push(s.$t.readOnly.of(!0)):t.push([function(e,t,n){let r=new s.xx;return[r.of(n?t:[]),a.w4.of([{key:e,run:function(e){let n=r.get(e.state)===t;return e.dispatch({effects:r.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",a.w4.of([z]),!0),(0,G.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),w?"top":"bottom")]),t.push(...e),t},[O,B,p,r,R,T,D,f,S,w,u,c,d,e]);return(0,i.useEffect)(()=>{let e=m.current;if(!e)return;let t=s.$t.create({doc:g,extensions:U}),n=new a.Lz({state:t,parent:e});return N?.(n),E.current=n,()=>{n.destroy(),I?.(n)}},[]),(0,i.useEffect)(()=>{E.current&&(E.current.dispatch({effects:T.reconfigure([])}),E.current.dispatch({effects:s.Pe.reconfigure.of(U)}))},[T,U]),(0,i.useEffect)(()=>{if(E.current&&void 0!==g){let e=E.current.state.doc.toString()||"",t=g||"";t!==e&&E.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[g]),(0,i.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",n=e?o.e.find(n=>n.extensions.includes(e)||n.filename&&n.filename.test(t)):void 0;if(n&&E.current){var r;let e=(r=n.name,W.includes(r.toLowerCase())?q[r.toLowerCase()]:null);e&&E.current.dispatch({effects:D.reconfigure(_(e))}),"Markdown"===n.name?(E.current.dispatch({effects:R.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),E.current.dispatch({effects:s.Pe.reconfigure.of([...k,...U])}),E.current.dispatch({effects:T.reconfigure([P.E,(0,A.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let r=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:r,filter:!1}})(e,await M())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),s.Nb.highest(a.w4.of([{key:"Tab",run:A.$w}]))])})):(E.current.dispatch({effects:T.reconfigure([])}),E.current.dispatch({effects:R.reconfigure(await n.load())}))}};E.current&&e()},[t,R,T,U,D]),E}({parentRef:y,value:n,height:u,width:m,extensions:(0,i.useMemo)(()=>[...c,a.w4.of(d)],[c,d]),...g});return(0,i.useImperativeHandle)(t,()=>({editor:y.current,view:x.current}),[y,x]),p?.current&&x&&(window.requestAnimationFrame(()=>{x.current&&!x.current.hasFocus&&x.current.focus()}),p.current=!1),(0,r.jsx)("div",{className:f,ref:y})});K.displayName="CodeMirror";let J=K},75718:(e,t,n)=>{n.d(t,{P:()=>c});var r=n(74848),a=n(21728),i=n(95726),s=n(96540),o=n(47397);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--iXbHt",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--Qk23B",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--dREtI"};function c(e){let t,n,c,u,m,h,p=(0,a.c)(14),{ambientError:f,useLargerBorderRadius:g}=e,y=(0,o.b)(),[x,v]=(0,s.useState)(0),_=void 0!==g&&g?l.largeBorderRadius:l.mediumBorderRadius,b=(0,s.useRef)(null);p[0]!==f.message?(t=()=>{if(f.message){v(d);let e=setTimeout(()=>{b.current&&b.current.focus()},250);return()=>clearTimeout(e)}},p[0]=f.message,p[1]=t):t=p[1],p[2]!==f?(n=[f],p[2]=f,p[3]=n):n=p[3],(0,s.useEffect)(t,n);let S=`${l.ambientErrorBanner} ${_}`;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},p[4]=c):c=p[4],p[5]!==f.message?(u=(0,r.jsx)("div",{ref:b,tabIndex:-1,style:c,children:f.message}),p[5]=f.message,p[6]=u):u=p[6],p[7]!==y?(m=()=>{y.dismissAmbientError()},p[7]=y,p[8]=m):m=p[8],p[9]!==x||p[10]!==S||p[11]!==u||p[12]!==m?(h=(0,r.jsx)(i.l,{"aria-atomic":"true",className:S,description:u,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},x),p[9]=x,p[10]=S,p[11]=u,p[12]=m,p[13]=h):h=p[13],h}function d(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}},97785:(e,t,n)=>{n.d(t,{o:()=>d});var r=n(74848),a=n(21728),i=n(34164),s=n(96540);let o={chatImageAttachment:"ChatImage-module__chatImageAttachment--A31NV",squareView:"ChatImage-module__squareView--z0mEJ",fullView:"ChatImage-module__fullView--n3xkp",userAttachedImage:"ChatImage-module__userAttachedImage--fpKCB",overlay:"ChatImage-module__overlay--KqENn",overlayScreen:"ChatImage-module__overlayScreen--QlNhZ",expandIcon:"ChatImage-module__expandIcon--B0sBN"};function l(e){let t,n,i=(0,a.c)(5),{className:s,size:o}=e,l=o||14,c=o||14;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"}),i[0]=t):t=i[0],i[1]!==s||i[2]!==l||i[3]!==c?(n=(0,r.jsx)("svg",{className:s,xmlns:"http://www.w3.org/2000/svg",width:l,height:c,fill:"none",viewBox:"0 0 14 14",role:"presentation",children:t}),i[1]=s,i[2]=l,i[3]=c,i[4]=n):n=i[4],n}try{l.displayName||(l.displayName="ExpandIcon")}catch{}let c=e=>{let t,n,c,d,u,m,h,p,f,g=(0,a.c)(25),{src:y,alt:x,onClick:v,useOverlay:_,mode:b,squareView:S}=e,[C,j]=(0,s.useState)(!1),w=S?o.squareView:o.fullView,N="assistive"===b;g[0]!==w||g[1]!==N?(t=(0,i.$)(o.chatImageAttachment,w,{assistive:N}),g[0]=w,g[1]=N,g[2]=t):t=g[2];let I=S?o.squareView:o.fullView;return g[3]!==I?(n=(0,i.$)(o.userAttachedImage,I),g[3]=I,g[4]=n):n=g[4],g[5]!==x||g[6]!==y||g[7]!==n?(c=(0,r.jsx)("img",{className:n,src:y,alt:x}),g[5]=x,g[6]=y,g[7]=n,g[8]=c):c=g[8],g[9]!==C||g[10]!==S?(d=(0,i.$)(o.overlay,{hovered:C,[o.squareView]:S}),g[9]=C,g[10]=S,g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>j(!0),m=()=>j(!1),g[12]=u,g[13]=m):(u=g[12],m=g[13]),g[14]!==_?(h=_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o.overlayScreen}),(0,r.jsx)(l,{className:o.expandIcon,size:20})]}),g[14]=_,g[15]=h):h=g[15],g[16]!==v||g[17]!==y||g[18]!==h||g[19]!==d?(p=(0,r.jsx)("a",{href:y,className:d,onClick:v,onMouseEnter:u,onMouseLeave:m,"aria-label":"Open image thumbnail",target:"_blank",rel:"noreferrer",children:h}),g[16]=v,g[17]=y,g[18]=h,g[19]=d,g[20]=p):p=g[20],g[21]!==p||g[22]!==t||g[23]!==c?(f=(0,r.jsxs)("div",{className:t,children:[c,p]}),g[21]=p,g[22]=t,g[23]=c,g[24]=f):f=g[24],f},d=(0,s.memo)(c);try{c.displayName||(c.displayName="ChatImageUnmemoized")}catch{}try{d.displayName||(d.displayName="ChatImage")}catch{}},8643:(e,t,n)=>{n.d(t,{V:()=>ne});var r,a,i=n(74848),s=n(21728),o=n(38007),l=n(85647),c=n(10569),d=n(15385),u=n(96540),m=n(44446),h=n(68714),p=n(88334),f=n(24001),g=n(22069),y=n(34164);let x={toggleButton:"ToggleButton-module__toggleButton--Is6Ni",selected:"ToggleButton-module__selected--U03b1",icon:"ToggleButton-module__icon--tnvqW",textContent:"ToggleButton-module__textContent--xvwFK"},v=(0,u.forwardRef)((e,t)=>{let n,r,a,o,l,c,d,u=(0,s.c)(21),{icon:m,isSelected:h,onClick:p,hasMenu:f,isMenuOpen:g,selectedItemLabel:v,children:_}=e,b=void 0!==h&&h,S=void 0!==f&&f,C=void 0!==g&&g;u[0]!==S||u[1]!==C||u[2]!==b?(n=()=>S?{"aria-haspopup":"menu","aria-expanded":C}:{"aria-pressed":b},u[0]=S,u[1]=C,u[2]=b,u[3]=n):n=u[3];let j=n,w=S&&v?v:_;u[4]!==p?(r=e=>{p&&p(e)},u[4]=p,u[5]=r):r=u[5];let N=r,I=b&&x.selected;return u[6]!==I?(a=(0,y.$)(x.toggleButton,I),u[6]=I,u[7]=a):a=u[7],u[8]!==j?(o=j(),u[8]=j,u[9]=o):o=u[9],u[10]!==m?(l=m&&(0,i.jsx)("span",{className:x.icon,children:m}),u[10]=m,u[11]=l):l=u[11],u[12]!==w?(c=(0,i.jsx)("span",{className:x.textContent,children:w}),u[12]=w,u[13]=c):c=u[13],u[14]!==N||u[15]!==t||u[16]!==c||u[17]!==a||u[18]!==o||u[19]!==l?(d=(0,i.jsxs)("button",{ref:t,type:"button",className:a,onClick:N,...o,children:[l,c]}),u[14]=N,u[15]=t,u[16]=c,u[17]=a,u[18]=o,u[19]=l,u[20]=d):d=u[20],d});function _(){let[e,t]=(0,u.useState)(!1),n=(0,l.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:a,activeCopilotSpaceId:s,readOnly:y}=(0,f.C)(),x=()=>{n(g.QT),(0,o.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},_=e=>{s&&e.id===s.id&&e.owner===s.owner?a():(r({id:e.id,owner:e.owner}),(0,o.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},{data:b=[]}=(0,p.I)(),{data:S=[]}=(0,h.jS)(!0);if(!(0,h.BV)()||y)return;let C=s?S.find(e=>e.id===s.id&&e.owner===s.owner):void 0,j=C?C.name:"Space";return(0,i.jsxs)(c.W,{open:e,onOpenChange:t,children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(v,{icon:(0,i.jsx)(m.I,{icon:"spaces"}),isSelected:!!C,onClick:()=>{},hasMenu:!0,isMenuOpen:e,selectedItemLabel:j,children:j})}),(0,i.jsx)(c.W.Overlay,{style:b.length>0?{width:"260px"}:{},children:(0,i.jsx)(d.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:b.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.l.Group,{children:[(0,i.jsx)(d.l.GroupHeading,{children:"Recent"}),b.map(e=>{let t=!!s&&e.id===s.id&&e.owner===s.owner;return(0,i.jsx)(d.l.Item,{role:"menuitemradio",onSelect:()=>_(e),selected:t,"aria-checked":t,children:(0,i.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(d.l.Item,{onSelect:x,children:"Create a space"})]}):(0,i.jsx)(d.l.Item,{onSelect:x,children:"Create your first space"})})})]})}v.displayName="ToggleButton";try{_.displayName||(_.displayName="SpacesSelect")}catch{}var b=n(98386),S=n(42080),C=n(99837),j=n(38621),w=n(65556),N=n(55847),I=n(94747),E=n(60039),R=n(7277),T=n(47970),k=n(34901),A=n(47397),D=n(26268),P=n(36721);let L=e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}},M=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,O=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function F(e){let t=await (0,E.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new O;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function B(e){let{itemUrl:t}=e,n=await (0,E.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var U=n(17515),$=n(74244),V=n(44435);let q=({manager:e})=>[{label:"Delete conversation",command:"delete",icon:j.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,V.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:j.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,V.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:j.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}],W=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=q({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var G=n(67522);function z(e,t,n){if("immersive"===e&&/^\/copilot(\/agents)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var H=n(91819),Q=n(31971),K=n(22469),J=n(53850),X=n(86571),Y=n(6901);let Z=(e,t,n)=>e&&"immersive"===t&&!n;var ee=n(80597),et=n(39818),en=n(39459);function er(e){let t,n,r,a,l,u,m=(0,s.c)(24),{onSelectPanel:h,onSelectAgent:p}=e,{availableAgents:f,showLimit:g,disabled:y,loading:x}=(0,et.JE)(),v=f&&f.length>0;if(x){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(d.l.Item,{disabled:!0,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),"Extension"]}),m[0]=e):e=m[0],e}if(y){let e,t,n;return m[1]!==h?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),h("agents-not-supported")},m[1]=h,m[2]=e):e=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),m[3]=t):t=m[3],m[4]!==e?(n=(0,i.jsxs)(d.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),m[4]=e,m[5]=n):n=m[5],n}if(!v){let e,t,n;return m[6]!==h?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),h("no-agents-available")},m[6]=h,m[7]=e):e=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),m[8]=t):t=m[8],m[9]!==e?(n=(0,i.jsxs)(d.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),m[9]=e,m[10]=n):n=m[10],n}if(m[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(c.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{onSelect:ei,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.MentionIcon,{})}),"Extension"]})}),m[11]=t):t=m[11],m[12]!==f||m[13]!==p||m[14]!==g){let e;m[16]!==p||m[17]!==g?(e=e=>(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(en.r,{src:e.avatarUrl})}),e.name,!g&&(0,i.jsxs)(d.l.Description,{variant:"inline",truncate:!0,children:[et.Z3,e.slug]}),g&&(0,i.jsx)(d.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),m[16]=p,m[17]=g,m[18]=e):e=m[18],n=f.map(e),m[12]=f,m[13]=p,m[14]=g,m[15]=n}else n=m[15];return m[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(d.l.Divider,{}),m[19]=r):r=m[19],m[20]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.TelescopeIcon,{})}),m[20]=a):a=m[20],m[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsxs)(d.l.LinkItem,{href:et.bn,onClick:ea,children:[a,"Marketplace",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(j.LinkExternalIcon,{})})]}),m[21]=l):l=m[21],m[22]!==n?(u=(0,i.jsxs)(c.W,{children:[t,(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsxs)(d.l,{children:[n,r,l]})})]}),m[22]=n,m[23]=u):u=m[23],u}function ea(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ei(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{er.displayName||(er.displayName="AgentMenu")}catch{}var es=n(75177),eo=n(34614),el=n(9852);function ec(e){let t,n,r=(0,s.c)(4),{onClose:a,returnFocusRef:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==a||r[2]!==o?(n=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:a,returnFocusRef:o,renderBody:ed}),r[1]=a,r[2]=o,r[3]=n):n=r[3],n}function ed(){return(0,i.jsx)(es.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",px:4,py:8,flex:1,height:"100%"},children:(0,i.jsxs)(es.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,i.jsx)(j.TelescopeIcon,{size:24}),(0,i.jsx)(es.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:"Chat with your favorite tools and services"}),(0,i.jsx)(es.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(N.Q,{as:"a",href:et.bn,children:"Browse marketplace"}),(0,i.jsx)(es.A,{sx:{mt:2},children:(0,i.jsx)(eo.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eu(e){let t,n,r,a=(0,s.c)(9),{onClose:o,returnFocusRef:l}=e,c=(0,A.b)(),d=(0,k.Pk)(),u=(0,h.BV)(),m=(0,G.GF)(d.availableModels);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==u||a[2]!==m||a[3]!==c?(n=()=>(0,i.jsx)(es.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",px:4,py:10,height:"100%",alignItems:"center",justifyContent:"center"},children:(0,i.jsxs)(es.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,i.jsx)(es.A,{sx:{display:"flex",color:"attention.fg"},children:(0,i.jsx)(j.AlertIcon,{size:24})}),(0,i.jsxs)(es.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)(es.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,i.jsx)(N.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),a[1]=u,a[2]=m,a[3]=c,a[4]=n):n=a[4],a[5]!==o||a[6]!==l||a[7]!==n?(r=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:o,returnFocusRef:l,renderBody:n}),a[5]=o,a[6]=l,a[7]=n,a[8]=r):r=a[8],r}try{ec.displayName||(ec.displayName="NoAgentsAvailableDialog")}catch{}try{eu.displayName||(eu.displayName="AgentsNotSupportedDialog")}catch{}var em=n(85351),eh=n(87330),ep=n(21114),ef=n(84217),eg=n(52464),ey=n(3971),ex=n(58569),ev=n(53110),e_=n(40961);let eb={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--NqDvF"},eS=(0,u.forwardRef)(function(e,t){let n,r,a,o,l,c,d=(0,s.c)(13);d[0]!==e?({open:r,setOpen:a,...n}=e,d[0]=e,d[1]=n,d[2]=r,d[3]=a):(n=d[1],r=d[2],a=d[3]);let u=!!r||void 0;return d[4]!==r||d[5]!==a?(o=()=>a(!r),d[4]=r,d[5]=a,d[6]=o):o=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(l={color:"fg.muted"},d[7]=l):l=d[7],d[8]!==n||d[9]!==t||d[10]!==u||d[11]!==o?(c=(0,i.jsx)(eh.K,{ref:t,"aria-expanded":u,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:j.BookIcon,onClick:o,sx:l,variant:"invisible",...n}),d[8]=n,d[9]=t,d[10]=u,d[11]=o,d[12]=c):c=d[12],c});function eC({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:a}){let s=(0,k.Pk)(),o=(0,A.b)(),l=(0,em.A)("localStorage"),{knowledgeBases:c}=s,[d,m]=(0,u.useState)([]),[h,p]=(0,u.useState)(!0),[f,y]=(0,u.useState)(""),x=(0,u.useRef)(null),v=l.getItem("lastUsedKnowledgeBaseId")||"",_=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:S}=s;(0,u.useEffect)(()=>{n||y("")},[n]);let C=(0,u.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),j=(0,u.useMemo)(()=>C.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[C]),[w,N]=(0,u.useState)(!1),I=h||"pending"===s.knowledgeBasesLoading.state,E=w||"error"===s.knowledgeBasesLoading.state,R=(0,u.useRef)(!1);(0,u.useEffect)(()=>{let e=async()=>{p(!0),await o.fetchKnowledgeBases();let e=await o.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?m(e.payload||[]):N(!0),p(!1)};n&&!R.current&&(R.current=!0,e())},[n,o]);let T=eR(),D=e=>{let t=e.filter(e=>(0,g.P)(e)&&!S.some(t=>(0,g.P)(t)&&t.id===e.id));for(let t of S.filter(t=>(0,g.P)(t)&&!e.some(e=>e.id===t.id)))o.removeReference(t);for(let e of t)o.addReference((0,g.UU)(e),"docsetMenu")};if(s.model?.hasLimitedCapabilities)return(0,i.jsx)(eA,{open:n,setOpen:r,...e});if(!I&&0===c.length)return(0,i.jsx)(ej,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:s.mode,...t});let P=e=>{D(e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e))},L=C.sort((e,t)=>e.id===v?-1:+(t.id===v)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),M=[...j].sort((e,t)=>e.org===_?-1:+(t.org===_)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),O=c.filter(e=>S.some(t=>(0,g.P)(t)&&t.id===e.id));return(0,i.jsx)("div",{ref:x,...(0,b.G)("knowledge-select-panel"),children:(0,i.jsx)(ep.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,e_.flushSync)(()=>r(!1)),a.current?.focus()},open:n,renderAnchor:null,anchorRef:a,onOpenChange:r,loading:I,items:L,onFilterChange:y,groupMetadata:M,notice:null!==T?{text:T,variant:"info"}:void 0,message:E?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===j.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:O,onSelectedChange:e=>P(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function ej(e){let t,n,r,a,o,l,c,d,u,m,h,p,f,g,y,x,v,_,S,C,w,N,I,E,R,T,k,A=(0,s.c)(56),{administratedCopilotEnterpriseOrganizations:D,anchorRef:P,open:L,setOpen:M}=e,O=eR();A[0]!==P||A[1]!==L||A[2]!==M?(t=P?{anchorRef:P,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eS,{open:L,setOpen:M,...t})}},A[0]=P,A[1]=L,A[2]=M,A[3]=t):t=A[3];let F=t,B=D?.length===0;A[4]!==B?(n=B?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},A[4]=B,A[5]=n):n=A[5];let U=n;A[6]!==B?(r=B?{maxHeight:"100%"}:{},A[6]=B,A[7]=r):r=A[7];let $=r;A[8]!==B?(a=B?{height:"100%"}:{},A[8]=B,A[9]=a):a=A[9];let V=a;return A[10]!==M?(o=()=>M(!0),l=()=>M(!1),A[10]=M,A[11]=o,A[12]=l):(o=A[11],l=A[12]),A[13]===Symbol.for("react.memo_cache_sentinel")?(c={anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},A[13]=c):c=A[13],A[14]!==V?(d={display:"flex",flexDirection:"column",...V},A[14]=V,A[15]=d):d=A[15],A[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,b.G)("empty-knowledge-base-picker"),A[16]=u):u=A[16],A[17]===Symbol.for("react.memo_cache_sentinel")?(m={borderBottom:"1px solid",borderColor:"border.muted"},A[17]=m):m=A[17],A[18]===Symbol.for("react.memo_cache_sentinel")?(h={display:"flex",justifyContent:"space-between",alignItems:"center",py:2,px:3},A[18]=h):h=A[18],A[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)(ef.A,{id:"knowledge-base-dialog-title",as:"h4",sx:{fontSize:1},children:"Attach a knowledge base"}),A[19]=p):p=A[19],A[20]!==M?(f=(0,i.jsx)(es.A,{sx:m,children:(0,i.jsxs)(es.A,{sx:h,children:[p,(0,i.jsx)(eh.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:j.XIcon,variant:"invisible",onClick:()=>M(!1)})]})}),A[20]=M,A[21]=f):f=A[21],A[22]!==U?(g={display:"flex",flexDirection:"column",alignItems:"center",gap:3,pt:3,...U},A[22]=U,A[23]=g):g=A[23],A[24]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)(ev.A,{icon:j.BookIcon,size:"medium",sx:{color:"fg.muted"}}),A[24]=y):y=A[24],A[25]!==$?(x={gap:2,display:"flex",alignItems:"center",flexDirection:"column",...$},A[25]=$,A[26]=x):x=A[26],A[27]===Symbol.for("react.memo_cache_sentinel")?(v=(0,i.jsx)(eg.A,{sx:{fontSize:1,fontWeight:600},children:"You don't have any knowledge bases"}),A[27]=v):v=A[27],A[28]===Symbol.for("react.memo_cache_sentinel")?(_={color:"fg.muted",textAlign:"center",fontSize:0,px:3},S=(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),A[28]=_,A[29]=S):(_=A[28],S=A[29]),A[30]!==B?(C=B&&(0,i.jsx)(eg.A,{as:"p",sx:{mt:3,mb:4},...(0,b.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),A[30]=B,A[31]=C):C=A[31],A[32]!==C?(w=(0,i.jsxs)(es.A,{sx:_,children:[S,C]}),A[32]=C,A[33]=w):w=A[33],A[34]!==D?(N=D.length>0&&(0,i.jsx)(ew,{administratedCopilotEnterpriseOrganizations:D}),A[34]=D,A[35]=N):N=A[35],A[36]!==x||A[37]!==w||A[38]!==N?(I=(0,i.jsxs)(es.A,{sx:x,children:[v,w,N]}),A[36]=x,A[37]=w,A[38]=N,A[39]=I):I=A[39],A[40]!==g||A[41]!==I?(E=(0,i.jsxs)(es.A,{sx:g,children:[y,I]}),A[40]=g,A[41]=I,A[42]=E):E=A[42],A[43]!==O?(R=O&&(0,i.jsx)(es.A,{sx:{borderTop:"1px solid",borderColor:"border.muted",px:2,py:3},children:(0,i.jsx)(eE,{message:O})}),A[43]=O,A[44]=R):R=A[44],A[45]!==f||A[46]!==E||A[47]!==R||A[48]!==d?(T=(0,i.jsxs)(es.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:d,...u,children:[f,E,R]}),A[45]=f,A[46]=E,A[47]=R,A[48]=d,A[49]=T):T=A[49],A[50]!==F||A[51]!==L||A[52]!==T||A[53]!==o||A[54]!==l?(k=(0,i.jsx)(ey.T,{open:L,onOpen:o,onClose:l,overlayProps:c,...F,children:T}),A[50]=F,A[51]=L,A[52]=T,A[53]=o,A[54]=l,A[55]=k):k=A[55],k}function ew(e){let t=(0,s.c)(14),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,r,a,s;return t[0]!==n[0]?(e=ek(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r={mb:4},a=(0,b.G)("create-knowledge-base-button"),t[2]=r,t[3]=a):(r=t[2],a=t[3]),t[4]!==e?(s=(0,i.jsx)(N.Q,{as:"a",href:e,sx:r,...a,children:"Create a knowledge base"}),t[4]=e,t[5]=s):s=t[5],s}{let e,r,a,s,o,l;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e={width:"100%",textAlign:"left",borderTop:"1px solid",borderColor:"border.muted",pt:3},r=(0,b.G)("create-knowledge-base-dropdown"),t[6]=e,t[7]=r):(e=t[6],r=t[7]),t[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(ef.A,{as:"h3",sx:{fontSize:0,color:"fg.muted",pl:3},children:"Create a knowledge base for an organization"}),t[8]=a):a=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(s={maxHeight:"160px",overflow:"scroll"},t[9]=s):s=t[9],t[10]!==n?(o=n.map(eN),t[10]=n,t[11]=o):o=t[11],t[12]!==o?(l=(0,i.jsxs)(es.A,{sx:e,...r,children:[a,(0,i.jsx)(d.l,{sx:s,children:o})]}),t[12]=o,t[13]=l):l=t[13],l}}function eN(e){return(0,i.jsx)(eI,{org:e},e.id)}function eI(e){let t,n,r,a,o,l,c,u=(0,s.c)(14),{org:m}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={flex:1,color:"fg.default"},u[0]=t):t=u[0],u[1]!==m?(n=ek(m),u[1]=m,u[2]=n):n=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(r={mr:2},u[3]=r):r=u[3],u[4]!==m.avatarUrl||u[5]!==m.login?(a=(0,i.jsx)(en.r,{square:!0,src:m.avatarUrl,alt:m.login,sx:r,"aria-hidden":"true"}),u[4]=m.avatarUrl,u[5]=m.login,u[6]=a):a=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(o={minWidth:"80%"},u[7]=o):o=u[7],u[8]!==m.login?(l=(0,i.jsx)(ex.A,{inline:!0,title:m.login,sx:o,children:m.login}),u[8]=m.login,u[9]=l):l=u[9],u[10]!==n||u[11]!==a||u[12]!==l?(c=(0,i.jsx)(d.l.Item,{children:(0,i.jsxs)(eo.A,{sx:t,href:n,children:[a,l]})}),u[10]=n,u[11]=a,u[12]=l,u[13]=c):c=u[13],c}function eE(e){let t,n,r=(0,s.c)(3),{message:a}=e;return a?(r[0]===Symbol.for("react.memo_cache_sentinel")?(t={color:"fg.muted",fontSize:0,ml:2},r[0]=t):t=r[0],r[1]!==a?(n=(0,i.jsx)(es.A,{"data-testid":"knowledge-select-panel-sso",sx:t,children:a}),r[1]=a,r[2]=n):n=r[2],n):null}function eR(){let e=(0,k.Pk)(),t=e.ssoOrganizations.map(eT);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eT(e){return e.login}function ek(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eA(e){let t,n,r,a,o,l=(0,s.c)(13),{anchorRef:c,open:d,setOpen:u}=e;l[0]!==c||l[1]!==d||l[2]!==u?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(eS,{open:d,setOpen:u,...t})}},l[0]=c,l[1]=d,l[2]=u,l[3]=t):t=l[3];let m=t;return l[4]!==u?(n=()=>u(!0),r=()=>u(!1),l[4]=u,l[5]=n,l[6]=r):(n=l[5],r=l[6]),l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:(0,y.$)("m-3 d-flex flex-column flex-items-center text-center",eb.disabledForPreviewModelsPanel),children:[(0,i.jsx)(j.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),l[7]=a):a=l[7],l[8]!==m||l[9]!==d||l[10]!==n||l[11]!==r?(o=(0,i.jsx)(ey.T,{open:d,onOpen:n,onClose:r,...m,children:a}),l[8]=m,l[9]=d,l[10]=n,l[11]=r,l[12]=o):o=l[12],o}try{eS.displayName||(eS.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eC.displayName||(eC.displayName="KnowledgeSelectPanel")}catch{}try{ej.displayName||(ej.displayName="EmptyKnowledgeBase")}catch{}try{ew.displayName||(ew.displayName="CreateKnowledgeBaseButton")}catch{}try{eI.displayName||(eI.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eE.displayName||(eE.displayName="SSOFooter")}catch{}try{eA.displayName||(eA.displayName="DisabledForPreviewModels")}catch{}var eD=n(70066),eP=n(70170),eL=n(83978),eM=n(97286);async function eO(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let s=new Worker(n);s.addEventListener("message",e=>a(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function eF(e,t){let n,r,a,i=(0,s.c)(9),{findFileWorkerPath:o}=(0,k.Pk)();i[0]!==e||i[1]!==t||i[2]!==o?(n=["copilot-worker-filter",o,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:eO(e,t,o,r):[]},i[0]=e,i[1]=t,i[2]=o,i[3]=n,i[4]=r):(n=i[3],r=i[4]);let l=null!==e;return i[5]!==n||i[6]!==r||i[7]!==l?(a={queryKey:n,queryFn:r,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eB},i[5]=n,i[6]=r,i[7]=l,i[8]=a):a=i[8],(0,eM.I)(a)}function eB(e){return e}function eU(e,t){let n,r,a,i=(0,s.c)(11),o=void 0===t||t,l=(0,A.b)(),c=null!==e;return i[0]!==o||i[1]!==e?(n=["copilot-repository-files",e,o],i[0]=o,i[1]=e,i[2]=n):n=i[2],i[3]!==o||i[4]!==l||i[5]!==e?(r=async()=>{if(!e)return{};let t=await l.service.listRepoFiles(e,o);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},i[3]=o,i[4]=l,i[5]=e,i[6]=r):r=i[6],i[7]!==c||i[8]!==n||i[9]!==r?(a={enabled:c,queryKey:n,queryFn:r,staleTime:3e5},i[7]=c,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eM.I)(a)}function e$(e,t){let n,r,a,i=(0,s.c)(11),o=(0,A.b)(),l=null!==e&&t.length>0;return i[0]!==e||i[1]!==t?(n=["copilot-repository-symbols",e,t],i[0]=e,i[1]=t,i[2]=n):n=i[2],i[3]!==o||i[4]!==e||i[5]!==t?(r=async()=>{if(!e)return[];let n=await o.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eV)},i[3]=o,i[4]=e,i[5]=t,i[6]=r):r=i[6],i[7]!==l||i[8]!==n||i[9]!==r?(a={enabled:l,queryKey:n,queryFn:r},i[7]=l,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eM.I)(a)}function eV(e){return!!e.symbol}var eq=n(51295),eW=n(39546);let eG={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--ZB4TR",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--WR2cM",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--D5U0G"};var ez=n(76016);let eH="Search",eQ=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&r?"Select files and symbols":n&&r?"Select folders and symbols":t?"Select files":n?"Select folders":r?"Select symbols":"Select references"},eK=(e,t)=>{let n=t.includes("files"),r=t.includes("folders"),a=t.includes("symbols"),i="references";return n&&r&&a?i="files, folders, and symbols":n&&r?i="files and folders":n&&a?i="files and symbols":r&&a?i="folders and symbols":n?i="files":r?i="folders":a&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`},eJ=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&r?"Fetching files and symbols\u2026":n&&r?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":r?"Fetching symbols\u2026":"Fetching references\u2026"},eX=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols"),a="References";return t&&n&&r?a="Files, folders, and symbols":t&&n?a="Files and folders":t&&r?a="Files and symbols":n&&r?a="Folders and symbols":t?a="Files":n?a="Folders":r&&(a="Symbols"),a},eY=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&r?"Choose a repository to browse for files and symbols.":n&&r?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":r?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."},eZ=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&r?"No files or symbols found":n&&r?"No folders or symbols found":t?"No files found":n?"No folders found":r?"No symbols found":"No references found"},e0=e=>{let t,n,r,a,o,l,c,d,m,h,p,f=(0,s.c)(34);f[0]!==e?({open:r,onOpenChange:n,cancelReturnFocusRef:t,submitReturnFocusRef:o,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a,f[5]=o):(t=f[1],n=f[2],r=f[3],a=f[4],o=f[5]);let g=(0,A.b)(),[y,x]=(0,u.useState)();f[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>x(void 0),f[6]=l):l=f[6],f[7]!==r?(c=[r],f[7]=r,f[8]=c):c=f[8],(0,u.useEffect)(l,c);let v=(0,k.pn)(te);f[9]!==v?(d=new Set(v.filter(tt).map(tn)),f[9]=v,f[10]=d):d=f[10];let _=d,[b,S]=(0,u.useState)(),C=(0,u.useRef)(!1);f[11]!==g.service?(m=async e=>{S(void 0),C.current=!0;let t=await g.service.fetchRepo(e);t.ok?x(t.payload):S("Error: failed to load repository details. Please try again."),C.current=!1},f[11]=g.service,f[12]=m):m=f[12];let j=m,w=a.supportedReferenceTypes??e1;f[13]!==w?(h=eY(w),f[13]=w,f[14]=h):h=f[14];let N=h;if(!y){let e,a,s;return f[15]!==n?(e=e=>{C.current||n(e)},f[15]=n,f[16]=e):e=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,f[17]=a):a=f[17],f[18]!==t||f[19]!==N||f[20]!==j||f[21]!==r||f[22]!==_||f[23]!==b||f[24]!==o||f[25]!==e?(s=(0,i.jsx)(ez.X1,{selectionVariant:"instant",open:r,onOpenChange:e,selectedRepoIds:a,onSelectRepo:j,cancelReturnFocusRef:t,submitReturnFocusRef:o,description:N,featuredRepoIds:_,error:b}),f[18]=t,f[19]=N,f[20]=j,f[21]=r,f[22]=_,f[23]=b,f[24]=o,f[25]=e,f[26]=s):s=f[26],s}return f[27]!==t||f[28]!==n||f[29]!==r||f[30]!==a||f[31]!==y||f[32]!==o?(p=(0,i.jsx)(e2,{...a,open:r,onOpenChange:n,sourceRepository:y,cancelReturnFocusRef:t,submitReturnFocusRef:o}),f[27]=t,f[28]=n,f[29]=r,f[30]=a,f[31]=y,f[32]=o,f[33]=p):p=f[33],p},e1=["files","folders","symbols"],e2=e=>{let t,n,r,a,o,l,c,m,h,p,f,y,x,v,_,b=(0,s.c)(42),{renderAnchor:S,anchorRef:C,open:j,onOpenChange:w,submitReturnFocusRef:N,cancelReturnFocusRef:I,sourceRepository:E,supportedReferenceTypes:R}=e,T=void 0===R?e1:R,[D,P]=(0,u.useState)("");b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eP.s)(P,250),b[0]=t):t=b[0];let L=(0,u.useRef)(t);b[1]!==j?(n=()=>{j||P("")},r=[j],b[1]=j,b[2]=n,b[3]=r):(n=b[2],r=b[3]),(0,u.useEffect)(n,r);let{initialLoading:M,filterLoading:O,selected:F,unselected:B,toggleSelection:U}=function(e,t,n,r=e1){let a=(0,k.Pk)(),i=(0,A.b)(),o=function(e,t,n,r){let a,i,o,l,c,d=(0,s.c)(16),u=void 0===r?e1:r;d[0]!==u?(a=u.includes("folders"),d[0]=u,d[1]=a):a=d[1];let m=a,h=u.includes("symbols");d[2]!==u?(i=u.includes("files"),d[2]=u,d[3]=i):i=d[3];let p=i,f=n?t:null,g=eU(f,m),y=eF(g.data?.paths??null,e),x=eF(g.data?.directories??null,e),v=e$(h?f:null,e);d[4]!==v.data?(o=v.data?.map(e9)??null,d[4]=v.data,d[5]=o):o=d[5];let _=eF(o,e);if(d[6]!==x||d[7]!==y.data||d[8]!==_.data||d[9]!==p||d[10]!==m){let e=p?y.data?.slice(0,7).map(e8)??[]:[];l=[...e,...m?x.data?.slice(0,7).map(e7)??[]:[],..._.data?.slice(0,7).map(e6)??[]],d[6]=x,d[7]=y.data,d[8]=_.data,d[9]=p,d[10]=m,d[11]=l}else l=d[11];let b=l,S=null===y.data&&null===x.data&&null===v.data,C=g.isFetching||y.isFetching||x.isFetching||v.isFetching||_.isFetching;return d[12]!==C||d[13]!==S||d[14]!==b?(c={items:b,filterLoading:C,initialLoading:S},d[12]=C,d[13]=S,d[14]=b,d[15]=c):c=d[15],c}(t,n,e,r),l=r.includes("symbols"),c=e$(e&&l?n:null,t).data,[d,m,h]=(0,u.useMemo)(()=>{let e=new Set,t=new Set,r=new Set;for(let i of a.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&r.add(i.name);return[e,t,r]},[a.currentReferences,n?.ownerLogin,n?.name]),{selected:p=[],unselected:f=[]}=(0,eq.O)(o.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return m.has(e.text)?"selected":"unselected";case"symbol":return h.has(e.text)?"selected":"unselected"}}),y=(0,u.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,g.Od)(e.text,n);break;case"folder":t=(0,g.OC)(e.text,n);break;case"symbol":{let r=c?.find(t=>(0,g.Sm)(t)===e.text);if(!r)return;t=(0,g.Qt)(r,n)}}let r=(0,g.Vb)(t),s=a.currentReferences.find(e=>r===(0,g.Vb)(e));s?i.removeReference(s):i.addReference(t,"references-menu")},[i,n,a.currentReferences,c]);return{...o,selected:p,unselected:f,toggleSelection:y}}(j,D,E,T),$=F.length+B.length,V=`${E.ownerLogin}/${E.name}`;return b[4]===Symbol.for("react.memo_cache_sentinel")?(a={flexGrow:"0 !important"},b[4]=a):a=b[4],b[5]!==S?(o=S?.({}),b[5]=S,b[6]=o):o=b[6],b[7]!==T?(l=eQ(T),b[7]=T,b[8]=l):l=b[8],b[9]!==V||b[10]!==T?(c=eK(V,T),b[9]=V,b[10]=T,b[11]=c):c=b[11],b[12]!==w||b[13]!==N.current?(m=()=>{(0,e_.flushSync)(()=>w(!1)),N.current?.focus()},b[12]=w,b[13]=N.current,b[14]=m):m=b[14],b[15]!==I.current||b[16]!==w?(h=()=>{(0,e_.flushSync)(()=>w(!1)),I.current?.focus()},b[15]=I.current,b[16]=w,b[17]=h):h=b[17],b[18]===Symbol.for("react.memo_cache_sentinel")?(p=e=>L.current(e.target.value),b[18]=p):p=b[18],b[19]!==O?(f=(0,i.jsx)(eL.X.Header,{children:(0,i.jsx)(eL.X.SearchInput,{loading:O,onChange:p,placeholder:eH,"aria-label":eH})}),b[19]=O,b[20]=f):f=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(y={minHeight:340},b[21]=y):y=b[21],b[22]!==O||b[23]!==M||b[24]!==F||b[25]!==T||b[26]!==U||b[27]!==$||b[28]!==B?(x=(0,i.jsx)(d.l,{sx:y,children:M?(0,i.jsx)(eL.X.Loading,{children:eJ(T)}):0!==$||O?(0,i.jsxs)(i.Fragment,{children:[F.map(e=>(0,i.jsx)(e5,{item:e,selected:!0,toggleSelection:U},e4(e))),F.length>0&&B.length>0&&(0,i.jsx)(d.l.Divider,{}),B.map(e=>(0,i.jsx)(e5,{item:e,selected:!1,toggleSelection:U},e4(e)))]}):(0,i.jsx)(eW.O,{delay:500,children:(0,i.jsx)(eL.X.Message,{variant:"empty",title:eZ(T),children:"Try a different search term"})})}),b[22]=O,b[23]=M,b[24]=F,b[25]=T,b[26]=U,b[27]=$,b[28]=B,b[29]=x):x=b[29],b[30]!==C||b[31]!==j||b[32]!==h||b[33]!==f||b[34]!==x||b[35]!==l||b[36]!==c||b[37]!==m?(v=(0,i.jsxs)(eL.X,{anchorRef:C,title:l,description:c,onCancel:m,onSubmit:h,open:j,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[f,x]}),b[30]=C,b[31]=j,b[32]=h,b[33]=f,b[34]=x,b[35]=l,b[36]=c,b[37]=m,b[38]=v):v=b[38],b[39]!==v||b[40]!==o?(_=(0,i.jsxs)(es.A,{sx:a,children:[o,v]}),b[39]=v,b[40]=o,b[41]=_):_=b[41],_};function e3(e){let t,n,r,a,o,l=(0,s.c)(11),{open:c,setOpen:d,renderAnchor:u}=e;return l[0]!==d?(t=()=>d(!0),n=()=>d(!1),l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==u?(r=e=>u?.(e)??(0,i.jsx)(i.Fragment,{}),l[3]=u,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:eG.chooseRepoInstructionPanel,children:[(0,i.jsx)(j.PaperclipIcon,{}),(0,i.jsx)("h3",{className:eG.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:eG.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),l[5]=a):a=l[5],l[6]!==c||l[7]!==t||l[8]!==n||l[9]!==r?(o=(0,i.jsx)(ey.T,{open:c,onOpen:t,onClose:n,renderAnchor:r,children:a}),l[6]=c,l[7]=t,l[8]=n,l[9]=r,l[10]=o):o=l[10],o}let e4=e=>`${e.type}#${e.text}`;function e5(e){let t,n,r,a,o,l,c,u=(0,s.c)(17),{toggleSelection:m,selected:h,item:p}=e;return u[0]!==p||u[1]!==m?(t=()=>{m(p),setTimeout(()=>{document.getElementById(e4(p))?.focus()})},u[0]=p,u[1]=m,u[2]=t):t=u[2],u[3]!==p?(n=e4(p),u[3]=p,u[4]=n):n=u[4],u[5]===Symbol.for("react.memo_cache_sentinel")?(r={mx:2,'&[data-is-active-descendant="activated-directly"]':{backgroundColor:"transparent",outline:"2px solid var(--focus-outlineColor, var(--color-accent-emphasis))",outlineOffset:"-2px"}},u[5]=r):r=u[5],u[6]!==p.type?(a=(0,i.jsx)(d.l.LeadingVisual,{children:"symbol"===p.type?(0,i.jsx)(j.CodeSquareIcon,{}):"folder"===p.type?(0,i.jsx)(j.FileDirectoryFillIcon,{}):(0,i.jsx)(j.FileIcon,{})}),u[6]=p.type,u[7]=a):a=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(o={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},u[8]=o):o=u[8],u[9]!==p.text?(l=(0,i.jsx)(es.A,{sx:o,children:p.text}),u[9]=p.text,u[10]=l):l=u[10],u[11]!==h||u[12]!==t||u[13]!==n||u[14]!==a||u[15]!==l?(c=(0,i.jsxs)(d.l.Item,{onSelect:t,selected:h,"aria-checked":h,id:n,sx:r,children:[a,l]}),u[11]=h,u[12]=t,u[13]=n,u[14]=a,u[15]=l,u[16]=c):c=u[16],c}function e6(e){return{type:"symbol",text:e}}function e7(e){return{type:"folder",text:e}}function e8(e){return{type:"file",text:e}}function e9(e){return(0,g.Sm)(e)}try{(a=e=>{let t,n,r,a,o=(0,s.c)(12);o[0]!==e?({open:n,onOpenChange:t,...r}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=r):(t=o[1],n=o[2],r=o[3]);let{currentTopic:l}=(0,k.Pk)();if(!(0,g.Z6)(l)){let e;return o[4]!==t||o[5]!==n?(e=(0,i.jsx)(e3,{open:n,setOpen:t}),o[4]=t,o[5]=n,o[6]=e):e=o[6],e}return o[7]!==l||o[8]!==t||o[9]!==n||o[10]!==r?(a=(0,i.jsx)(e2,{...r,open:n,onOpenChange:t,sourceRepository:l}),o[7]=l,o[8]=t,o[9]=n,o[10]=r,o[11]=a):a=o[11],a}).displayName||(a.displayName="TopicReferencesSelectPanel")}catch{}try{e0.displayName||(e0.displayName="MultistepReferencesSelectPanel")}catch{}try{e2.displayName||(e2.displayName="ReferencesSelectPanel")}catch{}try{e3.displayName||(e3.displayName="ChooseRepositoryInstruction")}catch{}try{e5.displayName||(e5.displayName="ReferenceListItem")}catch{}function te(e){return e.currentReferences}function tt(e){return"repository"===e.type}function tn(e){return e.id}let tr=(0,u.memo)(e=>{let t,n,r,a,l,m,h,p,f,y,x,v,_,S,C,w,N,I,E,R,T,D,P,L,M,O=(0,s.c)(91);O[0]!==e?({panel:n,onPanelChange:a,anchorRef:t,...r}=e,O[0]=e,O[1]=t,O[2]=n,O[3]=r,O[4]=a):(t=O[1],n=O[2],r=O[3],a=O[4]);let{inputRef:F}=r,B=(0,A.b)(),U=(0,k.Pk)(),{supportedAttachmentTypes:$,supportedReferenceTypes:V}=function(){let e=(0,k.Pk)(),t=null!==(0,ee.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,g.Z6)(e.currentTopic)||!e.currentTopic);return t||n.push("repositories"),n.push("references"),r&&!t&&n.push("knowledge-bases"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:q}=(0,k.bP)("model"),W=Q.W.attachImagesImmersive&&"immersive"===U.mode&&!!q.capabilities.supports.vision||!1,G=(0,et.kw)(r),z=(0,u.useRef)(null),H=(0,ee.G)(),J=(0,Y.FQ)(!0),Z=!!(H&&J);O[5]!==H||O[6]!==W||O[7]!==B||O[8]!==q||O[9]!==Z||O[10]!==U||O[11]!==$?(l=$.includes("upload")&&(0,i.jsx)("input",{id:"image-uploader",...(0,b.G)("image-uploader"),hidden:!0,ref:z,type:"file",accept:[W?K.s.getAllowedImageFileExtensions(q):"",X.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=K.s.getAllowedFiles([...e.target.files],q),r=[];for(let e of(W?new K.s(U,B).addImageAttachments(t,"menu",H,Z):r.push(...t),n))new X.E(B).addAttachment(e);for(let e of r)(0,o.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),O[5]=H,O[6]=W,O[7]=B,O[8]=q,O[9]=Z,O[10]=U,O[11]=$,O[12]=l):l=O[12];let en="attachment-types"===n;O[13]!==a?(m=e=>a(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),O[13]=a,O[14]=m):m=O[14];let ea="assistive"===U.mode?eD.E5:void 0;O[15]!==a||O[16]!==U.mode||O[17]!==$?(h=$.includes("repositories")&&(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:U.mode}),a("repositories")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.RepoIcon,{})}),"Repositories\u2026"]}),O[15]=a,O[16]=U.mode,O[17]=$,O[18]=h):h=O[18],O[19]!==a||O[20]!==U.mode?(p=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:U.mode}),a("references")},O[19]=a,O[20]=U.mode,O[21]=p):p=O[21];let ei=$.includes("references")?void 0:"First attach a repository";O[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.FileCodeIcon,{})}),O[22]=f):f=O[22],O[23]!==V?(y=eX(V),O[23]=V,O[24]=y):y=O[24],O[25]!==p||O[26]!==ei||O[27]!==y?(x=(0,i.jsxs)(d.l.Item,{onSelect:p,inactiveText:ei,children:[f,y,"\u2026"]}),O[25]=p,O[26]=ei,O[27]=y,O[28]=x):x=O[28],O[29]!==a||O[30]!==U.mode||O[31]!==$?(v=$.includes("knowledge-bases")&&(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:U.mode}),a("knowledge-bases")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.BookIcon,{})}),(0,i.jsx)("span",{...(0,b.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),O[29]=a,O[30]=U.mode,O[31]=$,O[32]=v):v=O[32],O[33]!==a||O[34]!==U.mode||O[35]!==$?(_=$.includes("upload")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:U.mode}),a(null),z.current?.click()},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.UploadIcon,{})}),"Upload from computer"]})]}),O[33]=a,O[34]=U.mode,O[35]=$,O[36]=_):_=O[36],O[37]!==G||O[38]!==a||O[39]!==$?(S=$.includes("agents")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(er,{onSelectPanel:e=>a(e),onSelectAgent:e=>setTimeout(()=>G(e.slug))})]}),O[37]=G,O[38]=a,O[39]=$,O[40]=S):S=O[40],O[41]!==x||O[42]!==v||O[43]!==_||O[44]!==S||O[45]!==h?(C=(0,i.jsxs)(d.l,{children:[h,x,v,_,S]}),O[41]=x,O[42]=v,O[43]=_,O[44]=S,O[45]=h,O[46]=C):C=O[46],O[47]!==C||O[48]!==ea?(w=(0,i.jsx)(c.W.Overlay,{width:"small",side:"outside-top",align:"start",portalContainerName:ea,children:C}),O[47]=C,O[48]=ea,O[49]=w):w=O[49],O[50]!==t||O[51]!==w||O[52]!==en||O[53]!==m?(N=(0,i.jsx)(c.W,{anchorRef:t,open:en,onOpenChange:m,children:w}),O[50]=t,O[51]=w,O[52]=en,O[53]=m,O[54]=N):N=O[54];let es="references"===n;O[55]!==a?(I=e=>a(e?"references":null),O[55]=a,O[56]=I):I=O[56],O[57]!==t||O[58]!==F||O[59]!==V||O[60]!==es||O[61]!==I?(E=(0,i.jsx)(e0,{open:es,onOpenChange:I,submitReturnFocusRef:F,cancelReturnFocusRef:t,supportedReferenceTypes:V}),O[57]=t,O[58]=F,O[59]=V,O[60]=es,O[61]=I,O[62]=E):E=O[62];let eo="repositories"===n;return O[63]!==a?(R=e=>a(e?"repositories":null),O[63]=a,O[64]=R):R=O[64],O[65]!==t||O[66]!==F||O[67]!==eo||O[68]!==R?(T=(0,i.jsx)(ez.FZ,{open:eo,onOpenChange:R,submitReturnFocusRef:F,cancelReturnFocusRef:t}),O[65]=t,O[66]=F,O[67]=eo,O[68]=R,O[69]=T):T=O[69],O[70]!==t||O[71]!==n||O[72]!==a||O[73]!==$?(D=$.includes("knowledge-bases")&&(0,i.jsx)(eC,{disabledForPreviewModelsProps:{anchorRef:t},emptyKnowledgeBaseProps:{anchorRef:t},open:"knowledge-bases"===n,onOpenChange:e=>a(e?"knowledge-bases":null),anchorRef:t}),O[70]=t,O[71]=n,O[72]=a,O[73]=$,O[74]=D):D=O[74],O[75]!==t||O[76]!==n||O[77]!==a?(P="no-agents-available"===n&&(0,i.jsx)(ec,{onClose:()=>a(null),returnFocusRef:t}),O[75]=t,O[76]=n,O[77]=a,O[78]=P):P=O[78],O[79]!==t||O[80]!==n||O[81]!==a?(L="agents-not-supported"===n&&(0,i.jsx)(eu,{onClose:()=>a(null),returnFocusRef:t}),O[79]=t,O[80]=n,O[81]=a,O[82]=L):L=O[82],O[83]!==l||O[84]!==N||O[85]!==E||O[86]!==T||O[87]!==D||O[88]!==P||O[89]!==L?(M=(0,i.jsxs)("div",{children:[l,N,E,T,D,P,L]}),O[83]=l,O[84]=N,O[85]=E,O[86]=T,O[87]=D,O[88]=P,O[89]=L,O[90]=M):M=O[90],M});tr.displayName="AttachmentMenu";var ta=n(90051);let ti={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},ts=[{name:ti.agents,icon:j.StackIcon,value:"agents",where:"start"},{name:ti.repositories,icon:j.RepoIcon,value:"repositories",where:"anywhere"},{name:ti.files,icon:j.FileIcon,value:"repositories:files",where:"anywhere"},{name:ti.issues,icon:j.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:ti.pulls,icon:j.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:ti.discussions,icon:j.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],to={is:e=>ts.some(t=>t.value===e)};function tl(e){let t,n,r,a,o,l=(0,s.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(en.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.slug?(a=(0,i.jsxs)(d.l.Description,{variant:"inline",truncate:!0,children:[et.Z3,t.slug]}),l[5]=t.slug,l[6]=a):a=l[6],l[7]!==t.name||l[8]!==n||l[9]!==r||l[10]!==a?(o=(0,i.jsxs)(d.l.Item,{...n,children:[r,t.name,a]}),l[7]=t.name,l[8]=n,l[9]=r,l[10]=a,l[11]=o):o=l[11],o}try{tl.displayName||(tl.displayName="AgentSuggestion")}catch{}function tc(e){let t,n,r,a,o,l,c,m,h=(0,s.c)(20);h[0]!==e?({leadingVisual:t,...n}=e,h[0]=e,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let p=(0,u.useId)(),f=(0,u.useId)();return h[3]!==f||h[4]!==p?(r=(0,y.$)(p,f),h[3]=f,h[4]=p,h[5]=r):r=h[5],h[6]!==t?(a=void 0!==t&&(0,i.jsx)(d.l.LeadingVisual,{children:t}),h[6]=t,h[7]=a):a=h[7],h[8]!==p||h[9]!==n.children?(o=(0,i.jsx)("span",{id:p,children:n.children}),h[8]=p,h[9]=n.children,h[10]=o):o=h[10],h[11]!==f?(l=(0,i.jsx)("span",{className:"d-none","aria-hidden":!0,id:f,children:"Opens in new tab."}),h[11]=f,h[12]=l):l=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(j.LinkExternalIcon,{})}),h[13]=c):c=h[13],h[14]!==n||h[15]!==r||h[16]!==a||h[17]!==o||h[18]!==l?(m=(0,i.jsxs)(d.l.Item,{...n,"aria-labelledby":r,children:[a,o,l,c]}),h[14]=n,h[15]=r,h[16]=a,h[17]=o,h[18]=l,h[19]=m):m=h[19],m}try{tc.displayName||(tc.displayName="LinkSuggestion")}catch{}function td(e){return{value:`@${e.slug}`,render:t=>(0,i.jsx)(tl,{agent:e,...t})}}function tu(e){let t,n,r,a,o,l=(0,s.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(r=void 0!==t&&(0,i.jsx)(d.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(j.ArrowRightIcon,{})}),l[5]=a):a=l[5],l[6]!==n||l[7]!==r?(o=(0,i.jsxs)(d.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,a]}),l[6]=n,l[7]=r,l[8]=o):o=l[8],o}try{tu.displayName||(tu.displayName="MultistepSuggestion")}catch{}function tm(e){let t,n,r,a,o=(0,s.c)(9);o[0]!==e?({category:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let{name:l,icon:c}=n;return o[3]!==c?(r=(0,i.jsx)(c,{}),o[3]=c,o[4]=r):r=o[4],o[5]!==l||o[6]!==t||o[7]!==r?(a=(0,i.jsx)(tu,{leadingVisual:r,...t,children:l}),o[5]=l,o[6]=t,o[7]=r,o[8]=a):a=o[8],a}try{tm.displayName||(tm.displayName="CategorySuggestion")}catch{}let th={asyncSuggestion:"shared-module__asyncSuggestion--lDyxK",stale:"shared-module__stale--IEVWo"};function tp(e){let t,n,r,a,o,l,c,u,m,h,p,f=(0,s.c)(25);f[0]!==e?({discussion:n,stale:a,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a):(t=f[1],n=f[2],r=f[3],a=f[4]);let g=a&&th.stale;return f[5]!==t||f[6]!==g?(o=(0,y.$)(th.asyncSuggestion,g,t),f[5]=t,f[6]=g,f[7]=o):o=f[7],f[8]!==n.state?(l="open"===n.state&&(0,i.jsx)(j.CommentDiscussionIcon,{className:"fgColor-open"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="closed"===n.state&&(0,i.jsx)(j.DiscussionClosedIcon,{className:"fgColor-muted"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==l||f[13]!==c?(u=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c]}),f[12]=l,f[13]=c,f[14]=u):u=f[14],f[15]!==n.title?(m=(0,i.jsx)(ex.A,{title:n.title,maxWidth:350,children:n.title}),f[15]=n.title,f[16]=m):m=f[16],f[17]!==n.number?(h=(0,i.jsxs)(d.l.Description,{children:["#",n.number]}),f[17]=n.number,f[18]=h):h=f[18],f[19]!==r||f[20]!==o||f[21]!==u||f[22]!==m||f[23]!==h?(p=(0,i.jsxs)(d.l.Item,{...r,className:o,children:[u,m,h]}),f[19]=r,f[20]=o,f[21]=u,f[22]=m,f[23]=h,f[24]=p):p=f[24],p}try{tp.displayName||(tp.displayName="DiscussionSuggestion")}catch{}function tf(e){let t,n,r,a,o,l,c,u,m,h,p,f,g,x,v,_=(0,s.c)(35);if(_[0]!==e?({type:o,path:n,stale:a,className:t,...r}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=r,_[4]=a,_[5]=o):(t=_[1],n=_[2],r=_[3],a=_[4],o=_[5]),_[6]!==t||_[7]!==n||_[8]!==r||_[9]!==a||_[10]!==o){let e=n.split("/"),s=e.pop();c=d.l.Item,h=r;let x=a&&th.stale;_[19]!==t||_[20]!==x?(p=(0,y.$)(th.asyncSuggestion,x,t),_[19]=t,_[20]=x,_[21]=p):p=_[21],_[22]!==o?(f=(0,i.jsx)(d.l.LeadingVisual,{children:"folder"===o?(0,i.jsx)(j.FileDirectoryFillIcon,{}):(0,i.jsx)(j.FileIcon,{})}),_[22]=o,_[23]=f):f=_[23],g=s,l=d.l.Description,u="inline",m=e.join("/"),_[6]=t,_[7]=n,_[8]=r,_[9]=a,_[10]=o,_[11]=l,_[12]=c,_[13]=u,_[14]=m,_[15]=h,_[16]=p,_[17]=f,_[18]=g}else l=_[11],c=_[12],u=_[13],m=_[14],h=_[15],p=_[16],f=_[17],g=_[18];return _[24]!==l||_[25]!==u||_[26]!==m?(x=(0,i.jsxs)(l,{variant:u,children:[m,"/"]}),_[24]=l,_[25]=u,_[26]=m,_[27]=x):x=_[27],_[28]!==c||_[29]!==h||_[30]!==p||_[31]!==f||_[32]!==g||_[33]!==x?(v=(0,i.jsxs)(c,{...h,className:p,children:[f,g,x]}),_[28]=c,_[29]=h,_[30]=p,_[31]=f,_[32]=g,_[33]=x,_[34]=v):v=_[34],v}try{tf.displayName||(tf.displayName="FileSuggestion")}catch{}function tg(e){let t,n,r,a,o,l,c,u,m,h,p,f,g=(0,s.c)(28);g[0]!==e?({issue:n,stale:a,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let x=a&&th.stale;return g[5]!==t||g[6]!==x?(o=(0,y.$)(th.asyncSuggestion,x,t),g[5]=t,g[6]=x,g[7]=o):o=g[7],g[8]!==n.state?(l="draft"===n.state&&(0,i.jsx)(j.IssueDraftIcon,{className:"fgColor-neutral"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="open"===n.state&&(0,i.jsx)(j.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==n.state?(u="closed"===n.state&&(0,i.jsx)(j.IssueClosedIcon,{className:"fgColor-done"}),g[12]=n.state,g[13]=u):u=g[13],g[14]!==l||g[15]!==c||g[16]!==u?(m=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c,u]}),g[14]=l,g[15]=c,g[16]=u,g[17]=m):m=g[17],g[18]!==n.title?(h=(0,i.jsx)(ex.A,{title:n.title,maxWidth:350,children:n.title}),g[18]=n.title,g[19]=h):h=g[19],g[20]!==n.number?(p=(0,i.jsxs)(d.l.Description,{children:["#",n.number]}),g[20]=n.number,g[21]=p):p=g[21],g[22]!==r||g[23]!==o||g[24]!==m||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(d.l.Item,{...r,className:o,children:[m,h,p]}),g[22]=r,g[23]=o,g[24]=m,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tg.displayName||(tg.displayName="IssueSuggestion")}catch{}function ty(e){let t,n,r,a,o,l,c,u,m,h,p,f,g=(0,s.c)(28);g[0]!==e?({pullRequest:r,stale:a,className:t,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let x=a&&th.stale;return g[5]!==t||g[6]!==x?(o=(0,y.$)(th.asyncSuggestion,x,t),g[5]=t,g[6]=x,g[7]=o):o=g[7],g[8]!==r.state?(l="draft"===r.state&&(0,i.jsx)(j.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),g[8]=r.state,g[9]=l):l=g[9],g[10]!==r.state?(c="open"===r.state&&(0,i.jsx)(j.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=r.state,g[11]=c):c=g[11],g[12]!==r.state?(u="closed"===r.state&&(0,i.jsx)(j.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=r.state,g[13]=u):u=g[13],g[14]!==l||g[15]!==c||g[16]!==u?(m=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c,u]}),g[14]=l,g[15]=c,g[16]=u,g[17]=m):m=g[17],g[18]!==r.title?(h=(0,i.jsx)(ex.A,{title:r.title,maxWidth:350,children:r.title}),g[18]=r.title,g[19]=h):h=g[19],g[20]!==r.number?(p=(0,i.jsxs)(d.l.Description,{children:["#",r.number]}),g[20]=r.number,g[21]=p):p=g[21],g[22]!==n||g[23]!==o||g[24]!==m||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(d.l.Item,{...n,className:o,children:[m,h,p]}),g[22]=n,g[23]=o,g[24]=m,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{ty.displayName||(ty.displayName="PullRequestSuggestion")}catch{}function tx(e){let t,n,r,a,o,l,c,u,m=(0,s.c)(18);m[0]!==e?({repository:a,isMultistep:n,stale:o,className:t,...r}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=a,m[5]=o):(t=m[1],n=m[2],r=m[3],a=m[4],o=m[5]);let h=o&&th.stale;m[6]!==t||m[7]!==h?(l=(0,y.$)(th.asyncSuggestion,h,t),m[6]=t,m[7]=h,m[8]=l):l=m[8];let p=l;m[9]!==a.isInOrganization||m[10]!==a.ownerAvatarUrl?(c=a.ownerAvatarUrl?(0,i.jsx)(en.r,{src:a.ownerAvatarUrl,alt:"",size:16,square:a.isInOrganization}):(0,i.jsx)(j.RepoIcon,{}),m[9]=a.isInOrganization,m[10]=a.ownerAvatarUrl,m[11]=c):c=m[11];let f=c;return m[12]!==f||m[13]!==p||m[14]!==n||m[15]!==r||m[16]!==a.nwo?(u=n?(0,i.jsx)(tu,{...r,className:p,leadingVisual:f,children:a.nwo},a.nwo):(0,i.jsxs)(d.l.Item,{...r,className:p,children:[(0,i.jsx)(d.l.LeadingVisual,{children:f}),a.nwo]},a.nwo),m[12]=f,m[13]=p,m[14]=n,m[15]=r,m[16]=a.nwo,m[17]=u):u=m[17],u}try{tx.displayName||(tx.displayName="RepositorySuggestion")}catch{}function tv(e){return{value:null,key:e.value,render:t=>(0,i.jsx)(tm,{category:e,...t})}}function t_(e){return null!==e}function tb(e){let t,n,r=(0,s.c)(3),[a,i]=(0,u.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&i(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>i(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,u.useEffect)(t,n),a}function tS(e){return e}function tC(e){return e}function tj(e){return e}var tw=n(6612);function tN(e){let t,n,r,a,o=(0,s.c)(9);return o[0]!==e?({org:t,...n}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==t.avatarUrl?(r=(0,i.jsx)(en.r,{square:!0,src:t.avatarUrl}),o[3]=t.avatarUrl,o[4]=r):r=o[4],o[5]!==t.login||o[6]!==n||o[7]!==r?(a=(0,i.jsx)(tc,{leadingVisual:r,...n,children:t.login}),o[5]=t.login,o[6]=n,o[7]=r,o[8]=a):a=o[8],a}function tI(e){let t,n,r,a=(0,s.c)(7);return a[0]!==e?({orgs:t,...n}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==t[0]?.login||a[4]!==t.length||a[5]!==n?(r=1===t.length?(0,i.jsxs)(tc,{leadingVisual:(0,i.jsx)(j.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,i.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,i.jsx)(tu,{leadingVisual:(0,i.jsx)(j.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),a[3]=t[0]?.login,a[4]=t.length,a[5]=n,a[6]=r):r=a[6],r}try{tN.displayName||(tN.displayName="SSOOrgSuggestion")}catch{}try{tI.displayName||(tI.displayName="SSOPromptSuggestion")}catch{}let tE=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tR(e){return{value:null,key:`open-link:${tE(e)}`,render:t=>(0,i.jsx)(tN,{org:e,...t})}}let tT=e=>(t,n)=>e.has(t.databaseId)&&!e.has(n.databaseId)?-1:e.has(n.databaseId)&&!e.has(t.databaseId)?1:0,tk=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tA(e){let t,n,r,a,l,c,m,h,p,f,g=(0,s.c)(25),{children:y,onSelectReference:x,onShowAgentsDialog:v}=e,{mode:_}=(0,k.Pk)(),[b,S]=(0,u.useState)(tD);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>S(!0),n=[],g[0]=t,g[1]=n):(t=g[0],n=g[1]),(0,u.useEffect)(t,n);let[C,w]=(0,u.useState)(null),{suggestions:N,stale:I}=function(e){let t=(0,s.c)(7),n=function(e){let t,n=(0,s.c)(3),{currentReferences:r}=(0,k.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=r.map(e=>{let t=D.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tx,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tg,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(ty,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tp,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:D.Q.stringify(t),render:n=>(0,i.jsx)(tf,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(t_),l=ts.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(tv);if(l.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{...e}),(0,i.jsx)(d.l.Divider,{})]})}}a=o.concat(l),n[0]=r,n[1]=e,n[2]=a}else a=n[2];t=a}return t}(e?.category==="categories"?e:null),r=function(e){let t,n=(0,s.c)(4),{availableAgents:r,loading:a,showLimit:o,disabled:l}=(0,et.JE)(null!==e);e:{let s;if(l||!e){t=null;break e}if(a&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==o?(s=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(td).concat({value:null,key:`open-link:${et.bn}`,render:e=>(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(tc,{leadingVisual:(0,i.jsx)(j.TelescopeIcon,{}),...e,inactiveText:o?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=o,n[3]=s):s=n[3],t=s}return t}(e?.category==="agents"?e:null),a=function(e){let{currentReferences:t}=(0,k.Pk)(),n=tb(e),r=e!==n,{repositories:a,loading:s}=(0,tw.U)(n?.filter??"",null!==n),o=(0,u.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,k.Pk)();return{suggestions:(0,u.useMemo)(()=>{if(!n)return null;if("initial"===s)return"loading";let e=void 0!==n.nextCategory,t=a.toSorted(tT(o)).slice(0,5).map(t=>({value:e?null:D.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,i.jsx)(tx,{repository:t,isMultistep:e,stale:!!s||r,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tE(l[0])}`:"sso-orgs",render:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(tI,{orgs:l,...e})]})}),t},[a,s,n,o,l,r]),stale:!0===s}}(e?.category==="repositories"?e:null),o=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,A.b)(),d=tb(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-issues",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tC},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eM.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:D.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tg,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="issues"?e:null),l=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,A.b)(),d=tb(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-pulls",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tj},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eM.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:D.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(ty,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="pulls"?e:null),c=function(e){let t,n,r,a,o,l=(0,s.c)(18),{service:c}=(0,A.b)(),d=tb(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-discussions",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tS},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eM.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==f.data||l[12]!==f.isPlaceholderData||l[13]!==u?(e=f.data?.map(e=>({value:D.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tp,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=f.data,l[12]=f.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(o={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=o):o=l[17],o}(e?.category==="discussions"?e:null),m=function(e){let t,n,r,a,o,l,c,d,u,m=(0,s.c)(23),h=(0,A.b)(),p=null!==e,f=e?.repository;m[0]!==f?(t=["copilot-repository",f],m[0]=f,m[1]=t):t=m[1],m[2]!==h||m[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await h.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},m[2]=h,m[3]=e?.repository,m[4]=n):n=m[4],m[5]!==p||m[6]!==t||m[7]!==n?(r={enabled:p,queryKey:t,queryFn:n,staleTime:3e5},m[5]=p,m[6]=t,m[7]=n,m[8]=r):r=m[8];let g=(0,eM.I)(r),y=eU(g.data??null);y.data?.directories,m[9]!==y.data?.directories?(o=y.data?.directories??[],m[9]=y.data?.directories,m[10]=o):o=m[10],m[11]!==o?(l=new Set(o),m[11]=o,m[12]=l):l=m[12],a=l,m[13]!==y.data?(c=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,m[13]=y.data,m[14]=c):c=m[14];let x=eF(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(g.isLoading||y.isLoading||x.isLoading){d="loading";break e}m[15]!==a||m[16]!==x.data||m[17]!==x.isPlaceholderData||m[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:D.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,i.jsx)(tf,{...e,path:t,type:a.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],m[15]=a,m[16]=x.data,m[17]=x.isPlaceholderData,m[18]=e,m[19]=t):t=m[19];let n=t;d=n.length>0?n:null}let v=d;return m[20]!==g.isPlaceholderData||m[21]!==v?(u={suggestions:v,stale:g.isPlaceholderData},m[20]=g.isPlaceholderData,m[21]=v,m[22]=u):u=m[22],u}(e?.category==="files"?e:null),h=function(e){let t,n=(0,s.c)(5),{ssoOrganizations:r}=(0,k.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tR),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return a;case"issues":return o;case"agents":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return l;case"files":return m;case"sso-orgs":{let e;return t[5]!==h?(e={suggestions:h,stale:!1},t[5]=h,t[6]=e):e=t[6],e}}}(C);if(g[2]!==v||g[3]!==C?(r={query:C,onShowAgentsDialog:v},g[2]=v,g[3]=C,g[4]=r):r=g[4],!function(e){let t,n,r=(0,s.c)(12),{query:a,onShowAgentsDialog:i}=e,o=a?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,et.JE)(o);r[0]!==o||r[1]!==l?.length||r[2]!==d||r[3]!==c||r[4]!==i?(t=()=>{o&&!c&&(d?i("agents-not-supported"):l?.length||i("no-agents-available"))},r[0]=o,r[1]=l?.length,r[2]=d,r[3]=c,r[4]=i,r[5]=t):t=r[5],r[6]!==o||r[7]!==l||r[8]!==d||r[9]!==c||r[10]!==i?(n=[o,c,l,d,i],r[6]=o,r[7]=l,r[8]=d,r[9]=c,r[10]=i,r[11]=n):n=r[11],(0,u.useEffect)(t,n)}(r),!b){let e;return g[5]!==y?(e=(0,i.jsx)("div",{children:y}),g[5]=y,g[6]=e):e=g[6],e}g[7]!==_||g[8]!==x||g[9]!==C?(a=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,o.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:_,suggestion:n});let r=null!==n&&C?.category!=="agents"?D.Q.parse(n):void 0;if(r&&x(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){w(null),window.open(a[1],"_blank");return}switch(C?.category){case"categories":to.is(t.key)&&w(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?w({category:"sso-orgs",filter:""}):C.nextCategory&&w({category:C.nextCategory,filter:"",repository:t.key})}},g[7]=_,g[8]=x,g[9]=C,g[10]=a):a=g[10];let E=a;g[11]===Symbol.for("react.memo_cache_sentinel")?(l=e=>w(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),g[11]=l):l=g[11];let R=l;g[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>w(null),g[12]=c):c=g[12];let T=c;return g[13]!==C?(m=C&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${ti[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return ti[e.category];case"discussions":case"issues":case"pulls":case"files":return`${ti[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(C)||void 0,g[13]=C,g[14]=m):m=g[14],g[15]!==y||g[16]!==E||g[17]!==N||g[18]!==m?(h=(0,i.jsx)(ta.a,{fullWidth:!0,suggestions:N,triggers:tk,tabInsertsSuggestions:!1,onHideSuggestions:T,onShowSuggestions:R,onSelectSuggestion:E,suggestionsPlacement:"above",title:m,asMenu:!0,children:y}),g[15]=y,g[16]=E,g[17]=N,g[18]=m,g[19]=h):h=g[19],g[20]!==I?(p=I&&(0,i.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),g[20]=I,g[21]=p):p=g[21],g[22]!==h||g[23]!==p?(f=(0,i.jsxs)(i.Fragment,{children:[h,p]}),g[22]=h,g[23]=p,g[24]=f):f=g[24],f}function tD(){return"undefined"!=typeof document}try{tA.displayName||(tA.displayName="ChatInputAutocomplete")}catch{}let tP={container:"ChatInput-module__container--NFzCy",input:"ChatInput-module__input--iApWs",clicked:"ChatInput-module__clicked--hHA9l",attachments:"ChatInput-module__attachments--a9G6d",inputContainer:"ChatInput-module__inputContainer--BcExV",inputPreview:"ChatInput-module__inputPreview--f_0H3",toolbar:"ChatInput-module__toolbar--ZtCiG",toolbarLeft:"ChatInput-module__toolbarLeft--cjV2H",toolbarRight:"ChatInput-module__toolbarRight--PiQJn",containerSmall:"ChatInput-module__containerSmall--PJkO5"};var tL=n(13897),tM=n(10370);let tO=(0,u.forwardRef)(function(e,t){let n,r,a,o,l,c=(0,s.c)(14),{text:d}=e;c[0]!==d?(n=(0,tL._)(d),c[0]=d,c[1]=n):n=c[1];let{availableAgents:m}=(0,et.JE)(n);c[2]!==m?(r=void 0===m?[]:m,c[2]=m,c[3]=r):r=c[3];let h=r,{currentReferences:p}=(0,k.Pk)(),f=(0,A.b)(),y=(0,R.l)().use(P.U,{references:p,agents:h}).parse(d),x=(0,tL.O)(y),v=(0,u.useRef)(x);c[4]!==p||c[5]!==f||c[6]!==x?(a=function(){for(let e of v.current)if(!x.has(e)){let t=p.find(t=>(0,g.Vb)(t)===e);t&&f.removeReference(t)}v.current=x},c[4]=p,c[5]=f,c[6]=x,c[7]=a):a=c[7],(0,u.useEffect)(a),c[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,b.G)("copilot-chat-input-textarea-preview"),c[8]=o):o=c[8];let _=y.children.map(tF);return c[9]!==t||c[10]!==_||c[11]!==o||c[12]!==tP.inputPreview?(l=(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...o,"aria-hidden":!0,className:tP.inputPreview,ref:t,role:"presentation",children:_}),c[9]=t,c[10]=_,c[11]=o,c[12]=tP.inputPreview,c[13]=l):l=c[13],l});try{tO.displayName||(tO.displayName="ChatInputPreview")}catch{}function tF(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:tM.A.mention,...(0,b.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,i.jsx)("span",{className:tM.A.mention,children:e.value},t)}}var tB=n(69676),tU=n(82678),t$=n(63867),tV=n(5878),tq=n(33900);let tW={container:"ChatInputReferences-module__container--kZx3r",attachmentsList:"ChatInputReferences-module__attachmentsList--c0Z3e",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--qEVr3",loading:"ChatInputReferences-module__loading--G1S4m",divider:"ChatInputReferences-module__divider--m7eF_",menuButton:"ChatInputReferences-module__menuButton--R82CM",functionLoading:"ChatInputReferences-module__functionLoading--_Tp1T",convertToFileButton:"ChatInputReferences-module__convertToFileButton--JUfME",hoveringDismissConvertToFile:"ChatInputReferences-module__hoveringDismissConvertToFile--BVZ5r",convertToFileButtonContent:"ChatInputReferences-module__convertToFileButtonContent--pQ4zi"};var tG=n(53655);let tz=(0,u.memo)(e=>{let t,n,r,a,o,l,m,h,p,f,x,v,_,S,C,w,I,E=(0,s.c)(45),{className:R,isLoading:T,returnFocusRef:D,tokenSize:P,onSelectReference:L,getReferenceVersion:M,showConvertToFileText:O,onConvertToFile:F,onConvertToFileDismiss:B}=e,$=void 0===P?"medium":P,{currentReferences:V}=(0,k.Pk)(),q=(0,A.b)(),W=(0,u.useRef)(null),G=(0,tV.g)(W),[z,H]=(0,u.useState)(!1);E[0]!==V?(n=(0,g.rT)(V),E[0]=V,E[1]=n):n=E[1],t=n;let Q=(0,u.useRef)(null);E[2]===Symbol.for("react.memo_cache_sentinel")?(r={containerRef:Q,focusableElementFilter:tQ,bindKeys:tB.z0.ArrowHorizontal|tB.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},E[2]=r):r=E[2],E[3]!==t?(a=[t],E[3]=t,E[4]=a):a=E[4],(0,tU.G)(r,a),E[5]===Symbol.for("react.memo_cache_sentinel")?(o=[],E[5]=o):o=E[5];let K=(0,u.useRef)(o),J=(e,t)=>{let n=K.current[t+1]??K.current[t-1]??D.current;n?.focus(),q.removeReference(e)};E[6]!==q||E[7]!==D?(l=()=>{setTimeout(()=>D.current?.focus()),q.clearCurrentReferences()},E[6]=q,E[7]=D,E[8]=l):l=E[8];let X=l,Y=(0,u.useRef)(t);E[9]!==t?(m=()=>{if(Y.current.length<t.length){let e=t.find(e=>!Y.current.find(t=>(0,g.x_)(t,e))),n=e?t.indexOf(e):-1;K?.current?.[n]?.scrollIntoView({behavior:"smooth",inline:"end"})}Y.current=t},h=[t],E[9]=t,E[10]=m,E[11]=h):(m=E[10],h=E[11]),(0,U.N)(m,h),E[12]!==B?(p=()=>{H(!1),B?.()},E[12]=B,E[13]=p):p=E[13];let Z=p,ee=(0,u.useId)();E[14]!==Z||E[15]!==O?(f=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),O&&Z())},E[14]=Z,E[15]=O,E[16]=f):f=E[16];let et=f;if(0===t.length&&!T&&!O)return null;E[17]!==R?(x=(0,y.$)(R,tW.container),E[17]=R,E[18]=x):x=E[18];let en=G&&tW.scrolledToEnd,er=T&&tW.loading;E[19]!==en||E[20]!==er?(v=(0,y.$)(tW.attachmentsList,en,er),E[19]=en,E[20]=er,E[21]=v):v=E[21],E[22]!==ee||E[23]!==Z||E[24]!==z||E[25]!==F||E[26]!==et||E[27]!==O||E[28]!==$?(_=O&&(0,i.jsx)(N.Q,{onClick:F,leadingVisual:j.FileIcon,className:(0,y.$)(tW.convertToFileButton,z&&tW.hoveringDismissConvertToFile),"aria-describedby":ee,onKeyDown:et,children:(0,i.jsxs)("div",{className:tW.convertToFileButtonContent,children:["Convert to file",(0,i.jsx)(tG.lh,{size:$,onRemove:Z,descriptionId:ee,onMouseOver:()=>H(!0),onMouseLeave:()=>H(!1)})]})}),E[22]=ee,E[23]=Z,E[24]=z,E[25]=F,E[26]=et,E[27]=O,E[28]=$,E[29]=_):_=E[29];let ea=t.map((e,t)=>"repository"===e.type?(0,i.jsx)(tH,{reference:e,ref:e=>{K.current[t]=e},"data-index":t,size:$,onRemove:()=>J(e,t),onClick:L,getReferenceVersion:M},(0,g.Vb)(e)):(0,i.jsx)(tG.BR,{reference:e,ref:e=>{K.current[t]=e},"data-index":t,size:$,onRemove:()=>J(e,t),onClick:L,getReferenceVersion:M},(0,g.Vb)(e)));return E[30]!==T?(S=T&&(0,i.jsxs)("div",{className:tW.functionLoading,...(0,b.G)("loading-indicator"),children:[(0,i.jsx)(t$.A,{size:"small"}),"Retrieving\u2026"]}),E[30]=T,E[31]=S):S=E[31],E[32]!==v||E[33]!==_||E[34]!==ea||E[35]!==S?(C=(0,i.jsxs)("div",{className:v,ref:W,children:[_,ea,S]}),E[32]=v,E[33]=_,E[34]=ea,E[35]=S,E[36]=C):C=E[36],E[37]!==X||E[38]!==t.length||E[39]!==$?(w=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tW.divider}),(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(eh.K,{icon:j.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tW.menuButton,size:$})}),(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsx)(d.l,{children:(0,i.jsxs)(d.l.Item,{onSelect:X,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(j.TrashIcon,{})}),"Remove attachments"]})})})]})]}),E[37]=X,E[38]=t.length,E[39]=$,E[40]=w):w=E[40],E[41]!==x||E[42]!==C||E[43]!==w?(I=(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:x,ref:Q,children:[C,w]}),E[41]=x,E[42]=C,E[43]=w,E[44]=I):I=E[44],I});tz.displayName="ChatInputReferences";let tH=(0,u.forwardRef)(function(e,t){let n,r,a,o=(0,s.c)(8),l=e.reference,c=(0,k.pn)(tK),d=`${l.ownerLogin}/${l.name}`,[m,h]=(0,tq.vn)(d),p=(0,u.useRef)(!1),f=m.code===tq.W5.Unindexed||m.docs===tq.W5.Unindexed;return o[0]!==c||o[1]!==f||o[2]!==h?(n=function(){!p.current&&f&&c&&(p.current=!0,h())},r=[c,f,h],o[0]=c,o[1]=f,o[2]=h,o[3]=n,o[4]=r):(n=o[3],r=o[4]),(0,u.useEffect)(n,r),o[5]!==e||o[6]!==t?(a=(0,i.jsx)(tG.BR,{ref:t,...e}),o[5]=e,o[6]=t,o[7]=a):a=o[7],a});try{tH.displayName||(tH.displayName="RepoReferenceToken")}catch{}try{tH.displayName||(tH.displayName="RepoReferenceToken")}catch{}function tQ(e){return!e.hasAttribute("aria-hidden")}function tK(e){return e.model&&!e.model.hasLimitedCapabilities}var tJ=n(9591),tX=n(55864),tY=n(65607),tZ=n(93116),t0=n(73451);let t1={dialogForm:"ConfigureMcpServersMenu-module__dialogForm--axjnZ",underline:"ConfigureMcpServersMenu-module__underline--Ii6ZO",inputError:"ConfigureMcpServersMenu-module__inputError--xZK7_",formField:"ConfigureMcpServersMenu-module__formField--nch6o",hiddenSubmitButton:"ConfigureMcpServersMenu-module__hiddenSubmitButton--rguJJ"},t2=(0,i.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),t3=({panel:e,onPanelChange:t})=>{let[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),[s,o]=(0,u.useState)(""),[l,c]=(0,u.useState)(""),[d,m]=(0,u.useState)(null);(0,u.useEffect)(()=>{"add-mcp"===e&&r(!0)},[e]);let h=(0,u.useCallback)(()=>{r(!1),o(""),c(""),m(null),t(null)},[t]),p=()=>""!==l.trim(),f=async e=>{if(e&&e.preventDefault(),!p()){l.trim()||m("MCP server URL is required");return}try{if(m(null),!function(e){try{let t=new URL(e.trim(),window.location.origin);return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)}catch{return!1}}(l))return void m("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",l.trim()),e.append("name",s.trim());let t=await (0,E.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);"unsupported_server_type"===t.error?e=(0,i.jsxs)(i.Fragment,{children:["This server does not conform to the ",t2,"."]}):t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")?(0,i.jsxs)(i.Fragment,{children:["This server does not conform to the ",t2,"."]}):n||e}}catch{e="Failed to add MCP server"}m(e);return}let n=(await t.json()).redirect_url;n&&"string"==typeof n?(h(),window.location.assign(n)):h()}catch(e){e instanceof Error?m(e.message):m("An unknown error occurred")}};return(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsx)(el.l,{title:"Add remote MCP",onClose:h,footerButtons:[{buttonType:"default",content:"Cancel",onClick:h},{buttonType:"primary",content:(0,i.jsxs)(i.Fragment,{children:["Connect to MCP",(0,i.jsx)("span",{style:{marginLeft:8},children:(0,i.jsx)(j.LinkExternalIcon,{size:16})})]}),onClick:()=>{f()}}],returnFocusRef:a,children:(0,i.jsxs)("form",{className:t1.dialogForm,onSubmit:f,autoComplete:"on",children:[(0,i.jsxs)(t0.A,{className:t1.formField,children:[(0,i.jsx)(t0.A.Label,{children:"Name"}),(0,i.jsx)(tJ.A,{name:"mcp-server-name",type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Enter a name for this MCP",autoComplete:"on",block:!0})]}),(0,i.jsxs)(t0.A,{required:!0,className:t1.formField,children:[(0,i.jsx)(t0.A.Label,{children:"MCP server URL"}),(0,i.jsx)(tJ.A,{name:"mcp-url",type:"url",value:l,onChange:e=>{c(e.target.value),m(null)},placeholder:"https://mcp.example.com/sse",className:d?t1.inputError:void 0,autoComplete:"on",block:!0}),d&&(0,i.jsx)(t0.A.Validation,{variant:"error",children:d})]}),(0,i.jsx)("button",{type:"submit",className:t1.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,i.jsxs)("p",{children:["MCP data will be processed by models coming from third-party providers. Always review the permissions required by the MCP and only connect to MCPs you know and trust. You can revoke access for the MCP at any time in"," ",(0,i.jsx)("a",{href:"/settings",className:t1.underline,children:"your settings"}),"."]})]})})})};try{t2.displayName||(t2.displayName="MCP_SPEC_LINK")}catch{}try{t3.displayName||(t3.displayName="ConfigureMcpServersMenu")}catch{}let t4={container:"McpToolsManager-module__container--cYWPI",header:"McpToolsManager-module__header--Oajnd",headerTitle:"McpToolsManager-module__headerTitle--gw2Fr",searchInput:"McpToolsManager-module__searchInput--EnBEo",contentArea:"McpToolsManager-module__contentArea--QjXge",loadingContainer:"McpToolsManager-module__loadingContainer--BSyl_",emptyState:"McpToolsManager-module__emptyState--nZxUC",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--AaZZo",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--xBhZh",footer:"McpToolsManager-module__footer--dAl5m"},t5=({anchorRef:e,open:t,onOpenChange:n,onSelectionChange:r})=>{let[a,s]=(0,u.useState)(!1),[o,l]=(0,u.useState)(null),[c,d]=(0,u.useState)([]),[m,h]=(0,u.useState)(!1),[p,f]=(0,u.useState)(null),[g,y]=(0,u.useState)(()=>new Set),[x,v]=(0,u.useState)(""),_=e=>{y(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},b=(0,u.useCallback)(()=>{let e=[];for(let t of c)g.has(t.id)&&e.push({serverId:t.id,serverText:t.text});return e},[c,g]);u.useEffect(()=>{let e=b();r?.(e)},[g,c,b,r]),(0,u.useEffect)(()=>{t&&S()},[t]);let S=async()=>{h(!0),f(null);try{let e=await fetch("/copilot/mcp/servers.json",{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let t=await e.json();d(t.servers)}catch(e){f(e instanceof Error?e.message:"Failed to load MCP servers")}finally{h(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ey.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,renderAnchor:()=>(0,i.jsx)(i.Fragment,{}),width:"medium",children:(0,i.jsxs)("div",{className:t4.container,children:[(0,i.jsxs)("div",{className:t4.header,children:[(0,i.jsx)("div",{className:t4.headerTitle,children:"Select MCP servers"}),(0,i.jsx)(tJ.A,{placeholder:"Search by provider",value:x,onChange:e=>v(e.target.value),className:t4.searchInput,leadingVisual:j.SearchIcon})]}),(0,i.jsx)("div",{className:t4.contentArea,children:m?(0,i.jsx)("div",{className:t4.loadingContainer,children:(0,i.jsx)(t$.A,{})}):p?(0,i.jsxs)(tZ.E,{children:[(0,i.jsx)(tZ.E.Visual,{children:"\u26A0\uFE0F"}),(0,i.jsx)(tZ.E.Heading,{children:"Error loading tools"})]}):0===c.length?(0,i.jsxs)("div",{className:t4.emptyState,children:[(0,i.jsx)(j.ToolsIcon,{size:24}),(0,i.jsx)("div",{className:t4.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,i.jsx)("div",{className:t4.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,i.jsx)(tX.G,{"aria-label":"MCP server selection","aria-multiselectable":"true",children:c.filter(e=>e.text.toLowerCase().includes(x.toLowerCase())).map(e=>{let t=g.has(e.id);return(0,i.jsxs)(tX.G.Item,{id:e.id,onSelect:()=>_(e.id),current:t,"aria-selected":t,children:[(0,i.jsx)(tX.G.LeadingVisual,{children:(0,i.jsx)(tY.A,{checked:t,readOnly:!0,"aria-label":`Select ${e.text}`})}),e.text,(0,i.jsx)(tX.G.SubTree,{})]},e.id)})})}),(0,i.jsx)("div",{className:t4.footer,children:(0,i.jsx)(N.Q,{variant:"default",leadingVisual:j.PlusIcon,onClick:()=>{s(!0),l("add-mcp")},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),a&&(0,i.jsx)(t3,{panel:o,onPanelChange:e=>{l(e),!e&&(s(!1),t&&S())}})]})};try{t5.displayName||(t5.displayName="McpToolsManager")}catch{}let t6=()=>{let e,t,n=(0,s.c)(3),[r,a]=(0,u.useState)(!1),o=(0,u.useRef)(null);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(N.Q,{ref:o,leadingVisual:j.SlidersIcon,variant:"invisible","aria-label":"MCP Tools",onClick:()=>a(!0),children:"Tools"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)(t5,{anchorRef:o,open:r,onOpenChange:a})]}),n[1]=r,n[2]=t):t=n[2],t};try{t6.displayName||(t6.displayName="McpToolMenu")}catch{}var t7=n(66912),t8=n(31637);let t9=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],ne=e=>{let t,n,r,a,c,d,m,h,p,x,v,_,j,N,V,q,Z,ee,et,en,er,ea,ei,es,eo,el,ec,ed,eu,em,eh,ep,ef,eg,ey=(0,s.c)(154),ex=(0,k.Pk)(),ev=(0,A.b)();ey[0]!==ev?(t=ev.maxMessagesReached(),ey[0]=ev,ey[1]=t):t=ey[1];let e_=t,[eb,eS]=(0,u.useState)(null),eC="loading"===ex.slashCommandLoading.state,{safeSetTimeout:ej}=(0,w.A)(),{isLicensedLimited:ew}=(0,t8.xR)(),{onSelectReference:eN}=e,eI=(0,u.useRef)(null),eE=(0,u.useRef)(""),eR=(0,u.useRef)(!1),{activeCopilotSpaceId:eT}=(0,f.C)();ey[2]!==eb||ey[3]!==ex.mode?(n=e=>{eI.current=null,eE.current="",eR.current=!1,eb&&(eS(null),void 0!==e&&e&&(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:ex.mode}))},ey[2]=eb,ey[3]=ex.mode,ey[4]=n):n=ey[4];let ek=n,eA=ex.isWaitingOnCopilot||ex.isWaitingOnAttachment||eC;ey[5]!==ek||ey[6]!==e.onSubmit||ey[7]!==e.textAreaRef||ey[8]!==eA?(r={isLoading:eA,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:ek},ey[5]=ek,ey[6]=e.onSubmit,ey[7]=e.textAreaRef,ey[8]=eA,ey[9]=r):r=ey[9];let{typingHasStarted:eD,textAreaRef:eP,textareaPreviewRef:eL,textAreaPreviewContainerRef:eM,text:eO,setText:eF,handleSubmit:eB,handleSubmitToNewThread:eU,handleScroll:e$,handleChange:eV,handleStop:eq,handleFocus:eW}=function(e){let t=(0,k.Pk)(),n=(0,A.b)(),{selectedThreadID:r,mode:a,autoSubmit:i,model:s}=t,{clearPastedFile:c,isLoading:d,onSubmit:m}=e,h=$.J.getSavedMessage(r),p=$.J.getSavedUserMessageOnError(r),{pathname:f}=(0,l.zy)(),[g,y]=(0,l.ok)(),[x,v]=(0,u.useState)(()=>z(t.mode,f,g)??p??h??""),[_,b]=(0,u.useState)(!1),S=(0,u.useRef)(null),C=e.textAreaRef||S,j=(0,u.useRef)(null),w=(0,u.useRef)(null),N=(0,u.useRef)(0),I=(0,u.useRef)(null),E=(0,u.useRef)(()=>{}),R=(0,u.useRef)(!1),T=(0,G.GF)(t.availableModels),D=(0,u.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,u.useEffect)(()=>{D()},[D]),(0,u.useEffect)(()=>{$.J.setSavedMessage(r,x)},[r,x]),(0,U.N)(()=>{let e=0;!function t(){if(!C.current||!w.current||!j.current)return;e++,0===C.current.scrollHeight&&e<10&&setTimeout(t,1),C.current.style.height="0";let n=C.current.scrollHeight,r=Math.min(n,300);j.current.style.height=`${n}px`,C.current.style.height=`${n}px`,w.current.style.height=`${r}px`}()},[x,C,j]);let P=(0,u.useCallback)(()=>{C?.current&&j?.current&&w?.current&&(j.current.scrollTop=C.current.scrollTop,j.current.scrollLeft=C.current.scrollLeft)},[C]),L=(0,u.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),M=(0,u.useCallback)(async e=>{if(b(!1),$.J.clearSavedUserMessage(r),$.J.clearSavedUserMessageOnError(r),t.defaultRecipient&&!x.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await W(x,t,n)){(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:x}),"/new"===x.trim()&&$.J.setSavedMessageFast(r,null),v("");return}if(!d){let e=x;if(!e){let[t,r]=n.tryInferMessage(L);if(!t||!r)return;e=r}v(""),await m?.(e)}},[d,n,m,r,L,t,x]),O=(0,u.useCallback)(()=>n.sendMessageToNewThread(r,x,L,t.context,T),[n,r,t.context,L,x,T]);(0,u.useEffect)(()=>{(async()=>{let e=z(a,f,g),t=new URLSearchParams(g),n=t.get("model"),r=!n||n===s.id;e&&r&&!R.current&&(t.delete("prompt"),t.delete("model"),(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),y(t,{replace:!0}),i&&(R.current=!0,await Promise.resolve(),await M()))})()},[f,g,y,a,i,s,M]);let F=(0,u.useCallback)(e=>{b(!0),C?.current&&(v(e.target.value),c?.(),N.current=0,P())},[P,c,C]),B=(0,u.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{I.current=setTimeout(()=>e(r),6e3)}),E.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,u.useEffect)(()=>{E.current&&(E.current(),E.current=()=>{})},[t.messages]),(0,u.useEffect)(()=>()=>{I.current&&(clearTimeout(I.current),I.current=null),n.cancelThreadReload(),E.current=()=>{}},[n]),{typingHasStarted:_,textAreaRef:C,textareaPreviewRef:j,textAreaPreviewContainerRef:w,text:x,setText:v,handleSubmit:M,handleSubmitToNewThread:O,handleScroll:P,handleChange:F,handleStop:B,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}(r);ey[10]!==eV||ey[11]!==eP?(a={inputRef:eP,fallbackEventHandler:eV},ey[10]=eV,ey[11]=eP,ey[12]=a):a=ey[12];let eG=(0,C.H)(a);ey[13]!==eG||ey[14]!==e.figmaAuthUrl||ey[15]!==eP?(c={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eP,emitChange:eG},ey[13]=eG,ey[14]=e.figmaAuthUrl,ey[15]=eP,ey[16]=c):c=ey[16];let{replaceUrlWithReferenceMention:ez}=function(e){let t,n,r,a,i,o,l,c,d,u,m,h,p,f=(0,s.c)(37),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,_=(0,A.b)(),{currentReferences:b}=(0,k.Pk)();f[0]!==v||f[1]!==x?(t=(e,t,n)=>{if(!x.current||e===t)return;let r=n?.[0]??0,a=x.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;v(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},f[0]=v,f[1]=x,f[2]=t):t=f[2];let S=t;f[3]!==_?(n=e=>{let{itemUrl:t}=e,n=(0,g.Vc)(t);return _.addReference(n,"url-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),n},f[3]=_,f[4]=n):n=f[4],f[5]!==S||f[6]!==_?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;_.replaceReference(n,e);let a=D.Q.for(e);if(!a)return;let i=D.Q.stringify(r),s=D.Q.stringify(a);i!==s&&S(i,s)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;_.removeReference(n),S(D.Q.stringify(a),r)},f[5]=S,f[6]=_,f[7]=r,f[8]=a):(r=f[7],a=f[8]),f[9]!==_?(i=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[9]=_,f[10]=i):i=f[10],f[11]!==n||f[12]!==r||f[13]!==a||f[14]!==i?(o={mutationFn:B,onMutate:n,onSuccess:r,onError:a,onSettled:i},f[11]=n,f[12]=r,f[13]=a,f[14]=i,f[15]=o):o=f[15];let C=(0,I.n)(o);f[16]!==_?(l=e=>{let t=(0,g.Vc)(e);return _.addReference(t,"figma-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),t},c=(e,t,n)=>{_.replaceReference(n,e)},f[16]=_,f[17]=l,f[18]=c):(l=f[17],c=f[18]),f[19]!==y||f[20]!==_?(d=(e,t,n)=>{n&&y&&e instanceof O?_.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):_.removeReference(n)},f[19]=y,f[20]=_,f[21]=d):d=f[21],f[22]!==_?(u=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[22]=_,f[23]=u):u=f[23],f[24]!==u||f[25]!==l||f[26]!==c||f[27]!==d?(m={mutationFn:F,onMutate:l,onSuccess:c,onError:d,onSettled:u},f[24]=u,f[25]=l,f[26]=c,f[27]=d,f[28]=m):m=f[28];let j=(0,I.n)(m);f[29]!==b||f[30]!==j||f[31]!==S||f[32]!==C||f[33]!==x?(h=e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=D.Q.fromUrl(t);n&&(b.every(e=>!D.Q.refersTo(n,e))&&C.mutate({itemUrl:t,parsedReferenceMention:n}),S(t,D.Q.stringify(n),e));let r=M.exec(t);return r&&(j.mutate(t),S(t,r[1],e)),t},f[29]=b,f[30]=j,f[31]=S,f[32]=C,f[33]=x,f[34]=h):h=f[34];let w=h;return f[35]!==w?(p={replaceUrlWithReferenceMention:w},f[35]=w,f[36]=p):p=f[36],p}(c),{isLoading:eH,addReferenceForMention:eQ,addReferencesForMentions:eK}=function(){let e=(0,A.b)(),{currentReferences:t,mode:n}=(0,k.Pk)(),r=(0,I.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,L(e.type),e.id??""],r=await (0,E.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,o.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),a=e=>{t.every(t=>!D.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:a,addReferencesForMentions:e=>{let n=(0,R.l)().use(P.U,{references:t,agents:[]}).parse(e),r=0;(0,T.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,a(e.data.referenceMention))})}}}(),eJ=(0,Y.FQ)(),eX=!!(eT&&eJ),eY=eC||eH||ex.isWaitingOnAttachment||!!e.submitDisabled,eZ=0===eO.length;ey[17]!==eq||ey[18]!==ex.mode?(d=()=>{(0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:ex.mode}),eq()},ey[17]=eq,ey[18]=ex.mode,ey[19]=d):d=ey[19];let e0=d;ey[20]!==eT||ey[21]!==ek||ey[22]!==eB||ey[23]!==ev||ey[24]!==eb||ey[25]!==eX||ey[26]!==ex.mode||ey[27]!==eY?(m=async()=>{eY||((0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:ex.mode}),eX&&await ev.selectPendingThread(eT),eb&&ek(!1),eB())},ey[20]=eT,ey[21]=ek,ey[22]=eB,ey[23]=ev,ey[24]=eb,ey[25]=eX,ey[26]=ex.mode,ey[27]=eY,ey[28]=m):m=ey[28];let e1=m;ey[29]!==eT||ey[30]!==eU||ey[31]!==ev||ey[32]!==eX||ey[33]!==eY?(h=async()=>{eY||(eX&&await ev.selectPendingThread(eT),eU())},ey[29]=eT,ey[30]=eU,ey[31]=ev,ey[32]=eX,ey[33]=eY,ey[34]=h):h=ey[34];let e2=h;ey[35]!==ev||ey[36]!==ex.messages?(p=()=>{let e=ex.messages.findLast(na)?.id;e&&ev.startEditingMessage(e)},ey[35]=ev,ey[36]=ex.messages,ey[37]=p):p=ey[37];let e3=p,e4=ex.isWaitingOnCopilot?"Copilot is responding\u2026":ex.defaultRecipient?void 0:e_?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"How can I help you?";ex.defaultRecipient&&""===eO&&!eD&&eF(`@${ex.defaultRecipient} `);let e5=(0,u.useRef)(null),[e6,e7]=(0,u.useState)(null);ey[38]!==ex.mode?(x=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:ex.mode}),e7(ni)},ey[38]=ex.mode,ey[39]=x):x=ey[39];let e8=x;ey[40]!==ev||ey[41]!==ex.mode||ey[42]!==ex.skillOptions?.deepCodeSearch?(v=()=>{(0,o.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:ex.mode}),ev.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!ex.skillOptions?.deepCodeSearch})},ey[40]=ev,ey[41]=ex.mode,ey[42]=ex.skillOptions?.deepCodeSearch,ey[43]=v):v=ey[43],ex.skillOptions?.deepCodeSearch;let e9=v,{model:te}=(0,k.bP)("model"),tt=Q.W.attachImagesImmersive&&"immersive"===ex.mode&&!!te.capabilities.supports.vision||!1;ey[44]!==eT||ey[45]!==ev||ey[46]!==te||ey[47]!==eX||ey[48]!==e.existingFileNames||ey[49]!==tt||ey[50]!==ex?(_=async(t,n,r,a)=>{let i=new K.s(ex,ev),s=new X.E(ev,e.existingFileNames),o=[];[...t].some(ns)&&!te.capabilities.supports.vision&&(ev.addAmbientError(`The ${te.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,J.d)("vision_not_supported_for_model",{modelId:te.id,uploadType:n}));let[l,c]=K.s.getAllowedFiles([...t],te);if(tt){let e=await i.addImageAttachments(l,n,eT,eX);e&&o.push(...e)}let d=[];for(let e of c)if(await X.E.isAttachable(e)){let t=await s.addAttachment(e,r,a);t&&o.push(t)}else d.push(e.type);return tt&&d.length>0&&(0,J.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),o},ey[44]=eT,ey[45]=ev,ey[46]=te,ey[47]=eX,ey[48]=e.existingFileNames,ey[49]=tt,ey[50]=ex,ey[51]=_):_=ey[51];let tn=_;ey[52]!==ek||ey[53]!==tn||ey[54]!==eb||ey[55]!==eF||ey[56]!==ex.mode||ey[57]!==eO?(j=async()=>{if(!eb)return;let e=[eb],t=await tn(e,"paste",eI.current||void 0,eE.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eb.text();eF(eO.replaceAll(e,`@${t[0].name}`)),ek(!1),(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:ex.mode})}},ey[52]=ek,ey[53]=tn,ey[54]=eb,ey[55]=eF,ey[56]=ex.mode,ey[57]=eO,ey[58]=j):j=ey[58];let ta=j;ey[59]!==ek?(N=()=>{ek(!0)},ey[59]=ek,ey[60]=N):N=ey[60];let ti=N;ey[61]!==eb||ey[62]!==ex.isWaitingOnAttachment||ey[63]!==ex.mode?(V=()=>{!eb||ex.isWaitingOnAttachment||eR.current||(eR.current=!0,(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:ex.mode}))},q=[eb,ex.isWaitingOnAttachment,ex.mode],ey[61]=eb,ey[62]=ex.isWaitingOnAttachment,ey[63]=ex.mode,ey[64]=V,ey[65]=q):(V=ey[64],q=ey[65]),(0,u.useEffect)(V,q),ey[66]!==eK||ey[67]!==tn||ey[68]!==ev||ey[69]!==e.existingFileNames||ey[70]!==ez||ey[71]!==ej||ey[72]!==eP?(Z=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=X.E.getAttachmentSizeLimit())ej(()=>{eR.current=!1;let n=new File([t],"",{type:X.x}),r=new X.E(ev,e.existingFileNames);eS(n),eI.current=r.generateFileName(t,n.type).then(e=>eE.current=e)},1);else{eK(t);let e=eP.current?.selectionStart??0;setTimeout(()=>ez([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),tn(r,"paste"))}},ey[66]=eK,ey[67]=tn,ey[68]=ev,ey[69]=e.existingFileNames,ey[70]=ez,ey[71]=ej,ey[72]=eP,ey[73]=Z):Z=ey[73];let ts=Z;ey[74]!==tn?(ee=e=>{e.preventDefault(),e.stopPropagation();let t=e.dataTransfer?.files;t&&tn(t,"drag")},ey[74]=tn,ey[75]=ee):ee=ey[75];let to=ee,tl=tt&&Q.W.wholeAreaDragDrop;ey[76]!==eT||ey[77]!==to||ey[78]!==eJ||ey[79]!==eP?.current||ey[80]!==tl?(et=()=>{if(tl&&(!eT||!eJ))return;let e=eP?.current;if(e)return e.addEventListener("dragover",no),e.addEventListener("drop",to),()=>{e.removeEventListener("dragover",no),e.removeEventListener("drop",to)}},ey[76]=eT,ey[77]=to,ey[78]=eJ,ey[79]=eP?.current,ey[80]=tl,ey[81]=et):et=ey[81],ey[82]!==eT||ey[83]!==to||ey[84]!==eJ||ey[85]!==eP||ey[86]!==tl?(en=[eP,tl,to,eT,eJ],ey[82]=eT,ey[83]=to,ey[84]=eJ,ey[85]=eP,ey[86]=tl,ey[87]=en):en=ey[87],(0,u.useEffect)(et,en);let tc=e.isStreaming||ex.isWaitingOnCopilot,td=tc?e0:void 0,tu=eZ?e3:void 0;ey[88]!==e8||ey[89]!==e1||ey[90]!==e2||ey[91]!==e9||ey[92]!==td||ey[93]!==tu?(ea={"github:cancel":td,"copilot-chat:send-message":e1,"copilot-chat:send-message-new-conversation":e2,"copilot-chat:add-attachment":e8,"copilot-chat:edit-last-message":tu,"copilot-chat:deep-codesearch":e9},ey[88]=e8,ey[89]=e1,ey[90]=e2,ey[91]=e9,ey[92]=td,ey[93]=tu,ey[94]=ea):ea=ey[94],er=ea;let tm="small"===e.size;ey[95]!==tm?(ei=(0,y.$)(tP.container,{[tP.containerSmall]:tm}),ey[95]=tm,ey[96]=ei):ei=ey[96];let th="small"===e.size?"small":"medium",tp=!!eb&&!ex.isWaitingOnAttachment;ey[97]!==ta||ey[98]!==ti||ey[99]!==eH||ey[100]!==eN||ey[101]!==e.getReferenceVersion||ey[102]!==th||ey[103]!==tp?(es=(0,i.jsx)(tz,{className:tP.attachments,returnFocusRef:e5,tokenSize:th,isLoading:eH,onSelectReference:eN,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tp,onConvertToFile:ta,onConvertToFileDismiss:ti}),ey[97]=ta,ey[98]=ti,ey[99]=eH,ey[100]=eN,ey[101]=e.getReferenceVersion,ey[102]=th,ey[103]=tp,ey[104]=es):es=ey[104];let tf=e_||e.disabled;ey[105]===Symbol.for("react.memo_cache_sentinel")?(eo=(0,b.G)("copilot-chat-input-textarea"),ey[105]=eo):eo=ey[105],ey[106]!==eV||ey[107]!==eW||ey[108]!==ts||ey[109]!==e$||ey[110]!==e4||ey[111]!==tf||ey[112]!==eO||ey[113]!==eP?(el=(0,i.jsx)("textarea",{autoFocus:!0,id:H.wg,className:tP.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:ts,ref:eP,onScroll:e$,onChange:eV,onFocus:eW,placeholder:e4,value:eO,"data-react-autofocus":!0,disabled:tf,...eo}),ey[106]=eV,ey[107]=eW,ey[108]=ts,ey[109]=e$,ey[110]=e4,ey[111]=tf,ey[112]=eO,ey[113]=eP,ey[114]=el):el=ey[114],ey[115]!==eQ||ey[116]!==el?(ec=(0,i.jsx)(tA,{onSelectReference:eQ,onShowAgentsDialog:e7,children:el}),ey[115]=eQ,ey[116]=el,ey[117]=ec):ec=ey[117],ey[118]!==eO||ey[119]!==eL?(ed=(0,i.jsx)(tO,{text:eO,ref:eL}),ey[118]=eO,ey[119]=eL,ey[120]=ed):ed=ey[120],ey[121]!==ec||ey[122]!==ed||ey[123]!==eM?(eu=(0,i.jsxs)(S.tL.LimitKeybindingScope,{commandIds:t9,className:tP.inputContainer,ref:eM,children:[ec,ed]}),ey[121]=ec,ey[122]=ed,ey[123]=eM,ey[124]=eu):eu=ey[124];let tg=ex.skillOptions?.deepCodeSearch,ty=!!e.hideAttachmentButton;return ey[125]!==e8||ey[126]!==eJ||ey[127]!==ew||ey[128]!==e.extraToolbarLeft||ey[129]!==e.onNewThreadSelected||ey[130]!==e.showModelPicker||ey[131]!==e.showSpacesSelect||ey[132]!==e.submitButtonLabel||ey[133]!==ex.mode||ey[134]!==tc||ey[135]!==eY||ey[136]!==tg||ey[137]!==ty?(em=(0,i.jsx)(nt,{addAttachment:e8,attachmentButtonRef:e5,deepCodeSearch:tg,hideAttachmentButton:ty,stoppable:tc,submitDisabled:eY,onNewThreadSelected:e.onNewThreadSelected,showModelPicker:e.showModelPicker,isLicensedLimited:ew,mode:ex.mode,extraToolbarLeft:e.extraToolbarLeft,isCopilotSpacePath:eJ,submitButtonLabel:e.submitButtonLabel,showSpacesSelect:e.showSpacesSelect}),ey[125]=e8,ey[126]=eJ,ey[127]=ew,ey[128]=e.extraToolbarLeft,ey[129]=e.onNewThreadSelected,ey[130]=e.showModelPicker,ey[131]=e.showSpacesSelect,ey[132]=e.submitButtonLabel,ey[133]=ex.mode,ey[134]=tc,ey[135]=eY,ey[136]=tg,ey[137]=ty,ey[138]=em):em=ey[138],ey[139]!==ei||ey[140]!==es||ey[141]!==eu||ey[142]!==em?(eh=(0,i.jsxs)("form",{className:ei,children:[es,eu,em]}),ey[139]=ei,ey[140]=es,ey[141]=eu,ey[142]=em,ey[143]=eh):eh=ey[143],ey[144]!==er||ey[145]!==eh?(ep=(0,i.jsx)(S.tL,{commands:er,children:eh}),ey[144]=er,ey[145]=eh,ey[146]=ep):ep=ey[146],ey[147]!==e6||ey[148]!==eV||ey[149]!==eP?(ef=(0,i.jsx)(tr,{inputRef:eP,inputOnChange:eV,anchorRef:e5,panel:e6,onPanelChange:e7}),ey[147]=e6,ey[148]=eV,ey[149]=eP,ey[150]=ef):ef=ey[150],ey[151]!==ep||ey[152]!==ef?(eg=(0,i.jsxs)(i.Fragment,{children:[ep,ef]}),ey[151]=ep,ey[152]=ef,ey[153]=eg):eg=ey[153],eg},nt=(0,u.memo)(e=>{let t,n,r,a,o,l,c,d,u,m=(0,s.c)(31),{addAttachment:h,attachmentButtonRef:p,deepCodeSearch:f,hideAttachmentButton:g,stoppable:x,submitDisabled:v,onNewThreadSelected:b,showModelPicker:C,isLicensedLimited:w,mode:I,extraToolbarLeft:E,isCopilotSpacePath:R,submitButtonLabel:T,showSpacesSelect:k}=e;return m[0]!==f?(t=Q.W.showDeepCodeSearchButton&&(0,i.jsx)(S.N5,{commandId:"copilot-chat:deep-codesearch",icon:j.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,y.$)({[tP.clicked]:f})}),m[0]=f,m[1]=t):t=m[1],m[2]!==h||m[3]!==p||m[4]!==g?(n=!g&&(0,i.jsx)(N.Q,{ref:p,leadingVisual:j.PaperclipIcon,variant:"invisible",onClick:h,"data-testid":"attachment-menu-button",children:"Attach"}),m[2]=h,m[3]=p,m[4]=g,m[5]=n):n=m[5],m[6]!==R||m[7]!==I?(r=Z(Q.W.copilotMcp,I,R)&&(0,i.jsx)(t6,{}),m[6]=R,m[7]=I,m[8]=r):r=m[8],m[9]!==k?(a=Q.W.spacesInputMenuSelect&&k&&(0,i.jsx)(_,{}),m[9]=k,m[10]=a):a=m[10],m[11]!==E||m[12]!==t||m[13]!==n||m[14]!==r||m[15]!==a?(o=(0,i.jsxs)("div",{className:tP.toolbarLeft,children:[t,n,r,E,a]}),m[11]=E,m[12]=t,m[13]=n,m[14]=r,m[15]=a,m[16]=o):o=m[16],m[17]!==w||m[18]!==b||m[19]!==C?(l=b&&C&&(0,i.jsx)(t7.Yb,{onNewThreadSelected:b,limited:w}),m[17]=w,m[18]=b,m[19]=C,m[20]=l):l=m[20],m[21]!==x||m[22]!==T||m[23]!==v?(c=x?(0,i.jsx)(nr,{}):(0,i.jsx)(nn,{disabled:v,label:T}),m[21]=x,m[22]=T,m[23]=v,m[24]=c):c=m[24],m[25]!==l||m[26]!==c?(d=(0,i.jsxs)("div",{className:tP.toolbarRight,children:[l,c]}),m[25]=l,m[26]=c,m[27]=d):d=m[27],m[28]!==o||m[29]!==d?(u=(0,i.jsxs)("div",{className:tP.toolbar,children:[o,d]}),m[28]=o,m[29]=d,m[30]=u):u=m[30],u});function nn(e){let t,n=(0,s.c)(3),{disabled:r,label:a}=e,o=a||"Send now";return n[0]!==r||n[1]!==o?(t=(0,i.jsx)(S.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:j.PaperAirplaneIcon,"aria-label":o,disabled:r,tooltipDirection:"n"}),n[0]=r,n[1]=o,n[2]=t):t=n[2],t}function nr(){let e,t,n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,b.G)("copilot-chat-stop-button"),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(S.N5,{...e,commandId:"github:cancel",variant:"invisible",size:"medium",icon:j.SquareFillIcon,tooltipDirection:"n",sx:{bg:"danger.subtle",color:"danger.fg",":hover":{bg:"danger.muted"}}}),n[1]=t):t=n[1],t}nt.displayName="ChatInputToolbar";try{ne.displayName||(ne.displayName="ChatInput")}catch{}try{nn.displayName||(nn.displayName="SubmitButton")}catch{}try{nr.displayName||(nr.displayName="StopButton")}catch{}function na(e){return"user"===e.role}function ni(e){return"attachment-types"===e?null:"attachment-types"}function ns(e){return e.type.startsWith("image/")}function no(e){e.preventDefault(),e.stopPropagation()}},83880:(e,t,n)=>{n.d(t,{$:()=>o,V:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=(0,i.createContext)(void 0),o=e=>{let t,n,i,o=(0,a.c)(5),{message:l,children:c}=e;return o[0]!==l?(n={message:l},o[0]=l,o[1]=n):n=o[1],t=n,o[2]!==c||o[3]!==t?(i=(0,r.jsx)(s.Provider,{value:t,children:c}),o[2]=c,o[3]=t,o[4]=i):i=o[4],i},l=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{s.displayName||(s.displayName="ChatMessageContext")}catch{}try{o.displayName||(o.displayName="ChatMessageProvider")}catch{}},44669:(e,t,n)=>{n.d(t,{A:()=>d,i:()=>c});var r=n(74848),a=n(21728),i=n(96679),s=n(96540),o=n(34901),l=n(40136);let c=e=>{let t,n,c,d,u=(0,a.c)(10),{isLastGroup:m,children:h}=e,{scrollContainerHeight:p,scrollToBottom:f}=(0,l.b)(),{threadHasNewMessages:g,pendingFirstMessage:y}=(0,o.Pk)(),x=m&&(g||y);if(u[0]!==x||u[1]!==f?(t=()=>{x&&f("smooth")},n=[x,f],u[0]=x,u[1]=f,u[2]=t,u[3]=n):(t=u[2],n=u[3]),(0,s.useEffect)(t,n),x)if(i.cg?.CSS?.supports("container-type: size")){let e;u[4]===Symbol.for("react.memo_cache_sentinel")?(e={minHeight:"100cqh"},u[4]=e):e=u[4],d=e}else{let e;u[5]!==p?(e={minHeight:p},u[5]=p,u[6]=e):e=u[6],d=e}return u[7]!==h||u[8]!==d?(c=(0,r.jsx)("div",{style:d,children:h}),u[7]=h,u[8]=d,u[9]=c):c=u[9],c};function d(e){return e.reduce((e,t)=>{let n=e.at(-1);return"assistant"===(n?.at(-1)?.role??"assistant")&&"user"===t.role?e.push([t]):n?.push(t),e},[])}try{c.displayName||(c.displayName="ChatMessagesGroup")}catch{}},7096:(e,t,n)=>{n.d(t,{t:()=>A,s:()=>T});var r,a=n(74848),i=n(38621),s=n(72010),o=n(38695),l=n(15385),c=n(34614),d=n(53110),u=n(34164),m=n(96540),h=n(22069),p=n(31971),f=n(34901),g=n(65011),y=n(58569),x=n(10569),v=n(47397),_=n(70066),b=n(53655);function S({reference:e,onClick:t}){let n,r=(0,f.Pk)(),s=(0,v.b)(),o=(0,m.useRef)(null),[c,d]=(0,m.useState)(!1),u=r?.mode??"assistive",{currentReferences:g}=r??{currentReferences:[]},S=(0,m.useMemo)(()=>g.map(e=>(0,h.Vb)(e)),[g]),C=(0,m.useMemo)(()=>(0,h.Vb)(e),[e]),j=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),w=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),N=!j&&!w&&"web-search-result"!==e.type,I=(0,m.useMemo)(()=>j||w||S.includes(C),[j,w,S,C]),E=(0,m.useCallback)(t=>{t.stopPropagation(),I||s.addReference(e,"refMenu")},[s,e,I]),R=(0,h.JP)(e),T=(0,h.Xs)(R),k=(0,b.a_)(e,(0,h.P)(r?.currentTopic));if(p.W.newImmersiveReferencesUI)switch(e.type){case"file":case"snippet":{n=`${e.repoName}`;let t=e.path.lastIndexOf("/");-1!==t&&(n=`${n}/${e.path.substring(0,t)}`);break}case"web-search-result":n=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let A=(0,h.z$)(e);return(0,a.jsxs)(l.l.LinkItem,{onClick:n=>{t&&!n.defaultPrevented&&t(e,n)},href:R,rel:"noopener",sx:{wordBreak:"break-word",width:"100%"},className:"reference-action",target:"immersive"===u||"third-party"===e.type?"_blank":void 0,children:[k&&(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(k,{})}),(0,a.jsxs)(y.A,{title:A,maxWidth:"100%",className:p.W.newImmersiveReferencesUI?"text-semibold":void 0,children:[A,n&&(0,a.jsx)("span",{className:"color-fg-muted ml-2",children:n})]}),N&&(0,a.jsx)(l.l.TrailingAction,{onClick:()=>d(!0),icon:i.KebabHorizontalIcon,label:"More reference options",ref:o}),N&&(0,a.jsx)(x.W,{anchorRef:o,open:c,onOpenChange:d,children:(0,a.jsx)(_.UJ,{portalContainerName:_.Dq,children:(0,a.jsxs)(l.l,{children:[T&&("immersive"===u||["third-party","folder","repository","docset"].includes(e.type)?(0,a.jsxs)(l.l.LinkItem,{href:R,rel:"noopener",target:"_blank",children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.LinkIcon,{})}),"Open"]}):(0,a.jsxs)(l.l.Item,{onSelect:()=>{s.selectReference(e)},children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.LinkIcon,{})}),"Preview"]})),(0,a.jsxs)(l.l.Item,{onSelect:E,disabled:I,children:[(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(i.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{S.displayName||(S.displayName="OutputReference")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}let C={referencesContainer:"ChatReferences-module__referencesContainer--Lxpin",referencesListImmersiveContainer:"ChatReferences-module__referencesListImmersiveContainer--iscAs",title:"ChatReferences-module__title--zwhMS",assistiveTitle:"ChatReferences-module__assistiveTitle--vngwU",Details:"ChatReferences-module__Details--IrWzZ",referenceTokensOuterContainer:"ChatReferences-module__referenceTokensOuterContainer--tFG8Q",referenceTokensContainer:"ChatReferences-module__referenceTokensContainer--PGYAF",chatMessageReferenceListFooter:"ChatReferences-module__chatMessageReferenceListFooter--nkt6v"};var j=n(21728),w=n(63867);let N={referenceToken:"FigmaChatReference-module__referenceToken--Qn1Il",name:"FigmaChatReference-module__name--fKkEE",content:"FigmaChatReference-module__content--X8uXy",thumbnail:"FigmaChatReference-module__thumbnail--PaX46",thumbnailHidden:"FigmaChatReference-module__thumbnailHidden--PBOGz",thumbnailOuter:"FigmaChatReference-module__thumbnailOuter--sO8P4",thumbnailLoading:"FigmaChatReference-module__thumbnailLoading--PKK05",figmaIconOuter:"FigmaChatReference-module__figmaIconOuter--dd0HF",figmaIcon:"FigmaChatReference-module__figmaIcon--iPM9K"};var I=n(39038);let E=(0,m.forwardRef)(function(e,t){let n,r,i,s,o,l,c,d,p,f,g=(0,j.c)(23);g[0]!==e?({reference:n,...r}=e,g[0]=e,g[1]=n,g[2]=r):(n=g[1],r=g[2]);let[y,x]=(0,m.useState)(!0);return g[3]!==n?(i=(0,h.JP)(n),g[3]=n,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.$)(N.referenceToken),g[5]=s):s=g[5],g[6]!==n.thumbnailUrl||g[7]!==n.title||g[8]!==y?(o=n.thumbnailUrl&&(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)("span",{className:N.thumbnailLoading,children:(0,a.jsx)(w.A,{size:"medium"})}),(0,a.jsx)("img",{className:(0,u.$)(N.thumbnail,{[N.thumbnailHidden]:y}),src:n.thumbnailUrl,alt:`preview thumbnail for ${n.title}`,onLoad:()=>x(!1)})]}),g[6]=n.thumbnailUrl,g[7]=n.title,g[8]=y,g[9]=o):o=g[9],g[10]!==o?(l=(0,a.jsx)("span",{className:N.thumbnailOuter,children:o}),g[10]=o,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("div",{className:N.figmaIconOuter,children:(0,a.jsx)(I._,{className:N.figmaIcon})}),g[12]=c):c=g[12],g[13]!==n?(d=(0,h.z$)(n),g[13]=n,g[14]=d):d=g[14],g[15]!==d?(p=(0,a.jsxs)("span",{className:N.content,children:[c,(0,a.jsx)("span",{className:N.name,children:d})]}),g[15]=d,g[16]=p):p=g[16],g[17]!==t||g[18]!==r||g[19]!==i||g[20]!==l||g[21]!==p?(f=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:i,className:s,ref:t,target:"_blank",rel:"noreferrer",...r,children:[l,p]})}),g[17]=t,g[18]=r,g[19]=i,g[20]=l,g[21]=p,g[22]=f):f=g[22],f});try{E.displayName||(E.displayName="FigmaChatReference")}catch{}var R=n(5279);function T({references:e,onToggle:t,onClick:n,isImmersive:r,className:p}){let g=(0,f.Pk)(),y=(0,m.useMemo)(()=>(0,h.rT)(e),[e]),{getDetailsProps:x}=(0,s.A)({}),v=(0,m.useMemo)(()=>(0,h.P)(g?.currentTopic)&&y.every(k),[g?.currentTopic,y]),_=(0,m.useMemo)(()=>y.some(e=>"web-search-result"===e.type),[y]);if(0===y.length)return null;let b=v&&g?.currentTopic?.name?`Search results from ${g.currentTopic.name}`:`${y.length} ${1===y.length?"reference":"references"}`;return(0,a.jsxs)(o.A,{...x(),onToggle:t,className:(0,u.$)(p,C.Details),children:[(0,a.jsxs)("summary",{className:(0,u.$)(C.referencesContainer),children:[(0,a.jsx)("span",{className:(0,u.$)(C.title,r?"":C.assistiveTitle),children:b}),(0,a.jsx)(d.A,{icon:i.ChevronDownIcon,className:"references-chevron-down",sx:{color:"fg.muted"}}),(0,a.jsx)(d.A,{icon:i.ChevronUpIcon,sx:{display:"none !important",color:"fg.muted"},className:"references-chevron-up"})]}),(0,a.jsxs)(l.l,{sx:{mt:2,mx:"-1rem",p:1},className:(0,u.$)(r&&C.referencesListImmersiveContainer),children:[y.map(e=>(0,a.jsx)(S,{reference:e,onClick:n},(0,h.Vb)(e))),_&&(0,a.jsxs)("div",{className:C.chatMessageReferenceListFooter,children:["Copilot used the"," ",(0,a.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,a.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function k(e){return"snippet"===e.type&&!!e.languageName&&g.Yr.has(e.languageName)}function A({references:e,message:t,className:n,size:r,onClickReference:i,getReferenceVersion:s}){let{bigReferences:o,smallReferences:l}=(0,m.useMemo)(()=>(function(e){let t=(0,h.rT)(e),n=[],r=[];for(let e of t)D.has(e.type)?n.push(e):r.push(e);return{bigReferences:n,smallReferences:r}})(e),[e]),c=e=>"figma"===e.type&&p.W.immersiveFigmaIntegration?(0,a.jsx)(E,{reference:e,onClick:t=>i?.(e,t)},(0,h.Vb)(e)):(0,a.jsx)(b.BR,{message:t,reference:e,size:r,onClick:(t,n)=>i?.(e,n),getReferenceVersion:s},(0,h.Vb)(e));return(0,a.jsxs)(R.M,{"aria-label":"Attachments",className:(0,u.$)(C.referenceTokensOuterContainer,n),children:[o.map(c),(0,a.jsx)("div",{className:C.referenceTokensContainer,children:l.map(c)})]})}let D=new Set(["figma","image"]);try{T.displayName||(T.displayName="ChatMessageReferencesList")}catch{}try{A.displayName||(A.displayName="ChatMessageReferenceTokens")}catch{}try{D.displayName||(D.displayName="BIG_REFERENCE_TYPES")}catch{}},40136:(e,t,n)=>{n.d(t,{$:()=>d,b:()=>u});var r=n(74848),a=n(21728),i=n(81425),s=n(34164),o=n(96540);let l={container:"ChatScrollContainer-module__container--b73rS"},c=(0,o.createContext)(null);function d(e){let t,n,d,u,m,h,p,f,g,y,x,v,_,b,S,C=(0,a.c)(30);C[0]!==e?({children:n,disabled:d,containerRef:t,...u}=e,C[0]=e,C[1]=t,C[2]=n,C[3]=d,C[4]=u):(t=C[1],n=C[2],d=C[3],u=C[4]);let j=(0,i.L)(t),w=(0,o.useRef)(null),[N,I]=(0,o.useState)(!1);C[5]!==j.current?(m=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return I(!t?.isIntersecting)},{root:j.current,threshold:0,rootMargin:"50px"});return e.observe(w.current),()=>e.disconnect()},C[5]=j.current,C[6]=m):m=C[6],C[7]!==j?(h=[j],C[7]=j,C[8]=h):h=C[8],(0,o.useEffect)(m,h);let[E,R]=(0,o.useState)();C[9]!==j.current?(p=()=>{let e=()=>{if(!j.current)return;let e=getComputedStyle(j.current);R(`calc(${j.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(j.current),()=>t.disconnect()},C[9]=j.current,C[10]=p):p=C[10],C[11]!==j?(f=[j],C[11]=j,C[12]=f):f=C[12],(0,o.useEffect)(p,f),C[13]!==d?(g=e=>{d||w.current?.scrollIntoView({behavior:e,block:"end"})},C[13]=d,C[14]=g):g=C[14];let T=g;return C[15]!==N||C[16]!==E||C[17]!==T?(x={isScrolledUp:N,scrollToBottom:T,scrollContainerHeight:E},C[15]=N,C[16]=E,C[17]=T,C[18]=x):x=C[18],y=x,C[19]!==u.className?(v=(0,s.$)(l.container,u.className),C[19]=u.className,C[20]=v):v=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)("div",{ref:w,style:{height:"1px",marginTop:"-1px"}}),C[21]=_):_=C[21],C[22]!==n||C[23]!==j||C[24]!==u||C[25]!==v?(b=(0,r.jsxs)("div",{ref:j,...u,className:v,children:[n,_]}),C[22]=n,C[23]=j,C[24]=u,C[25]=v,C[26]=b):b=C[26],C[27]!==y||C[28]!==b?(S=(0,r.jsx)(c.Provider,{value:y,children:b}),C[27]=y,C[28]=b,C[29]=S):S=C[29],S}let u=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{c.displayName||(c.displayName="ChatScrollContext")}catch{}try{d.displayName||(d.displayName="ChatScrollContainer")}catch{}},8387:(e,t,n)=>{n.d(t,{m:()=>u});var r=n(74848),a=n(21728),i=n(84217),s=n(75177),o=n(55847),l=n(52464),c=n(96540),d=n(34901);function u(e){let t,n,l,u,h,p,f,g,y=(0,a.c)(22),{confirmation:x,handleConfirmation:v,isLatestMessage:_}=e,b=(0,d.Pk)();if(y[0]!==x.confirmation||y[1]!==b.allClientConfirmations){let e=JSON.stringify(Object.values(x.confirmation).sort());t=b.allClientConfirmations?.includes(e),y[0]=x.confirmation,y[1]=b.allClientConfirmations,y[2]=t}else t=y[2];let S=t,{isWaitingOnCopilot:C}=b,[j,w]=(0,c.useState)(S&&!_);y[3]!==x.confirmation||y[4]!==x.onSubmit||y[5]!==x.title||y[6]!==v?(n=e=>{w(!0),v({state:e,confirmation:x.confirmation},x.title,x.onSubmit)},y[3]=x.confirmation,y[4]=x.onSubmit,y[5]=x.title,y[6]=v,y[7]=n):n=y[7];let N=n;return y[8]===Symbol.for("react.memo_cache_sentinel")?(l={display:"flex",flexDirection:"column",p:3,marginTop:3},y[8]=l):l=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(u={mb:1,fontSize:1,lineHeight:"condensed"},y[9]=u):u=y[9],y[10]!==x.title?(h=(0,r.jsx)(i.A,{as:"h3",sx:u,children:x.title}),y[10]=x.title,y[11]=h):h=y[11],y[12]!==x.message?(p=x.message.split(`
`).map(m),y[12]=x.message,y[13]=p):p=y[13],y[14]!==j||y[15]!==N||y[16]!==C?(f=!j&&(0,r.jsxs)(s.A,{sx:{display:"flex",justifyContent:"flex-start",gap:2,mt:3},children:[(0,r.jsx)(o.Q,{disabled:C,variant:"primary",onClick:()=>N("accepted"),children:"Allow"}),(0,r.jsx)(o.Q,{disabled:C,onClick:()=>N("dismissed"),children:"Dismiss"})]}),y[14]=j,y[15]=N,y[16]=C,y[17]=f):f=y[17],y[18]!==h||y[19]!==p||y[20]!==f?(g=(0,r.jsxs)(s.A,{className:"border rounded-2",sx:l,children:[h,p,f]}),y[18]=h,y[19]=p,y[20]=f,y[21]=g):g=y[21],g}function m(e){return(0,r.jsx)(l.A,{as:"p",sx:{color:"fg.muted",mb:0},children:e},e)}try{u.displayName||(u.displayName="Confirmation")}catch{}},33484:(e,t,n)=>{n.d(t,{l:()=>u});var r=n(74848),a=n(21728),i=n(13455),s=n(60039),o=n(96540),l=n(31971),c=n(69458);let d=[{name:"Hate it",value:1,icon:i.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:i.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:i.Cf,color:"satisfied"},{name:"Love it",value:4,icon:i.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let n,u,m,h,p=(0,a.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useRef)(void 0);p[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),p[0]=n):n=p[0],(0,o.useImperativeHandle)(t,n),p[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let r={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,s.lS)("/github-copilot/feedback",{method:"POST",body:r})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},p[1]=f,p[2]=u):u=p[2];let _=u;return p[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),p[3]=m):m=p[3],p[4]!==_||p[5]!==g?(h=(0,r.jsxs)(r.Fragment,{children:[m,(0,r.jsx)(i.NE,{ref:x,options:d,onSubmit:_,returnFocusRef:g})]}),p[4]=_,p[5]=g,p[6]=h):h=p[6],h});u.displayName="ConversationFeedbackDialog"},45064:(e,t,n)=>{n.d(t,{W:()=>p});var r=n(74848),a=n(21728),i=n(50539),s=n(75177),o=n(34164),l=n(96540);let c={copilotBadge:"CopilotBadgeV2-module__copilotBadge--OJjfk",loading:"CopilotBadgeV2-module__loading--NG3DO",animation:"CopilotBadgeV2-module__animation--cRY_E",assistive:"CopilotBadgeV2-module__assistive--aZiUP"},d=[i.L.Tickle,i.L.Celebrate,i.L.JumpWiggle],u=["yes","absolutely","certainly","sure","definitely","right","correct","indeed","precisely","exactly","true","affirmative","agree","agreed"],m=["no","never","negative","wrong","false","untrue","cannot","can't","sorry","incorrect","deny","disagree","refuse","unfortunately"];function h(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/1e3/60<.5}function p(e){let t,n,p,g,y,x,v,_,b,S,C,j=(0,a.c)(38),{isFirstMessage:w,isLoading:N,isLoadingSkills:I,isError:E,className:R,mode:T,message:k,createdAt:A}=e,D=void 0!==w&&w;j[0]!==A||j[1]!==D?(t=()=>({animationType:D&&(!A||h(A))?i.L.Celebrate:i.L.Static,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!1}),j[0]=A,j[1]=D,j[2]=t):t=j[2];let[P,L]=(0,l.useState)(t);j[3]!==A||j[4]!==E||j[5]!==N||j[6]!==I||j[7]!==k?(n=()=>{h(A)&&L(e=>(function({previousState:e,isLoadingSkills:t,isAffirmativeSentiment:n,isNegativeSentiment:r,isError:a,isLoading:s}){switch(e.animationType){case i.L.Static:if((n||r)&&!a&&!e.hasLoadedMessage)return{animationType:n?i.L.Affirmative:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(t)return{...e,animationType:i.L.Thinking,loopAnimation:!0};if(!s&&!e.hasLoadedMessage&&!a)return{animationType:i.L.Confirm,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(a&&!e.hasLoadedMessage)return{animationType:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};return e;case i.L.Thinking:if(!t)return{...e,animationType:a?i.L.Negative:i.L.Static,loopAnimation:!1};return e;default:return e}})({previousState:e,isLoadingSkills:I||!1,isError:E||!1,isLoading:N||!1,isAffirmativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return u.some(e=>t.includes(e.toLowerCase()))}return!1}(k),isNegativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return m.some(e=>t.includes(e.toLowerCase()))}return!1}(k)}))},j[3]=A,j[4]=E,j[5]=N,j[6]=I,j[7]=k,j[8]=n):n=j[8],j[9]!==P.animationType||j[10]!==P.hasLoadedMessage||j[11]!==A||j[12]!==E||j[13]!==D||j[14]!==N||j[15]!==I||j[16]!==k?(p=[I,E,N,P.animationType,P.hasLoadedMessage,D,k,A],j[9]=P.animationType,j[10]=P.hasLoadedMessage,j[11]=A,j[12]=E,j[13]=D,j[14]=N,j[15]=I,j[16]=k,j[17]=p):p=j[17],(0,l.useEffect)(n,p),j[18]!==P||j[19]!==N?(g=()=>{N||L({...P,animationType:d[Math.floor(Math.random()*d.length)],onFinish:i.L.Static,loopAnimation:!1})},j[18]=P,j[19]=N,j[20]=g):g=j[20];let M=g,O=N&&c.loading;j[21]!==R||j[22]!==O?(y=(0,o.$)(c.copilotBadge,O,R),j[21]=R,j[22]=O,j[23]=y):y=j[23],j[24]===Symbol.for("react.memo_cache_sentinel")?(x={":hover":{cursor:"pointer"}},j[24]=x):x=j[24];let F=P.animationType;j[25]===Symbol.for("react.memo_cache_sentinel")?(v=()=>L(f),j[25]=v):v=j[25];let B=P.loopAnimation,U="assistive"===T&&c.assistive;return j[26]!==U?(_=(0,o.$)(c.animation,U),j[26]=U,j[27]=_):_=j[27],j[28]!==P.animationType||j[29]!==P.loopAnimation||j[30]!==_?(b=(0,r.jsx)(i.N,{animationType:F,onAnimationEnd:v,loopAnimation:B,className:_}),j[28]=P.animationType,j[29]=P.loopAnimation,j[30]=_,j[31]=b):b=j[31],j[32]!==M||j[33]!==b?(S=(0,r.jsx)(s.A,{sx:x,onClick:M,children:b}),j[32]=M,j[33]=b,j[34]=S):S=j[34],j[35]!==S||j[36]!==y?(C=(0,r.jsx)("div",{className:y,"aria-label":"Copilot badge",role:"img",children:S}),j[35]=S,j[36]=y,j[37]=C):C=j[37],C}function f(e){return{...e,animationType:e.onFinish}}try{p.displayName||(p.displayName="CopilotBadge")}catch{}},56521:(e,t,n)=>{n.d(t,{K:()=>y,h:()=>v});var r=n(74848),a=n(21728),i=n(91936),s=n(98386),o=n(38621),l=n(87330),c=n(55847),d=n(95726),u=n(34164),m=n(96540),h=n(22069),p=n(66889),f=n(79929),g=n(83880);function y(e){let t=(0,a.c)(8),{manager:n}=e,{message:i}=(0,g.V)(),{error:o}=i;if(!o)return null;switch(o.type){case"agentUnauthorized":{let e;return t[0]!==o||t[1]!==n?(e=(0,r.jsx)(x,{error:o,manager:n}),t[0]=o,t[1]=n,t[2]=e):e=t[2],e}case"agentRequest":{let e;return t[3]!==o.details?(e=(0,r.jsx)(v,{errors:[o.details]}),t[3]=o.details,t[4]=e):e=t[4],e}default:{let e,n;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.G)("error-message-banner"),t[5]=e):e=t[5];let a=o.message||"Something went wrong";return t[6]!==a?(n=(0,r.jsx)(d.l,{...e,title:"Error",hideTitle:!0,description:a,variant:"warning"}),t[6]=a,t[7]=n):n=t[7],n}}}function x(e){let t,n,i,d,p,g,y,x,v,_,b,S=(0,a.c)(25),{error:C,manager:j}=e,{details:w}=C,[N,I]=(0,m.useState)(!1);S[0]!==w.name||S[1]!==j?(t=()=>{I(!0),j.dispatch({type:"MESSAGE_ADDED",message:(0,h.Y6)({role:"user",content:`Dismissed the connection with ${w.name}.`,mediaContent:[],parentMessageID:j.FindLastMessageID()})}),j.dispatch({type:"MESSAGE_ADDED",message:(0,h.Y6)({role:"assistant",content:`I was unable to connect you to ${w.name} because you cancelled the authentication.`,mediaContent:[],parentMessageID:j.FindLastMessageID()})})},S[0]=w.name,S[1]=j,S[2]=t):t=S[2];let E=t;S[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.G)("agent-unauthorized-error"),S[3]=n):n=S[3],S[4]!==N||S[5]!==E?(i=!N&&(0,r.jsx)(l.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:o.XIcon,onClick:E,variant:"invisible",unsafeDisableTooltip:!0}),S[4]=N,S[5]=E,S[6]=i):i=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(o.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),p=(0,r.jsx)(o.LinkIcon,{className:"fgColor-muted"}),g=(0,u.$)("avatar",f.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),S[7]=d,S[8]=p,S[9]=g):(d=S[7],p=S[8],g=S[9]);let R=`icon for ${w.name}`;return S[10]!==w.avatar_url||S[11]!==R?(y=(0,r.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[d,p,(0,r.jsx)("img",{className:g,src:w.avatar_url,alt:R})]}),S[10]=w.avatar_url,S[11]=R,S[12]=y):y=S[12],S[13]!==w.name?(v=(0,r.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",w.name]}),x=(0,r.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",w.name," extension, you\u2019ll need to connect your GitHub account to your ",w.name," account."]}),S[13]=w.name,S[14]=x,S[15]=v):(x=S[14],v=S[15]),S[16]!==w.authorize_url||S[17]!==N?(_=!N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:w.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,r.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",w.authorize_url]})]}),S[16]=w.authorize_url,S[17]=N,S[18]=_):_=S[18],S[19]!==x||S[20]!==_||S[21]!==i||S[22]!==y||S[23]!==v?(b=(0,r.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",...n,children:[i,y,v,x,_]}),S[19]=x,S[20]=_,S[21]=i,S[22]=y,S[23]=v,S[24]=b):b=S[24],b}function v(e){let t,n,i=(0,a.c)(4),{errors:s}=e;return i[0]!==s?(t=s.map(_),i[0]=s,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)("div",{className:"d-flex flex-column gap-2",children:t}),i[2]=t,i[3]=n):n=i[3],n}function _(e,t){var n;return(0,r.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,r.jsxs)("div",{className:"text-bold",children:[(0,r.jsx)(o.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===(n=e).type?`${n.code} ${n.identifier}`:`${(0,p.Z)(n.type)} error`]}),(0,r.jsx)(i.To,{markdown:e.message})]},t)}try{y.displayName||(y.displayName="ErrorMessage")}catch{}try{x.displayName||(x.displayName="AgentUnauthorizedError")}catch{}try{v.displayName||(v.displayName="AgentErrors")}catch{}},40509:(e,t,n)=>{n.d(t,{G:()=>x});var r=n(74848),a=n(21728),i=n(38621),s=n(87330),o=n(96540),l=n(34901),c=n(47397),d=n(83880),u=n(13455),m=n(31971),h=n(74244),p=n(69458);let f={thumbsUp:"MessageFeedbackDialog-module__thumbsUp--L1svG",thumbsDown:"MessageFeedbackDialog-module__thumbsDown--xdoe9"},g=[{name:"Bad",value:"NEGATIVE",icon:(0,r.jsx)(i.ThumbsdownIcon,{className:f.thumbsDown}),color:"bad"},{name:"Good",value:"POSITIVE",icon:(0,r.jsx)(i.ThumbsupIcon,{className:f.thumbsUp}),color:"good"}],y=(0,o.forwardRef)(function({messageId:e,threadId:t,returnFocusRef:n,onSubmitted:a,onClose:i},s){let l=(0,c.b)(),d=(0,o.useRef)(null),f=(0,o.useRef)(null),y=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(s,()=>({openDialog:e=>{y.current=e,m.W.copilotChatInterviewSurvey?d.current?.openDialog():f.current?.openDialog(e)}}));let x=async(n,r)=>{let i=[];if(null==n&&i.push("Please select a rating."),r.length>500&&i.push("Please keep your feedback within 500 characters or less."),i.length>0)return i;try{(await l.service.sendFeedback({feedback:n,feedbackChoice:[],messageId:e,threadId:t,textResponse:r})).ok?a?.(n):i.push("An error occurred while submitting your feedback.")}catch{i.push("An error occurred while submitting your feedback.")}return i};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.E,{ref:d,title:"Give additional feedback",onClose:e=>{"no-thanks"===e?f.current?.openDialog(y.current):i?.()}}),(0,r.jsx)(u.NE,{title:"Give additional feedback",ref:f,options:g,onSubmit:x,onClose:i,requestID:h.J.getRequestID(e),returnFocusRef:n})]})});function x(e){let t,n,u,m,h,p=(0,a.c)(20),{iconSize:f}=e,{message:g}=(0,d.V)(),x=g.id,v=g.threadID,_=(0,c.b)(),b=(0,o.useRef)(null),S=(0,o.useRef)(null);p[0]!==_||p[1]!==g?(t=e=>{_.handleFeedback(g,e)},p[0]=_,p[1]=g,p[2]=t):t=p[2];let C=t,{optedInToUserFeedback:j}=(0,l.Pk)();p[3]!==_.service||p[4]!==x||p[5]!==C||p[6]!==j||p[7]!==v?(n=e=>{_.service.sendFeedback({feedback:e,messageId:x,threadId:v}),C(e),j?b.current?.openDialog(e):S.current?.focus()},p[3]=_.service,p[4]=x,p[5]=C,p[6]=j,p[7]=v,p[8]=n):n=p[8];let w=n;return p[9]!==f||p[10]!==g.feedback||p[11]!==w?(u=null!=g.feedback?(0,r.jsx)(s.K,{ref:S,"aria-label":`${g.feedback.toLocaleLowerCase()} feedback submitted`,icon:"POSITIVE"===g.feedback?i.ThumbsupIcon:i.ThumbsdownIcon,variant:"invisible",size:f,"aria-disabled":!0,sx:{color:"fg.default",bg:"canvas.subtle"}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.K,{icon:i.ThumbsupIcon,"aria-label":"Good response",onClick:()=>w("POSITIVE"),variant:"invisible",size:f}),(0,r.jsx)(s.K,{icon:i.ThumbsdownIcon,size:f,"aria-label":"Bad response",onClick:()=>w("NEGATIVE"),variant:"invisible"})]}),p[9]=f,p[10]=g.feedback,p[11]=w,p[12]=u):u=p[12],p[13]!==x||p[14]!==C||p[15]!==v?(m=(0,r.jsx)(y,{ref:b,messageId:x,threadId:v,onSubmitted:C,returnFocusRef:S}),p[13]=x,p[14]=C,p[15]=v,p[16]=m):m=p[16],p[17]!==u||p[18]!==m?(h=(0,r.jsxs)(r.Fragment,{children:[u,m]}),p[17]=u,p[18]=m,p[19]=h):h=p[19],h}y.displayName="MessageFeedbackDialog";try{x.displayName||(x.displayName="Feedback")}catch{}},57531:(e,t,n)=>{n.d(t,{WA:()=>eC,BO:()=>eS});var r=n(74848),a=n(21728),i=n(59706),s=n(38621),o=n(58569),l=n(84217),c=n(52464),d=n(75177),u=n(99377),m=n(31971),h=n(74244),p=n(34614),f=n(63867),g=n(55847),y=n(15385),x=n(53110),v=n(96540),_=n(22069),b=n(34901);let S={functionReferenceListContainer:"FunctionLoadingUtils-module__functionReferenceListContainer--nLEFp",functionLoading:"FunctionLoadingUtils-module__functionLoading--ksfrz",spinner:"FunctionLoadingUtils-module__spinner--dWC1I",functionReferenceButton:"FunctionLoadingUtils-module__functionReferenceButton--RThXV",functionReferenceButtonContents:"FunctionLoadingUtils-module__functionReferenceButtonContents--p5oMB",functionReferenceTitle:"FunctionLoadingUtils-module__functionReferenceTitle--P1oyO",functionReferenceListFooter:"FunctionLoadingUtils-module__functionReferenceListFooter--xNrSv"};function C(e){let t,n,i=(0,a.c)(8),{chatManager:s,functionCall:o,skillArgs:l}=e,c=l.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(p.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching the web for \u{201C}${c}\u{201D}`,m=`No web search results for \u{201C}${c}\u{201D} were found`,h=`Using web search results for \u{201C}${c}\u{201D}`;return i[1]!==s||i[2]!==o||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==h?(n=(0,r.jsx)(K,{additionalFooterContent:t,chatManager:s,errorButtonText:d,errorTitle:"An error occurred when searching the web",toolLink:"https://bing.com",toolName:"Bing search",functionCall:o,inProgressMessage:u,noResultsMessage:m,resultsMapper:j,successButtonText:h,useSelectReference:!1}),i[1]=s,i[2]=o,i[3]=d,i[4]=u,i[5]=m,i[6]=h,i[7]=n):n=i[7],n}function j(e){return(e.references?.[0]?.results??[]).map(w)}function w(e){return{title:e.title,url:e.url,description:e.excerpt,leadingIcon:s.GlobeIcon}}function N(e){let t,n,i=(0,a.c)(8),{chatManager:s,functionCall:o,skillArgs:l}=e,c=l.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(p.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching the web for \u{201C}${c}\u{201D}`,m=`No web search results for \u{201C}${c}\u{201D} were found`,h=`Using web search results for \u{201C}${c}\u{201D}`;return i[1]!==s||i[2]!==o||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==h?(n=(0,r.jsx)(K,{additionalFooterContent:t,chatManager:s,errorButtonText:d,errorTitle:"An error occurred when searching the web",toolLink:"https://gh.io/azure-ai-agent-with-bing-grounding",toolName:"Bing Search",functionCall:o,inProgressMessage:u,noResultsMessage:m,resultsMapper:I,successButtonText:h,useSelectReference:!1}),i[1]=s,i[2]=o,i[3]=d,i[4]=u,i[5]=m,i[6]=h,i[7]=n):n=i[7],n}function I(e){let t=e.references?.[0];return(t?.results??[]).map(e=>({title:e.title,url:e.url,leadingIcon:"bing_search"===e.reference_type?i._:s.GlobeIcon}))}function E(e){var t;let n,i=(0,a.c)(9),{chatManager:s,functionCall:o,skillArgs:l,useSelectReference:c}=e,d=l.query,u="scopingQuery"in l?l.scopingQuery:l.repoOwner&&l.repoName?`repo:${l.repoOwner}/${l.repoName}`:void 0;u&&(u=(t=u).startsWith("repo:")?t.substring(5):t);let m="semantic-code-search"===l.kind?"semantic":"lexical",h=`An error occurred when searching for \u{201C}${d}\u{201D}`,p=`${m.charAt(0).toUpperCase()+m.slice(1)} search`,f=`Searching for \u{201C}${d}\u{201D}${u&&` in ${u}`}`,g=`No results were found when ${m} searching for \u{201C}${d}\u{201D}${u&&` in ${u}`}`,y=`Using ${m} search results for \u{201C}${d}\u{201D}${u&&` in ${u}`}`;return i[0]!==s||i[1]!==o||i[2]!==h||i[3]!==p||i[4]!==f||i[5]!==g||i[6]!==y||i[7]!==c?(n=(0,r.jsx)(K,{chatManager:s,errorButtonText:h,errorTitle:"An error occurred when searching code",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:p,functionCall:o,inProgressMessage:f,noResultsMessage:g,resultsMapper:es,successButtonText:y,useSelectReference:c}),i[0]=s,i[1]=o,i[2]=h,i[3]=p,i[4]=f,i[5]=g,i[6]=y,i[7]=c,i[8]=n):n=i[8],n}function R(e){let t,n=(0,a.c)(8),{chatManager:i,functionCall:s,skillArgs:o,useSelectReference:l}=e,c=o.query,d=o.kbID,{knowledgeBases:u}=(0,b.Pk)(),m=u.find(e=>e.id===d),h=m?.name??"the knowledge base",p=`An error occurred when searching for \u{201C}${c}\u{201D} in ${h}`,f=`Searching the ${h} knowledge base for \u{201C}${c}\u{201D}`,g=`No results were found when searching the ${h} knowledge base for \u{201C}${c}\u{201D}`,y=`Using search results from the ${h} knowledge base for \u{201C}${c}\u{201D}`;return n[0]!==i||n[1]!==s||n[2]!==p||n[3]!==f||n[4]!==g||n[5]!==y||n[6]!==l?(t=(0,r.jsx)(K,{chatManager:i,errorButtonText:p,errorTitle:"An error occurred when searching the knowledge base",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Knowledge base search",functionCall:s,inProgressMessage:f,noResultsMessage:g,resultsMapper:es,successButtonText:y,useSelectReference:l}),n[0]=i,n[1]=s,n[2]=p,n[3]=f,n[4]=g,n[5]=y,n[6]=l,n[7]=t):t=n[7],t}function T(e){let t,n,i,s,o,l=(0,a.c)(20),{chatManager:c,functionCall:d,skillArgs:u,useSelectReference:m}=e,{path:h,repo:p,ref:f}=u,g=`An error occurred when finding \u{201C}${h}\u{201D} in ${p}`;l[0]!==f||l[1]!==g?(t=P(g,f),l[0]=f,l[1]=g,l[2]=t):t=l[2];let y=`File results for \u{201C}${h}\u{201D} in ${p}`;l[3]!==f||l[4]!==y?(n=P(y,f),l[3]=f,l[4]=y,l[5]=n):n=l[5];let x=`No files matching \u{201C}${h}\u{201D} in ${p} were found`;l[6]!==f||l[7]!==x?(i=P(x,f),l[6]=f,l[7]=x,l[8]=i):i=l[8];let v=`Using results for \u{201C}${h}\u{201D} in ${p}`;return l[9]!==f||l[10]!==v?(s=P(v,f),l[9]=f,l[10]=v,l[11]=s):s=l[11],l[12]!==c||l[13]!==d||l[14]!==t||l[15]!==n||l[16]!==i||l[17]!==s||l[18]!==m?(o=(0,r.jsx)(K,{chatManager:c,errorButtonText:t,errorTitle:"An error occurred when finding a file",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file",functionCall:d,inProgressMessage:n,noResultsMessage:i,resultsMapper:k,successButtonText:s,useSelectReference:m}),l[12]=c,l[13]=d,l[14]=t,l[15]=n,l[16]=i,l[17]=s,l[18]=m,l[19]=o):o=l[19],o}function k(e){return(e.references??[]).map(A)}function A(e){return"file-v2"===e.type?{description:`${e.repoName}/${e.path}`,leadingIcon:s.FileIcon,reference:e,title:(0,_.Xo)(e),url:e.url}:void 0}function D(e){let t,n,i,o,l,c,d=(0,a.c)(23),{chatManager:u,functionCall:m,skillArgs:h,useSelectReference:p}=e,{path:f,repo:g,ref:y}=h,x=`An error occurred when finding file changes for \u{201C}${f}\u{201D} in ${g}`;d[0]!==y||d[1]!==x?(t=P(x,y),d[0]=y,d[1]=x,d[2]=t):t=d[2];let v=`File changes results for \u{201C}${f} in ${g}`;d[3]!==y||d[4]!==v?(n=P(v,y),d[3]=y,d[4]=v,d[5]=n):n=d[5];let b=`No files changes were found for \u{201C}${f}\u{201D} in ${g}`;d[6]!==y||d[7]!==b?(i=P(b,y),d[6]=y,d[7]=b,d[8]=i):i=d[8],d[9]!==f?(o=e=>(e.references??[]).map(e=>"file-changes"===e.type?{description:`${e.repository.name}/${f}`,leadingIcon:s.FileIcon,reference:e,title:(0,_.Xo)(e),url:e.url}:void 0),d[9]=f,d[10]=o):o=d[10];let S=`Using results for \u{201C}${f}\u{201D} in ${g}`;return d[11]!==y||d[12]!==S?(l=P(S,y),d[11]=y,d[12]=S,d[13]=l):l=d[13],d[14]!==u||d[15]!==m||d[16]!==t||d[17]!==n||d[18]!==i||d[19]!==o||d[20]!==l||d[21]!==p?(c=(0,r.jsx)(K,{chatManager:u,errorButtonText:t,errorTitle:"An error occurred when finding the file changes",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file changes",functionCall:m,inProgressMessage:n,noResultsMessage:i,resultsMapper:o,successButtonText:l,useSelectReference:p}),d[14]=u,d[15]=m,d[16]=t,d[17]=n,d[18]=i,d[19]=o,d[20]=l,d[21]=p,d[22]=c):c=d[22],c}let P=(e,t)=>t?`${e} on ref ${t}`:e;function L(e){let t,n=(0,a.c)(5),{chatManager:i,functionCall:s,skillArgs:o,useSelectReference:l}=e,c=`An error occurred when fetching alert information for ${o.url}`;return n[0]!==i||n[1]!==s||n[2]!==c||n[3]!==l?(t=(0,r.jsx)(K,{chatManager:i,errorButtonText:c,errorTitle:"An error occurred when fetching alert information",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get alert information",functionCall:s,inProgressMessage:"Fetching alert information",noResultsMessage:"Unable to fetch alert information",resultsMapper:M,successButtonText:"Using alert information",useSelectReference:l}),n[0]=i,n[1]=s,n[2]=c,n[3]=l,n[4]=t):t=n[4],t}function M(e){return(e.references??[]).map(O)}function O(e){return"alert.api"===e.type?{description:"Alert",leadingIcon:F,title:"Alert"}:void 0}function F(){return(0,r.jsx)(s.ShieldIcon,{})}function B(e){let t,n=(0,a.c)(7),{chatManager:i,functionCall:s,skillArgs:o,useSelectReference:l}=e,c=`Fetching discussion ${o.discussionNumber}`,d=`Unable to fetch discussion ${o.discussionNumber}`,u=`Using discussion #${o.discussionNumber}`;return n[0]!==i||n[1]!==s||n[2]!==c||n[3]!==d||n[4]!==u||n[5]!==l?(t=(0,r.jsx)(K,{chatManager:i,errorButtonText:"An error occurred when fetching discussion",errorTitle:"An error occurred when fetching discussion",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get discussion",functionCall:s,inProgressMessage:c,noResultsMessage:d,resultsMapper:U,successButtonText:u,useSelectReference:l}),n[0]=i,n[1]=s,n[2]=c,n[3]=d,n[4]=u,n[5]=l,n[6]=t):t=n[6],t}function U(e){return(e.references??[]).map($)}function $(e){return"discussion"===e.type?{title:e.title??"Discussion",description:`Using discussion #${e.number} for ${e.repository.owner}/${e.repository.name}`,url:e.url,leadingIcon:s.CommentDiscussionIcon}:void 0}function V(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("span",{className:S.spinner,children:(0,r.jsx)(f.A,{size:"small"})}),i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsxs)("div",{className:S.functionLoading,children:[t,(0,r.jsx)("span",{children:s})]}),i[1]=s,i[2]=n):n=i[2],n}function q(e){let t=(0,a.c)(1),{functionCall:n}=e,{status:i}=n;if("started"===i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(V,{children:"Coming up with a plan"}),t[0]=e):e=t[0],e}}function W(e){let t,n=(0,a.c)(8),{chatManager:i,functionCall:s,skillArgs:o,useSelectReference:l}=e,c=Q(o),d=`An error occurred when fetching logs for ${c} in ${o.repo}`,u=`Fetching logs for ${c} in ${o.repo}`,m=`Unable to fetch logs for ${c} in ${o.repo}`,h=`Using logs for ${c} in ${o.repo}`;return n[0]!==i||n[1]!==s||n[2]!==d||n[3]!==u||n[4]!==m||n[5]!==h||n[6]!==l?(t=(0,r.jsx)(K,{chatManager:i,errorButtonText:d,errorTitle:"An error occurred when fetching a commit",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get job logs",functionCall:s,inProgressMessage:u,noResultsMessage:m,resultsMapper:G,successButtonText:h,useSelectReference:l}),n[0]=i,n[1]=s,n[2]=d,n[3]=u,n[4]=m,n[5]=h,n[6]=l,n[7]=t):t=n[7],t}function G(e){return(e.references??[]).filter(H).map(z)}function z(e){return{description:`${e.id} \xb7 ${e.repoOwner}/${e.repoName}`,leadingIcon:s.PlayIcon,title:"Job"}}function H(e){return"job"===e.type}function Q(e){return e.jobId?`job ${e.jobId}`:e.runId?`workflow run ${e.runId}`:e.pullRequestNumber?`pull request ${e.pullRequestNumber}`:e.workflowPath?`workflow ${e.workflowPath}`:"unknown job"}function K(e){let t,n,i=(0,a.c)(27),{additionalFooterContent:l,chatManager:c,errorButtonText:d,errorTitle:u,functionCall:m,inProgressMessage:h,noResultsMessage:p,resultsMapper:f,successButtonText:_,toolLink:b,toolName:C,useSelectReference:j}=e,[w,N]=(0,v.useState)(!1),I=(0,v.useId)();if(i[0]!==l||i[1]!==c||i[2]!==I||i[3]!==d||i[4]!==u||i[5]!==w||i[6]!==m||i[7]!==h||i[8]!==p||i[9]!==f||i[10]!==_||i[11]!==b||i[12]!==C||i[13]!==j){n=Symbol.for("react.early_return_sentinel");e:{let e,a,v,E,R=f(m),{status:T,errorMessage:k}=m;if(m.references?.length===1){let e=m.references[0];if(e)switch(e.type){case"text":T="error",k=e.text;break;case"unsupported":T="unsupported",k=e.text}}if("started"===T){let e;i[16]!==h?(e=(0,r.jsx)(V,{children:h}),i[16]=h,i[17]=e):e=i[17],n=e;break e}let A=w?s.ChevronUpIcon:s.ChevronDownIcon;i[18]===Symbol.for("react.memo_cache_sentinel")?(e=()=>N(J),i[18]=e):e=i[18],i[19]===Symbol.for("react.memo_cache_sentinel")?(a={marginBottom:1},i[19]=a):a=i[19];let D="error"===T?d:"unsupported"===T?p:_;i[20]!==D?(v=(0,r.jsx)("span",{className:S.functionReferenceButtonContents,children:D}),i[20]=D,i[21]=v):v=i[21],i[22]!==I||i[23]!==w||i[24]!==A||i[25]!==v?(E=(0,r.jsx)(g.Q,{"aria-expanded":w,"aria-controls":I,className:S.functionReferenceButton,leadingVisual:A,onClick:e,variant:"invisible",sx:a,children:v}),i[22]=I,i[23]=w,i[24]=A,i[25]=v,i[26]=E):E=i[26],t=(0,r.jsxs)(r.Fragment,{children:[E,w&&(0,r.jsxs)("div",{id:I,className:S.functionReferenceListContainer,children:[(0,r.jsx)(y.l,{children:"error"===T?(0,r.jsxs)(y.l.Item,{children:[u,(0,r.jsx)(y.l.Description,{variant:"block",children:k})]}):"unsupported"===T?(0,r.jsxs)(y.l.Item,{children:[k,(0,r.jsx)(y.l.Description,{truncate:!0,children:""})]}):0===R.length?(0,r.jsxs)(y.l.Item,{children:[p,(0,r.jsx)(y.l.Description,{truncate:!0,children:"Try modifying your query by reframing your question."})]}):R.map((e,t)=>e&&(0,r.jsxs)(y.l.LinkItem,{className:"width-fit",href:e.url,onClick:t=>{j&&e.reference&&(c.selectReference(e.reference),t.preventDefault())},target:"_blank",rel:"noopener",children:[e.leadingIcon&&(0,r.jsx)(y.l.LeadingVisual,{children:(0,r.jsx)(x.A,{icon:e.leadingIcon,sx:{...e.leadingIconColor&&{color:e.leadingIconColor}}})}),(0,r.jsx)(o.A,{className:S.functionReferenceTitle,title:e.title,children:e.title}),(0,r.jsx)(y.l.Description,{variant:"block",children:e.description})]},t))}),(0,r.jsxs)("span",{className:S.functionReferenceListFooter,children:["Copilot used the"," ",(0,r.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",children:C})," ","tool",l&&(0,r.jsxs)(r.Fragment,{children:[". ",l]})]})]})]})}i[0]=l,i[1]=c,i[2]=I,i[3]=d,i[4]=u,i[5]=w,i[6]=m,i[7]=h,i[8]=p,i[9]=f,i[10]=_,i[11]=b,i[12]=C,i[13]=j,i[14]=t,i[15]=n}else t=i[14],n=i[15];return n!==Symbol.for("react.early_return_sentinel")?n:t}function J(e){return!e}function X(e){let t,n,i,o=(0,a.c)(15),{chatManager:l,functionCall:c,skillArgs:d,useSelectReference:u}=e,m="GitHub API",h=c.references?.[0];if(h){let e=h.type;if(e.endsWith(".api")){let t=e.split(".")[0];t&&(m=`${t.split("-").map(Z).join(" ")} API`)}else"api-response"===h.type&&(m=`${h.resourceType} API`)}o[0]!==d.endpoint||o[1]!==d.endpointDescription?(t=d.endpointDescription?{errorButtonText:`An error occurred when using the GitHub API to ${d.endpointDescription}`,inProgressMessage:`Using the GitHub API to ${d.endpointDescription}`,noResultsMessage:`Unable to use the GitHub API to ${d.endpointDescription}`,successButtonText:`Using the GitHub API to ${d.endpointDescription}`}:{errorButtonText:`An error occurred when fetching from ${d.endpoint}`,inProgressMessage:`Fetching endpoint ${d.endpoint}`,noResultsMessage:`Unable to fetch from ${d.endpoint}`,successButtonText:`Using endpoint ${d.endpoint}`},o[0]=d.endpoint,o[1]=d.endpointDescription,o[2]=t):t=o[2];let p=t;return o[3]!==d?(n=e=>e.references?.filter(Y).map(e=>(function(e,t){switch(e.type){case"release.api":return{description:`Release ${e.tag_name} \xb7 ${t.repo}`,leadingIcon:s.TagIcon,title:e.name??"Release",url:e.html_url};case"issue.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:s.IssueOpenedIcon,title:e.title??"Issue",url:e.html_url};case"pull-request.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:s.GitPullRequestIcon,title:e.title??"Pull request",url:e.html_url};case"repository.api":return{description:e.description||"",title:e.name,leadingIcon:s.RepoIcon,url:e.html_url};case"commit.api":return{description:`${e.sha} \xb7 ${t.repo}`,leadingIcon:s.GitCommitIcon,title:e.commit.message??"Commit",url:e.html_url};case"topic.api":return{description:e.short_description||"",leadingIcon:s.HashIcon,title:e.display_name??e.name};case"api-response":switch(e.resourceType){case"Repository":return{description:e.data.description||"",title:e.data.name,leadingIcon:s.RepoIcon,url:e.data.html_url};case"Issue":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:s.IssueOpenedIcon,title:e.data.title??"Issue",url:e.data.html_url};case"Release":return{description:`Release ${e.data.tag_name} \xb7 ${t.repo}`,leadingIcon:s.TagIcon,title:e.data.name??"Release",url:e.data.html_url};case"PullRequest":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:s.GitPullRequestIcon,title:e.data.title??"Pull request",url:e.data.html_url};case"Commit":return{description:`${e.data.sha} \xb7 ${t.repo}`,leadingIcon:s.GitCommitIcon,title:e.data.commit.message??"Commit",url:e.data.html_url};case"Topic":return{description:e.data.short_description||"",leadingIcon:s.HashIcon,title:e.data.display_name??e.data.name};default:return{description:"API endpoint returned results successfully",leadingIcon:s.InfoIcon,title:"API results"}}default:return{description:"API endpoint returned results successfully",leadingIcon:s.InfoIcon,title:"API results"}}})(e,d))??[],o[3]=d,o[4]=n):n=o[4],o[5]!==l||o[6]!==c||o[7]!==p.errorButtonText||o[8]!==p.inProgressMessage||o[9]!==p.noResultsMessage||o[10]!==p.successButtonText||o[11]!==n||o[12]!==m||o[13]!==u?(i=(0,r.jsx)(K,{chatManager:l,errorTitle:"An error occurred when fetching data from the GitHub API",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:m,functionCall:c,errorButtonText:p.errorButtonText,inProgressMessage:p.inProgressMessage,noResultsMessage:p.noResultsMessage,successButtonText:p.successButtonText,useSelectReference:u,resultsMapper:n}),o[5]=l,o[6]=c,o[7]=p.errorButtonText,o[8]=p.inProgressMessage,o[9]=p.noResultsMessage,o[10]=p.successButtonText,o[11]=n,o[12]=m,o[13]=u,o[14]=i):i=o[14],i}function Y(e){return"text"!==e.type}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ee(e){let t,n=(0,a.c)(7),{chatManager:i,functionCall:s,skillArgs:o}=e,l=`An error occurred when retrieving \u{201C}${o.name}\u{201D}`,c=`Getting Figma file \u{201C}${o.name}\u{201D}`,d=`Unable to retrieve \u{201C}${o.name}\u{201D}`,u=`Using result from \u{201C}${o.name}\u{201D}`;return n[0]!==i||n[1]!==s||n[2]!==l||n[3]!==c||n[4]!==d||n[5]!==u?(t=(0,r.jsx)(K,{chatManager:i,errorButtonText:l,errorTitle:"An error occurred retrieving Figma file",toolLink:"https://figma.com",toolName:"Get Figma",functionCall:s,inProgressMessage:c,noResultsMessage:d,resultsMapper:et,successButtonText:u,useSelectReference:!1}),n[0]=i,n[1]=s,n[2]=l,n[3]=c,n[4]=d,n[5]=u,n[6]=t):t=n[6],t}function et(e){let t=e.references?.[0];return[{title:t?.title||"",url:t?.url||"",description:""}]}let en="https://docs.github.com/en/support/contacting-github-support/using-copilot-in-github-support";function er(e){let t,n,i=(0,a.c)(8),{chatManager:s,functionCall:o,skillArgs:l}=e,c=l.rawUserQuery;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(p.A,{href:en,rel:"nofollow",target:"_blank",children:"Information on using Copilot in GitHub Support"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching support documents for \u{201C}${c}\u{201D}`,m=`No support documents for \u{201C}${c}\u{201D} were found`,h=`Using support search results for \u{201C}${c}\u{201D}`;return i[1]!==s||i[2]!==o||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==h?(n=(0,r.jsx)(K,{additionalFooterContent:t,chatManager:s,errorButtonText:d,errorTitle:"An error occurred when searching support documents",toolLink:en,toolName:"Support Search",functionCall:o,inProgressMessage:u,noResultsMessage:m,resultsMapper:ea,successButtonText:h,useSelectReference:!1}),i[1]=s,i[2]=o,i[3]=d,i[4]=u,i[5]=m,i[6]=h,i[7]=n):n=i[7],n}function ea(e){return(e.references?.[0]?.results??[]).map(ei)}function ei(e){return{title:e.title,url:e.url,description:e.url}}function es(e){return(e.references??[]).map(e=>"file"===e.type||"snippet"===e.type?{description:(0,_.Z8)(e),leadingIcon:s.CodeIcon,reference:e,title:(0,_.z$)(e),url:e.url}:void 0)}try{C.displayName||(C.displayName="BingFunctionButton")}catch{}try{N.displayName||(N.displayName="BingGroundingFunctionButton")}catch{}try{E.displayName||(E.displayName="CodeSearchButton")}catch{}try{R.displayName||(R.displayName="KnowledgeBaseSearchButton")}catch{}try{T.displayName||(T.displayName="GetFileButton")}catch{}try{D.displayName||(D.displayName="GetFileChangesButton")}catch{}try{L.displayName||(L.displayName="GetAlertButton")}catch{}try{B.displayName||(B.displayName="GetDiscussionButton")}catch{}try{V.displayName||(V.displayName="FunctionLoading")}catch{}try{q.displayName||(q.displayName="PlanButton")}catch{}try{W.displayName||(W.displayName="GetJobLogsButton")}catch{}try{K.displayName||(K.displayName="ExpandableFunctionButton")}catch{}try{X.displayName||(X.displayName="GetGitHubDataButton")}catch{}try{ee.displayName||(ee.displayName="FigmaButton")}catch{}try{er.displayName||(er.displayName="SupportSearchButton")}catch{}let eo=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.SearchIcon,{}),t[0]=e):e=t[0],e},el=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.FileIcon,{}),t[0]=e):e=t[0],e},ec=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.TagIcon,{}),t[0]=e):e=t[0],e},ed=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.PlayIcon,{}),t[0]=e):e=t[0],e},eu=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.BookIcon,{}),t[0]=e):e=t[0],e},em=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.CommentDiscussionIcon,{}),t[0]=e):e=t[0],e},eh=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(s.TasklistIcon,{}),t[0]=e):e=t[0],e},ep=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ep,{}),t[0]=e):e=t[0],e},ef="planning response",eg=e=>{switch(e.kind){case"bing-search":return{id:"bing-search",referenceType:"web-search",loadingText:`Using Bing to search for "${e.query}"`,completedText:`Bing results for "${e.query}"`,icon:i._,name:"Bing search",activeSkillText:"searching Bing"};case"lexical-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.scopingQuery}"`,completedText:`Search results for "${e.query}" in "${e.scopingQuery}"`,icon:eo,name:"Code search",activeSkillText:"searching the codebase"};case"semantic-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,completedText:`Search results for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,icon:eo,name:"Code search",activeSkillText:"searching the codebase"};case"kb-search":return{id:"kb-search",loadingText:`Searching for "${e.query}" in the knowledge base`,completedText:`Knowledge base search results for "${e.query}"`,icon:eu,name:"Knowledge base search",activeSkillText:"searching the knowledge base"};case"getalert":return{id:"getalert",loadingText:"Retrieving information about alerts",completedText:"Including information about alerts",icon:()=>(0,r.jsx)(s.ShieldIcon,{}),name:"Get alert",activeSkillText:"getting alert"};case"get-github-data":return{id:"get-github-data",loadingText:`Fetching ${e.endpoint}`,completedText:`Results of ${e.endpoint}`,icon:ec,name:"Get GitHub Data",activeSkillText:"getting data"};case"get-actions-job-logs":{let t=Q(e),n=t.charAt(0).toUpperCase()+t.slice(1);return{id:"get-actions-jog-logs",loadingText:`Retrieving ${t} in ${e.repo}`,completedText:`${n} in ${e.repo}`,icon:ed,name:"Get job logs",activeSkillText:"getting job logs"}}case"getdiscussion":return{id:"getdiscussion",loadingText:`Fetching discussion ${e.discussionNumber}`,completedText:`Details about discussion #${e.discussionNumber}`,icon:em,name:"Get discussion",activeSkillText:"getting discussion"};case"getfile":return{id:"getfile",loadingText:"Searching for file",completedText:"Using results of get file",icon:el,name:"Get file",activeSkillText:"searching for file"};case"getfilechanges":return{id:"getfilechanges",loadingText:"Searching for file changes",completedText:`File changes for ${e.path} in ${e.repo}`,icon:el,name:"Get file changes",activeSkillText:"searching for file changes"};case"planskill":return{id:"planskill",loadingText:"Planning response...",completedText:"Plan created",icon:eh,name:"Plan skill",activeSkillText:"planning response"};case"support-search":return{id:"supportsearch",loadingText:"Searching for support documents",completedText:"Using results of support search",icon:eu,name:"Support search",activeSkillText:"searching for support documents"};case"get-figma":return{id:"getfigma",loadingText:"Analyzing Figma file",completedText:"Using results of Figma file",icon:eu,name:"Get Figma",activeSkillText:"analyzing Figma file"};case"codesearchagentskill":return{id:"codesearchagentskill",loadingText:"Using the code search agent",completedText:"Using results of code search agent",icon:eu,name:"Code Search Agent",activeSkillText:"searching the codebase"};case"draft-issue":return{id:"draft-issue",loadingText:e.repository?`Drafting issue in ${e.repository}`:"Drafting issue ",completedText:e.repository?`Drafted issue in ${e.repository}`:"Drafted issue",icon:ep,name:"Draft Issue",activeSkillText:e.repository?`drafting issue in ${e.repository}`:"drafting issue"};case"repository-metadata":return{id:"repository-metadata",loadingText:`Fetching metadata from ${e.repository}`,completedText:`Using metadata from ${e.repository}`,icon:ep,name:"Repository Metadata",activeSkillText:`fetching metadata from ${e.repository}`}}};function ey(e){let t,n,i,s,l=(0,a.c)(10),{maxWidth:c,functionMetadata:d}=e;return l[0]!==d?(t=d.icon(),l[0]=d,l[1]=t):t=l[1],l[2]!==c?(n={maxWidth:c},l[2]=c,l[3]=n):n=l[3],l[4]!==d.completedText||l[5]!==n?(i=(0,r.jsx)(o.A,{title:d.completedText,sx:n,children:d.completedText}),l[4]=d.completedText,l[5]=n,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(s=(0,r.jsxs)(r.Fragment,{children:[t,i]}),l[7]=t,l[8]=i,l[9]=s):s=l[9],s}function ex(e){let t,n,i,s,l=(0,a.c)(10),{maxWidth:c,functionMetadata:d}=e;return l[0]!==d?(t=d.icon(),l[0]=d,l[1]=t):t=l[1],l[2]!==c?(n={maxWidth:c},l[2]=c,l[3]=n):n=l[3],l[4]!==d.loadingText||l[5]!==n?(i=(0,r.jsx)(o.A,{title:d.loadingText,sx:n,children:d.loadingText}),l[4]=d.loadingText,l[5]=n,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(s=(0,r.jsxs)(r.Fragment,{children:[t,i]}),l[7]=t,l[8]=i,l[9]=s):s=l[9],s}function ev(e){let t,n,i,s,o,u,m,h,p,f=(0,a.c)(15),{functionCall:g,functionMetadata:y}=e;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t={p:2},f[0]=t):t=f[0],f[1]===Symbol.for("react.memo_cache_sentinel")?(n={fontSize:1},f[1]=n):n=f[1],f[2]!==y.activeSkillText?(i=(0,r.jsxs)(l.A,{as:"h3",sx:n,children:["An error occurred while ",y.activeSkillText]}),f[2]=y.activeSkillText,f[3]=i):i=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(s={m:0},f[4]=s):s=f[4],f[5]!==g.errorMessage?(o=(0,r.jsx)(c.A,{as:"p",sx:s,children:g.errorMessage}),f[5]=g.errorMessage,f[6]=o):o=f[6],f[7]===Symbol.for("react.memo_cache_sentinel")?(u={mt:2,mb:0,fontSize:0,fontWeight:"normal",color:"fg.subtle"},f[7]=u):u=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(m={fontWeight:"semibold"},f[8]=m):m=f[8],f[9]!==y.name?(h=(0,r.jsxs)(c.A,{as:"p",sx:u,children:["Copilot used the ",(0,r.jsx)(c.A,{sx:m,children:y.name})," tool"]}),f[9]=y.name,f[10]=h):h=f[10],f[11]!==i||f[12]!==o||f[13]!==h?(p=(0,r.jsxs)(d.A,{sx:t,children:[i,o,h]}),f[11]=i,f[12]=o,f[13]=h,f[14]=p):p=f[14],p}function e_(e){let t,n,i,s=(0,a.c)(7),{functionCall:o,functionMetadata:l,panelWidth:c}=e,u=c?c-130:h.J.DEFAULT_PANEL_WIDTH;s[0]!==o||s[1]!==l||s[2]!==u?(t=o?.status==="error"?(0,r.jsx)(ev,{functionCall:o,functionMetadata:l}):o?.status==="completed"?(0,r.jsx)(ey,{maxWidth:u,functionMetadata:l}):(0,r.jsx)(ex,{maxWidth:u,functionMetadata:l}),s[0]=o,s[1]=l,s[2]=u,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",gap:"6px",alignItems:"center"},s[4]=n):n=s[4],s[5]!==m?(i=(0,r.jsx)(d.A,{sx:n,children:m}),s[5]=m,s[6]=i):i=s[6],i}function eb(e,t,n,a,i,s){if(!e||"confirmation error"===e.errorMessage)return null;switch(i.kind){case"bing-search":if(m.W.bingGroundingUIEnabled)return(0,r.jsx)(N,{chatManager:n,functionCall:e,skillArgs:i});return(0,r.jsx)(C,{chatManager:n,functionCall:e,skillArgs:i});case"lexical-code-search":case"semantic-code-search":return(0,r.jsx)(E,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"getalert":return(0,r.jsx)(L,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"getfile":return(0,r.jsx)(T,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"getfilechanges":return(0,r.jsx)(D,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"getdiscussion":return(0,r.jsx)(B,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"get-actions-job-logs":return(0,r.jsx)(W,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"kb-search":return(0,r.jsx)(R,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"planskill":return(0,r.jsx)(q,{functionCall:e});case"get-github-data":return(0,r.jsx)(X,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:s});case"support-search":return(0,r.jsx)(er,{chatManager:n,functionCall:e,skillArgs:i});case"get-figma":if(!m.W.immersiveFigmaIntegration)return(0,r.jsx)(r.Fragment,{});return(0,r.jsx)(ee,{chatManager:n,functionCall:e,skillArgs:i});default:return(0,r.jsx)("div",{className:"border rounded-2 p-2",children:(0,r.jsx)(e_,{functionCall:e,functionMetadata:t,panelWidth:a,parsedArgs:i})})}}function eS(e){let t,n=(0,a.c)(8);e:{let r,a,i;if(!e.arguments||!u.xP.includes(e.slug)){let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={functionMetadata:void 0,functionRenderer:void 0,parsedArgs:void 0},n[0]=e):e=n[0],t=e;break e}n[1]!==e.arguments||n[2]!==e.slug?(a=eg(r={...JSON.parse(e.arguments),kind:e.slug}),n[1]=e.arguments,n[2]=e.slug,n[3]=r,n[4]=a):(r=n[3],a=n[4]);let s=a;n[5]!==s||n[6]!==r?(i={functionMetadata:s,functionRenderer:eb,parsedArgs:r},n[5]=s,n[6]=r,n[7]=i):i=n[7],t=i}return t}function eC(e){if(!e)return ef;let t=function(e){if(e)return eg({...JSON.parse(e?.arguments||"{}"),kind:e.slug})}(e);return e.statusMessage??t?.activeSkillText??ef}try{eo.displayName||(eo.displayName="CodeSearchIcon")}catch{}try{el.displayName||(el.displayName="GetFileIcon")}catch{}try{ec.displayName||(ec.displayName="ReleaseIcon")}catch{}try{ed.displayName||(ed.displayName="JobIcon")}catch{}try{eu.displayName||(eu.displayName="KnowledgeBaseIcon")}catch{}try{em.displayName||(em.displayName="DiscussionIcon")}catch{}try{eh.displayName||(eh.displayName="PlanIcon")}catch{}try{ep.displayName||(ep.displayName="IssueDraftIcon")}catch{}try{ey.displayName||(ey.displayName="FunctionCompleted")}catch{}try{ex.displayName||(ex.displayName="FunctionLoading")}catch{}try{ev.displayName||(ev.displayName="FunctionError")}catch{}try{e_.displayName||(e_.displayName="FunctionTitle")}catch{}},4699:(e,t,n)=>{n.d(t,{h:()=>l});var r=n(74848),a=n(21728),i=n(95726),s=n(34164);let o={interruptedBanner:"InterruptedBanner-module__interruptedBanner--XDG6C",hasContent:"InterruptedBanner-module__hasContent--NwTH4"};function l(e){let t,n,l=(0,a.c)(4),{messageHasContent:c}=e,d=c&&o.hasContent;return l[0]!==d?(t=(0,s.$)(o.interruptedBanner,d),l[0]=d,l[1]=t):t=l[1],l[2]!==t?(n=(0,r.jsx)(i.l,{className:t,"data-testid":"chat-message-interrupted",description:"Copilot was interrupted before it could finish this message.",hideTitle:!0,title:"Message interrupted",variant:"info"}),l[2]=t,l[3]=n):n=l[3],n}try{l.displayName||(l.displayName="InterruptedBanner")}catch{}},69458:(e,t,n)=>{n.d(t,{E:()=>u});var r=n(74848),a=n(21728),i=n(10871),s=n(55847),o=n(9852),l=n(96540);let c={dialog:"InterviewSurveyDialog-module__dialog--vBqY6",body:"InterviewSurveyDialog-module__body--zTKei",primaryText:"InterviewSurveyDialog-module__primaryText--E49Ba InterviewSurveyDialog-module__text--AnLTc",secondaryText:"InterviewSurveyDialog-module__secondaryText--uX6h1 InterviewSurveyDialog-module__text--AnLTc",surveyLink:"InterviewSurveyDialog-module__surveyLink--LnhEL",noThanksButton:"InterviewSurveyDialog-module__noThanksButton--loLSW"};function d(e,t){let n,d,u,m,h=(0,a.c)(10),{title:p,onClose:f}=e,g=void 0===p?"Give feedback":p,[y,x]=(0,l.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>x(!0)}),h[0]=n):n=h[0],(0,l.useImperativeHandle)(t,n),h[1]!==f?(d=e=>{x(!1),f?.(e)},h[1]=f,h[2]=d):d=h[2];let v=d;h[3]!==v?(u=()=>(0,r.jsxs)("div",{className:c.body,children:[(0,r.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,r.jsx)("span",{className:c.primaryText,children:"Would you like to participate in our research?"}),(0,r.jsx)("span",{className:c.secondaryText,children:"You will be compensated for your time"}),(0,r.jsx)(i.z,{variant:"primary",className:c.surveyLink,href:"/github-copilot/chat/feedback/interview-survey",target:"_blank",children:"Book a session"}),(0,r.jsx)(s.Q,{variant:"link",className:c.noThanksButton,onClick:()=>v("no-thanks"),children:"No, thanks"})]}),h[3]=v,h[4]=u):u=h[4];let _=u;return h[5]!==v||h[6]!==y||h[7]!==_||h[8]!==g?(m=y&&(0,r.jsx)(o.l,{className:c.dialog,onClose:()=>v("close"),title:g,renderBody:_}),h[5]=v,h[6]=y,h[7]=_,h[8]=g,h[9]=m):m=h[9],m}let u=(0,l.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},75320:(e,t,n)=>{n.d(t,{Y:()=>I});var r,a=n(74848),i=n(21728),s=n(70170),o=n(38007),l=n(98386),c=n(42080),d=n(17515),u=n(60039),m=n(16255),h=n(73451),p=n(19647),f=n(55847),g=n(9852),y=n(96540),x=n(40961),v=n(34901),_=n(47397);let b={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var S=n(38621),C=n(15385);let j={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},w=(0,y.forwardRef)(function(e,t){let n,r,s,o,l,c,d,u,m=(0,i.c)(19),{onSelect:h}=e,[p,f]=(0,y.useState)(!1);m[0]!==p?(n=()=>f(!p),m[0]=p,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(r={marginBottom:"1px"},m[2]=r):r=m[2],m[3]!==h||m[4]!==p?(s=p&&Object.entries(j)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(C.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,n.body),children:[(0,a.jsx)(S.PlusIcon,{}),t]},t)}),m[3]=h,m[4]=p,m[5]=s):s=m[5],m[6]!==s?(o=(0,a.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:s}),m[6]=s,m[7]=o):o=m[7];let x=p?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==p?(c=p?(0,a.jsx)(S.XIcon,{}):(0,a.jsx)(S.LightBulbIcon,{}),m[9]=p,m[10]=c):c=m[10],m[11]!==x||m[12]!==c||m[13]!==g?(d=(0,a.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(C.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=x,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:r,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{w.displayName||(w.displayName="PersonalInstructionsTemplates")}catch{}try{(r=PersonalInstructionsTemplatesWithRef).displayName||(r.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let N=(e,t)=>{let n,r,a=(0,i.c)(4),o=void 0===t?500:t,[l,c]=(0,y.useState)(48);return a[0]!==e||a[1]!==o?(n=()=>{let t=(0,s.s)(()=>{e?.current&&c(e.current.clientHeight??48)},o),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},r=[e,o],a[0]=e,a[1]=o,a[2]=n,a[3]=r):(n=a[2],r=a[3]),(0,y.useEffect)(n,r),l},I=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),r=(0,_.b)(),[i,s]=(0,y.useState)(n.personalInstructions??""),[S,C]=(0,y.useState)(void 0),[j,I]=(0,y.useState)(!1),R=(0,y.useRef)(null),T=(0,y.useRef)(null),[k,A]=(0,y.useState)(""),D=N(T);(0,d.N)(()=>{R?.current&&(R.current.scrollTop=R.current.scrollHeight)},[i]);let P=(0,y.useCallback)(async()=>{if(!j){I(!0),k&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:k});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:i}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),r.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:i}),(0,x.flushSync)(()=>e());else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[j,i,r,e,k]),L=(e,t)=>{t&&(s(i?`${i}
${t}`:t),A(e),R?.current?.focus())},M=()=>{P()},O=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.Z,{children:(0,a.jsx)(g.l,{onClose:O,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:P,children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(h.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(c.tL,{commands:{"github:submit-form":M},children:[(0,a.jsx)(p.Ay,{ref:R,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:i,validationStatus:S||i.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{s(e.target.value),C(void 0)}}),(0,a.jsx)(w,{ref:T,onSelect:L})]})}),(0,a.jsx)(E,{text:i,promptCharLimit:4e3}),S&&(0,a.jsx)(h.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,l.G)("error-message"),children:S})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:b.footerContainer,children:[(0,a.jsx)(f.Q,{variant:"default",onClick:O,children:"Cancel"}),(0,a.jsx)(f.Q,{loading:j,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function E(e){let t,n,r,s,o=(0,i.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=n):n=o[2],o[3]!==d||o[4]!==n?(r=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",d," characters"]}),o[3]=d,o[4]=n,o[5]=r):r=o[5];let u=r;return o[6]!==u||o[7]!==d||o[8]!==c.length?(s=(0,a.jsx)(a.Fragment,{children:c.length>d?(0,a.jsx)(h.A.Validation,{variant:"error",children:u}):(0,a.jsx)(h.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=s):s=o[9],s}try{I.displayName||(I.displayName="PersonalInstructionsDialog")}catch{}try{E.displayName||(E.displayName="CharacterCount")}catch{}},70066:(e,t,n)=>{n.d(t,{Cb:()=>f,Dq:()=>d,E5:()=>c,Gj:()=>u,UJ:()=>y,cB:()=>h,f1:()=>m,hl:()=>g,zc:()=>p});var r=n(74848),a=n(21728),i=n(16255),s=n(75177),o=n(10569),l=n(96540);let c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",h=()=>{let e,t,n,o=(0,a.c)(3),c=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(c.current,u)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(s.A,{ref:c,sx:{position:"absolute",top:0,right:0,zIndex:100}}),o[2]=n):n=o[2],n},p=()=>{let e,t,n,o=(0,a.c)(3),d=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(d.current,c)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(s.A,{ref:d,sx:{position:"absolute",top:0,right:0}}),o[2]=n):n=o[2],n},f=()=>{let e,t,n,s=(0,a.c)(3),o=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(o.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:o}),s[2]=n):n=s[2],n},g=()=>{let e,t,n,s=(0,a.c)(3),o=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(o.current,m)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:o}),s[2]=n):n=s[2],n},y=e=>{let t,n,i,s,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[h,p]=(0,l.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>p(!0),d=[],m[4]=s,m[5]=d):(s=m[4],d=m[5]),(0,l.useEffect)(s,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,r.jsx)(o.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{h.displayName||(h.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},74302:(e,t,n)=>{n.d(t,{X:()=>v});var r=n(74848),a=n(21728),i=n(38621),s=n(73451),o=n(19647),l=n(9591),c=n(75177),d=n(46309),u=n(81679),m=n(87330),h=n(55847),p=n(16255),f=n(9852),g=n(96540),y=n(74244),x=n(47397);let v=e=>{let t,n,v,b,S,C,j,w,N,I,E,R,T,k,A,D,P,L,M,O,F,B,U,$,V,q,W=(0,a.c)(56),{onDismiss:G,promptDialogRef:z}=e,H=(0,x.b)(),Q=y.J.settings,[K,J]=(0,g.useState)(Q?.instructionPrompt||void 0);W[0]===Symbol.for("react.memo_cache_sentinel")?(t=Q?.skillOverrides??[],W[0]=t):t=W[0];let[X,Y]=(0,g.useState)(t),[Z,ee]=(0,g.useState)(Q?.temperature||.7),et=(0,g.useRef)(void 0);W[1]!==H||W[2]!==G||W[3]!==K||W[4]!==Z||W[5]!==X?(n=()=>{let e=X.filter(_);H.setCopilotSettings({instructionPrompt:K||"",skillOverrides:e,temperature:Z}),G()},W[1]=H,W[2]=G,W[3]=K,W[4]=Z,W[5]=X,W[6]=n):n=W[6];let en=n;W[7]!==H?(v=async()=>{if(et.current)return void J(et.current);let e=await H.getSystemPrompt();et.current=e,J(e)},W[7]=H,W[8]=v):v=W[8];let er=v;W[9]!==er||W[10]!==K?(b=()=>{(async()=>{void 0===K&&await er()})()},W[9]=er,W[10]=K,W[11]=b):b=W[11],W[12]!==er||W[13]!==H||W[14]!==K?(S=[er,H,K],W[12]=er,W[13]=H,W[14]=K,W[15]=S):S=W[15],(0,g.useEffect)(b,S),W[16]!==er?(C=()=>{er(),Y([]),ee(.7)},W[16]=er,W[17]=C):C=W[17];let ea=C;return W[18]===Symbol.for("react.memo_cache_sentinel")?(j={overflow:"auto"},W[18]=j):j=W[18],W[19]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)(s.A.Label,{children:"System Instructions"}),W[19]=w):w=W[19],W[20]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsx)(s.A.Caption,{children:(0,r.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),W[20]=N):N=W[20],W[21]===Symbol.for("react.memo_cache_sentinel")?(I={my:2},W[21]=I):I=W[21],W[22]===Symbol.for("react.memo_cache_sentinel")?(E=e=>J(e.target.value),W[22]=E):E=W[22],W[23]!==K?(R=(0,r.jsxs)(s.A,{children:[w,N,(0,r.jsx)(o.Ay,{block:!0,sx:I,"aria-label":"Prompt",name:"Prompt",value:K,onChange:E})]}),W[23]=K,W[24]=R):R=W[24],W[25]===Symbol.for("react.memo_cache_sentinel")?(T={pt:3},k=(0,r.jsx)(s.A.Label,{children:"Temperature"}),A=(0,r.jsx)(s.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),W[25]=T,W[26]=k,W[27]=A):(T=W[25],k=W[26],A=W[27]),W[28]===Symbol.for("react.memo_cache_sentinel")?(D=e=>ee(Number(e.target.value)),W[28]=D):D=W[28],W[29]!==Z?(P=(0,r.jsxs)(s.A,{sx:T,children:[k,A,(0,r.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:Z,onChange:D})]}),W[29]=Z,W[30]=P):P=W[30],W[31]===Symbol.for("react.memo_cache_sentinel")?(L=(0,r.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),W[31]=L):L=W[31],W[32]!==X?(M=X.map((e,t)=>(0,r.jsxs)(g.Fragment,{children:[(0,r.jsxs)(d.B,{direction:"horizontal",className:"py-2",children:[(0,r.jsxs)(s.A,{children:[(0,r.jsx)(s.A.Label,{children:"Name"}),(0,r.jsx)(s.A.Caption,{children:(0,r.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,r.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{X.map((n,r)=>{r===t&&(n.slug=e.target.value)})}})]}),(0,r.jsxs)(s.A,{children:[(0,r.jsx)(s.A.Label,{children:"Description"}),(0,r.jsx)(s.A.Caption,{children:(0,r.jsx)("span",{children:"Make changes to the tool description"})}),(0,r.jsx)(l.A,{defaultValue:e.description,onChange:n=>{X.map((r,a)=>{a===t&&(e.description=n.target.value)})}})]}),(0,r.jsxs)(s.A,{children:[(0,r.jsx)(s.A.Label,{id:"toggle",children:"Enabled?"}),(0,r.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{X.map((n,r)=>{r===t&&(n.enabled=e)})}})]}),(0,r.jsx)(m.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...X];1===X.length?Y([]):(e.splice(t,1),Y(e))}})]}),t===X.length-1&&(0,r.jsx)(h.Q,{leadingVisual:(0,r.jsx)(i.PlusIcon,{}),onClick:()=>Y([...X,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),W[32]=X,W[33]=M):M=W[33],W[34]!==X?(O=0===X.length&&(0,r.jsx)(h.Q,{leadingVisual:(0,r.jsx)(i.PlusIcon,{}),onClick:()=>Y([...X,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"}),W[34]=X,W[35]=O):O=W[35],W[36]!==R||W[37]!==P||W[38]!==M||W[39]!==O?(F=(0,r.jsxs)(f.l.Body,{children:[R,P,L,M,O]}),W[36]=R,W[37]=P,W[38]=M,W[39]=O,W[40]=F):F=W[40],W[41]!==G?(B={type:"button",onClick:G,content:"Cancel"},W[41]=G,W[42]=B):B=W[42],W[43]!==ea?(U={type:"button",onClick:ea,content:"Reset"},W[43]=ea,W[44]=U):U=W[44],W[45]!==en?($={type:"button",onClick:en,content:"Save",buttonType:"primary"},W[45]=en,W[46]=$):$=W[46],W[47]!==B||W[48]!==U||W[49]!==$?(V=(0,r.jsx)(f.l.Footer,{children:(0,r.jsx)(f.l.Buttons,{buttons:[B,U,$]})}),W[47]=B,W[48]=U,W[49]=$,W[50]=V):V=W[50],W[51]!==G||W[52]!==z||W[53]!==F||W[54]!==V?(q=(0,r.jsx)(p.Z,{children:(0,r.jsxs)(f.l,{ref:z,onClose:G,title:"Prompt Settings",width:"xlarge",sx:j,children:[F,V]})}),W[51]=G,W[52]=z,W[53]=F,W[54]=V,W[55]=q):q=W[55],q};try{v.displayName||(v.displayName="PromptDialog")}catch{}function _(e){return e.slug&&e.description}},53655:(e,t,n)=>{n.d(t,{BR:()=>_,lh:()=>C,a_:()=>b});var r,a=n(74848),i=n(21728),s=n(59706),o=n(38621),l=n(63867),c=n(87330),d=n(35642),u=n(34164),m=n(96540),h=n(22069),p=n(34901),f=n(47397),g=n(65011),y=n(39038);let x={referenceToken:"ReferenceToken-module__referenceToken--MoDht",small:"ReferenceToken-module__small--LxJV_",loadingName:"ReferenceToken-module__loadingName--OEUm0",name:"ReferenceToken-module__name--Wq2Bs",trailingVisual:"ReferenceToken-module__trailingVisual--JeIeK",removeButton:"ReferenceToken-module__removeButton--BIbYP",icon:"ReferenceToken-module__icon--WJse5",openIcon:"ReferenceToken-module__openIcon--LVVWZ",closedIcon:"ReferenceToken-module__closedIcon--qYsTG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--ivG0w",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--S1IFs",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--PpoUe",figmaIcon:"ReferenceToken-module__figmaIcon--x5K98"};var v=n(30581);let _=(0,m.forwardRef)(function(e,t){let n,r,s,l,c,g,y,_,S,w,N,I=(0,i.c)(40),{reference:E,message:R,onClick:T,onRemove:k,size:A,getReferenceVersion:D}=e;I[0]!==k?(n=e=>{k&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),k())},I[0]=k,I[1]=n):n=I[1];let P=n,L=(0,f.b)(),M=(0,p.pn)(j),O=(0,p.A3)("selectedThreadID");I[2]!==M||I[3]!==L||I[4]!==R||I[5]!==T||I[6]!==E||I[7]!==O?(r=e=>{if(!T||(T(E,e),!e.defaultPrevented)){if(!M){if(("issue"===E.type||"pull-request"===E.type||"discussion"===E.type)&&(window.open(E.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(E.type)){let e=O?`/copilot/c/${O}`:"/copilot";e+=`?reference_id=${(0,h.Vb)(E)}`,R&&(e+=`&message_index=${R.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request"].includes(E.type)||(e.preventDefault(),L.selectReference(E))}}},I[2]=M,I[3]=L,I[4]=R,I[5]=T,I[6]=E,I[7]=O,I[8]=r):r=I[8];let F=r,B=(0,p.A3)("currentTopic");I[9]!==E||I[10]!==B?(s=b(E,(0,h.P)(B)),I[9]=E,I[10]=B,I[11]=s):s=I[11];let U=s,$=(0,m.useId)();I[12]!==D||I[13]!==E?(l=D?.(E),I[12]=D,I[13]=E,I[14]=l):l=I[14];let V=l;I[15]!==E?(c=(0,h.JP)(E),I[15]=E,I[16]=c):c=I[16];let q="small"===A&&x.small;I[17]!==q?(g=(0,u.$)(x.referenceToken,q),I[17]=q,I[18]=g):g=I[18];let W=k&&$;return I[19]!==U?(y=U&&(0,a.jsx)(U,{size:"small",className:(0,u.$)(x.icon,U===o.IssueOpenedIcon&&x.openIcon,U===o.GitPullRequestIcon&&x.openIcon,U===o.IssueClosedIcon&&x.closedIcon,U===o.GitPullRequestClosedIcon&&x.pullRequestClosedIcon,U===o.GitMergeIcon&&x.pullRequestMergedIcon)}),I[19]=U,I[20]=y):y=I[20],I[21]!==E?(_="loading"===E.type?(0,a.jsx)("span",{className:x.loadingName,children:(0,a.jsx)(d.r,{"aria-hidden":"true"})}):(0,a.jsx)("span",{className:x.name,children:(0,h.z$)(E)}),I[21]=E,I[22]=_):_=I[22],I[23]!==V?(S=void 0!==V&&(0,a.jsx)("span",{className:x.trailingVisual,children:(0,a.jsx)(v.g,{version:V})}),I[23]=V,I[24]=S):S=I[24],I[25]!==$||I[26]!==k||I[27]!==A?(w=k&&(0,a.jsx)(C,{size:A,onRemove:k,descriptionId:$}),I[25]=$,I[26]=k,I[27]=A,I[28]=w):w=I[28],I[29]!==F||I[30]!==P||I[31]!==t||I[32]!==y||I[33]!==_||I[34]!==S||I[35]!==w||I[36]!==c||I[37]!==g||I[38]!==W?(N=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:c,className:g,onKeyDown:P,onClick:F,ref:t,"aria-describedby":W,children:[y,_,S,w]})}),I[29]=F,I[30]=P,I[31]=t,I[32]=y,I[33]=_,I[34]=S,I[35]=w,I[36]=c,I[37]=g,I[38]=W,I[39]=N):N=I[39],N});function b(e,t){switch(e.type){case"figma":return S;case"file":return o.FileIcon;case"folder":return o.FileDirectoryFillIcon;case"file-diff":return o.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&g.Yr.has(e.languageName)?o.BookIcon:o.CodeIcon;case"repository":return o.RepoIcon;case"symbol":return o.CodeSquareIcon;case"docset":return o.BookIcon;case"commit":return o.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return o.GitPullRequestDraftIcon;switch(e.state){case"open":default:return o.GitPullRequestIcon;case"closed":return o.GitPullRequestClosedIcon;case"merged":return o.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return o.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return o.IssueOpenedIcon;case"closed":return o.IssueClosedIcon;case"not_planned":return o.SkipIcon}return;case"draft-issue":return o.IssueDraftIcon;case"discussion":return o.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return s._;else return o.GlobeIcon;return;case"thread-scoped-file":return"language"in e&&g.Yr.has(e.language)?o.MarkdownIcon:o.CodeIcon;case"loading":return l.A;default:return}}function S(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:x.figmaIconOuter,children:(0,a.jsx)(y._,{className:x.figmaIcon})}),t[0]=e):e=t[0],e}let C=e=>{let t,n,r,s,l=(0,i.c)(12),{size:d,onRemove:u,descriptionId:m,onMouseOver:h,onMouseLeave:p}=e;return l[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},l[0]=u,l[1]=t):t=l[1],l[2]!==p||l[3]!==h||l[4]!==d||l[5]!==t?(n=(0,a.jsx)(c.K,{tabIndex:-1,"aria-hidden":!0,size:d,icon:o.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:x.removeButton,onMouseOver:h,onMouseLeave:p}),l[2]=p,l[3]=h,l[4]=d,l[5]=t,l[6]=n):n=l[6],l[7]!==m?(r=(0,a.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),l[7]=m,l[8]=r):r=l[8],l[9]!==n||l[10]!==r?(s=(0,a.jsxs)(a.Fragment,{children:[n,r]}),l[9]=n,l[10]=r,l[11]=s):s=l[11],s};try{_.displayName||(_.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{S.displayName||(S.displayName="StylizedFigmaIcon")}catch{}try{C.displayName||(C.displayName="RemoveReferenceTokenButton")}catch{}function j(e){return"immersive"===e.mode}},76016:(e,t,n)=>{n.d(t,{FZ:()=>C,X1:()=>N});var r,a=n(74848),i=n(21728),s=n(38007),o=n(19139),l=n(98386),c=n(15385),d=n(83978),u=n(34164),m=n(96540),h=n(40961),p=n(6612),f=n(51295),g=n(22069),y=n(74244),x=n(34901),v=n(47397),_=n(39546),b=n(70066),S=n(99629);function C(e){let t,n,r,s,o=(0,i.c)(12),{currentReferences:l}=(0,x.Pk)(),c=(0,v.b)();o[0]!==l?(n=new Set((t=l.filter(w)).map(j)),o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let d=n,[u,h]=(0,m.useState)();o[3]!==c||o[4]!==e||o[5]!==t?(r=async n=>{h(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){h("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,g.qS)(a.payload);c.addReference(i,"repoMenu")},o[3]=c,o[4]=e,o[5]=t,o[6]=r):r=o[6];let p=r;return o[7]!==u||o[8]!==e||o[9]!==d||o[10]!==p?(s=(0,a.jsx)(N,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),o[7]=u,o[8]=e,o[9]=d,o[10]=p,o[11]=s):s=o[11],s}function j(e){return e.id}function w(e){return"repository"===e.type}function N(e){let t,n,r,g,y,v,C,j,w,N,R,T,k,A,D,P,L,M,O,F,B,U=(0,i.c)(55),{open:$,onOpenChange:V,submitReturnFocusRef:q,cancelReturnFocusRef:W,selectedRepoIds:G,featuredRepoIds:z,onSelectRepo:H,selectionVariant:Q,description:K,error:J,ownerDisplayLogin:X,includeForks:Y}=e,Z=void 0===z?G:z,{ssoOrganizations:ee}=(0,x.Pk)(),[et,en]=(0,m.useState)("");U[0]!==$?(t=()=>{$||en("")},n=[$],U[0]=$,U[1]=t,U[2]=n):(t=U[1],n=U[2]),(0,m.useEffect)(t,n);let{repositories:er,loading:ea}=(0,p.U)(et,$,void 0,X,void 0!==Y&&Y);e:{if(ea){r="Loading repositories";break e}if(0===er.length){r="No repositories found";break e}if(1===er.length){r="1 repository found";break e}r=`${er.length} repositories found`}let ei=r;U[3]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{en(e.currentTarget.value)},U[3]=g):g=U[3];let es=g;t:{let e;if(!ee){let e;U[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[4]=e):e=U[4],y=e;break t}U[5]!==ee?(e=ee.map(E),U[5]=ee,U[6]=e):e=U[6],y=e}let eo=y;U[7]!==Z?(v=e=>Z.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",U[7]=Z,U[8]=v):v=U[8];let{featuredRepos:el,nonFeaturedRepos:ec}=(0,f.O)(er,v),[ed,eu]=(0,m.useState)(!1);U[9]!==H?(C=async e=>{eu(!0),await H(e),eu(!1)},U[9]=H,U[10]=C):C=U[10];let em=C;U[11]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.G)("repo-select-panel"),U[11]=j):j=U[11];let eh=d.X;U[12]!==W.current||U[13]!==V?(w=()=>{(0,h.flushSync)(()=>V(!1)),W.current?.focus(),(0,s.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},U[12]=W.current,U[13]=V,U[14]=w):w=U[14],U[15]!==V||U[16]!==q.current?(N=()=>{(0,h.flushSync)(()=>V(!1)),q.current?.focus()},U[15]=V,U[16]=q.current,U[17]=N):N=U[17];let ep="multiple"===Q?"Select repositories":"Select a repository",ef=eo.length>0&&"border-bottom-0";U[18]!==ef?(R=(0,u.$)(ef),U[18]=ef,U[19]=R):R=U[19];let eg=!0===ea||ed;U[20]!==eg?(T=(0,a.jsx)(d.X.SearchInput,{loading:eg,onChange:es,placeholder:"Search repositories","aria-label":"Search repositories"}),U[20]=eg,U[21]=T):T=U[21],U[22]!==R||U[23]!==T?(k=(0,a.jsx)(d.X.Header,{className:R,children:T}),U[22]=R,U[23]=T,U[24]=k):k=U[24],U[25]!==X||U[26]!==eo?(A=(void 0===X||""===X)&&(0,a.jsx)(o.x,{portalContainerName:b.f1,protectedOrgs:eo,redirectURI:I,useFullWidthStyle:!0}),U[25]=X,U[26]=eo,U[27]=A):A=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,a.jsx)(b.hl,{}),U[28]=D):D=U[28],U[29]!==J?(P=J&&(0,a.jsx)(d.X.Message,{variant:"error",size:"inline",children:J}),U[29]=J,U[30]=P):P=U[30];let ey=c.l;U[31]===Symbol.for("react.memo_cache_sentinel")?(L={minHeight:340},U[31]=L):L=U[31],U[32]!==ei?(M=(0,a.jsx)("div",{className:"sr-only",children:ei}),U[32]=ei,U[33]=M):M=U[33];let ex="initial"===ea?(0,a.jsx)(d.X.Loading,{children:"Fetching repositories\u2026"}):0!==er.length||ea?(0,a.jsxs)(a.Fragment,{children:[el?.map(e=>(0,a.jsx)(S.W,{repo:e,onSelect:em,selected:G.has(e.databaseId)},e.databaseId)),el&&ec&&(0,a.jsx)(c.l.Divider,{}),ec?.map(e=>(0,a.jsx)(S.W,{repo:e,onSelect:em,selected:G.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)(_.O,{delay:750,children:(0,a.jsx)(d.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})});return U[34]!==ey||U[35]!==L||U[36]!==M||U[37]!==ex?(O=(0,a.jsxs)(ey,{sx:L,children:[M,ex]}),U[34]=ey,U[35]=L,U[36]=M,U[37]=ex,U[38]=O):O=U[38],U[39]!==eh||U[40]!==K||U[41]!==$||U[42]!==Q||U[43]!==w||U[44]!==N||U[45]!==ep||U[46]!==k||U[47]!==A||U[48]!==D||U[49]!==P||U[50]!==O?(F=(0,a.jsxs)(eh,{width:"large",maxHeight:"xlarge",onCancel:w,onSubmit:N,open:$,variant:"modal",selectionVariant:Q,title:ep,description:K,children:[k,A,D,P,O]}),U[39]=eh,U[40]=K,U[41]=$,U[42]=Q,U[43]=w,U[44]=N,U[45]=ep,U[46]=k,U[47]=A,U[48]=D,U[49]=P,U[50]=O,U[51]=F):F=U[51],U[52]!==j||U[53]!==F?(B=(0,a.jsx)("div",{...j,children:F}),U[52]=j,U[53]=F,U[54]=B):B=U[54],B}function I(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function E(e){return e.login}try{(r=function(e){let t,n,r,s=(0,i.c)(9),{selectedThreadID:o,currentTopic:l}=(0,x.Pk)(),c=(0,v.b)();s[0]!==c||s[1]!==o?(t=async e=>{y.J.setSelectedTopic(o??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},s[0]=c,s[1]=o,s[2]=t):t=s[2];let d=t;return s[3]!==l?(n=new Set(l?[l.id]:[]),s[3]=l,s[4]=n):n=s[4],s[5]!==d||s[6]!==e||s[7]!==n?(r=(0,a.jsx)(N,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),s[5]=d,s[6]=e,s[7]=n,s[8]=r):r=s[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{C.displayName||(C.displayName="RepoReferencesSelectPanel")}catch{}try{N.displayName||(N.displayName="RepoSelectPanel")}catch{}},99629:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(74848),a=n(21728),i=n(39459),s=n(15385);function o(e){let t,n,o,l,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,r.jsx)(s.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==h?(o=h&&(0,r.jsx)(s.l.TrailingVisual,{children:h}),c[6]=h,c[7]=o):o=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==o?(l=(0,r.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[n,g,o]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=o,c[13]=l):l=c[13],l}try{o.displayName||(o.displayName="RepositoryListItem")}catch{}},87928:(e,t,n)=>{n.d(t,{$:()=>c});var r=n(74848),a=n(21728),i=n(38621),s=n(87330),o=n(31637),l=n(66912);function c(e){let t,n,c=(0,a.c)(11),{handleRetryMessage:d,disabled:u,showModelPicker:m,model:h,navigateToNewThread:p}=e,f=void 0!==u&&u,g=void 0!==m&&m;c[0]!==d||c[1]!==h?(t=()=>{d(h)},c[0]=d,c[1]=h,c[2]=t):t=c[2];let y=t,{isLicensedLimited:x}=(0,o.xR)();if(g&&(!p||!h))throw Error("navigateToNewThread and model must be provided in order to show the model picker");return c[3]!==f||c[4]!==y||c[5]!==d||c[6]!==x||c[7]!==h||c[8]!==p||c[9]!==g?(n=g?(0,r.jsx)(l.Yb,{onNewThreadSelected:p,limited:x,type:"message-retry",selectedModel:h,onModelSelected:d,disabled:f}):(0,r.jsx)(s.K,{variant:"invisible","aria-label":"Retry","data-testid":"retry-button",onClick:y,icon:i.SyncIcon,disabled:f}),c[3]=f,c[4]=y,c[5]=d,c[6]=x,c[7]=h,c[8]=p,c[9]=g,c[10]=n):n=c[10],n}try{c.displayName||(c.displayName="RetryButton")}catch{}},5279:(e,t,n)=>{n.d(t,{M:()=>l});var r=n(74848),a=n(21728),i=n(69676),s=n(82678),o=n(96540);function l(e){let t,n,l,c,d=(0,a.c)(8);d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let u=(0,o.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(l={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:i.z0.ArrowHorizontal|i.z0.HomeAndEnd},d[3]=l):l=d[3],(0,s.G)(l),d[4]!==t||d[5]!==e.children||d[6]!==n?(c=(0,r.jsx)("div",{ref:u,className:t,role:"toolbar",...n,children:e.children}),d[4]=t,d[5]=e.children,d[6]=n,d[7]=c):c=d[7],c}try{l.displayName||(l.displayName="Toolbar")}catch{}},85332:(e,t,n)=>{n.d(t,{R:()=>h});var r=n(74848),a=n(21728),i=n(34614),s=n(34164),o=n(7277),l=n(39818),c=n(36721),d=n(13897),u=n(83880),m=n(10370);function h(e){let t,n,i,h,f,g,y,x=(0,a.c)(24),{className:v,accessibleHeader:_}=e,{message:b}=(0,u.V)(),S=b.content??"";x[0]!==S?(t=(0,d._)(S),x[0]=S,x[1]=t):t=x[1];let{availableAgents:C}=(0,l.JE)(t);x[2]!==C?(n=void 0===C?[]:C,x[2]=C,x[3]=n):n=x[3];let j=n;if(x[4]!==_||x[5]!==j||x[6]!==v||x[7]!==b.references||x[8]!==S){let e;x[12]!==b.references?(e=b.references??[],x[12]=b.references,x[13]=e):e=x[13];let t=(0,o.l)().use(c.U,{references:e,agents:j}).parse(S);x[14]!==_?(f=_&&(0,r.jsx)("h3",{className:"sr-only",children:_}),x[14]=_,x[15]=f):f=x[15],x[16]!==v?(i=(0,s.$)(m.A.container,v),x[16]=v,x[17]=i):i=x[17],h=t.children.map(p),x[4]=_,x[5]=j,x[6]=v,x[7]=b.references,x[8]=S,x[9]=i,x[10]=h,x[11]=f}else i=x[9],h=x[10],f=x[11];return x[18]!==i||x[19]!==h?(g=(0,r.jsx)("div",{className:i,children:h}),x[18]=i,x[19]=h,x[20]=g):g=x[20],x[21]!==f||x[22]!==g?(y=(0,r.jsxs)(r.Fragment,{children:[f,g]}),x[21]=f,x[22]=g,x[23]=y):y=x[23],y}function p(e,t){switch(e.type){case"text":return e.value;case"agent-mention":return(0,r.jsx)(f,{agent:e.data.mentionedAgent,children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:m.A.mention,children:e.value},t):e.value}}function f(e){let t,n=(0,a.c)(4),{agent:s,children:o}=e,l=`/integrations/${s.slug}/hovercard`;return n[0]!==s.integrationUrl||n[1]!==o||n[2]!==l?(t=(0,r.jsx)(i.A,{href:s.integrationUrl,"data-hovercard-url":l,className:m.A.mention,children:o}),n[0]=s.integrationUrl,n[1]=o,n[2]=l,n[3]=t):t=n[3],t}try{h.displayName||(h.displayName="UserMessage")}catch{}try{f.displayName||(f.displayName="AgentLink")}catch{}},30581:(e,t,n)=>{n.d(t,{g:()=>o});var r=n(74848),a=n(21728),i=n(2676);let s={version:"VersionName-module__version--DI4zD"};function o(e){let t,n=(0,a.c)(3),{"data-testid":o,version:l}=e;return n[0]!==o||n[1]!==l?(t=(0,r.jsxs)(i.A,{className:s.version,as:"span","data-testid":o,children:["v",l]}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}try{o.displayName||(o.displayName="VersionName")}catch{}},39038:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848),a=n(21728);function i(e){let t,n,i,s,o,l=(0,a.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=s):s=l[4],l[5]!==t||l[6]!==n?(o=(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,s]}),l[5]=t,l[6]=n,l[7]=o):o=l[7],o}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},39546:(e,t,n)=>{n.d(t,{O:()=>s});var r=n(74848),a=n(21728),i=n(96540);let s=e=>{let t,n,s,o=(0,a.c)(6),{children:l,delay:c,assertive:d}=e,u=void 0===c?500:c,[m,h]=(0,i.useState)(!1);if(o[0]!==u?(t=()=>{h(!1);let e=setTimeout(()=>h(!0),u);return()=>clearTimeout(e)},n=[u,h],o[0]=u,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,i.useEffect)(t,n),!m)return null;let p=void 0!==d&&d?"assertive":"polite";return o[3]!==l||o[4]!==p?(s=(0,r.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:l}),o[3]=l,o[4]=p,o[5]=s):s=o[5],s};try{s.displayName||(s.displayName="DelayedComponent")}catch{}},94412:(e,t,n)=>{n.d(t,{T:()=>h});var r=n(74848),a=n(21728),i=n(10569),s=n(87330),o=n(15385),l=n(53526),c=n(96540),d=n(38621),u=n(57915),m=n(38007);function h(e){let t,n,h,p,f,g,y,x,v,_,b,S,C,j,w=(0,a.c)(36),{onDelete:N,onCopyLoop:I,onDuplicate:E,onShare:R,loopId:T,variant:k}=e,A=void 0===k?"invisible":k,[D,P]=(0,c.useState)(null),L=(0,c.useRef)(null),{mutate:M,isPending:O}=(0,u.h)();w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{P("delete")},w[0]=t):t=w[0];let F=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{P(null)},w[1]=n):n=w[1];let B=n;w[2]!==M||w[3]!==T||w[4]!==N?(h=async()=>{T&&(P(null),M(T,{onSuccess:N}),N?.())},w[2]=M,w[3]=T,w[4]=N,w[5]=h):h=w[5];let U=h;w[6]!==T||w[7]!==E?(p=()=>{T&&E&&((0,m.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),E(T))},w[6]=T,w[7]=E,w[8]=p):p=w[8];let $=p;w[9]!==R?(f=()=>{R?.()},w[9]=R,w[10]=f):f=w[10];let V=f;return T?(w[11]!==O||w[12]!==A?(g=(0,r.jsx)(i.W.Anchor,{children:(0,r.jsx)(s.K,{loading:O,icon:d.KebabHorizontalIcon,"aria-label":"Manage loop",variant:A})}),w[11]=O,w[12]=A,w[13]=g):g=w[13],w[14]!==$||w[15]!==E?(y=E&&(0,r.jsxs)(o.l.Item,{onSelect:$,children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),w[14]=$,w[15]=E,w[16]=y):y=w[16],w[17]!==V||w[18]!==R?(x=R&&(0,r.jsxs)(o.l.Item,{onSelect:V,children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(d.LinkIcon,{})}),"Copy link"]}),w[17]=V,w[18]=R,w[19]=x):x=w[19],w[20]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsxs)(o.l.Item,{variant:"danger",onSelect:F,children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(d.TrashIcon,{})}),"Delete"]}),w[20]=v):v=w[20],w[21]!==I?(_=I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.l.Divider,{}),(0,r.jsxs)(o.l.Item,{onSelect:I,children:[(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(d.CopyIcon,{})}),"Copy JSON"]})]}),w[21]=I,w[22]=_):_=w[22],w[23]!==_||w[24]!==y||w[25]!==x?(b=(0,r.jsx)(i.W.Overlay,{align:"end",children:(0,r.jsxs)(o.l,{children:[y,x,v,_]})}),w[23]=_,w[24]=y,w[25]=x,w[26]=b):b=w[26],w[27]!==b||w[28]!==g?(S=(0,r.jsxs)(i.W,{anchorRef:L,children:[g,b]}),w[27]=b,w[28]=g,w[29]=S):S=w[29],w[30]!==U||w[31]!==D?(C="delete"===D&&(0,r.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?U():B()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),w[30]=U,w[31]=D,w[32]=C):C=w[32],w[33]!==S||w[34]!==C?(j=(0,r.jsxs)(r.Fragment,{children:[S,C]}),w[33]=S,w[34]=C,w[35]=j):j=w[35],j):null}try{h.displayName||(h.displayName="LoopsActionMenu")}catch{}},23634:(e,t,n)=>{n.d(t,{UR:()=>s,m0:()=>o,wn:()=>i});var r=n(96540);let a=(0,r.createContext)(null),i=a.Provider;function s(){let e=(0,r.useContext)(a);if(!e)throw Error("usePipesService must be used inside a PipesServiceProvider");return e}function o(){return(0,r.useContext)(a)}try{a.displayName||(a.displayName="PipesServiceContext")}catch{}},40178:(e,t,n)=>{n.d(t,{QA:()=>m,F5:()=>p,y7:()=>h});var r=n(74848);n(21728);var a=n(11303),i=n(96540);function s(e,t){return{...e,uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};default:return e}}(e.uiState,t)}}var o=n(58779),l=n(17515);let c={uiState:{focusedNodeId:null,hoveredNodeId:null,view:"canvas"}},d=(0,i.createContext)(new a.Lj(c)),u=(0,i.createContext)(()=>{});function m({children:e}){let[t,n]=(0,i.useReducer)(s,c),a=(0,o.AI)(t);(0,l.N)(()=>{a.value=t},[t,a]);let m=(0,i.useCallback)(e=>{n(e)},[n]);return(0,r.jsx)(d.Provider,{value:a,children:(0,r.jsx)(u.Provider,{value:m,children:e})})}function h(e){let t=(0,i.useContext)(d);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let n=(0,o.Sk)(t,e);return(0,o.HN)(n)}function p(){return(0,i.useContext)(u)}try{d.displayName||(d.displayName="PipesStateContext")}catch{}try{u.displayName||(u.displayName="PipesDispatchContext")}catch{}try{m.displayName||(m.displayName="PipesStateProvider")}catch{}},9677:(e,t,n)=>{n.d(t,{O:()=>N});var r=n(74848),a=n(21728),i=n(38621),s=n(75177),o=n(87330),l=n(84217),c=n(55847),d=n(15385),u=n(63867),m=n(53110),h=n(96540);function p(e){let t,n,i,o,l=(0,a.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},l[2]=i):i=l[2],l[3]!==c?(o=(0,r.jsx)(s.A,{sx:t,children:(0,r.jsx)(s.A,{sx:n,children:(0,r.jsx)(s.A,{sx:i,children:c})})}),l[3]=c,l[4]=o):o=l[4],o}function f(e){let t,n,c,d,u,m=(0,a.c)(9),{children:h,onDismiss:p}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},m[1]=n):n=m[1],m[2]!==h?(c=(0,r.jsx)(s.A,{sx:n,children:h}),m[2]=h,m[3]=c):c=m[3],m[4]!==p?(d=p&&(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:p,variant:"invisible",sx:{flexShrink:0}}),m[4]=p,m[5]=d):d=m[5],m[6]!==c||m[7]!==d?(u=(0,r.jsxs)(l.A,{as:"h3",sx:t,children:[c,d]}),m[6]=c,m[7]=d,m[8]=u):u=m[8],u}function g(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.A,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function y(e){let t,n,s,o,l,d,u=(0,a.c)(11),{children:p,title:f,initiallyOpen:g}=e,[y,v]=(0,h.useState)(g??!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>v(x),u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},u[1]=n):n=u[1];let _=y?i.ChevronDownIcon:i.ChevronRightIcon;u[2]===Symbol.for("react.memo_cache_sentinel")?(s={mr:2},u[2]=s):s=u[2],u[3]!==_?(o=(0,r.jsx)(m.A,{icon:_,sx:s}),u[3]=_,u[4]=o):o=u[4],u[5]!==o||u[6]!==f?(l=(0,r.jsxs)(c.Q,{onClick:t,sx:n,children:[o,f]}),u[5]=o,u[6]=f,u[7]=l):l=u[7];let b=y&&p;return u[8]!==l||u[9]!==b?(d=(0,r.jsxs)(r.Fragment,{children:[l,b]}),u[8]=l,u[9]=b,u[10]=d):d=u[10],d}function x(e){return!e}function v(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(s.A,{sx:t,children:o}),i[1]=o,i[2]=n):n=i[2],n}function _(e){let t,n,o,l,d,u,h,p=(0,a.c)(14),{direction:f,onExpand:g}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},p[0]=t):t=p[0],p[1]!==f?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===f?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},p[1]=f,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",alignItems:"center"},p[3]=o):o=p[3];let y="below"===f?i.FoldDownIcon:i.FoldUpIcon;return p[4]===Symbol.for("react.memo_cache_sentinel")?(l={mr:2},p[4]=l):l=p[4],p[5]!==y?(d=(0,r.jsx)(m.A,{icon:y,sx:l}),p[5]=y,p[6]=d):d=p[6],p[7]!==f||p[8]!==d?(u=(0,r.jsxs)(s.A,{sx:o,children:[d,"Show content ",f]}),p[7]=f,p[8]=d,p[9]=u):u=p[9],p[10]!==g||p[11]!==n||p[12]!==u?(h=(0,r.jsx)(c.Q,{onClick:g,sx:n,children:u}),p[10]=g,p[11]=n,p[12]=u,p[13]=h):h=p[13],h}function b(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsx)(d.l,{children:(0,r.jsxs)(d.l.Group,{children:[t,s]})}),i[1]=s,i[2]=n):n=i[2],n}function S(e){let t,n,i=(0,a.c)(6),{children:s,href:o,icon:l}=e;return i[0]!==l?(t=(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(m.A,{icon:l})}),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=(0,r.jsxs)(d.l.LinkItem,{href:o,children:[t,s]}),i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],n}function C(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(s.A,{sx:e,children:[(0,r.jsx)(u.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function j(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(s.A,{sx:e,children:(0,r.jsx)(s.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(4),{children:i,detailsError:s,detailsLoading:o}=e;return n[0]!==i||n[1]!==s||n[2]!==o?(t=s?(0,r.jsx)(j,{}):o?(0,r.jsx)(C,{}):(0,r.jsx)(r.Fragment,{children:i}),n[0]=i,n[1]=s,n[2]=o,n[3]=t):t=n[3],t}let N={Frame:p,Header:f,Body:w,Content:v,CollapsibleSubsection:y,ContentExpander:_,Details:b,DetailLink:S,SectionDivider:g};try{p.displayName||(p.displayName="Frame")}catch{}try{f.displayName||(f.displayName="Header")}catch{}try{g.displayName||(g.displayName="SectionDivider")}catch{}try{y.displayName||(y.displayName="CollapsibleSubsection")}catch{}try{v.displayName||(v.displayName="Content")}catch{}try{_.displayName||(_.displayName="ContentExpander")}catch{}try{b.displayName||(b.displayName="Details")}catch{}try{S.displayName||(S.displayName="DetailLink")}catch{}try{C.displayName||(C.displayName="Loading")}catch{}try{j.displayName||(j.displayName="Error")}catch{}try{w.displayName||(w.displayName="Body")}catch{}},59706:(e,t,n)=>{n.d(t,{_:()=>m,I:()=>d});var r=n(74848),a=n(21728),i=n(75177),s=n(52464),o=n(34614),l=n(9677);let c={"bing-icon":"WebSearchReferencePreview-module__bing-icon--kFZ4I"};function d(e){let t,n,c,d,h,p,f,g,y,x,v,_=(0,a.c)(19),{reference:b,onDismiss:S}=e;_[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,r.jsx)(m,{}),_[0]=t,_[1]=n):(t=_[0],n=_[1]),_[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:0,fontWeight:400,color:"fg.muted"},_[2]=c):c=_[2],_[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},_[3]=d):d=_[3];let C=1===b.results.length?" result ":" results ";return _[4]!==b.results.length||_[5]!==C?(h=(0,r.jsxs)(i.A,{sx:t,children:[n,(0,r.jsxs)(s.A,{sx:c,children:[(0,r.jsxs)(s.A,{sx:d,children:[b.results.length," ",C]}),"from Bing search."]})]}),_[4]=b.results.length,_[5]=C,_[6]=h):h=_[6],_[7]!==S||_[8]!==h?(p=(0,r.jsx)(l.O.Header,{onDismiss:S,children:h}),_[7]=S,_[8]=h,_[9]=p):p=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},_[10]=f):f=_[10],_[11]!==b.results?(g=b.results.map(u),_[11]=b.results,_[12]=g):g=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)(s.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(o.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),_[13]=y):y=_[13],_[14]!==g?(x=(0,r.jsx)(l.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.A,{sx:f,children:[g,y]})}),_[14]=g,_[15]=x):x=_[15],_[16]!==x||_[17]!==p?(v=(0,r.jsxs)(l.O.Frame,{children:[p,x]}),_[16]=x,_[17]=p,_[18]=v):v=_[18],v}function u(e,t){return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(o.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let m=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:c["bing-icon"]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="WebSearchReferencePreview")}catch{}try{m.displayName||(m.displayName="BingIcon")}catch{}},71678:(e,t,n)=>{n.d(t,{r:()=>u});var r=n(74848),a=n(38621),i=n(6869),s=n(34614),o=n(53110),l=n(30422);let c={Flash:"FlashError-module__Flash--K1Pqg",SafeHTMLText:"FlashError-module__SafeHTMLText--SdUAj",Link:"FlashError-module__Link--Wl_Ij",ruleViolationsTitle:"FlashError-module__ruleViolationsTitle--jE3vv",ruleViolationRow:"FlashError-module__ruleViolationRow--WhUAP",Octicon:"FlashError-module__Octicon--t8KGC",ruleViolationText:"FlashError-module__ruleViolationText--iO4rA"};var d=n(34164);function u({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:n,hideRuleErrorsTitle:u,ruleErrors:m,helpUrl:h,flashRef:p}){let f=(m?.length||0)>0;return t||n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{id:"flash",variant:"danger",className:(0,d.$)("d-flex flex-items-center flex-justify-between",c.Flash),tabIndex:-1,ref:p,children:t?(0,r.jsxs)("div",{children:[e," ",(0,r.jsx)(l.BC,{className:c.SafeHTMLText,html:t}),f&&h&&(0,r.jsx)(s.A,{href:`${h}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,className:c.Link,children:"Learn more about rulesets."})]}):n&&(0,r.jsx)("div",{children:n})}),f&&(0,r.jsxs)("div",{className:c.Flash,children:[!u&&(0,r.jsx)("div",{className:c.ruleViolationsTitle,children:"Repository rule violations found:"}),m?.map(e=>(0,r.jsxs)("div",{className:c.ruleViolationRow,children:[(0,r.jsx)(o.A,{icon:a.XCircleFillIcon,size:16,className:c.Octicon}),(0,r.jsx)("div",{className:c.ruleViolationText,children:e})]},e))]})]}):null}try{u.displayName||(u.displayName="FlashError")}catch{}},23985:(e,t,n)=>{n.d(t,{B:()=>f});var r=n(74848),a=n(31971),i=n(38007),s=n(38621),o=n(91321),l=n(10871),c=n(10569),d=n(87330),u=n(15385);let m={actions:"EditorMenu-module__actions--AddF7",editorButton:"EditorMenu-module__editorButton--_thrU"};var h=n(33036),p=n(88245);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,r)=>{a.W.freeToPaidTelemetry?(0,h.F)({eventName:n,menuLocation:e,mode:t,action:r}):(0,i.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,r.jsxs)(o.A,{className:m.actions,children:[(0,r.jsx)(l.z,{className:m.editorButton,href:p.A.vscode.url,leadingVisual:(0,r.jsx)("img",{src:p.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:p.A.vscode.name}),(0,r.jsxs)(c.W,{children:[(0,r.jsx)(c.W.Anchor,{children:(0,r.jsx)(d.K,{"aria-label":"More editors",icon:s.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,r.jsx)(c.W.Overlay,{align:"end",children:(0,r.jsx)(u.l,{children:(0,r.jsx)(h.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},81830:(e,t,n)=>{n.d(t,{Kg:()=>o,Yu:()=>l});var r=n(74848),a=n(21728),i=n(96540);let s=(0,i.createContext)(null);function o(e){let t,n,i,o=(0,a.c)(5),{children:l,basePageDataUrl:c}=e;return o[0]!==c?(n={basePageDataUrl:c},o[0]=c,o[1]=n):n=o[1],t=n,o[2]!==l||o[3]!==t?(i=(0,r.jsx)(s.Provider,{value:t,children:l}),o[2]=l,o[3]=t,o[4]=i):i=o[4],i}function l(){let e=(0,i.useContext)(s);if(!e)throw Error("usePageDataContext must be used within a PageDataContextProvider");return e}try{s.displayName||(s.displayName="PageDataContext")}catch{}try{o.displayName||(o.displayName="PageDataContextProvider")}catch{}},52311:(e,t,n)=>{n.d(t,{P:()=>d});var r=n(74848),a=n(96540),i=n(38621),s=n(58569),o=n(55847),l=n(70170),c=n(56424);function d({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:h=""}){let[p,f]=(0,a.useState)(""),[g,y]=(0,a.useState)([]),[x,v]=(0,a.useState)(!0),_=(0,a.useCallback)((0,l.s)(async e=>{try{let n=await t(e);y(n)}catch{}v(!1)},200),[t,y,v]);(0,a.useEffect)(()=>{v(!0),_(p)},[p,_,v]);let b=(0,a.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[d,n]),S=(0,a.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),C=(0,a.useCallback)(e=>{let t;return(e.name.length>24&&(t=`${e.name.substring(0,24)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,appendOnly:!1,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,r.jsx)(i.RepoLockedIcon,{size:16}):(0,r.jsx)(i.RepoIcon,{size:16})}},[]),j=(0,a.useCallback)(e=>e.name,[]),w=(0,a.useMemo)(()=>{let e=[];e.push(...g);let t=S.filter(t=>e.every(e=>e.name!==t.name))||[];return e.push(...t),u&&e.push({name:"$all$",_all:!0}),e},[g,u,S]),N=h,I=i.RepoIcon;return N||("multiple"===d?N=S.length>0?`${S.length} repositor${S.length>1?"ies":"y"}`:"Select repositories":S.length>0&&S[0]?(N=S[0].name,I=S[0].private?i.RepoLockedIcon:i.RepoIcon):N=u?"All repositories":"Select a repository"),(0,r.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,r.jsx)(o.Q,{leadingVisual:I,trailingAction:i.TriangleDownIcon,"aria-labelledby":` ${e}`,...t,...m,children:(0,r.jsx)(s.A,{title:N,maxWidth:195,children:N})}),placeholderText:"Repos",items:w,loading:x,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:S,onSelectionChange:b,filterItems:f,getItemKey:j,convertToItemProps:C})}try{d.displayName||(d.displayName="ReposSelector")}catch{}},19139:(e,t,n)=>{n.d(t,{x:()=>h});var r=n(74848),a=n(38621),i=n(75177),s=n(6869),o=n(34614),l=n(10569),c=n(15385),d=n(85647);let u={Box:"SingleSignOnBanner-module__Box--iwIEO",Flash:"SingleSignOnBanner-module__Flash--XK1g3",Box_1:"SingleSignOnBanner-module__Box_1--VPBly",Octicon:"SingleSignOnBanner-module__Octicon--JXNw_",Box_2:"SingleSignOnBanner-module__Box_2--kq0MT",ForceWrap:"SingleSignOnBanner-module__ForceWrap--tZqOV",Paragraph:"SingleSignOnBanner-module__Paragraph--rpV0k"};var m=n(34164);function h({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:l=3,redirectURI:c,useFullWidthStyle:h,forceWrap:g,sx:y}){let x=(0,d.zy)();if(!n||0===n.length)return null;let v=Math.max(0,n.length-l),_=1===n.length||v>0?(0,r.jsx)("b",{children:n.slice(0,l).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(i.A,{sx:y,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:u.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(s.A,{sx:{borderRadius:2*!h,borderWidth:h?"1px 0":1},className:u.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{}),(0,r.jsx)(o.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${f({location:x,redirectURI:c})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:u.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:u.Octicon}),(0,r.jsxs)("div",{className:(0,m.$)(u.Box_2,g&&u.ForceWrap),children:[(0,r.jsxs)("p",{className:u.Paragraph,children:["Single sign-on to see results in ",0===v&&"the ",l>0&&(0,r.jsxs)(r.Fragment,{children:[_," "]}),v>0&&(0,r.jsxs)(r.Fragment,{children:[l>0&&"and ",v," other"," "]}),n.length>1&&1!==v?"organizations":"organization","."]}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(p,{portalContainerName:t,protectedOrgs:n,redirectURI:c})})]})]})})})})})}function p({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,d.zy)();return(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${f({location:a,redirectURI:n})}`,children:e},`org-${e}`))})})]})}function f({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{h.displayName||(h.displayName="SingleSignOnBanner")}catch{}try{p.displayName||(p.displayName="SingleSignOnButton")}catch{}},94232:(e,t,n)=>{n.d(t,{O:()=>u});var r=n(75177),a=n(59299),i=n(44999),s=n(38267);let o=(0,s.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,s.AH)(["animation:"," 1.5s infinite linear;"],o),c=(0,s.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),d=(0,s.AH)(["animation:"," 2s infinite linear;"],c),u=(0,s.Ay)(r.A).withConfig({displayName:"LoadingSkeleton",componentId:"sc-bcbf24f9-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&d,({animationStyle:e})=>"pulse"!==e&&l,(0,a.Jt)("colors.neutral.subtle"),(0,a.Jt)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,a.Jt)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.A);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}},13455:(e,t,n)=>{n.d(t,{NE:()=>g,Mm:()=>x,YS:()=>y,mN:()=>b,XF:()=>v,Cf:()=>_});var r=n(74848),a=n(96540),i=n(73451),s=n(19647),o=n(34614),l=n(42522),c=n(55847),d=n(9852),u=n(38621);let m={bodyContainer:"UserFeedback-module__bodyContainer--O4i85",ratingContainer:"UserFeedback-module__ratingContainer--i0uZJ",ratingOption:"UserFeedback-module__ratingOption--hic5K",ratingButton:"UserFeedback-module__ratingButton--HsIWu",ratingCaption:"UserFeedback-module__ratingCaption--qUJIU",footerContainer:"UserFeedback-module__footerContainer--u06YH",footerActionButtonGroup:"UserFeedback-module__footerActionButtonGroup--t8_wz",copyLogsSuccessIcon:"UserFeedback-module__copyLogsSuccessIcon--zNnJA",messageContainer:"UserFeedback-module__messageContainer--cT4Rk",validationError:"UserFeedback-module__validationError--zjQhN",privacyText:"UserFeedback-module__privacyText--qSsVA",Dialog:"UserFeedback-module__Dialog--d4Z0e"},h={verySatisfied:"UserFeedbackColors-module__verySatisfied--Ypo1v",good:"UserFeedbackColors-module__good--iI67T",satisfied:"UserFeedbackColors-module__satisfied--MpwOG",dissatisfied:"UserFeedbackColors-module__dissatisfied--Kuqhh",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--m5jfW",bad:"UserFeedbackColors-module__bad--TcLP4"};var p=n(34164);function f({title:e="Give feedback",requestID:t,options:n,returnFocusRef:f,onSubmit:g,onClose:y},x){let[v,_]=(0,a.useState)(null),[b,S]=(0,a.useState)(""),[C,j]=(0,a.useState)([]),[w,N]=(0,a.useState)(0),[I,E]=(0,a.useState)(!1),[R,T]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.length>0&&N(e=>e+1)},[C]),(0,a.useImperativeHandle)(x,()=>({openDialog:e=>{if(null!=e){if(!n.some(t=>t.value===e))throw Error("invalid initial option value");_(e)}E(!0)}}));let k=async e=>{e.preventDefault();let t=[];try{t=await g(v,b)}catch{t=["An error occurred while submitting your feedback."]}j(t),0===t.length&&D()},A=()=>{_(null),S(""),j([])},D=()=>{A(),E(!1),y?.()},P=e=>{_(e),j([])},L=e=>{S(e.target.value),j([])},M=async()=>{if(t){try{await navigator.clipboard.writeText(`Request ID: ${t}`)}catch{j(e=>[...e,"Failed to copy logs."]);return}T(!0),setTimeout(()=>{T(!1)},1e3)}};return(0,r.jsx)(r.Fragment,{children:I&&(0,r.jsx)(d.l,{onClose:D,title:e,renderBody:()=>(0,r.jsxs)("div",{className:m.bodyContainer,children:[(0,r.jsxs)(i.A,{required:!0,children:[(0,r.jsx)(i.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,r.jsx)("div",{className:m.ratingContainer,children:n.map(e=>(0,r.jsxs)("div",{className:m.ratingOption,children:[(0,r.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":v===e.value,onClick:()=>P(e.value),className:(0,p.$)(m.ratingButton,h[e.color]),children:e.icon}),(0,r.jsx)("span",{className:m.ratingCaption,children:e.name})]},e.name))})]}),(0,r.jsxs)("div",{className:m.messageContainer,children:[(0,r.jsxs)(i.A,{children:[(0,r.jsx)(i.A.Label,{children:"Message"}),(0,r.jsx)(s.Ay,{placeholder:"Tell us what you liked or what could be better",value:b,onChange:L,resize:"vertical",block:!0,rows:5})]}),(0,r.jsxs)("span",{className:m.privacyText,children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,r.jsx)(o.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,r.jsx)("div",{className:m.validationError,role:"alert",children:C.map(e=>(0,r.jsx)("div",{children:e},e))},w)]})]}),renderFooter:()=>(0,r.jsxs)("div",{className:m.footerContainer,children:[(0,r.jsx)("div",{children:t&&(0,r.jsx)(l.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,r.jsx)(c.Q,{leadingVisual:R?(0,r.jsx)(u.CheckIcon,{className:m.copyLogsSuccessIcon,size:16}):(0,r.jsx)(u.CopyIcon,{size:16}),onClick:M,variant:"default",children:R?"Copied!":"Copy logs"})})}),(0,r.jsxs)("div",{className:m.footerActionButtonGroup,children:[(0,r.jsx)(c.Q,{onClick:D,children:"Cancel"}),(0,r.jsx)(c.Q,{variant:"primary",type:"submit",onClick:k,children:"Send"})]})]}),className:m.Dialog,returnFocusRef:f})})}let g=(0,a.forwardRef)(f),y=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),x=(0,r.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),v=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),_=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,r.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),b=(0,r.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{f.displayName||(f.displayName="UserFeedbackInner")}catch{}try{g.displayName||(g.displayName="UserFeedback")}catch{}},61388:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(36158),a=n(26261),i=n(66500),s=n(24880),o=class extends i.Q{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,s.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,s.EN)(t.mutationKey)!==(0,s.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#a(){let e=this.#n?.state??(0,r.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){a.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,n),this.#r.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#r.onError?.(e.error,t,n),this.#r.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#t)})})}}},79915:(e,t,n)=>{n.d(t,{T:()=>l});var r=n(26261),a=n(1651),i=n(66500),s=n(24880);function o(e,t){return e.filter(e=>!t.includes(e))}var l=class extends i.Q{#e;#s;#o;#l;#c;#d;#u;#m;#h=[];constructor(e,t,n){super(),this.#e=e,this.#l=n,this.#o=[],this.#c=[],this.#s=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#c.forEach(e=>{e.subscribe(t=>{this.#p(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#c.forEach(e=>{e.destroy()})}setQueries(e,t){this.#o=e,this.#l=t,r.jG.batch(()=>{let e=this.#c,t=this.#f(this.#o);this.#h=t,t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));let n=t.map(e=>e.observer),r=n.map(e=>e.getCurrentResult()),a=n.some((t,n)=>t!==e[n]);(e.length!==n.length||a)&&(this.#c=n,this.#s=r,this.hasListeners()&&(o(e,n).forEach(e=>{e.destroy()}),o(n,e).forEach(e=>{e.subscribe(t=>{this.#p(e,t)})}),this.#i()))})}getCurrentResult(){return this.#s}getQueries(){return this.#c.map(e=>e.getCurrentQuery())}getObservers(){return this.#c}getOptimisticResult(e,t){let n=this.#f(e),r=n.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#g(e??r,t),()=>this.#y(r,n)]}#y(e,t){return t.map((n,r)=>{let a=e[r];return n.defaultedQueryOptions.notifyOnChangeProps?a:n.observer.trackResult(a,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}#g(e,t){return t?(this.#d&&this.#s===this.#m&&t===this.#u||(this.#u=t,this.#m=this.#s,this.#d=(0,s.BH)(this.#d,t(e))),this.#d):e}#f(e){let t=new Map(this.#c.map(e=>[e.options.queryHash,e])),n=[];return e.forEach(e=>{let r=this.#e.defaultQueryOptions(e),i=t.get(r.queryHash);i?n.push({defaultedQueryOptions:r,observer:i}):n.push({defaultedQueryOptions:r,observer:new a.$(this.#e,r)})}),n}#p(e,t){let n=this.#c.indexOf(e);-1!==n&&(this.#s=function(e,t,n){let r=e.slice(0);return r[t]=n,r}(this.#s,n,t),this.#i())}#i(){if(this.hasListeners()){let e=this.#d,t=this.#y(this.#s,this.#h);e!==this.#g(t,this.#l?.combine)&&r.jG.batch(()=>{this.listeners.forEach(e=>{e(this.#s)})})}}}},94747:(e,t,n)=>{n.d(t,{n:()=>l});var r=n(96540),a=n(61388),i=n(26261),s=n(97665),o=n(54362);function l(e,t){let n=(0,s.jE)(t),[l]=r.useState(()=>new a._(n,e));r.useEffect(()=>{l.setOptions(e)},[l,e]);let c=r.useSyncExternalStore(r.useCallback(e=>l.subscribe(i.jG.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=r.useCallback((e,t)=>{l.mutate(e,t).catch(o.l)},[l]);if(c.error&&(0,o.G)(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}},40458:(e,t,n)=>{n.d(t,{E:()=>h});var r=n(96540),a=n(79915),i=n(26261),s=n(1651),o=n(97665),l=n(98378),c=n(96672),d=n(68590),u=n(60791),m=n(54362);function h({queries:e,...t},n){let h=(0,o.jE)(n),p=(0,l.w)(),f=(0,c.h)(),g=r.useMemo(()=>e.map(e=>{let t=h.defaultQueryOptions(e);return t._optimisticResults=p?"isRestoring":"optimistic",t}),[e,h,p]);g.forEach(e=>{(0,u.jv)(e),(0,d.LJ)(e,f)}),(0,d.wZ)(f);let[y]=r.useState(()=>new a.T(h,g,t)),[x,v,_]=y.getOptimisticResult(g,t.combine),b=!p&&!1!==t.subscribed;r.useSyncExternalStore(r.useCallback(e=>b?y.subscribe(i.jG.batchCalls(e)):m.l,[y,b]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),r.useEffect(()=>{y.setQueries(g,t)},[g,t,y]);let S=x.some((e,t)=>(0,u.EU)(g[t],e))?x.flatMap((e,t)=>{let n=g[t];if(n){let t=new s.$(h,n);if((0,u.EU)(n,e))return(0,u.iL)(n,t,f);(0,u.nE)(e,p)&&(0,u.iL)(n,t,f)}return[]}):[];if(S.length>0)throw Promise.all(S);let C=x.find((e,t)=>{let n=g[t];return n&&(0,d.$1)({result:e,errorResetBoundary:f,throwOnError:n.throwOnError,query:h.getQueryCache().get(n.queryHash),suspense:n.suspense})});if(C?.error)throw C.error;return v(_())}},65510:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(1651),a=n(15985),i=n(60791);function s(e,t){return(0,a.t)({...e,enabled:!0,suspense:!0,throwOnError:i.R3,placeholderData:void 0},r.$,t)}},83592:(e,t,n)=>{n.d(t,{s:()=>a});var r=n(2642);function a(e,t){let n=(0,r.a)(e),a=(0,r.a)(t);return n.getFullYear()===a.getFullYear()}},9802:(e,t,n)=>{n.d(t,{e:()=>a});var r=n(83592);function a(e){return(0,r.s)(e,Date.now())}},79639:(e,t,n)=>{n.d(t,{P:()=>i});var r=n(85551),a=n(40828);function i(e){return(0,r.r)(e,(0,a.e)(Date.now(),1))}},74022:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(23125),a=n(23149);let i=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,a.A)(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),(0,r.A)(e,t,{leading:i,maxWait:t,trailing:s})}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_cookie_index_js-node_modules_primer_live-region-element_dist_esm_index_j-1ca8f6","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_hotkey_dist_inde-70f9af","vendors-node_modules_lodash-es_isEqual_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-103a96","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_react-relay_hooks_js-node_modules_github_paste-markdown_dist_index_js-no-83178d","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-713cc1","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_diff_lib_index_mjs","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-ce77c7","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-d1dec4","vendors-node_modules_js-yaml_dist_js-yaml_mjs","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_components_DatePicker_tsx","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_list-view_src_ListItem_Lis-0a5d95","ui_packages_relay-environment_relay-environment_ts","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_item-picker_components_RepositoryPicker_tsx-ui_packages_safe-html_VerifiedHTML_tsx","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx-ui_packages_date-picker_components-96ce24","ui_packages_verified-fetch_verified-fetch_ts-ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_commenting_constants_values_ts-ui_packages_commenting_components_ActivityHeader_t-8a1940","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_app-uuid_app-uuid_ts-ui_packages_signed-commit-badge_index_ts","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx-ui_packages_copilot-chat_compone-8be2e4","ui_packages_markdown-viewer_NewMarkdownViewer_tsx","ui_packages_issue-viewer_components_IssueViewer_tsx-ui_packages_issue-viewer_contexts_IssueVi-8ab8ec","ui_packages_history_history_ts-ui_packages_soft-nav_state_ts-ui_packages_agent-sessions_compo-b49a81","ui_packages_code-view-shared_hooks_use-repos-analytics_ts-ui_packages_code-view-shared_hooks_-63737d","ui_packages_document-metadata_document-metadata_ts-ui_packages_fetch-headers_fetch-headers_ts-728a25"],()=>t(8032)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-5771fe443512.js.map